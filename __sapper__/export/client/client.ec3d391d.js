function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function r(){return Object.create(null)}function i(t){t.forEach(n)}function o(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}function u(t,n,r,i){return t[1]&&i?e(r.ctx.slice(),t[1](i(n))):r.ctx}function c(t,e,n,r,i,o,a){const s=function(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}(e,r,i,o);if(s){const i=u(e,n,r,a);t.p(i,s)}}function h(t){return null==t?"":t}function l(t,e,n=e){return t.set(n),e}function f(t,e){t.appendChild(e)}function p(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function v(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function y(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function m(t){return document.createTextNode(t)}function b(){return m(" ")}function _(){return m("")}function w(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function E(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function I(t){return Array.from(t.childNodes)}function T(t,e,n,r){for(let r=0;r<t.length;r+=1){const i=t[r];if(i.nodeName===e){let e=0;const o=[];for(;e<i.attributes.length;){const t=i.attributes[e++];n[t.name]||o.push(t.name)}for(let t=0;t<o.length;t++)i.removeAttribute(o[t]);return t.splice(r,1)[0]}}return r?y(e):g(e)}function S(t,e){for(let n=0;n<t.length;n+=1){const r=t[n];if(3===r.nodeType)return r.data=""+e,t.splice(n,1)[0]}return m(e)}function C(t){return S(t," ")}function N(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function k(t,e){t.value=null==e?"":e}function A(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function P(t,e=document.body){return Array.from(e.querySelectorAll(t))}let O;function R(t){O=t}function D(){if(!O)throw new Error("Function called outside component initialization");return O}function x(t){D().$$.before_update.push(t)}function L(t){D().$$.on_mount.push(t)}function M(t){D().$$.after_update.push(t)}function F(t){D().$$.on_destroy.push(t)}function U(){const t=D();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const i=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);r.slice().forEach((e=>{e.call(t,i)}))}}}const j=[],V=[],q=[],B=[],W=Promise.resolve();let H=!1;function K(t){q.push(t)}let G=!1;const z=new Set;function $(){if(!G){G=!0;do{for(let t=0;t<j.length;t+=1){const e=j[t];R(e),Q(e.$$)}for(R(null),j.length=0;V.length;)V.pop()();for(let t=0;t<q.length;t+=1){const e=q[t];z.has(e)||(z.add(e),e())}q.length=0}while(j.length);for(;B.length;)B.pop()();H=!1,G=!1,z.clear()}}function Q(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(K)}}const Y=new Set;let X;function J(){X={r:0,c:[],p:X}}function Z(){X.r||i(X.c),X=X.p}function tt(t,e){t&&t.i&&(Y.delete(t),t.i(e))}function et(t,e,n,r){if(t&&t.o){if(Y.has(t))return;Y.add(t),X.c.push((()=>{Y.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function nt(t,e){const n={},r={},i={$$scope:1};let o=t.length;for(;o--;){const a=t[o],s=e[o];if(s){for(const t in a)t in s||(r[t]=1);for(const t in s)i[t]||(n[t]=s[t],i[t]=1);t[o]=s}else for(const t in a)i[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}function rt(t){return"object"==typeof t&&null!==t?t:{}}function it(t){t&&t.c()}function ot(t,e){t&&t.l(e)}function at(t,e,r){const{fragment:a,on_mount:s,on_destroy:u,after_update:c}=t.$$;a&&a.m(e,r),K((()=>{const e=s.map(n).filter(o);u?u.push(...e):i(e),t.$$.on_mount=[]})),c.forEach(K)}function st(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ut(t,e){-1===t.$$.dirty[0]&&(j.push(t),H||(H=!0,W.then($)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ct(e,n,o,a,s,u,c=[-1]){const h=O;R(e);const l=n.props||{},f=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:s,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:r(),dirty:c,skip_bound:!1};let p=!1;if(f.ctx=o?o(e,l,((t,n,...r)=>{const i=r.length?r[0]:n;return f.ctx&&s(f.ctx[t],f.ctx[t]=i)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](i),p&&ut(e,t)),n})):[],f.update(),p=!0,i(f.before_update),f.fragment=!!a&&a(f.ctx),n.target){if(n.hydrate){const t=I(n.target);f.fragment&&f.fragment.l(t),t.forEach(d)}else f.fragment&&f.fragment.c();n.intro&&tt(e.$$.fragment),at(e,n.target,n.anchor),$()}R(h)}class ht{$destroy(){st(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const lt=[];function ft(e,n=t){let r;const i=[];function o(t){if(a(e,t)&&(e=t,r)){const t=!lt.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),lt.push(n,e)}if(t){for(let t=0;t<lt.length;t+=2)lt[t][0](lt[t+1]);lt.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(a,s=t){const u=[a,s];return i.push(u),1===i.length&&(r=n(o)||t),a(e),()=>{const t=i.indexOf(u);-1!==t&&i.splice(t,1),0===i.length&&(r(),r=null)}}}}const pt={},dt=ft(null),vt=ft(null),gt=ft(null),yt=ft(null),mt=ft(null);var bt=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}},_t=Object.prototype.toString;function wt(t){return"[object Array]"===_t.call(t)}function Et(t){return void 0===t}function It(t){return null!==t&&"object"==typeof t}function Tt(t){if("[object Object]"!==_t.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function St(t){return"[object Function]"===_t.call(t)}function Ct(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),wt(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}var Nt={isArray:wt,isArrayBuffer:function(t){return"[object ArrayBuffer]"===_t.call(t)},isBuffer:function(t){return null!==t&&!Et(t)&&null!==t.constructor&&!Et(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:It,isPlainObject:Tt,isUndefined:Et,isDate:function(t){return"[object Date]"===_t.call(t)},isFile:function(t){return"[object File]"===_t.call(t)},isBlob:function(t){return"[object Blob]"===_t.call(t)},isFunction:St,isStream:function(t){return It(t)&&St(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:Ct,merge:function t(){var e={};function n(n,r){Tt(e[r])&&Tt(n)?e[r]=t(e[r],n):Tt(n)?e[r]=t({},n):wt(n)?e[r]=n.slice():e[r]=n}for(var r=0,i=arguments.length;r<i;r++)Ct(arguments[r],n);return e},extend:function(t,e,n){return Ct(e,(function(e,r){t[r]=n&&"function"==typeof e?bt(e,n):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}};function kt(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var At=function(t,e,n){if(!e)return t;var r;if(n)r=n(e);else if(Nt.isURLSearchParams(e))r=e.toString();else{var i=[];Nt.forEach(e,(function(t,e){null!=t&&(Nt.isArray(t)?e+="[]":t=[t],Nt.forEach(t,(function(t){Nt.isDate(t)?t=t.toISOString():Nt.isObject(t)&&(t=JSON.stringify(t)),i.push(kt(e)+"="+kt(t))})))})),r=i.join("&")}if(r){var o=t.indexOf("#");-1!==o&&(t=t.slice(0,o)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t};function Pt(){this.handlers=[]}Pt.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},Pt.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},Pt.prototype.forEach=function(t){Nt.forEach(this.handlers,(function(e){null!==e&&t(e)}))};var Ot=Pt,Rt=function(t,e,n){return Nt.forEach(n,(function(n){t=n(t,e)})),t},Dt=function(t){return!(!t||!t.__CANCEL__)},xt=function(t,e){Nt.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))},Lt=function(t,e,n,r,i){return function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}(new Error(t),e,n,r,i)},Mt=Nt.isStandardBrowserEnv()?{write:function(t,e,n,r,i,o){var a=[];a.push(t+"="+encodeURIComponent(e)),Nt.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Nt.isString(r)&&a.push("path="+r),Nt.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},Ft=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Ut=Nt.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(e){var n=Nt.isString(e)?r(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0},jt=function(t){return new Promise((function(e,n){var r=t.data,i=t.headers;Nt.isFormData(r)&&delete i["Content-Type"];var o=new XMLHttpRequest;if(t.auth){var a=t.auth.username||"",s=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.Authorization="Basic "+btoa(a+":"+s)}var u,c,h=(u=t.baseURL,c=t.url,u&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(c)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(u,c):c);if(o.open(t.method.toUpperCase(),At(h,t.params,t.paramsSerializer),!0),o.timeout=t.timeout,o.onreadystatechange=function(){if(o&&4===o.readyState&&(0!==o.status||o.responseURL&&0===o.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in o?function(t){var e,n,r,i={};return t?(Nt.forEach(t.split("\n"),(function(t){if(r=t.indexOf(":"),e=Nt.trim(t.substr(0,r)).toLowerCase(),n=Nt.trim(t.substr(r+1)),e){if(i[e]&&Ft.indexOf(e)>=0)return;i[e]="set-cookie"===e?(i[e]?i[e]:[]).concat([n]):i[e]?i[e]+", "+n:n}})),i):i}(o.getAllResponseHeaders()):null,i={data:t.responseType&&"text"!==t.responseType?o.response:o.responseText,status:o.status,statusText:o.statusText,headers:r,config:t,request:o};!function(t,e,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(Lt("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}(e,n,i),o=null}},o.onabort=function(){o&&(n(Lt("Request aborted",t,"ECONNABORTED",o)),o=null)},o.onerror=function(){n(Lt("Network Error",t,null,o)),o=null},o.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(Lt(e,t,"ECONNABORTED",o)),o=null},Nt.isStandardBrowserEnv()){var l=(t.withCredentials||Ut(h))&&t.xsrfCookieName?Mt.read(t.xsrfCookieName):void 0;l&&(i[t.xsrfHeaderName]=l)}if("setRequestHeader"in o&&Nt.forEach(i,(function(t,e){void 0===r&&"content-type"===e.toLowerCase()?delete i[e]:o.setRequestHeader(e,t)})),Nt.isUndefined(t.withCredentials)||(o.withCredentials=!!t.withCredentials),t.responseType)try{o.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&o.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&o.upload&&o.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){o&&(o.abort(),n(t),o=null)})),r||(r=null),o.send(r)}))},Vt={"Content-Type":"application/x-www-form-urlencoded"};function qt(t,e){!Nt.isUndefined(t)&&Nt.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var Bt,Wt={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(Bt=jt),Bt),transformRequest:[function(t,e){return xt(e,"Accept"),xt(e,"Content-Type"),Nt.isFormData(t)||Nt.isArrayBuffer(t)||Nt.isBuffer(t)||Nt.isStream(t)||Nt.isFile(t)||Nt.isBlob(t)?t:Nt.isArrayBufferView(t)?t.buffer:Nt.isURLSearchParams(t)?(qt(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Nt.isObject(t)?(qt(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};Wt.headers={common:{Accept:"application/json, text/plain, */*"}},Nt.forEach(["delete","get","head"],(function(t){Wt.headers[t]={}})),Nt.forEach(["post","put","patch"],(function(t){Wt.headers[t]=Nt.merge(Vt)}));var Ht=Wt;function Kt(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var Gt=function(t){return Kt(t),t.headers=t.headers||{},t.data=Rt(t.data,t.headers,t.transformRequest),t.headers=Nt.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Nt.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||Ht.adapter)(t).then((function(e){return Kt(t),e.data=Rt(e.data,e.headers,t.transformResponse),e}),(function(e){return Dt(e)||(Kt(t),e&&e.response&&(e.response.data=Rt(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))},zt=function(t,e){e=e||{};var n={},r=["url","method","data"],i=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function s(t,e){return Nt.isPlainObject(t)&&Nt.isPlainObject(e)?Nt.merge(t,e):Nt.isPlainObject(e)?Nt.merge({},e):Nt.isArray(e)?e.slice():e}function u(r){Nt.isUndefined(e[r])?Nt.isUndefined(t[r])||(n[r]=s(void 0,t[r])):n[r]=s(t[r],e[r])}Nt.forEach(r,(function(t){Nt.isUndefined(e[t])||(n[t]=s(void 0,e[t]))})),Nt.forEach(i,u),Nt.forEach(o,(function(r){Nt.isUndefined(e[r])?Nt.isUndefined(t[r])||(n[r]=s(void 0,t[r])):n[r]=s(void 0,e[r])})),Nt.forEach(a,(function(r){r in e?n[r]=s(t[r],e[r]):r in t&&(n[r]=s(void 0,t[r]))}));var c=r.concat(i).concat(o).concat(a),h=Object.keys(t).concat(Object.keys(e)).filter((function(t){return-1===c.indexOf(t)}));return Nt.forEach(h,u),n};function $t(t){this.defaults=t,this.interceptors={request:new Ot,response:new Ot}}$t.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=zt(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[Gt,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)n=n.then(e.shift(),e.shift());return n},$t.prototype.getUri=function(t){return t=zt(this.defaults,t),At(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},Nt.forEach(["delete","get","head","options"],(function(t){$t.prototype[t]=function(e,n){return this.request(zt(n||{},{method:t,url:e,data:(n||{}).data}))}})),Nt.forEach(["post","put","patch"],(function(t){$t.prototype[t]=function(e,n,r){return this.request(zt(r||{},{method:t,url:e,data:n}))}}));var Qt=$t;function Yt(t){this.message=t}Yt.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Yt.prototype.__CANCEL__=!0;var Xt=Yt;function Jt(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new Xt(t),e(n.reason))}))}Jt.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Jt.source=function(){var t;return{token:new Jt((function(e){t=e})),cancel:t}};var Zt=Jt;function te(t){var e=new Qt(t),n=bt(Qt.prototype.request,e);return Nt.extend(n,Qt.prototype,e),Nt.extend(n,e),n}var ee=te(Ht);ee.Axios=Qt,ee.create=function(t){return te(zt(ee.defaults,t))},ee.Cancel=Xt,ee.CancelToken=Zt,ee.isCancel=Dt,ee.all=function(t){return Promise.all(t)},ee.spread=function(t){return function(e){return t.apply(null,e)}},ee.isAxiosError=function(t){return"object"==typeof t&&!0===t.isAxiosError};var ne=ee,re=ee;ne.default=re;var ie=ne;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var oe=function(){return(oe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ae(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var se=function(t,e){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ue=!1,ce="${JSCORE_VERSION}",he=function(t,e){if(!t)throw le(e)},le=function(t){return new Error("Firebase Database ("+ce+") INTERNAL ASSERT FAILED: "+t)},fe=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fe(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var h=a<<4&240|s>>2;if(r.push(h),64!==u){var l=s<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},de=function(t){try{return pe.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ve(t){return ge(void 0,t)}function ge(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=ge(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ye=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function be(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(me())}function _e(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function we(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function Ee(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ie(){return!0===ue}function Te(){return"indexedDB"in self&&null!=indexedDB}function Se(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}function Ce(){return!(!navigator||!navigator.cookieEnabled)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,ke.prototype.create),o}return function(t,e){function n(){this.constructor=t}se(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error),ke=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?Ae(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new Ne(i,s,r);return u},t}();function Ae(t,e){return t.replace(Pe,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var Pe=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(t){return JSON.parse(t)}function Re(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=Oe(de(o[0])||""),n=Oe(de(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function xe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Le(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function Me(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Fe(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ue=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),a=1518500249):(o=u^c^h,a=1859775393):r<60?(o=u&c|h&(u|c),a=2400959708):(o=u^c^h,a=3395469782);i=(s<<5|s>>>27)+o+l+a+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function je(t,e){var n=new Ve(t,e);return n.subscribe.bind(n)}var Ve=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=qe),void 0===r.error&&(r.error=qe),void 0===r.complete&&(r.complete=qe);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function qe(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function We(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}function He(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(We(t,e,r)+"must be a valid function.")}function Ke(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(We(t,e,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function ze(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $e=function(){return($e=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Qe(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function Ye(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Xe(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Je(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Xe(arguments[e]));return t}var Ze=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),tn=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new ye;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=$e({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService("[DEFAULT]")}catch(t){}try{for(var r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Xe(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService(u);s.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Qe(this,void 0,void 0,(function(){var t;return Ye(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Je(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var en,nn=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new tn(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function rn(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var on,an=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(on||(on={}));var sn,un={debug:on.DEBUG,verbose:on.VERBOSE,info:on.INFO,warn:on.WARN,error:on.ERROR,silent:on.SILENT},cn=on.INFO,hn=((en={})[on.DEBUG]="log",en[on.VERBOSE]="log",en[on.INFO]="info",en[on.WARN]="warn",en[on.ERROR]="error",en),ln=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=hn[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,rn(["["+i+"]  "+t.name+":"],n))}},fn=function(){function t(t){this.name=t,this._logLevel=cn,this._logHandler=ln,this._userLogHandler=null,an.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in on))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?un[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,rn([this,on.DEBUG],t)),this._logHandler.apply(this,rn([this,on.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,rn([this,on.VERBOSE],t)),this._logHandler.apply(this,rn([this,on.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,rn([this,on.INFO],t)),this._logHandler.apply(this,rn([this,on.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,rn([this,on.WARN],t)),this._logHandler.apply(this,rn([this,on.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,rn([this,on.ERROR],t)),this._logHandler.apply(this,rn([this,on.ERROR],t))},t}();function pn(t){an.forEach((function(e){e.setLogLevel(t)}))}var dn,vn=((sn={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",sn["bad-app-name"]="Illegal App name: '{$appName}",sn["duplicate-app"]="Firebase App named '{$appName}' already exists",sn["app-deleted"]="Firebase App named '{$appName}' already deleted",sn["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",sn["invalid-log-argument"]="First argument to `onLog` must be null or a function.",sn),gn=new ke("app","Firebase",vn),yn=((dn={})["@firebase/app"]="fire-core",dn["@firebase/analytics"]="fire-analytics",dn["@firebase/auth"]="fire-auth",dn["@firebase/database"]="fire-rtdb",dn["@firebase/functions"]="fire-fn",dn["@firebase/installations"]="fire-iid",dn["@firebase/messaging"]="fire-fcm",dn["@firebase/performance"]="fire-perf",dn["@firebase/remote-config"]="fire-rc",dn["@firebase/storage"]="fire-gcs",dn["@firebase/firestore"]="fire-fst",dn["fire-js"]="fire-js",dn["firebase-wrapper"]="fire-js-all",dn),mn=new fn("@firebase/app"),bn=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=ve(t),this.container=new nn(e.name),this._addComponent(new Ze("app",(function(){return o}),"PUBLIC"));try{for(var a=ae(this.firebase_.INTERNAL.components.values()),s=a.next();!s.done;s=a.next()){var u=s.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){mn.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw gn.create("app-deleted",{appName:this.name_})},t}();bn.prototype.name&&bn.prototype.options||bn.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _n(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw gn.create("bad-app-name",{appName:String(a)});if(xe(e,a))throw gn.create("duplicate-app",{appName:a});var s=new t(n,o,r);return e[a]=s,s},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=yn[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void mn.warn(u.join(" "))}o(new Ze(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:pn,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw gn.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=un[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:on[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=an;r<i.length;r++)n(i[r])}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!xe(e,t=t||"[DEFAULT]"))throw gn.create("no-app",{appName:t});return e[t]}function o(o){var a,s,u=o.name;if(n.has(u))return mn.debug("There were multiple attempts to register component "+u+"."),"PUBLIC"===o.type?r[u]:null;if(n.set(u,o),"PUBLIC"===o.type){var c=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[u])throw gn.create("invalid-app-argument",{appName:u});return t[u]()};void 0!==o.serviceProps&&ge(c,o.serviceProps),r[u]=c,t.prototype[u]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,u);return n.apply(this,o.multipleInstances?t:[])}}try{for(var h=ae(Object.keys(e)),l=h.next();!l.done;l=h.next()){var f=l.value;e[f]._addComponent(o)}}catch(t){a={error:t}}finally{try{l&&!l.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}return"PUBLIC"===o.type?r[u]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wn=function t(){var e=_n(bn);return e.INTERNAL=oe(oe({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){ge(e,t)},createSubscribe:je,ErrorFactory:ke,deepExtend:ge}),e}(),En=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){mn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var In=self.firebase.SDK_VERSION;In&&In.indexOf("LITE")>=0&&mn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Tn=wn.initializeApp;wn.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return _e()&&mn.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Tn.apply(void 0,t)};var Sn=wn;!function(t,e){t.INTERNAL.registerComponent(new Ze("platform-logger",(function(t){return new En(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.13",e),t.registerVersion("fire-js","")}(Sn),function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var a=n.setTimeout;r.prototype.c=function(t){a(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.v),reject:t(this.g)}},e.prototype.v=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.m(t):this.h(t)}},e.prototype.m=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new r;return e.prototype.s=function(t){var e=this.f();t.Pa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Pa(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Pa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),a=r.next();!a.done;a=r.next())o(a.value).Pa(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){function i(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,o(r.value).Pa(i(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var o=o||{},a=this||self,s=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&s.test(t)?t:""}function h(){}function l(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==l(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),g=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function m(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:m).apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var w=Date.now;function E(t,e){function n(){}n.prototype=e.prototype,t.$a=e.prototype,t.prototype=new n,t.prototype.constructor=t}function I(t){return t}function T(t,e,n){this.code=N+t,this.message=e||k[t]||"",this.a=n||null}function S(t){var e=t&&t.code;return e?new T(e.substring(N.length),t.message,t.serverResponse):null}E(T,Error),T.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},T.prototype.toJSON=function(){return this.w()};var C,N="auth/",k={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},A={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function P(t){for(var e in A)if(A[e].id===t)return{firebaseEndpoint:(t=A[e]).Sa,secureTokenEndpoint:t.Ya,identityPlatformEndpoint:t.Va};return null}function O(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function R(t){if(Error.captureStackTrace)Error.captureStackTrace(this,R);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function D(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");R.call(this,n+t[r])}function x(t,e){throw new D("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function L(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function M(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function F(){this.b=this.a=null}C=P("__EID__")?"__EID__":void 0,E(R,Error),R.prototype.name="CustomError",E(D,R),D.prototype.name="AssertionError",L.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var U=new L((function(){return new V}),(function(t){t.reset()}));function j(){var t=me,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function V(){this.next=this.b=this.a=null}F.prototype.add=function(t,e){var n=U.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},V.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},V.prototype.reset=function(){this.next=this.b=this.a=null};var q=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},B=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var W=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},H=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},K=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function G(t,e){return 0<=q(t,e)}function z(t,e){var n;return(n=0<=(e=q(t,e)))&&Array.prototype.splice.call(t,e,1),n}function $(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function Q(t){return Array.prototype.concat.apply([],arguments)}function Y(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var X,J=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},Z=/&/g,tt=/</g,et=/>/g,nt=/"/g,rt=/'/g,it=/\x00/g,ot=/[\x00&<>"']/;function at(t,e){return-1!=t.indexOf(e)}function st(t,e){return t<e?-1:t>e?1:0}t:{var ut=a.navigator;if(ut){var ct=ut.userAgent;if(ct){X=ct;break t}}X=""}function ht(t){return at(X,t)}function lt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ft(t){for(var e in t)return!1;return!0}function pt(t){var e,n={};for(e in t)n[e]=t[e];return n}var dt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<dt.length;o++)n=dt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function gt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(d(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;x("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function yt(t,e){this.a=t===wt&&e||"",this.b=_t}function mt(t){return t instanceof yt&&t.constructor===yt&&t.b===_t?t.a:(x("expected object of type Const, got '"+t+"'"),"type_error:Const")}yt.prototype.sa=!0,yt.prototype.ra=function(){return this.a},yt.prototype.toString=function(){return"Const{"+this.a+"}"};var bt,_t={},wt={};function Et(){if(void 0===bt){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:I,createScript:I,createScriptURL:I})}catch(t){a.console&&a.console.error(t.message)}bt=t}else bt=t}return bt}function It(t,e){this.a=e===kt?t:""}function Tt(t){return t instanceof It&&t.constructor===It?t.a:(x("expected object of type TrustedResourceUrl, got '"+t+"' of type "+l(t)),"type_error:TrustedResourceUrl")}function St(t,e){var n=mt(t);if(!Nt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=Et();return new It(t=e?e.createScriptURL(t):t,kt)}(t=n.replace(Ct,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof yt?mt(t):encodeURIComponent(String(t))})))}It.prototype.sa=!0,It.prototype.ra=function(){return this.a.toString()},It.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ct=/%{(\w+)}/g,Nt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,kt={};function At(t,e){this.a=e===Mt?t:""}function Pt(t){return t instanceof At&&t.constructor===At?t.a:(x("expected object of type SafeUrl, got '"+t+"' of type "+l(t)),"type_error:SafeUrl")}At.prototype.sa=!0,At.prototype.ra=function(){return this.a.toString()},At.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ot=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Rt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Dt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function xt(t){if(t instanceof At)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Dt.test(t))t=new At(t,Mt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Rt);t=e&&Ot.test(e[1])?new At(t,Mt):null}return t}function Lt(t){return t instanceof At?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Dt.test(t)||(t="about:invalid#zClosurez"),new At(t,Mt))}var Mt={},Ft=new At("about:invalid#zClosurez",Mt);function Ut(t,e,n){this.a=n===jt?t:""}Ut.prototype.sa=!0,Ut.prototype.ra=function(){return this.a.toString()},Ut.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var jt={};function Vt(t,e,n,r){return t=t instanceof At?t:Lt(t),e=e||a,n=n instanceof yt?mt(n):n||"",e.open(Pt(t),n,r,void 0)}function qt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Bt(t){return ot.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(Z,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(tt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(et,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(nt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(rt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(it,"&#0;"))),t}function Wt(t){return Wt[" "](t),t}Wt[" "]=h;var Ht,Kt,Gt=ht("Opera"),zt=ht("Trident")||ht("MSIE"),$t=ht("Edge"),Qt=$t||zt,Yt=ht("Gecko")&&!(at(X.toLowerCase(),"webkit")&&!ht("Edge"))&&!(ht("Trident")||ht("MSIE"))&&!ht("Edge"),Xt=at(X.toLowerCase(),"webkit")&&!ht("Edge");function Jt(){var t=a.document;return t?t.documentMode:void 0}t:{var Zt="",te=(Kt=X,Yt?/rv:([^\);]+)(\)|;)/.exec(Kt):$t?/Edge\/([\d\.]+)/.exec(Kt):zt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Kt):Xt?/WebKit\/(\S+)/.exec(Kt):Gt?/(?:Version)[ \/]?(\S+)/.exec(Kt):void 0);if(te&&(Zt=te?te[1]:""),zt){var ee=Jt();if(null!=ee&&ee>parseFloat(Zt)){Ht=String(ee);break t}}Ht=Zt}var ne,re={};function ie(t){return function(t,e){var n=re;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=J(String(Ht)).split("."),r=J(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=st(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||st(0==a[2].length,0==s[2].length)||st(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(a.document&&zt){var oe=Jt();ne=oe||(parseInt(Ht,10)||void 0)}else ne=void 0;var ae=ne;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Kt){}var se=!zt||9<=Number(ae);function ue(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ce(t,e){lt(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:fe.hasOwnProperty(n)?t.setAttribute(fe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var he,le,fe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function pe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||d(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(d(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){a="function"==typeof o.item;break t}}a=!1}B(a?Y(o):o,r)}}}function de(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ve(t){a.setTimeout((function(){throw t}),0)}function ge(t,e){le||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);le=function(){t.then(be)}}else le=function(){var t=be;!p(a.setImmediate)||a.Window&&a.Window.prototype&&!ht("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(he||(he=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ht("Presto")&&(t=function(){var t=de(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ht("Trident")&&!ht("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Fb;n.Fb=null,t()}},function(t){r.next={Fb:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),he(t)):a.setImmediate(t)}}(),ye||(le(),ye=!0),me.add(t,e)}var ye=!1,me=new F;function be(){for(var t;t=j();){try{t.a.call(t.b)}catch(t){ve(t)}M(U,t)}ye=!1}function _e(t,e){if(this.a=we,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,(function(t){xe(n,Ee,t)}),(function(t){if(!(t instanceof qe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}xe(n,Ie,t)}))}catch(t){xe(this,Ie,t)}}var we=0,Ee=2,Ie=3;function Te(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Te.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Se=new L((function(){return new Te}),(function(t){t.reset()}));function Ce(t,e,n){var r=Se.get();return r.g=t,r.b=e,r.f=n,r}function Ne(t){if(t instanceof _e)return t;var e=new _e(h);return xe(e,Ee,t),e}function ke(t){return new _e((function(e,n){n(t)}))}function Ae(t,e,n){Le(t,e,n,null)||ge(_(e,t))}function Pe(t){return new _e((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Ob:!0,value:o}:{Ob:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ae(t[o],_(i,o,!0),_(i,o,!1));else e(r)}))}function Oe(t,e){if(t.a==we)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==we&&1==r?Oe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Fe(n),Ue(n,i,Ie,e)))}t.c=null}else xe(t,Ie,e)}function Re(t,e){t.b||t.a!=Ee&&t.a!=Ie||Me(t),t.f?t.f.next=e:t.b=e,t.f=e}function De(t,e,n,r){var i=Ce(null,null,null);return i.a=new _e((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof qe?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Re(t,i),i.a}function xe(t,e,n){t.a==we&&(t===n&&(e=Ie,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Le(n,t.Zc,t.$c,t)||(t.i=n,t.a=e,t.c=null,Me(t),e!=Ie||n instanceof qe||function(t,e){t.g=!0,ge((function(){t.g&&Ve.call(null,e)}))}(t,n)))}function Le(t,e,n,r){if(t instanceof _e)return Re(t,Ce(e||h,n||null,r)),!0;if(O(t))return t.then(e,n,r),!0;if(d(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}function a(t){s||(s=!0,n.call(i,t))}var s=!1;try{e.call(t,a,o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Me(t){t.h||(t.h=!0,ge(t.fc,t))}function Fe(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ue(t,e,n,r){if(n==Ie&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,je(e,n,r);else try{e.c?e.g.call(e.f):je(e,n,r)}catch(t){Ve.call(null,t)}M(Se,e)}function je(t,e,n){e==Ee?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}_e.prototype.then=function(t,e,n){return De(this,p(t)?t:null,p(e)?e:null,n)},_e.prototype.$goog_Thenable=!0,(t=_e.prototype).na=function(t,e){return(t=Ce(t,t,e)).c=!0,Re(this,t),this},t.o=function(t,e){return De(this,null,t,e)},t.cancel=function(t){if(this.a==we){var e=new qe(t);ge((function(){Oe(this,e)}),this)}},t.Zc=function(t){this.a=we,xe(this,Ee,t)},t.$c=function(t){this.a=we,xe(this,Ie,t)},t.fc=function(){for(var t;t=Fe(this);)Ue(this,t,this.a,this.i);this.h=!1};var Ve=ve;function qe(t){R.call(this,t)}function Be(){this.xa=this.xa,this.oa=this.oa}E(qe,R),qe.prototype.name="cancel";function We(t){if(!t.xa&&(t.xa=!0,t.Da(),0))(function(t){Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++g)})(t)}Be.prototype.xa=!1,Be.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var He=Object.freeze||function(t){return t},Ke=!zt||9<=Number(ae),Ge=zt&&!ie("9"),ze=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",h,e),a.removeEventListener("test",h,e)}catch(t){}return t}();function $e(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Qe(t,e){if($e.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Yt){t:{try{Wt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ye[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}$e.prototype.preventDefault=function(){this.defaultPrevented=!0},E(Qe,$e);var Ye=He({2:"touch",3:"pen",4:"mouse"});Qe.prototype.preventDefault=function(){Qe.$a.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ge)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Qe.prototype.g=function(){return this.a};var Xe="closure_listenable_"+(1e6*Math.random()|0),Je=0;function Ze(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ua=i,this.key=++Je,this.va=this.Oa=!1}function tn(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Ua=null}function en(t){this.src=t,this.a={},this.b=0}function nn(t,e){var n=e.type;n in t.a&&z(t.a[n],e)&&(tn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function rn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Ua==r)return i}return-1}en.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=rn(t,e,r,i);return-1<a?(e=t[a],n||(e.Oa=!1)):((e=new Ze(e,this.src,o,!!r,i)).Oa=n,t.push(e)),e};var on="closure_lm_"+(1e6*Math.random()|0),an={};function sn(t,e,n,r,i){if(r&&r.once)cn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)sn(t,e[o],n,r,i);else n=mn(n),t&&t[Xe]?_n(t,e,n,d(r)?!!r.capture:!!r,i):un(t,e,n,!1,r,i)}function un(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=d(i)?!!i.capture:!!i,s=gn(t);if(s||(t[on]=s=new en(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=vn,e=Ke?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ze||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(fn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function cn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)cn(t,e[o],n,r,i);else n=mn(n),t&&t[Xe]?wn(t,e,n,d(r)?!!r.capture:!!r,i):un(t,e,n,!0,r,i)}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=mn(n),t&&t[Xe]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=rn(o=t.a[e],n,r,i))&&(tn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=gn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=rn(e,n,r,i)),(n=-1<t?e[t]:null)&&ln(n))}function ln(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[Xe])nn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(fn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=gn(e))?(nn(n,t),0==n.b&&(n.src=null,e[on]=null)):tn(t)}}}function fn(t){return t in an?an[t]:an[t]="on"+t}function pn(t,e,n,r){var i=!0;if((t=gn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=dn(o,r),i=i&&!1!==o)}return i}function dn(t,e){var n=t.listener,r=t.Ua||t.src;return t.Oa&&ln(t),n.call(r,e)}function vn(t,e){if(t.va)return!0;if(!Ke){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Qe(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=pn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=pn(r[i],t,!1,e),n=n&&o}return n}return dn(t,new Qe(e,this))}function gn(t){return(t=t[on])instanceof en?t:null}var yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function mn(t){return p(t)?t:(t[yn]||(t[yn]=function(e){return t.handleEvent(e)}),t[yn])}function bn(){Be.call(this),this.v=new en(this),this.$b=this,this.fb=null}function _n(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function wn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function En(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.va&&a.capture==n){var s=a.listener,u=a.Ua||a.src;a.Oa&&nn(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function In(t,e,n){if(p(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Tn(t){var e=null;return new _e((function(n,r){-1==(e=In((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw a.clearTimeout(e),t}))}function Cn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Nn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.V||"function"!=typeof t.V){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function kn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof kn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function An(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Pn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Pn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Pn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}E(bn,Be),bn.prototype[Xe]=!0,bn.prototype.addEventListener=function(t,e,n,r){sn(this,t,e,n,r)},bn.prototype.removeEventListener=function(t,e,n,r){hn(this,t,e,n,r)},bn.prototype.dispatchEvent=function(t){var e,n=this.fb;if(n)for(e=[];n;n=n.fb)e.push(n);n=this.$b;var r=t.type||t;if("string"==typeof t)t=new $e(t,n);else if(t instanceof $e)t.target=t.target||n;else{var i=t;vt(t=new $e(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=En(a,r,!0,t)&&i}if(i=En(a=t.b=n,r,!0,t)&&i,i=En(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=En(a=t.b=e[o],r,!1,t)&&i;return i},bn.prototype.Da=function(){if(bn.$a.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)tn(n[r]);delete e.a[t],e.b--}}this.fb=null},(t=kn.prototype).V=function(){An(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return An(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Pn(this.b,t)?this.b[t]:e},t.set=function(t,e){Pn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var On=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rn(t,e){var n;this.a=this.l=this.f="",this.g=null,this.h=this.c="",this.i=!1,t instanceof Rn?(this.i=void 0!==e?e:t.i,Dn(this,t.f),this.l=t.l,this.a=t.a,xn(this,t.g),this.c=t.c,Ln(this,tr(t.b)),this.h=t.h):t&&(n=String(t).match(On))?(this.i=!!e,Dn(this,n[1]||"",!0),this.l=Vn(n[2]||""),this.a=Vn(n[3]||"",!0),xn(this,n[4]),this.c=Vn(n[5]||"",!0),Ln(this,n[6]||"",!0),this.h=Vn(n[7]||"")):(this.i=!!e,this.b=new $n(null,this.i))}function Dn(t,e,n){t.f=n?Vn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function xn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Ln(t,e,n){e instanceof $n?(t.b=e,function(t,e){e&&!t.f&&(Qn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Xn(this,e),Zn(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=qn(e,Gn)),t.b=new $n(e,t.i))}function Mn(t,e,n){t.b.set(e,n)}function Fn(t,e){return t.b.get(e)}function Un(t){return t instanceof Rn?new Rn(t):new Rn(t,void 0)}function jn(t,e,n,r){var i=new Rn(null,void 0);return t&&Dn(i,t),e&&(i.a=e),n&&xn(i,n),r&&(i.c=r),i}function Vn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Bn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Bn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Rn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(qn(e,Wn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(qn(e,Wn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.c)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(qn(n,"/"==n.charAt(0)?Kn:Hn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",qn(n,zn)),t.join("")},Rn.prototype.resolve=function(t){var e=new Rn(this),n=!!t.f;n?Dn(e,t.f):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.c;if(n)xn(e,t.g);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.a&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(at(i,"./")||at(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.b.toString(),n?Ln(e,tr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Wn=/[#\/\?@]/g,Hn=/[#\?:]/g,Kn=/[#\?]/g,Gn=/[#\?@]/g,zn=/#/g;function $n(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qn(t){t.a||(t.a=new kn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Yn(t){var e=Nn(t);if(void 0===e)throw Error("Keys are undefined");var n=new $n(null,void 0);t=Cn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Zn(n,i,o):n.add(i,o)}return n}function Xn(t,e){Qn(t),e=er(t,e),Pn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Pn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&An(t)))}function Jn(t,e){return Qn(t),e=er(t,e),Pn(t.a.b,e)}function Zn(t,e,n){Xn(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),Y(n)),t.b+=n.length)}function tr(t){var e=new $n;return e.c=t.c,t.a&&(e.a=new kn(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return ir(new rr,t,e),e.join("")}function rr(){}function ir(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ir(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),sr(r,n),n.push(":"),ir(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":sr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=$n.prototype).add=function(t,e){Qn(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Qn(this),this.a.forEach((function(n,r){B(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Qn(this);for(var t=this.a.V(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){Qn(this);var e=[];if("string"==typeof t)Jn(this,t)&&(e=Q(e,this.a.get(er(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=Q(e,t[n])}return e},t.set=function(t,e){return Qn(this),this.c=null,Jn(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var or={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ar=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function sr(t,e){e.push('"',t.replace(ar,(function(t){var e=or[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),or[t]=e),e})),'"')}function ur(){var t=kr();return zt&&!!ae&&11==ae||/Edge\/\d+/.test(t)}function cr(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function hr(t,e){e=e||a.window;var n="about:blank";t&&(n=Pt(xt(t)||Ft)),e.location.href=n}function lr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<lr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function fr(t){return!!((t=(t||kr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function pr(t){t=t||a.window;try{t.close()}catch(t){}}function dr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=kr().toLowerCase(),r&&(e.target=r,at(n,"crios/")&&(e.target="_blank")),Sr(kr())==Ir&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof At?n:xt(void 0!==n.href?n.href:String(n))||Ft,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((ht("iPhone")&&!ht("iPod")&&!ht("iPad")||ht("iPad")||ht("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(gt(a=de(document,"A"),"HTMLAnchorElement"),e=e instanceof At?e:Lt(e),a.href=Pt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Vt("",r,n,a),t=Pt(e),a&&(Qt&&at(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Bt(t)+'">',t=new Ut(t=(r=Et())?r.createHTML(t):t,null,jt),r=a.document)&&(r.write(function(t){return t instanceof Ut&&t.constructor===Ut?t.a:(x("expected object of type SafeHtml, got '"+t+"' of type "+l(t)),"type_error:SafeHtml")}(t)),r.close())):(a=Vt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var vr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gr=/^[^@]+@[^@]+$/;function yr(){var t=null;return new _e((function(e){"complete"==a.document.readyState?e():(t=function(){e()},cn(window,"load",t))})).o((function(e){throw hn(window,"load",t),e}))}function mr(t){return t=t||kr(),!("file:"!==Dr()&&"ionic:"!==Dr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function br(){var t=a.window;try{return!(!t||t==t.top)}catch(t){return!1}}function _r(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function wr(){return Sn.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Sn.INTERNAL.hasOwnProperty("node")?"Node":_r()?"Worker":"Browser"}function Er(){var t=wr();return"ReactNative"===t||"Node"===t}var Ir="Firefox",Tr="Chrome";function Sr(t){var e=t.toLowerCase();return at(e,"opera/")||at(e,"opr/")||at(e,"opios/")?"Opera":at(e,"iemobile")?"IEMobile":at(e,"msie")||at(e,"trident/")?"IE":at(e,"edge/")?"Edge":at(e,"firefox/")?Ir:at(e,"silk/")?"Silk":at(e,"blackberry")?"Blackberry":at(e,"webos")?"Webos":!at(e,"safari/")||at(e,"chrome/")||at(e,"crios/")||at(e,"android")?!at(e,"chrome/")&&!at(e,"crios/")||at(e,"edge/")?at(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Tr:"Safari"}var Cr={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};function Nr(t,e){e=e||[];var n,r=[],i={};for(n in Cr)i[Cr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=wr())?r=Sr(i=kr()):"Worker"===r&&(r=Sr(i=kr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function kr(){return a.navigator&&a.navigator.userAgent||""}function Ar(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Pr(){try{var t=a.localStorage,e=Ur();if(t)return t.setItem(e,"1"),t.removeItem(e),!ur()||!!a.indexedDB}catch(t){return _r()&&!!a.indexedDB}return!1}function Or(){return(Rr()||"chrome-extension:"===Dr()||mr())&&!Er()&&Pr()&&!_r()}function Rr(){return"http:"===Dr()||"https:"===Dr()}function Dr(){return a.location&&a.location.protocol||null}function xr(t){return!fr(t=t||kr())&&Sr(t)!=Ir}function Lr(t){return void 0===t?null:nr(t)}function Mr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Fr(t){if(null!==t)return JSON.parse(t)}function Ur(t){return t||Math.floor(1e9*Math.random()).toString()}function jr(t){return"Safari"!=Sr(t=t||kr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Vr(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function qr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=kr(),e=wr(),this.b=fr(t)||"ReactNative"===e}function Br(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Wr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Hr(){return!(!Ar("fireauth.oauthhelper",a)&&!Ar("fireauth.iframe",a))}qr.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Rr()&&"chrome-extension:"!==Dr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Kr,Gr={};function zr(t){Gr[t]||(Gr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var $r={};Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:2}),Kr=2==$r.abcd}catch(Kt){Kr=!1}function Qr(t,e,n){Kr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Yr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Qr(t,n,e[n])}function Xr(t){var e={};return Yr(e,t),e}function Jr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Qr(e,n,Jr(t[n]));return e}function Zr(t){var e=t&&(t[ii]?"phone":null);if(!(e&&t&&t[ri]))throw new T("internal-error","Internal assert: invalid MultiFactorInfo object");Qr(this,"uid",t[ri]),Qr(this,"displayName",t[ei]||null);var n=null;t[ni]&&(n=new Date(t[ni]).toUTCString()),Qr(this,"enrollmentTime",n),Qr(this,"factorId",e)}function ti(t){try{var e=new oi(t)}catch(t){e=null}return e}Zr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ei="displayName",ni="enrolledAt",ri="mfaEnrollmentId",ii="phoneInfo";function oi(t){Zr.call(this,t),Qr(this,"phoneNumber",t[ii])}function ai(t){var e={},n=t[hi],r=t[fi],i=t[pi];if(t=ti(t[li]),!i||i!=ui&&i!=ci&&!n||i==ci&&!r||i==si&&!t)throw Error("Invalid checkActionCode response!");i==ci?(e[vi]=n||null,e[yi]=n||null,e[di]=r):(e[vi]=r||null,e[yi]=r||null,e[di]=n||null),e[gi]=t||null,Qr(this,bi,i),Qr(this,mi,Jr(e))}E(oi,Zr),oi.prototype.w=function(){var t=oi.$a.w.call(this);return t.phoneNumber=this.phoneNumber,t};var si="REVERT_SECOND_FACTOR_ADDITION",ui="EMAIL_SIGNIN",ci="VERIFY_AND_CHANGE_EMAIL",hi="email",li="mfaInfo",fi="newEmail",pi="requestType",di="email",vi="fromEmail",gi="multiFactorInfo",yi="previousEmail",mi="data",bi="operation";function _i(t){var e=Fn(t=Un(t),wi)||null,n=Fn(t,Ei)||null,r=Fn(t,Si)||null;if(r=r&&Ni[r]||null,!e||!n||!r)throw new T("argument-error",wi+", "+Ei+"and "+Si+" are required in a valid action code URL.");Yr(this,{apiKey:e,operation:r,code:n,continueUrl:Fn(t,Ii)||null,languageCode:Fn(t,Ti)||null,tenantId:Fn(t,Ci)||null})}var wi="apiKey",Ei="oobCode",Ii="continueUrl",Ti="languageCode",Si="mode",Ci="tenantId",Ni={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:si,signIn:ui,verifyAndChangeEmail:ci,verifyEmail:"VERIFY_EMAIL"};function ki(t){try{return new _i(t)}catch(t){return null}}function Ai(t){var e=t[xi];if(void 0===e)throw new T("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new T("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Pi];if(n&&"object"==typeof n){e=n[Fi];var r=n[Li];if(n=n[Mi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new T("argument-error",Li+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new T("argument-error",Mi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new T("argument-error",Fi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new T("missing-android-pkg-name")}}else if(void 0!==n)throw new T("argument-error",Pi+" property must be a non null object when specified.");if(this.f=null,(e=t[Di])&&"object"==typeof e){if("string"==typeof(e=e[Ui])&&e.length)this.f=e;else if(void 0!==e)throw new T("argument-error",Ui+" property must be a non empty string when specified.")}else if(void 0!==e)throw new T("argument-error",Di+" property must be a non null object when specified.");if(void 0!==(e=t[Ri])&&"boolean"!=typeof e)throw new T("argument-error",Ri+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Oi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new T("argument-error",Oi+" property must be a non empty string when specified.");this.i=t||null}var Pi="android",Oi="dynamicLinkDomain",Ri="handleCodeInApp",Di="iOS",xi="url",Li="installApp",Mi="minimumVersion",Fi="packageName",Ui="bundleId";function ji(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Vi=null;function qi(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Vi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Vi){Vi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Vi[o]&&(Vi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e+=String.fromCharCode(t)})),e}function Bi(t){var e=Hi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Wi(t){try{return new Bi(t)}catch(t){return null}}function Hi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(qi(t))}catch(t){}return null}Bi.prototype.S=function(){return this.f},Bi.prototype.i=function(){return this.b},Bi.prototype.toString=function(){return this.g};var Ki="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Gi=["client_id","response_type","scope","redirect_uri","state"],zi={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:Gi},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:Gi},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:Gi},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:Ki},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}};function $i(t){for(var e in zi)if(zi[e].fa==t)return zi[e];return null}function Qi(t){var e={};e["facebook.com"]=to,e["google.com"]=no,e["github.com"]=eo,e["twitter.com"]=ro;var n=t&&t[Xi];try{if(n)return e[n]?new e[n](t):new Zi(t);if(void 0!==t[Yi])return new Ji(t)}catch(t){}return null}var Yi="idToken",Xi="providerId";function Ji(t){var e=t[Xi];if(!e&&t[Yi]){var n=Wi(t[Yi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Qr(this,"providerId",e),Qr(this,"isNewUser",n)}function Zi(t){Ji.call(this,t),Qr(this,"profile",Jr((t=Fr(t.rawUserInfo||"{}"))||{}))}function to(t){if(Zi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if(Zi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",this.profile&&this.profile.login||null)}function no(t){if(Zi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(Zi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",t.screenName||null)}function io(t){var e=Un(t),n=Fn(e,"link"),r=Fn(Un(n),"link");return e=Fn(e,"deep_link_id"),Fn(Un(e),"link")||e||r||n||t}function oo(t,e){if(!t&&!e)throw new T("internal-error","Internal assert: no raw session string available");if(t&&e)throw new T("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?ao:so}E(Zi,Ji),E(to,Zi),E(eo,Zi),E(no,Zi),E(ro,Zi);var ao="enroll",so="signin";function uo(){}function co(t,e){return t.then((function(t){if(t[Ja]){var n=Wi(t[Ja]);if(!n||e!=n.h)throw new T("user-mismatch");return t}throw new T("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==N+"user-not-found"?new T("user-mismatch"):t}))}function ho(t,e){if(!e)throw new T("internal-error","failed to construct a credential");this.a=e,Qr(this,"providerId",t),Qr(this,"signInMethod",t)}function lo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function fo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new ho(t.providerId,t.pendingToken)}catch(t){}return null}function po(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Qr(this,"idToken",e.idToken),e.accessToken&&Qr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Qr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new T("internal-error","failed to construct a credential");Qr(this,"accessToken",e.oauthToken),Qr(this,"secret",e.oauthTokenSecret)}Qr(this,"providerId",t),Qr(this,"signInMethod",n)}function vo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Yn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function go(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new po(t.providerId,e,t.signInMethod)}catch(t){}}return null}function yo(t,e){this.Pc=e||[],Yr(this,{providerId:t,isOAuthProvider:!0}),this.Hb={},this.ob=($i(t)||{}).Ja||null,this.nb=null}function mo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new T("argument-error",'SAML provider IDs must be prefixed with "saml."');yo.call(this,t,[])}function bo(t){yo.call(this,t,Gi),this.a=[]}function _o(){bo.call(this,"facebook.com")}function wo(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new _o).credential({accessToken:e})}function Eo(){bo.call(this,"github.com")}function Io(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new Eo).credential({accessToken:e})}function To(){bo.call(this,"google.com"),this.Ca("profile")}function So(t,e){var n=t;return d(t)&&(n=t.idToken,e=t.accessToken),(new To).credential({idToken:n,accessToken:e})}function Co(){yo.call(this,"twitter.com",Ki)}function No(t,e){var n=t;if(d(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new T("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new po("twitter.com",n,"twitter.com")}function ko(t,e,n){this.a=t,this.f=e,Qr(this,"providerId","password"),Qr(this,"signInMethod",n===Po.EMAIL_LINK_SIGN_IN_METHOD?Po.EMAIL_LINK_SIGN_IN_METHOD:Po.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ao(t){return t&&t.email&&t.password?new ko(t.email,t.password,t.signInMethod):null}function Po(){Yr(this,{providerId:"password",isOAuthProvider:!1})}function Oo(t,e){if(!(e=Ro(e)))throw new T("argument-error","Invalid email link!");return new ko(t,e.code,Po.EMAIL_LINK_SIGN_IN_METHOD)}function Ro(t){return(t=ki(t=io(t)))&&t.operation===ui?t:null}function Do(t){if(!(t.cb&&t.bb||t.La&&t.ea))throw new T("internal-error");this.a=t,Qr(this,"providerId","phone"),this.fa="phone",Qr(this,"signInMethod","phone")}function xo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return B(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Do(e)}return null}function Lo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.cb,code:t.a.bb}}function Mo(t){try{this.a=t||Sn.auth()}catch(t){throw new T("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Yr(this,{providerId:"phone",isOAuthProvider:!1})}function Fo(t,e){if(!t)throw new T("missing-verification-id");if(!e)throw new T("missing-verification-code");return new Do({cb:t,bb:e})}function Uo(t){if(t.temporaryProof&&t.phoneNumber)return new Do({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return So(o,n);case"facebook.com":return wo(n);case"github.com":return Io(n);case"twitter.com":return No(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new ho(e,a):new po(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new bo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function jo(t){if(!t.isOAuthProvider)throw new T("invalid-oauth-provider")}function Vo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new T("invalid-auth-event");if(this.g&&this.a)throw new T("invalid-auth-event");if(this.g&&!this.f)throw new T("invalid-auth-event")}function qo(t){return(t=t||{}).type?new Vo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&S(t.error),t.postBody,t.tenantId):null}function Bo(){this.b=null,this.a=[]}oo.prototype.Ha=function(){return this.a?Ne(this.a):Ne(this.b)},oo.prototype.w=function(){return this.type==ao?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},uo.prototype.ja=function(){},uo.prototype.b=function(){},uo.prototype.c=function(){},uo.prototype.w=function(){},ho.prototype.ja=function(t){return _s(t,lo(this))},ho.prototype.b=function(t,e){var n=lo(this);return n.idToken=e,ws(t,n)},ho.prototype.c=function(t,e){return co(Es(t,lo(this)),e)},ho.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},po.prototype.ja=function(t){return _s(t,vo(this))},po.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,ws(t,n)},po.prototype.c=function(t,e){return co(Es(t,vo(this)),e)},po.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},yo.prototype.Ka=function(t){return this.Hb=pt(t),this},E(mo,yo),E(bo,yo),bo.prototype.Ca=function(t){return G(this.a,t)||this.a.push(t),this},bo.prototype.Pb=function(){return Y(this.a)},bo.prototype.credential=function(t,e){var n;if(!(n=d(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new T("argument-error","credential failed: must provide the ID token and/or the access token.");return new po(this.providerId,n,this.providerId)},E(_o,bo),Qr(_o,"PROVIDER_ID","facebook.com"),Qr(_o,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),E(Eo,bo),Qr(Eo,"PROVIDER_ID","github.com"),Qr(Eo,"GITHUB_SIGN_IN_METHOD","github.com"),E(To,bo),Qr(To,"PROVIDER_ID","google.com"),Qr(To,"GOOGLE_SIGN_IN_METHOD","google.com"),E(Co,yo),Qr(Co,"PROVIDER_ID","twitter.com"),Qr(Co,"TWITTER_SIGN_IN_METHOD","twitter.com"),ko.prototype.ja=function(t){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Ps,{email:this.a,oobCode:this.f}):ru(t,Js,{email:this.a,password:this.f})},ko.prototype.b=function(t,e){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Os,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Hs,{idToken:e,email:this.a,password:this.f})},ko.prototype.c=function(t,e){return co(this.ja(t),e)},ko.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Yr(Po,{PROVIDER_ID:"password"}),Yr(Po,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Yr(Po,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Do.prototype.ja=function(t){return t.eb(Lo(this))},Do.prototype.b=function(t,e){var n=Lo(this);return n.idToken=e,ru(t,tu,n)},Do.prototype.c=function(t,e){var n=Lo(this);return n.operation="REAUTH",co(t=ru(t,eu,n),e)},Do.prototype.w=function(){var t={providerId:"phone"};return this.a.cb&&(t.verificationId=this.a.cb),this.a.bb&&(t.verificationCode=this.a.bb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Mo.prototype.eb=function(t,e){var n=this.a.a;return Ne(e.verify()).then((function(r){if("string"!=typeof r)throw new T("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=d(t)?t.session:null,o=d(t)?t.phoneNumber:t;return(i&&i.type==ao?i.Ha().then((function(t){return function(t,e){return ru(t,Gs,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==so?i.Ha().then((function(e){return function(t,e){return ru(t,zs,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,Bs,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new T("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Yr(Mo,{PROVIDER_ID:"phone"}),Yr(Mo,{PHONE_SIGN_IN_METHOD:"phone"}),Vo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Vo.prototype.S=function(){return this.h},Vo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Wo,Ho=null;function Ko(t){var e="unauthorized-domain",n=void 0,r=Un(t);t=r.a,"chrome-extension"==(r=r.f)?n=qt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=qt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",T.call(this,e,n)}function Go(t,e,n){T.call(this,t,n),(t=e||{}).Ib&&Qr(this,"email",t.Ib),t.ea&&Qr(this,"phoneNumber",t.ea),t.credential&&Qr(this,"credential",t.credential),t.Yb&&Qr(this,"tenantId",t.Yb)}function zo(t){if(t.code){var e=t.code||"";0==e.indexOf(N)&&(e=e.substring(N.length));var n={credential:Uo(t),Yb:t.tenantId};if(t.email)n.Ib=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new T(e,t.message||void 0);return new Go(e,n,t.message)}return null}function $o(){}function Qo(t){return t.c||(t.c=t.b())}function Yo(){}function Xo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Jo(){}function Zo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.pc,this),this.a.onerror=b(this.Rb,this),this.a.onprogress=b(this.qc,this),this.a.ontimeout=b(this.uc,this)}function ta(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ea(t,e,n){this.reset(t,e,n,void 0,void 0)}function na(t){this.f=t,this.b=this.c=this.a=null}function ra(t,e){this.name=t,this.value=e}E(Ko,T),E(Go,T),Go.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&vt(t,e),t},Go.prototype.toJSON=function(){return this.w()},$o.prototype.c=null,E(Yo,$o),Yo.prototype.a=function(){var t=Xo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Yo.prototype.b=function(){var t={};return Xo(this)&&(t[0]=!0,t[1]=!0),t},Wo=new Yo,E(Jo,$o),Jo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Zo;throw Error("Unsupported browser")},Jo.prototype.b=function(){return{}},(t=Zo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ta(this,4)},t.Rb=function(){this.status=500,this.response=this.responseText="",ta(this,4)},t.uc=function(){this.Rb()},t.qc=function(){this.status=200,ta(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ea.prototype.a=null,ea.prototype.reset=function(t,e,n,r,i){delete this.a},ra.prototype.toString=function(){return this.name};var ia=new ra("SEVERE",1e3),oa=new ra("WARNING",900),aa=new ra("CONFIG",700),sa=new ra("FINE",500);function ua(t){return t.c?t.c:t.a?ua(t.a):(x("Root logger has no level set."),null)}na.prototype.log=function(t,e,n){if(t.value>=ua(this).value)for(p(e)&&(e=e()),t=new ea(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ca={},ha=null;function la(t){var e;if(ha||(ha=new na(""),ca[""]=ha,ha.c=aa),!(e=ca[t])){e=new na(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=la(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ca[t]=e}return e}function fa(t,e){t&&t.log(sa,e,void 0)}function pa(t){this.f=t}function da(t){bn.call(this),this.u=t,this.h=void 0,this.readyState=va,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=la("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}E(pa,$o),pa.prototype.a=function(){return new da(this.f)},pa.prototype.b=function(t){return function(){return t}}({}),E(da,bn);var va=0;function ga(t){t.c.read().then(t.oc.bind(t)).catch(t.Ta.bind(t))}function ya(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ma(t)}function ma(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ba(t){bn.call(this),this.headers=new kn,this.O=t||null,this.c=!1,this.A=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.G=!1,this.g=0,this.s=null,this.m=_a,this.u=this.R=!1}(t=da.prototype).open=function(t,e){if(this.readyState!=va)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ma(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.tc.bind(this),this.Ta.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ya(this)),this.readyState=va},t.tc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ma(this)),this.a&&(this.readyState=3,ma(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ga(this)):t.text().then(this.sc.bind(this),this.Ta.bind(this)))))},t.oc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ya(this):ma(this),3==this.readyState&&ga(this)}},t.sc=function(t){this.a&&(this.response=this.responseText=t,ya(this))},t.rc=function(t){this.a&&(this.response=t,ya(this))},t.Ta=function(t){var e=this.i;e&&e.log(oa,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ya(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(oa,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(oa,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(da.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),E(ba,bn);var _a="";ba.prototype.b=la("goog.net.XhrIo");var wa=/^https?$/i,Ea=["POST","PUT"];function Ia(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.G=!1,t.c=!0,t.a=t.O?t.O.a():Wo.a(),t.A=t.O?Qo(t.O):Qo(Wo),t.a.onreadystatechange=b(t.Ub,t);try{fa(t.b,Ra(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return fa(t.b,Ra(t,"Error opening Xhr: "+e.message)),void Sa(t,e)}e=r||"";var o=new kn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)B(t,e,void 0);else for(var n=Nn(t),r=Cn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ta,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=a.FormData&&e instanceof a.FormData,!G(Ea,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{Aa(t),0<t.g&&(t.u=function(t){return zt&&ie(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),fa(t.b,Ra(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=b(t.Ma,t)):t.s=In(t.Ma,t.g,t)),fa(t.b,Ra(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){fa(t.b,Ra(t,"Send error: "+e.message)),Sa(t,e)}}function Ta(t){return"content-type"==t.toLowerCase()}function Sa(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ca(t),ka(t)}function Ca(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Na(t){if(t.c&&void 0!==o)if(t.A[1]&&4==Pa(t)&&2==Oa(t))fa(t.b,Ra(t,"Local request error detected and ignored"));else if(t.i&&4==Pa(t))In(t.Ub,0,t);else if(t.dispatchEvent("readystatechange"),4==Pa(t)){fa(t.b,Ra(t,"Request complete")),t.c=!1;try{var e,n=Oa(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.l).match(On)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!wa.test(s?s.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Pa(t)?t.a.statusText:""}catch(e){fa(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Oa(t)+"]",Ca(t)}}finally{ka(t)}}}function ka(t,e){if(t.a){Aa(t);var n=t.a,r=t.A[0]?h:null;t.a=null,t.A=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(ia,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Aa(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function Pa(t){return t.a?t.a.readyState:0}function Oa(t){try{return 2<Pa(t)?t.a.status:-1}catch(t){return-1}}function Ra(t,e){return e+" ["+t.P+" "+t.l+" "+Oa(t)+"]"}function Da(t){var e=Ha;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.i=!1,this.h=0,this.b=null,this.l=0}function xa(t,e,n){t.a=!0,t.c=n,t.f=!e,Ua(t)}function La(t){if(t.a){if(!t.m)throw new ja(t);t.m=!1}}function Ma(t,e,n,r){t.g.push([e,n,r]),t.a&&Ua(t)}function Fa(t){return K(t.g,(function(t){return p(t[1])}))}function Ua(t){if(t.h&&t.a&&Fa(t)){var e=t.h,n=Ba[e];n&&(a.clearTimeout(n.a),delete Ba[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(O(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Fa(t)||(n=!0)}}t.c=e,r&&(u=b(t.v,t,!0),r=b(t.v,t,!1),e instanceof Da?(Ma(e,u,r),e.A=!0):e.then(u,r)),n&&(e=new qa(e),Ba[e.a]=e,t.h=e.a)}function ja(){R.call(this)}function Va(){R.call(this)}function qa(t){this.a=a.setTimeout(b(this.c,this),0),this.b=t}(t=ba.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",fa(this.b,Ra(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(fa(this.b,Ra(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ka(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ka(this,!0)),ba.$a.Da.call(this)},t.Ub=function(){this.xa||(this.N||this.i||this.f?Na(this):this.Ic())},t.Ic=function(){Na(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case _a:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ia,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return fa(this.b,"Can not get response: "+t.message),null}},Da.prototype.cancel=function(t){if(this.a)this.c instanceof Da&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.m=!0,this.a||(t=new Va(this),La(this),xa(this,!1,t))}},Da.prototype.v=function(t,e){this.i=!1,xa(this,t,e)},Da.prototype.then=function(t,e,n){var r,i,o=new _e((function(t,e){r=t,i=e}));return Ma(this,r,(function(t){t instanceof Va?o.cancel():i(t)})),o.then(t,e,n)},Da.prototype.$goog_Thenable=!0,E(ja,R),ja.prototype.message="Deferred has already fired",ja.prototype.name="AlreadyCalledError",E(Va,R),Va.prototype.message="Deferred was canceled",Va.prototype.name="CanceledError",qa.prototype.c=function(){throw delete Ba[this.a],this.b};var Ba={};function Wa(t){var e,n=document,r=Tt(t).toString(),i=de(document,"SCRIPT"),o={Vb:i,Ma:void 0},s=new Da(o);return e=window.setTimeout((function(){Ka(i,!0);var t=new $a(za,"Timeout reached for loading script "+r);La(s),xa(s,!1,t)}),5e3),o.Ma=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ka(i,!1,e),La(s),xa(s,!0,null))},i.onerror=function(){Ka(i,!0,e);var t=new $a(Ga,"Error while loading script "+r);La(s),xa(s,!1,t)},vt(o={},{type:"text/javascript",charset:"UTF-8"}),ce(i,o),function(t,e){gt(t,"HTMLScriptElement"),t.src=Tt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=c(e.document):(null===u&&(u=c(a.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Ha(){if(this&&this.Vb){var t=this.Vb;t&&"SCRIPT"==t.tagName&&Ka(t,!0,this.Ma)}}function Ka(t,e,n){null!=n&&a.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ga=0,za=1;function $a(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),R.call(this,n),this.code=t}function Qa(t){this.f=t}function Ya(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.v=t.secureTokenTimeout||Za,this.g=pt(t.secureTokenHeaders||ts),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.m=t.firebaseTimeout||es,this.a=pt(t.firebaseHeaders||ns),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==wr(),!(n=a.XMLHttpRequest||n&&Sn.INTERNAL.node&&Sn.INTERNAL.node.XMLHttpRequest)&&!_r())throw new T("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,_r()?this.f=new pa(self):Er()?this.f=new Qa(n):this.f=new Jo,this.b=null}E($a,R),E(Qa,$o),Qa.prototype.a=function(){return new this.f},Qa.prototype.b=function(){return{}};var Xa,Ja="idToken",Za=new qr(3e4,6e4),ts={"Content-Type":"application/x-www-form-urlencoded"},es=new qr(3e4,6e4),ns={"Content-Type":"application/json"};function rs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function is(t,e){e&&(t.l=os("https://securetoken.googleapis.com/v1/token",e),t.h=os("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=os("https://identitytoolkit.googleapis.com/v2/",e))}function os(t,e){return t=Un(t),e=Un(e.url),t.c=t.a+t.c,Dn(t,e.f),t.a=e.a,xn(t,e.g),t.toString()}function as(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ss(t,e,n,r,i,o,s){(function(){var t=kr();return!((t=Sr(t)!=Tr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||zt&&ae&&!(9<ae))})()||_r()?t=b(t.u,t):(Xa||(Xa=new _e((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{a[cs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ma(t,null,e,void 0)}(Wa(St(us,{onload:cs})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=b(t.s,t)),t(e,n,r,i,o,s)}Ya.prototype.S=function(){return this.b},Ya.prototype.u=function(t,e,n,r,i,o){if(_r()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new T("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ba(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout((function(){s.dispatchEvent("timeout")}),o)}_n(s,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return fa(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),wn(s,"ready",(function(){u&&clearTimeout(u),We(this)})),wn(s,"timeout",(function(){u&&clearTimeout(u),We(this),e&&e(null)})),Ia(s,t,n,r,i)};var us=new yt(wt,"https://apis.google.com/js/client.js?onload=%{onload}"),cs="__fcb"+Math.floor(1e6*Math.random()).toString();function hs(t,e,n,r,i,o,a){var s=Un(e+n);Mn(s,"key",t.c),a&&Mn(s,"cb",w().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Mn(s,c,i[c]);return new _e((function(e,n){ss(t,s.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new T("network-request-failed"))}),r,u?void 0:nr(Mr(i)),t.a,t.m.get())}))}function ls(t){if("string"!=typeof(t=t.email)||!gr.test(t))throw new T("invalid-email")}function fs(t){"email"in t&&ls(t)}function ps(t){if(!t[Ja]){if(t.mfaPendingCredential)throw new T("multi-factor-auth-required",null,pt(t));throw new T("internal-error")}}function ds(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new T("internal-error")}else{if(!t.sessionInfo)throw new T("missing-verification-id");if(!t.code)throw new T("missing-verification-code")}}Ya.prototype.s=function(t,e,n,r,i){var o=this;Xa.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ya.prototype.yb=function(){return ru(this,Ks,{})},Ya.prototype.Ab=function(t,e){return ru(this,Ws,{idToken:t,email:e})},Ya.prototype.Bb=function(t,e){return ru(this,Hs,{idToken:t,password:e})};var vs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function gs(t){if(!t.phoneVerificationInfo)throw new T("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new T("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new T("missing-verification-code")}function ys(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new T("internal-error")}function ms(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Jn(t=new $n(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function bs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=zo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=zo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=zo(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;ps(t)}function _s(t,e){return e.returnIdpCredential=!0,ru(t,$s,e)}function ws(t,e){return e.returnIdpCredential=!0,ru(t,Ys,e)}function Es(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Qs,e)}function Is(t){if(!t.oobCode)throw new T("invalid-action-code")}(t=Ya.prototype).Cb=function(t,e){var n={idToken:t},r=[];return lt(vs,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Ws,n)},t.ub=function(t,e){return vt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,Us,t)},t.vb=function(t,e){return vt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,Ls,t)},t.tb=function(t,e){return vt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ms,t)},t.Db=function(t,e,n){return vt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Fs,t)},t.eb=function(t){return ru(this,Zs,t)},t.mb=function(t,e){return ru(this,qs,{oobCode:t,newPassword:e})},t.Qa=function(t){return ru(this,Ss,{oobCode:t})},t.ib=function(t){return ru(this,Ts,{oobCode:t})};var Ts={endpoint:"setAccountInfo",B:Is,Z:"email",C:!0},Ss={endpoint:"resetPassword",B:Is,F:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new T("internal-error")},C:!0},Cs={endpoint:"signupNewUser",B:function(t){if(ls(t),!t.password)throw new T("weak-password")},F:ps,U:!0,C:!0},Ns={endpoint:"createAuthUri",C:!0},ks={endpoint:"deleteAccount",M:["idToken"]},As={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(t){if(!Array.isArray(t.deleteProvider))throw new T("internal-error")}},Ps={endpoint:"emailLinkSignin",M:["email","oobCode"],B:ls,F:ps,U:!0,C:!0},Os={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:ls,F:ps,U:!0},Rs={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:gs,F:ps,C:!0,Na:!0},Ds={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:gs,F:ps,C:!0,Na:!0},xs={endpoint:"getAccountInfo"},Ls={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new T("internal-error");ls(t)},Z:"email",C:!0},Ms={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",C:!0},Fs={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",C:!0},Us={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new T("internal-error");ls(t)},Z:"email",C:!0},js={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},Vs={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(t){if(!t.recaptchaSiteKey)throw new T("internal-error")}},qs={endpoint:"resetPassword",B:Is,Z:"email",C:!0},Bs={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},Ws={endpoint:"setAccountInfo",M:["idToken"],B:fs,U:!0},Hs={endpoint:"setAccountInfo",M:["idToken"],B:function(t){if(fs(t),!t.password)throw new T("weak-password")},F:ps,U:!0},Ks={endpoint:"signupNewUser",F:ps,U:!0,C:!0},Gs={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(t){if(!t.phoneEnrollmentInfo)throw new T("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new T("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new T("missing-app-credential")},F:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new T("internal-error")},C:!0,Na:!0},zs={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new T("missing-app-credential")},F:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new T("internal-error")},C:!0,Na:!0},$s={endpoint:"verifyAssertion",B:ys,Xa:ms,F:bs,U:!0,C:!0},Qs={endpoint:"verifyAssertion",B:ys,Xa:ms,F:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new T("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);ps(t)},U:!0,C:!0},Ys={endpoint:"verifyAssertion",B:function(t){if(ys(t),!t.idToken)throw new T("internal-error")},Xa:ms,F:bs,U:!0},Xs={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new T("invalid-custom-token")},F:ps,U:!0,C:!0},Js={endpoint:"verifyPassword",B:function(t){if(ls(t),!t.password)throw new T("wrong-password")},F:ps,U:!0,C:!0},Zs={endpoint:"verifyPhoneNumber",B:ds,F:ps,C:!0},tu={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new T("internal-error");ds(t)},F:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",zo(t);ps(t)}},eu={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:ds,F:ps,C:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(t){if(!!t[Ja]^!!t.refreshToken)throw new T("internal-error")},C:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.M))return ke(new T("internal-error"));var r,i=!!e.Na,o=e.Tb||"POST";return Ne(n).then(e.B).then((function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),hs(t,i?t.i:t.h,e.endpoint,o,n,e.Gb,e.kb||!1)})).then((function(t){return r=t,e.Xa?e.Xa(n,r):r})).then(e.F).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new T("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new T(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",vt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new T(r[i],e);return!e&&t&&(e=Lr(t)),new T("internal-error",e)}function au(t){this.b=t,this.a=null,this.qb=function(t){return(hu||(hu=new _e((function(t,e){function n(){Vr(),Ar("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Vr(),e(Error("Network Error"))},timeout:uu.get()})}if(Ar("gapi.iframes.Iframe"))t();else if(Ar("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){Ar("gapi.load")?n():e(Error("Network Error"))},Ne(Wa(r=St(su,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw hu=null,t})))).then((function(){return new _e((function(e,n){Ar("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var su=new yt(wt,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new qr(3e4,6e4),cu=new qr(5e3,15e3),hu=null;function lu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=jn((t=Un(this.g.url)).f,t.a,t.g,"/emulator/auth/iframe"):t=jn("https",this.l,null,"/__/auth/iframe"),this.a=t,Mn(this.a,"apiKey",this.h),Mn(this.a,"appName",this.i),this.b=null,this.c=[]}function fu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.v=r,this.m=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function pu(t){try{return Sn.app(t).auth().Ga()}catch(t){return[]}}function du(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.A=null,this.h=[],this.v=this.a=null}function vu(t){var e=cr();return function(t){return ru(t,js,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Un(e),r=n.f;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Un(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:vr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Ko(cr())}))}function gu(t){return t.v||(t.v=yr().then((function(){if(!t.u){var e=t.c,n=t.i,r=pu(t.b),i=new lu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Y(r||[]),t.u=i.toString()}t.m=new au(t.u),function(t){if(!t.m)throw Error("IfcHandler must be initialized!");!function(t,e){t.qb.then((function(){t.a.register("authEvent",e,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.m,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=qo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ne(n)}return n.status="ERROR",Ne(n)}))}(t)}))),t.v}function yu(t){return t.l||(t.A=t.c?Nr(t.c,pu(t.b)):null,t.l=new Ya(t.g,P(t.i),t.A),t.f&&is(t.l,t.f)),t.l}function mu(t,e,n,r,i,o,a,s,u,c,h,l){return(t=new fu(t,e,n,r,i,l)).l=o,t.g=a,t.i=s,t.b=pt(u||null),t.f=c,t.xb(h).toString()}function bu(t){if(this.a=t||Sn.INTERNAL.reactNative&&Sn.INTERNAL.reactNative.AsyncStorage,!this.a)throw new T("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function _u(t){this.b=t,this.a={},this.f=b(this.c,this)}lu.prototype.toString=function(){return this.f?Mn(this.a,"v",this.f):Xn(this.a.b,"v"),this.b?Mn(this.a,"eid",this.b):Xn(this.a.b,"eid"),this.c.length?Mn(this.a,"fw",this.c.join(",")):Xn(this.a.b,"fw"),this.a.toString()},fu.prototype.xb=function(t){return this.h=t,this},fu.prototype.toString=function(){if(this.m){var t=Un(this.m.url);t=jn(t.f,t.a,t.g,"/emulator/auth/handler")}else t=jn("https",this.u,null,"/__/auth/handler");if(Mn(t,"apiKey",this.s),Mn(t,"appName",this.c),Mn(t,"authType",this.v),this.a.isOAuthProvider){var e=this.a;try{var n=Sn.app(this.c).auth().ka()}catch(t){n=null}for(var r in e.nb=n,Mn(t,"providerId",this.a.providerId),e=Mr((n=this.a).Hb))e[r]=e[r].toString();r=n.Pc,e=pt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.ob&&n.nb&&!e[n.ob]&&(e[n.ob]=n.nb),ft(e)||Mn(t,"customParameters",Lr(e))}if("function"==typeof this.a.Pb&&((n=this.a.Pb()).length&&Mn(t,"scopes",n.join(","))),this.l?Mn(t,"redirectUrl",this.l):Xn(t.b,"redirectUrl"),this.g?Mn(t,"eventId",this.g):Xn(t.b,"eventId"),this.i?Mn(t,"v",this.i):Xn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Fn(t,a)&&Mn(t,a,this.b[a]);return this.h?Mn(t,"tid",this.h):Xn(t.b,"tid"),this.f?Mn(t,"eid",this.f):Xn(t.b,"eid"),(a=pu(this.c)).length&&Mn(t,"fw",a.join(",")),t.toString()},(t=du.prototype).Nb=function(t,e,n){var r=new T("popup-closed-by-user"),i=new T("web-storage-unsupported"),o=this,a=!1;return this.la().then((function(){(function(t){var e={type:"webStorageSupport"};return gu(t).then((function(){return function(t,e){return t.qb.then((function(){return new _e((function(n){t.a.send(e.type,e,n,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.m,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&pr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new _e((function(e){return function n(){Tn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return Tn(n).then((function(){e(r)}))}))},t.Wb=function(){var t=kr();return!xr(t)&&!jr(t)},t.Sb=function(){return!1},t.Lb=function(t,e,n,r,i,o,a,s){if(!t)return ke(new T("popup-blocked"));if(a&&!xr())return this.la().o((function(e){pr(t),i(e)})),r(),Ne();this.a||(this.a=vu(yu(this)));var u=this;return this.a.then((function(){var e=u.la().o((function(e){throw pr(t),i(e),e}));return r(),e})).then((function(){(jo(n),a)||hr(mu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Mb=function(t,e,n,r){this.a||(this.a=vu(yu(this)));var i=this;return this.a.then((function(){jo(e),hr(mu(i.s,i.g,i.b,t,e,cr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.la=function(){var t=this;return gu(this).then((function(){return t.m.qb})).o((function(){throw t.a=null,new T("network-request-failed")}))},t.Zb=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ra=function(t){$(this.h,(function(e){return e==t}))},(t=bu.prototype).get=function(t){return Ne(this.a.getItem(t)).then((function(t){return t&&Fr(t)}))},t.set=function(t,e){return Ne(this.a.setItem(t,Lr(e)))},t.T=function(t){return Ne(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var wu,Eu=[];function Iu(t,e,n){ft(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Tu(t){this.a=t}function Su(t){this.c=t,this.b=!1,this.a=[]}function Cu(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return ke(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new _e((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return Nu(t,c),e})).o((function(e){throw Nu(t,c),e}))}function Nu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),$(t.a,(function(t){return t==e}))}}function ku(){if(!Ru())throw new T("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.v=a.indexedDB,this.type="indexedDB",this.g=this.m=this.f=this.l=null,this.s=!1,this.h=null;var t=this;_r()&&self?(this.m=function(){var t=_r()?self:null;if(B(Eu,(function(n){n.b==t&&(e=n)})),!e){var e=new _u(t);Eu.push(e)}return e}(),Iu(this.m,"keyChanged",(function(e,n){return Fu(t).then((function(e){return 0<e.length&&B(t.a,(function(t){t(e)})),{keyProcessed:G(e,n.key)}}))})),Iu(this.m,"ping",(function(){return Ne(["keyChanged"])}))):function(){var t=a.navigator;return t&&t.serviceWorker?Ne().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ne(null)}().then((function(e){(t.h=e)&&(t.g=new Su(new Tu(e)),Cu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&G(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Au(t){return new _e((function(e,n){var r=t.v.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new _e((function(e,n){var r=t.v.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Au(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Pu(t){return t.i||(t.i=Au(t)),t.i}function Ou(t,e){var n=0;return new _e((function r(i,o){Pu(t).then(e).then(i).o((function(e){if(!(3<++n))return Pu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Ru(){try{return!!a.indexedDB}catch(t){return!1}}function Du(t){return t.objectStore("firebaseLocalStorage")}function xu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Lu(t){return new _e((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Mu(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Cu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ne()}function Fu(t){return Pu(t).then((function(t){var e=Du(xu(t,!1));return e.getAll?Lu(e.getAll()):new _e((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=lr(t.c,n),t.c=n}return r}))}function Uu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function ju(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ne().then((function(){if(Ru()){var t=Ur(),r="__sak"+t;return wu||(wu=new ku),(n=wu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.T(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){B(e.a,(function(e){e(t)}))})),t}))}function Vu(){this.a={},this.type="inMemory"}function qu(){if(!function(){var t="Node"==wr();if(!(t=Bu()||t&&Sn.INTERNAL.node&&Sn.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==wr())throw new T("internal-error","The LocalStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Bu()||Sn.INTERNAL.node.localStorage,this.type="localStorage"}function Bu(){try{var t=a.localStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Wu(){this.type="nullStorage"}function Hu(){if(!function(){var t="Node"==wr();if(!(t=Ku()||t&&Sn.INTERNAL.node&&Sn.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==wr())throw new T("internal-error","The SessionStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Ku()||Sn.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Ku(){try{var t=a.sessionStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Gu(){var t={};t.Browser=Qu,t.Node=Yu,t.ReactNative=Xu,t.Worker=Ju,this.a=t[wr()]}_u.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];B(r,(function(e){i.push(Ne().then((function(){return e(t.origin,t.data.data)})))})),Pe(i).then((function(r){var i=[];B(r,(function(t){i.push({fulfilled:t.Ob,value:t.value,reason:t.reason?t.reason.message:void 0})})),B(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Tu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Su.prototype.close=function(){for(;0<this.a.length;)Nu(this,this.a[0]);this.b=!0},(t=ku.prototype).set=function(t,e){var n=this,r=!1;return Ou(this,(function(e){return Lu((e=Du(xu(e,!0))).get(t))})).then((function(i){return Ou(n,(function(o){if(o=Du(xu(o,!0)),i)return i.value=e,Lu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,Lu(o.add(a))}))})).then((function(){return n.c[t]=e,Mu(n,t)})).na((function(){r&&n.b--}))},t.get=function(t){return Ou(this,(function(e){return Lu(Du(xu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.T=function(t){var e=this,n=!1;return Ou(this,(function(r){return n=!0,e.b++,Lu(Du(xu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Mu(e,t)})).na((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Fu(t).then((function(e){0<e.length&&B(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Uu(t),e()}(this),this.a.push(t)},t.ia=function(t){$(this.a,(function(e){return e==t})),0==this.a.length&&Uu(this)},(t=ju.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.T=function(t){return this.b.then((function(e){return e.T(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){$(this.a,(function(e){return e==t}))},(t=Vu.prototype).get=function(t){return Ne(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ne()},t.T=function(t){return delete this.a[t],Ne()},t.ca=function(){},t.ia=function(){},(t=qu.prototype).get=function(t){var e=this;return Ne().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ne().then((function(){var r=Lr(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return Ne().then((function(){e.a.removeItem(t)}))},t.ca=function(t){a.window&&sn(a.window,"storage",t)},t.ia=function(t){a.window&&hn(a.window,"storage",t)},(t=Wu.prototype).get=function(){return Ne(null)},t.set=function(){return Ne()},t.T=function(){return Ne()},t.ca=function(){},t.ia=function(){},(t=Hu.prototype).get=function(t){var e=this;return Ne().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ne().then((function(){var r=Lr(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return Ne().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var zu,$u,Qu={D:qu,ab:Hu},Yu={D:qu,ab:Hu},Xu={D:bu,ab:Wu},Ju={D:qu,ab:Wu},Zu={qd:"local",NONE:"none",sd:"session"};function tc(){var t=!(jr(kr())||!br()),e=xr(),n=Pr();this.v=t,this.h=e,this.l=n,this.a={},zu||(zu=new Gu),t=zu;try{this.g=!ur()&&Hr()||!a.indexedDB?new t.a.D:new ju(_r()?new Vu:new t.a.D)}catch(t){this.g=new Vu,this.h=!0}try{this.i=new t.a.ab}catch(t){this.i=new Vu}this.m=new Vu,this.f=b(this.Xb,this),this.b={}}function ec(){return $u||($u=new tc),$u}function nc(t,e){switch(e){case"session":return t.i;case"none":return t.m;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.D&&(t.b[n]=null),nc(t,e.D).T(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function ac(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.D).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.D);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.D&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),ft(this.a)&&(nc(this,"local").ca(this.f),this.h||(ur()||!Hr())&&a.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Qe({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Xb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&($(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),ft(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Xb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.lb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.v)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.lb(e))},zt&&ae&&10==ae&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else B(t,b(this.lb,this))},t.lb=function(t){this.a[t]&&B(this.a[t],(function(t){t()}))};var sc,uc={name:"authEvent",D:"local"};function cc(){this.a=ec()}function hc(t,e){this.b=lc,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===sc&&(sc=a.Int32Array?new Int32Array(mc):mc),this.reset()}E(hc,(function(){this.b=-1}));for(var lc=64,fc=lc-1,pc=[],dc=0;dc<fc;dc++)pc[dc]=0;var vc=Q(128,pc);function gc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|sc[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function yc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(gc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(gc(t),i=0)}}t.c=i,t.g+=n}hc.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):Y(this.h)};var mc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bc(){hc.call(this,8,_c)}E(bc,hc);var _c=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function wc(t,e,n,r,i,o){this.m=t,this.i=e,this.l=n,this.v=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.A=new cc,this.g=new ac(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ec(t){return new T("invalid-cordova-configuration",t)}function Ic(t){var e=new bc;yc(e,t),t=[];var n=8*e.g;56>e.c?yc(e,vc,56-e.c):yc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(gc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return H(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Tc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Sc(t){return t.f||(t.f=t.la().then((function(){return new _e((function(e){t.Ea((function n(r){return e(r),t.Ra(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Cc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=io(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Fr(Fn(o=Un(i),"firebaseError")||null))?S(o):null)?new Vo(r.c,r.b,null,null,o,null,r.S()):new Vo(r.c,r.b,i,r.f,null,null,r.S())),i=o||n}Tc(t,i)}))}var n=new Vo("unknown",null,null,null,new T("no-auth-event")),r=!1,i=Tn(500).then((function(){return Cc(t).then((function(){r||Tc(t,n)}))})),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Ar("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Ho||(Ho=new Bo),function(t){var e=Ho;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Ar("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Cc(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return qo(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function Nc(t){this.a=t,this.b=ec()}(t=wc.prototype).la=function(){return this.Ia?this.Ia:this.Ia=(mr(void 0)?yr().then((function(){return new _e((function(t,e){var n=a.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):ke(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Ar("universalLinks.subscribe",a))throw Ec("cordova-universal-links-plugin-fix is not installed");if(void 0===Ar("BuildInfo.packageName",a))throw Ec("cordova-plugin-buildinfo is not installed");if("function"!=typeof Ar("cordova.plugins.browsertab.openUrl",a))throw Ec("cordova-plugin-browsertab is not installed");if("function"!=typeof Ar("cordova.InAppBrowser.open",a))throw Ec("cordova-plugin-inappbrowser is not installed")}),(function(){throw new T("cordova-not-ready")}))},t.Nb=function(t,e){return e(new T("operation-not-supported-in-this-environment")),Ne()},t.Lb=function(){return ke(new T("operation-not-supported-in-this-environment"))},t.Zb=function(){return!1},t.Wb=function(){return!0},t.Sb=function(){return!0},t.Mb=function(t,e,n,r){if(this.c)return ke(new T("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,h=null;return this.c=Ne().then((function(){return jo(e),Sc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Vo(e,r,null,o,new T("no-auth-event"),null,i),u=Ar("BuildInfo.packageName",a);if("string"!=typeof u)throw new T("invalid-cordova-configuration");var c=Ar("BuildInfo.displayName",a),h={};if(kr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!kr().toLowerCase().match(/android/))return ke(new T("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=Ic(o),h.sessionId=o;var l=mu(t.m,t.i,t.l,e,n,null,r,t.v,h,t.u,i,t.s);return t.la().then((function(){var e=t.h;return t.A.a.set(uc,s.w(),e)})).then((function(){var e=Ar("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new T("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Ar("cordova.plugins.browsertab.openUrl",a)))throw new T("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=Ar("cordova.InAppBrowser.open",a)))throw new T("invalid-cordova-configuration");e=kr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new _e((function(t,e){u=function(){var e=Ar("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){s||(s=Tn(2e3).then((function(){e(new T("redirect-cancelled-by-user"))})))},h=function(){Br()&&c()},o.addEventListener("resume",c,!1),kr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Cc(i).then((function(){throw t}))}))})).na((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),s&&s.cancel(),u&&i.Ra(u),i.c=null}))},t.Ea=function(t){this.b.push(t),Sc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Vo("unknown",null,null,null,new T("no-auth-event")),t(e))}))},t.Ra=function(t){$(this.b,(function(e){return e==t}))};var kc={name:"pendingRedirect",D:"session"};function Ac(t){return ic(t.b,kc,t.a)}function Pc(t,e,n,r){this.i={},this.u=0,this.O=t,this.m=e,this.v=n,this.G=r,this.h=[],this.f=!1,this.l=b(this.s,this),this.b=new Kc,this.A=new Yc,this.g=new Nc(Wc(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=Oc(this.O,this.m,this.v,C,this.G)}function Oc(t,e,n,r,i){var o=Sn.SDK_VERSION||null;return mr()?new wc(t,e,n,o,r,i):new du(t,e,n,o,r,i)}function Rc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.la().o((function(n){throw t.a==e&&t.reset(),n}))}function Dc(t){t.a.Wb()&&Rc(t).o((function(e){var n=new Vo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)})),t.a.Sb()||Gc(t.b)}function xc(t,e){G(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(kc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Ac(t.g).then((function(){Rc(t).o((function(e){var n=new Vo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)}))})):Dc(t)})).o((function(){Dc(t)}))}function Lc(t,e){$(t.h,(function(t){return t==e}))}Pc.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=Oc(this.O,this.m,this.v,null,this.G),this.i={}},Pc.prototype.s=function(t){if(!t)throw new T("invalid-auth-event");if(6e5<=w()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Eb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=w())),e=!0;break}}return Gc(this.b),e};var Mc=new qr(2e3,1e4),Fc=new qr(3e4,6e4);function Uc(t,e,n,r,i,o,a){return t.a.Lb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function jc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Vc(t,e,n,r,i){var o;return function(t){return t.b.set(kc,"pending",t.a)}(t.g).then((function(){return t.a.Mb(e,n,r,i).o((function(e){if(jc(e))throw new T("operation-not-supported-in-this-environment");return o=e,Ac(t.g).then((function(){throw o}))})).then((function(){return t.a.Zb()?new _e((function(){})):Ac(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function qc(t,e,n,r,i){return t.a.Nb(r,(function(t){e.ma(n,null,t,i)}),Mc.get())}Pc.prototype.qa=function(){return this.b.qa()};var Bc={};function Wc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Hc(t,e,n,r){var i=Wc(e,n,r);return Bc[i]||(Bc[i]=new Pc(t,e,n,r)),Bc[i]}function Kc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Gc(t){t.g||(t.g=!0,Qc(t,!1,null,null))}function zc(t){t.g&&!t.i&&Qc(t,!1,null,null)}function $c(t,e){if(t.b=function(){return Ne(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Qc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return ke(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):$c(t,n):$c(t,{user:null}),t.f=[],t.c=[]}function Yc(){}function Xc(){this.hb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(t){this.hb=t},enumerable:!1})}function Jc(t,e){this.a=e,Qr(this,"verificationId",t)}function Zc(t,e,n,r){return new Mo(t).eb(e,n).then((function(t){return new Jc(t,r)}))}function th(t){var e=Hi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new T("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Yr(this,{token:t,expirationTime:Wr(1e3*e.exp),authTime:Wr(1e3*e.auth_time),issuedAtTime:Wr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function eh(t,e,n){var r=e&&e[rh];if(!r)throw new T("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=pt(e),this.g=n,this.c=new oo(null,r),this.b=[];var i=this;B(e[nh]||[],(function(t){(t=ti(t))&&i.b.push(t)})),Qr(this,"auth",this.a),Qr(this,"session",this.c),Qr(this,"hints",this.b)}Kc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Kc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Qc(this,!0,null,t.a),Ne()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.S(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){Qc(t,s,e,null)})).o((function(e){Qc(t,s,null,e)}))}(this,t,e):ke(new T("invalid-auth-event")):(Qc(this,!1,null,null),Ne())}else ke(new T("invalid-auth-event"))},Kc.prototype.qa=function(){var t=this;return new _e((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new T("timeout");t.a&&t.a.cancel(),t.a=Tn(Fc.get()).then((function(){t.b||(t.g=!0,Qc(t,!0,null,e))}))}(t))}))},Yc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ma(t.c,null,t.a,t.b),Ne()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.S(),t.i).then((function(t){e.ma(r,t,null,n)})).o((function(t){e.ma(r,null,t,n)}))}(t,e):ke(new T("invalid-auth-event"))}else ke(new T("invalid-auth-event"))},Jc.prototype.confirm=function(t){return t=Fo(this.verificationId,t),this.a(t)};var nh="mfaInfo",rh="mfaPendingCredential";function ih(t,e,n,r){T.call(this,"multi-factor-auth-required",r,e),this.b=new eh(t,e,n),Qr(this,"resolver",this.b)}function oh(t,e,n){if(t&&d(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new ih(e,t.serverResponse,n,t.message)}catch(t){}return null}function ah(){}function sh(t){Qr(this,"factorId",t.fa),this.a=t}function uh(t){if(sh.call(this,t),this.a.fa!=Mo.PROVIDER_ID)throw new T("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ch(t,e){for(var n in $e.call(this,t),e)this[n]=e[n]}function hh(t,e){this.a=t,this.b=[],this.c=b(this.xc,this),sn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&B(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ri]=t.uid),t.displayName&&(r[ei]=t.displayName),t.enrollmentTime&&(r[ni]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ii]=t.phoneNumber);try{e=new oi(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),lh(this,n)}function lh(t,e){t.b=e,Qr(t,"enrolledFactors",e)}function fh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ph(t,e){t.stop(),t.b=Tn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=a.document,e=null;return Br()||!t?Ne():new _e((function(n){e=function(){Br()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){ph(t,!0)})).o((function(e){t.i(e)&&ph(t,!1)}))}function dh(t){this.c=t,this.b=this.a=null}function vh(t){return t.b&&1e3*t.b.c||0}function gh(t,e){var n=e.refreshToken;t.b=Wi(e[Ja]||""),t.a=n}function yh(t,e){return function(t,e){return new _e((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ss(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new T("internal-error")):r(new T("network-request-failed"))}),"POST",Yn(e).toString(),t.g,t.v.get()):r(new T("internal-error"))}))}(t.c,e).then((function(e){return t.b=Wi(e.access_token),t.a=e.refresh_token,{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function mh(t,e){this.a=t||null,this.b=e||null,Yr(this,{lastSignInTime:Wr(e||null),creationTime:Wr(t||null)})}function bh(t,e,n,r,i,o){Yr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function _h(t,e,n){this.G=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=Sn.SDK_VERSION?Nr(Sn.SDK_VERSION):null;this.a=new Ya(this.l,P(C),r),t.emulatorConfig&&is(this.a,t.emulatorConfig),this.b=new dh(this.a),kh(this,e[Ja]),gh(this.b,e),Qr(this,"refreshToken",this.b.a),Oh(this,n||{}),bn.call(this),this.P=!1,this.s&&Or()&&(this.i=Hc(this.s,this.l,this.m)),this.R=[],this.f=null,this.u=function(t){return new fh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=vh(t.b)-w()-3e5;return 0<e?e:0}))}(this),this.$=b(this.gb,this);var i=this;this.pa=null,this.Ba=function(t){i.wa(t.h)},this.ba=null,this.za=function(t){is(i.a,t.c)},this.W=null,this.X=[],this.Aa=function(t){Ih(i,t.f)},this.aa=null,this.N=new hh(this,n),Qr(this,"multiFactor",this.N)}function wh(t,e){t.ba&&hn(t.ba,"languageCodeChanged",t.Ba),(t.ba=e)&&sn(e,"languageCodeChanged",t.Ba)}function Eh(t,e){t.W&&hn(t.W,"emulatorConfigChanged",t.za),(t.W=e)&&sn(e,"emulatorConfigChanged",t.za)}function Ih(t,e){t.X=e,as(t.a,Sn.SDK_VERSION?Nr(Sn.SDK_VERSION,t.X):null)}function Th(t,e){t.aa&&hn(t.aa,"frameworkChanged",t.Aa),(t.aa=e)&&sn(e,"frameworkChanged",t.Aa)}function Sh(t){try{return Sn.app(t.m).auth()}catch(e){throw new T("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Ch(t){t.A||t.u.b||(t.u.start(),hn(t,"tokenChanged",t.$),sn(t,"tokenChanged",t.$))}function Nh(t){hn(t,"tokenChanged",t.$),t.u.stop()}function kh(t,e){t.ya=e,Qr(t,"_lat",e)}function Ah(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Pe(e).then((function(){return t}))}function Ph(t){t.i&&!t.P&&(t.P=!0,xc(t.i,t))}function Oh(t,e){Yr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new mh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Rh(){}function Dh(t){return Ne().then((function(){if(t.A)throw new T("app-deleted")}))}function xh(t){return H(t.providerData,(function(t){return t.providerId}))}function Lh(t,e){e&&(Mh(t,e.providerId),t.providerData.push(e))}function Mh(t,e){$(t.providerData,(function(t){return t.providerId==e}))}function Fh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Qr(t,e,n)}function Uh(t,e){t!=e&&(Yr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Qr(t,"metadata",function(t){return new mh(t.a,t.b)}(e.metadata)):Qr(t,"metadata",new mh),B(e.providerData,(function(e){Lh(t,e)})),function(t,e){t.b=e.b,t.a=e.a}(t.b,e.b),Qr(t,"refreshToken",t.b.a),lh(t.N,e.N.b))}function jh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,xs,{idToken:e}).then(b(t.Jc,t))}(t,e).then((function(){return n||Fh(t,"isAnonymous",!1),e}))}))}function Vh(t,e){e[Ja]&&t.ya!=e[Ja]&&(gh(t.b,e),t.dispatchEvent(new ch("tokenChanged")),kh(t,e[Ja]),Fh(t,"refreshToken",t.b.a))}function qh(t,e){return jh(t).then((function(){if(G(xh(t),e))return Ah(t).then((function(){throw new T("provider-already-linked")}))}))}function Bh(t,e,n){return Xr({user:t,credential:Uo(e),additionalUserInfo:e=Qi(e),operationType:n})}function Wh(t,e){return Vh(t,e),t.reload().then((function(){return t}))}function Hh(t,e,n,r,i){if(!Or())return ke(new T("operation-not-supported-in-this-environment"));if(t.f&&!i)return ke(t.f);var o=$i(n.providerId),a=Ur(t.uid+":::"),s=null;(!xr()||br())&&t.s&&n.isOAuthProvider&&(s=mu(t.s,t.l,t.m,e,n,null,a,Sn.SDK_VERSION||null,null,null,t.tenantId));var u=dr(s,o&&o.ua,o&&o.ta);return r=r().then((function(){if(Gh(t),!i)return t.I().then((function(){}))})).then((function(){return Uc(t.i,u,e,n,a,!!s,t.tenantId)})).then((function(){return new _e((function(n,r){t.ma(e,null,new T("cancelled-popup-request"),t.h||null),t.g=n,t.O=r,t.h=a,t.c=qc(t.i,t,e,u,a)}))})).then((function(t){return u&&pr(u),t?Xr(t):null})).o((function(t){throw u&&pr(u),t})),zh(t,r,i)}function Kh(t,e,n,r,i){if(!Or())return ke(new T("operation-not-supported-in-this-environment"));if(t.f&&!i)return ke(t.f);var o=null,a=Ur(t.uid+":::");return r=r().then((function(){if(Gh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Ah(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Yh,t.w(),e.a)),e})).then((function(){return Vc(t.i,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return Xh(t.ha);throw o})).then((function(){if(o)throw o})),zh(t,r,i)}function Gh(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new T("internal-error");throw new T("auth-domain-config-required")}}function zh(t,e,n){var r=function(t,e,n){return t.f&&!n?(e.cancel(),ke(t.f)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.f||t.dispatchEvent(new ch("userInvalidated")),t.f=e),e}))}(t,e,n);return t.G.push(r),r.na((function(){z(t.G,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oh(e.w(),Sh(t),b(t.ic,t))),n||e}))}function $h(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ja]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new _h(e,n,t);return t.providerData&&B(t.providerData,(function(t){t&&Lh(r,Xr(t))})),t.redirectEventId&&(r.ga=t.redirectEventId),r}function Qh(t){this.a=t,this.b=ec()}eh.prototype.Qc=function(t){var e=this;return t.rb(this.a.a,this.c).then((function(t){var n=pt(e.f);return delete n[nh],delete n[rh],vt(n,t),e.g(n)}))},E(ih,T),ah.prototype.rb=function(t,e,n){return e.type==ao?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),vt(n,{phoneVerificationInfo:Lo(t.a)}),ru(e,Rs,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return vt(n={mfaPendingCredential:n},{phoneVerificationInfo:Lo(t.a)}),ru(e,Ds,n)}))}(this,t,e)},E(sh,ah),E(uh,sh),E(ch,$e),(t=hh.prototype).xc=function(t){lh(this,function(t){var e=[];return B(t.mfaInfo||[],(function(t){(t=ti(t))&&e.push(t)})),e}(t.gd))},t.Qb=function(){return this.a.I().then((function(t){return new oo(t,null)}))},t.ec=function(t,e){var n=this,r=this.a.a;return this.Qb().then((function(n){return t.rb(r,n,e)})).then((function(t){return Vh(n.a,t),n.a.reload()}))},t.ad=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=W(e.b,(function(t){return t.uid!=n}));return lh(e,r),Vh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:H(this.b,(function(t){return t.w()}))}}},fh.prototype.start=function(){this.a=this.c,ph(this,!0)},fh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dh.prototype.w=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:vh(this)}},dh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?ke(new T("user-token-expired")):t||!this.b||w()>vh(this)-3e4?this.a?yh(this,{grant_type:"refresh_token",refresh_token:this.a}):Ne(null):Ne({accessToken:this.b.toString(),refreshToken:this.a})},mh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},E(_h,bn),_h.prototype.wa=function(t){this.pa=t,rs(this.a,t)},_h.prototype.ka=function(){return this.pa},_h.prototype.Ga=function(){return Y(this.X)},_h.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},Qr(_h.prototype,"providerId","firebase"),(t=_h.prototype).reload=function(){var t=this;return zh(this,Dh(this).then((function(){return jh(t).then((function(){return Ah(t)})).then(Rh)})))},t.nc=function(t){return this.I(t).then((function(t){return new th(t)}))},t.I=function(t){var e=this;return zh(this,Dh(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new T("internal-error");return t.accessToken!=e.ya&&(kh(e,t.accessToken),e.dispatchEvent(new ch("tokenChanged"))),Fh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Jc=function(t){if(!(t=t.users)||!t.length)throw new T("internal-error");Oh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?H(t,(function(t){return new bh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Lh(this,e[n]);Fh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ch("userReloaded",{gd:t}))},t.Kc=function(t){return zr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.sb(t)},t.sb=function(t){var e=this,n=null;return zh(this,t.c(this.a,this.uid).then((function(t){return Vh(e,t),n=Bh(e,t,"reauthenticate"),e.f=null,e.reload()})).then((function(){return n})),!0)},t.Bc=function(t){return zr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return zh(this,qh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Bh(e,t,"link"),Wh(e,t)})).then((function(){return n})))},t.Cc=function(t,e){var n=this;return zh(this,qh(this,"phone").then((function(){return Zc(Sh(n),t,e,b(n.pb,n))})))},t.Lc=function(t,e){var n=this;return zh(this,Ne().then((function(){return Zc(Sh(n),t,e,b(n.sb,n))})),!0)},t.Ab=function(t){var e=this;return zh(this,this.I().then((function(n){return e.a.Ab(n,t)})).then((function(t){return Vh(e,t),e.reload()})))},t.dd=function(t){var e=this;return zh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Vh(e,t),e.reload()})))},t.Bb=function(t){var e=this;return zh(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return Vh(e,t),e.reload()})))},t.Cb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Dh(this);var e=this;return zh(this,this.I().then((function(n){return e.a.Cb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Vh(e,t),Fh(e,"displayName",t.displayName||null),Fh(e,"photoURL",t.photoUrl||null),B(e.providerData,(function(t){"password"===t.providerId&&(Qr(t,"displayName",e.displayName),Qr(t,"photoURL",e.photoURL))})),Ah(e)})).then(Rh))},t.bd=function(t){var e=this;return zh(this,jh(this).then((function(n){return G(xh(e),t)?function(t,e,n){return ru(t,As,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return B(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),B(xh(e),(function(t){n[t]||Mh(e,t)})),n[Mo.PROVIDER_ID]||Qr(e,"phoneNumber",null),Ah(e)})):Ah(e).then((function(){throw new T("no-such-provider")}))})))},t.delete=function(){var t=this;return zh(this,this.I().then((function(e){return ru(t.a,ks,{idToken:e})})).then((function(){t.dispatchEvent(new ch("userDeleted"))}))).then((function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");wh(t,null),Eh(t,null),Th(t,null),t.G=[],t.A=!0,Nh(t),Qr(t,"refreshToken",null),t.i&&Lc(t.i,t)}))},t.Eb=function(t,e){return!!("linkViaPopup"==t&&(this.h||null)==e&&this.g||"reauthViaPopup"==t&&(this.h||null)==e&&this.g||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.ma=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.h||null)||(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.h||null)?b(this.Jb,this):"reauthViaPopup"==t&&e==(this.h||null)?b(this.Kb,this):"linkViaRedirect"==t&&(this.ga||null)==e?b(this.Jb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?b(this.Kb,this):null},t.Dc=function(t){var e=this;return Hh(this,"linkViaPopup",t,(function(){return qh(e,t.providerId).then((function(){return Ah(e)}))}),!1)},t.Mc=function(t){return Hh(this,"reauthViaPopup",t,(function(){return Ne()}),!0)},t.Ec=function(t){var e=this;return Kh(this,"linkViaRedirect",t,(function(){return qh(e,t.providerId)}),!1)},t.Nc=function(t){return Kh(this,"reauthViaRedirect",t,(function(){return Ne()}),!0)},t.Jb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return zh(this,this.I().then((function(n){return ws(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Bh(i,t,"link"),Wh(i,t)})).then((function(){return o})))},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return zh(this,Ne().then((function(){return co(Es(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Bh(i,t,"reauthenticate"),Vh(i,t),i.f=null,i.reload()})).then((function(){return o})),!0)},t.tb=function(t){var e=this,n=null;return zh(this,this.I().then((function(e){return n=e,void 0===t||ft(t)?{}:ji(new Ai(t))})).then((function(t){return e.a.tb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Db=function(t,e){var n=this,r=null;return zh(this,this.I().then((function(t){return r=t,void 0===e||ft(e)?{}:ji(new Ai(e))})).then((function(e){return n.a.Db(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.ic=function(t){var e=null,n=this;return zh(this,t=co(Ne(t),n.uid).then((function(t){return e=Bh(n,t,"reauthenticate"),Vh(n,t),n.f=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&vt(t,this.metadata.w()),B(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),vt(t,this.N.w()),t};var Yh={name:"redirectUser",D:"session"};function Xh(t){return ic(t.b,Yh,t.a)}function Jh(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=el("local"),n=el("session"),r=el("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.D);return t.get(e,n).then((function(o){var s=null;try{s=Fr(a.localStorage.getItem(r))}catch(t){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(tl,t.a).then((function(t){return t?el(t):e}))}))}))})).then((function(e){return t.c=e,Zh(t,e.D)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(el("local"),this.a,b(this.g,this))}function Zh(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,el(Zu[n]),t.a));return r.push(ic(t.b,tl,t.a)),function(t){return new _e((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Ae(t[s],_(o,s),a);else e(i)}))}(r)}Jh.prototype.g=function(){var t=this,e=el("local");ol(this,(function(){return Ne().then((function(){return t.c&&"local"!=t.c.D?t.b.get(e,t.a):null})).then((function(n){if(n)return Zh(t,"local").then((function(){t.c=e}))}))}))};var tl={name:"persistence",D:"session"};function el(t){return{name:"authUser",D:t}}function nl(t,e){return ol(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function rl(t){return ol(t,(function(){return ic(t.b,t.c,t.a)}))}function il(t,e,n){return ol(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),$h(t||{})}))}))}function ol(t,e){return t.f=t.f.then(e,e),t.f}function al(t){if(this.m=!1,Qr(this,"settings",new Xc),Qr(this,"app",t),!vl(this).options||!vl(this).options.apiKey)throw new T("invalid-api-key");t=Sn.SDK_VERSION?Nr(Sn.SDK_VERSION):null,this.a=new Ya(vl(this).options&&vl(this).options.apiKey,P(C),t),this.R=[],this.u=[],this.P=[],this.ac=Sn.INTERNAL.createSubscribe(b(this.yc,this)),this.X=void 0,this.bc=Sn.INTERNAL.createSubscribe(b(this.zc,this)),pl(this,null),this.l=new Jh(vl(this).options.apiKey+":"+vl(this).name),this.G=new Qh(vl(this).options.apiKey+":"+vl(this).name),this.$=bl(this,function(t){var e=vl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Yh,t.a).then((function(t){return t&&e&&(t.authDomain=e),$h(t||{})}))}(t.G,vl(t).options.authDomain).then((function(e){return(t.s=e)&&(e.ha=t.G),Xh(t.G)}));return bl(t,e)}(t).then((function(){return il(t.l,e,t.f)})).then((function(e){return e?(e.ha=t.G,t.s&&(t.s.ga||null)==(e.ga||null)?e:e.reload().then((function(){return nl(t.l,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:rl(t.l)}))):null})).then((function(e){pl(t,e||null)}));return bl(t,n)}(this)),this.i=bl(this,function(t){return t.$.then((function(){return ll(t)})).o((function(){})).then((function(){if(!t.m)return t.pa()})).o((function(){})).then((function(){if(!t.m){t.ba=!0;var e=t.l;e.b.addListener(el("local"),e.a,t.pa)}}))}(this)),this.ba=!1,this.pa=b(this.Yc,this),this.Ba=b(this.da,this),this.ya=b(this.kc,this),this.za=b(this.vc,this),this.Aa=b(this.wc,this),this.b=null,function(t){var e=vl(t).options.authDomain,n=vl(t).options.apiKey;e&&Or()&&(t.gb=t.$.then((function(){if(!t.m){if(t.b=Hc(e,n,vl(t).name,t.f),xc(t.b,t),gl(t)&&Ph(gl(t)),t.s){Ph(t.s);var r=t.s;r.wa(t.ka()),wh(r,t),Ih(r=t.s,t.N),Th(r,t),is((r=t.s).a,t.f),Eh(r,t),t.s=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.Fc,this),this.A=0,bn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ka()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.xb(t)},enumerable:!1}),t.W=null}(this),this.N=[],this.f=null}function sl(t){$e.call(this,"languageCodeChanged"),this.h=t}function ul(t){$e.call(this,"emulatorConfigChanged"),this.c=t}function cl(t){$e.call(this,"frameworkChanged"),this.f=t}function hl(t){return t.gb||ke(new T("auth-domain-config-required"))}function ll(t){if(!Or())return ke(new T("operation-not-supported-in-this-environment"));var e=hl(t).then((function(){return t.b.qa()})).then((function(t){return t?Xr(t):null}));return bl(t,e)}function fl(t,e){var n={};return n.apiKey=vl(t).options.apiKey,n.authDomain=vl(t).options.authDomain,n.appName=vl(t).name,t.f&&(n.emulatorConfig=t.f),t.$.then((function(){return function(t,e,n,r){var i=new _h(t,e);return n&&(i.ha=n),r&&Ih(i,r),i.reload().then((function(){return i}))}(n,e,t.G,t.Ga())})).then((function(e){return gl(t)&&e.uid==gl(t).uid?(Uh(gl(t),e),t.da(e)):(pl(t,e),Ph(e),t.da(e))})).then((function(){ml(t)}))}function pl(t,e){gl(t)&&(function(t,e){$(t.R,(function(t){return t==e}))}(gl(t),t.Ba),hn(gl(t),"tokenChanged",t.ya),hn(gl(t),"userDeleted",t.za),hn(gl(t),"userInvalidated",t.Aa),Nh(gl(t))),e&&(e.R.push(t.Ba),sn(e,"tokenChanged",t.ya),sn(e,"userDeleted",t.za),sn(e,"userInvalidated",t.Aa),0<t.A&&Ch(e)),Qr(t,"currentUser",e),e&&(e.wa(t.ka()),wh(e,t),Ih(e,t.N),Th(e,t),is(e.a,t.f),Eh(e,t))}function dl(t,e){var n=null,r=null;return bl(t,e.then((function(e){return n=Uo(e),r=Qi(e),fl(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oh(e.w(),t,b(t.jc,t))),n||e})).then((function(){return Xr({user:gl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function vl(t){return t.app}function gl(t){return t.currentUser}function yl(t){return gl(t)&&gl(t)._lat||null}function ml(t){if(t.ba){for(var e=0;e<t.u.length;e++)t.u[e]&&t.u[e](yl(t));if(t.X!==t.getUid()&&t.P.length)for(t.X=t.getUid(),e=0;e<t.P.length;e++)t.P[e]&&t.P[e](yl(t))}}function bl(t,e){return t.R.push(e),e.na((function(){z(t.R,e)})),e}function _l(){}function wl(){this.a={},this.b=1e12}Jh.prototype.wb=function(t){var e=null,n=this;return function(t){var e=new T("invalid-persistence-type"),n=new T("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(wr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Ru()&&"none"!==t)throw n;break;default:if(!Pr()&&"none"!==t)throw n}}(t),ol(this,(function(){return t!=n.c.D?n.b.get(n.c,n.a).then((function(r){return e=r,Zh(n,t)})).then((function(){if(n.c=el(t),e)return n.b.set(n.c,e,n.a)})):Ne()}))},E(al,bn),E(sl,$e),E(ul,$e),E(cl,$e),(t=al.prototype).wb=function(t){return bl(this,t=this.l.wb(t))},t.wa=function(t){this.aa===t||this.m||(this.aa=t,rs(this.a,this.aa),this.dispatchEvent(new sl(this.ka())))},t.ka=function(){return this.aa},t.ed=function(){var t=a.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.fd=function(t,e){if(!this.f){if(!/^https?:\/\//.test(t))throw new T("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");!function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!t&&yr().then((function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)}))}(!!e&&!!e.disableWarnings),this.f={url:t},this.settings.hb=!0,is(this.a,this.f),this.dispatchEvent(new ul(this.f))}},t.Fc=function(t){this.N.push(t),as(this.a,Sn.SDK_VERSION?Nr(Sn.SDK_VERSION,this.N):null),this.dispatchEvent(new cl(this.N))},t.Ga=function(){return Y(this.N)},t.xb=function(t){this.W===t||this.m||(this.W=t,this.a.b=this.W)},t.S=function(){return this.W},t.toJSON=function(){return{apiKey:vl(this).options.apiKey,authDomain:vl(this).options.authDomain,appName:vl(this).name,currentUser:gl(this)&&gl(this).w()}},t.Eb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.h==e&&!!this.g;default:return!1}},t.ma=function(t,e,n,r){"signInViaPopup"==t&&this.h==r&&(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.h==e&&this.g?b(this.hc,this):null},t.hc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return dl(i,_s(i.a,o))}))},t.Wc=function(t){if(!Or())return ke(new T("operation-not-supported-in-this-environment"));var e=this,n=$i(t.providerId),r=Ur(),i=null;(!xr()||br())&&vl(this).options.authDomain&&t.isOAuthProvider&&(i=mu(vl(this).options.authDomain,vl(this).options.apiKey,vl(this).name,"signInViaPopup",t,null,r,Sn.SDK_VERSION||null,null,null,this.S(),this.f));var o=dr(i,n&&n.ua,n&&n.ta);return bl(this,n=hl(this).then((function(n){return Uc(n,o,"signInViaPopup",t,r,!!i,e.S())})).then((function(){return new _e((function(t,n){e.ma("signInViaPopup",null,new T("cancelled-popup-request"),e.h),e.g=t,e.O=n,e.h=r,e.c=qc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&pr(o),t?Xr(t):null})).o((function(t){throw o&&pr(o),t})))},t.Xc=function(t){if(!Or())return ke(new T("operation-not-supported-in-this-environment"));var e=this;return bl(this,hl(this).then((function(){return function(t){return ol(t,(function(){return t.b.set(tl,t.c.D,t.a)}))}(e.l)})).then((function(){return Vc(e.b,"signInViaRedirect",t,void 0,e.S())})))},t.qa=function(){var t=this;return ll(this).then((function(e){return t.b&&zc(t.b.b),e})).o((function(e){throw t.b&&zc(t.b.b),e}))},t.cd=function(t){if(!t)return ke(new T("null-user"));if(this.W!=t.tenantId)return ke(new T("tenant-id-mismatch"));var e=this,n={};n.apiKey=vl(this).options.apiKey,n.authDomain=vl(this).options.authDomain,n.appName=vl(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Ja]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new _h(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Ih(e,r),Uh(e,t),e}(t,n,e.G,e.Ga());return bl(this,this.i.then((function(){if(vl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return gl(e)&&t.uid==gl(e).uid?(Uh(gl(e),t),e.da(t)):(pl(e,r),Ph(r),e.da(r))})).then((function(){ml(e)})))},t.zb=function(){var t=this;return bl(this,this.i.then((function(){return t.b&&zc(t.b.b),gl(t)?(pl(t,null),rl(t.l).then((function(){ml(t)}))):Ne()})))},t.Yc=function(){var t=this;return il(this.l,vl(this).options.authDomain).then((function(e){if(!t.m){var n;if(n=gl(t)&&e){n=gl(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Uh(gl(t),e),gl(t).I();(gl(t)||e)&&(pl(t,e),e&&(Ph(e),e.ha=t.G),t.b&&xc(t.b,t),ml(t))}}))},t.da=function(t){return nl(this.l,t)},t.kc=function(){ml(this),this.da(gl(this))},t.vc=function(){this.zb()},t.wc=function(){this.zb()},t.jc=function(t){var e=this;return this.i.then((function(){return dl(e,Ne(t))}))},t.yc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(gl(e))}))},t.zc=function(t){var e=this;!function(t,e){t.P.push(e),bl(t,t.i.then((function(){!t.m&&G(t.P,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(yl(t)))})))}(this,(function(){t.next(gl(e))}))},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(gl(r)):"function"==typeof t.next&&t.next(gl(r))})),this.ac(t,e,n)},t.Gc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(gl(r)):"function"==typeof t.next&&t.next(gl(r))})),this.bc(t,e,n)},t.mc=function(t){var e=this;return bl(this,this.i.then((function(){return gl(e)?gl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Sc=function(t){var e=this;return this.i.then((function(){return dl(e,ru(e.a,Xs,{token:t}))})).then((function(t){var n=t.user;return Fh(n,"isAnonymous",!1),e.da(n),t}))},t.Tc=function(t,e){var n=this;return this.i.then((function(){return dl(n,ru(n.a,Js,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.i.then((function(){return dl(n,ru(n.a,Cs,{email:t,password:e}))}))},t.Za=function(t){var e=this;return this.i.then((function(){return dl(e,t.ja(e.a))}))},t.Rc=function(t){return zr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Za(t)},t.yb=function(){var t=this;return this.i.then((function(){var e=gl(t);if(e&&e.isAnonymous){var n=Xr({providerId:null,isNewUser:!1});return Xr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return dl(t,t.a.yb()).then((function(e){var n=e.user;return Fh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return gl(this)&&gl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.A++,0<this.A&&gl(this)&&Ch(gl(this))},t.Oc=function(t){var e=this;B(this.u,(function(n){n==t&&e.A--})),0>this.A&&(this.A=0),0==this.A&&gl(this)&&Nh(gl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.u.push(t),bl(this,this.i.then((function(){e.m||G(e.u,t)&&t(yl(e))})))},t.removeAuthTokenListener=function(t){$(this.u,(function(e){return e==t}))},t.delete=function(){this.m=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.l&&(t=this.l).b.removeListener(el("local"),t.a,this.pa),this.b&&(Lc(this.b,this),zc(this.b.b)),Promise.resolve()},t.gc=function(t){return bl(this,function(t,e){return ru(t,Ns,{identifier:e,continueUri:Rr()?cr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Ac=function(t){return!!Ro(t)},t.vb=function(t,e){var n=this;return bl(this,Ne().then((function(){var t=new Ai(e);if(!t.c)throw new T("argument-error",Ri+" must be true when sending sign in link to email");return ji(t)})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.hd=function(t){return this.Qa(t).then((function(t){return t.data.email}))},t.mb=function(t,e){return bl(this,this.a.mb(t,e).then((function(){})))},t.Qa=function(t){return bl(this,this.a.Qa(t).then((function(t){return new ai(t)})))},t.ib=function(t){return bl(this,this.a.ib(t).then((function(){})))},t.ub=function(t,e){var n=this;return bl(this,Ne().then((function(){return void 0===e||ft(e)?{}:ji(new Ai(e))})).then((function(e){return n.a.ub(t,e)})).then((function(){})))},t.Vc=function(t,e){return bl(this,Zc(this,t,e,b(this.Za,this)))},t.Uc=function(t,e){var n=this;return bl(this,Ne().then((function(){var r=e||cr(),i=Oo(t,r);if(!(r=Ro(r)))throw new T("argument-error","Invalid email link!");if(r.tenantId!==n.S())throw new T("tenant-id-mismatch");return n.Za(i)})))},_l.prototype.render=function(){},_l.prototype.reset=function(){},_l.prototype.getResponse=function(){},_l.prototype.execute=function(){};var El=null;function Il(t,e){return(e=Tl(e))&&t.a[e]||null}function Tl(t){return(t=void 0===t?1e12:t)?t.toString():null}function Sl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ue(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():sn(this.f,"click",this.i)}function Cl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Nl(){}function kl(){}wl.prototype.render=function(t,e){return this.a[this.b.toString()]=new Sl(t,e),this.b++},wl.prototype.reset=function(t){var e=Il(this,t);t=Tl(t),e&&t&&(e.delete(),delete this.a[t])},wl.prototype.getResponse=function(t){return(t=Il(this,t))?t.getResponse():null},wl.prototype.execute=function(t){(t=Il(this,t))&&t.execute()},Sl.prototype.getResponse=function(){return Cl(this),this.b},Sl.prototype.execute=function(){Cl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},Sl.prototype.delete=function(){Cl(this),this.g=!0,clearTimeout(this.a),this.a=null,hn(this.f,"click",this.i)},Qr(Nl,"FACTOR_ID","phone"),kl.prototype.g=function(){return El||(El=new wl),Ne(El)},kl.prototype.c=function(){};var Al=null;function Pl(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ol=new yt(wt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Rl=new qr(3e4,6e4);Pl.prototype.g=function(t){var e=this;return new _e((function(n,r){var i=setTimeout((function(){r(new T("network-request-failed"))}),Rl.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new T("internal-error"));delete a[e.a]},Ne(Wa(St(Ol,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new T("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},Pl.prototype.c=function(){this.b--};var Dl=null;function xl(t,e,n,r,i,o,s){if(Qr(this,"type","recaptcha"),this.c=this.f=null,this.A=!1,this.m=e,this.g=null,s?(Al||(Al=new kl),s=Al):(Dl||(Dl=new Pl),s=Dl),this.v=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Fl])throw new T("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ul],!a.document)throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ue(e)||!this.i&&ue(e).hasChildNodes())throw new T("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ya(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Ll];this.a[Ll]=function(t){if(jl(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Ar(c,a);"function"==typeof e&&e(t)}};var h=this.a[Ml];this.a[Ml]=function(){if(jl(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=Ar(h,a);"function"==typeof t&&t()}}}var Ll="callback",Ml="expired-callback",Fl="sitekey",Ul="size";function jl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Vl(t,e){return t.h.push(e),e.na((function(){z(t.h,e)})),e}function ql(t){if(t.A)throw new T("internal-error","RecaptchaVerifier instance has been destroyed.")}function Bl(t,e,n){var r=!1;try{this.b=n||Sn.app()}catch(t){throw new T("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new T("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Sn.SDK_VERSION?Nr(Sn.SDK_VERSION,o):null,xl.call(this,n,t,e,(function(){try{var t=i.b.auth().ka()}catch(e){t=null}return t}),o,P(C),r)}function Wl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new T("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],0>i||i>=Hl.length)throw new T("internal-error","Argument validator received an unsupported number of arguments.");n=Hl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new T("argument-error",t+" failed: "+r)}(t=xl.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Vl(this,Ne().then((function(){if(Rr()&&!_r())return yr();throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.v.g(t.u())})).then((function(e){return t.g=e,ru(t.s,Vs,{})})).then((function(e){t.a[Fl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){ql(this);var t=this;return Vl(this,this.Ia().then((function(){if(null===t.c){var e=t.m;if(!t.i){var n=ue(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!se&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Bt(a.name),'"'),a.type){o.push(' type="',Bt(a.type),'"');var s={};vt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=de(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):ce(o,a)),2<r.length&&pe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){ql(this);var t=this;return Vl(this,this.render().then((function(e){return new _e((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){$(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){ql(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){ql(this),this.A=!0,this.v.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ue(this.m);for(var e;e=t.firstChild;)t.removeChild(e)}},E(Bl,xl);var Hl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Kl(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Gl(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function zl(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:d}}function $l(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function Ql(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Yl(t){return{name:t?t+"Credential":"credential",J:t?"a valid "+t+" credential":"a valid credential",optional:!1,K:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ja||!n)}}}function Xl(t,e){return d(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Jl(t){return d(t)&&"string"==typeof t.uid}function Zl(t,e,n,r){return{name:n||"",J:t.J+" or "+e.J,optional:!!r,K:function(n){return t.K(n)||e.K(n)}}}function tf(t,e){for(var n in e){var r=e[n].name;t[r]=rf(r,t[n],e[n].j)}}function ef(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:_((function(t){return this[t]}),n),set:_((function(t,e,n,r){Wl(t,[n],[r],!0),this[e]=r}),r,n,e[n].jb),enumerable:!0})}}function nf(t,e,n,r){t[e]=rf(e,n,r)}function rf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Wl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}tf(al.prototype,{ib:{name:"applyActionCode",j:[Kl("code")]},Qa:{name:"checkActionCode",j:[Kl("code")]},mb:{name:"confirmPasswordReset",j:[Kl("code"),Kl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Kl("email"),Kl("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[Kl("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[Kl("emailLink")]},Gc:{name:"onAuthStateChanged",j:[Zl(zl(),$l(),"nextOrObserver"),$l("opt_error",!0),$l("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[Zl(zl(),$l(),"nextOrObserver"),$l("opt_error",!0),$l("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[Kl("email"),Zl(zl("opt_actionCodeSettings",!0),Ql(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[Kl("email"),zl("actionCodeSettings")]},wb:{name:"setPersistence",j:[Kl("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[Yl()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[Yl()]},Sc:{name:"signInWithCustomToken",j:[Kl("token")]},Tc:{name:"signInWithEmailAndPassword",j:[Kl("email"),Kl("password")]},Uc:{name:"signInWithEmailLink",j:[Kl("email"),Kl("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[Kl("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Wc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Xc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},cd:{name:"updateCurrentUser",j:[Zl({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof _h)}},Ql(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Kl(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[Kl("url"),zl("options",!0)]},hd:{name:"verifyPasswordResetCode",j:[Kl("code")]}}),ef(al.prototype,{lc:{name:"languageCode",jb:Zl(Kl(),Ql(),"languageCode")},ti:{name:"tenantId",jb:Zl(Kl(),Ql(),"tenantId")}}),al.Persistence=Zu,al.Persistence.LOCAL="local",al.Persistence.SESSION="session",al.Persistence.NONE="none",tf(_h.prototype,{delete:{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[Gl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Gl("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[Yl()]},pb:{name:"linkWithCredential",j:[Yl()]},Cc:{name:"linkWithPhoneNumber",j:[Kl("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Dc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ec:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Yl()]},sb:{name:"reauthenticateWithCredential",j:[Yl()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[Kl("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Mc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Nc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[Zl(zl("opt_actionCodeSettings",!0),Ql(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Kl(null,!0)]},bd:{name:"unlink",j:[Kl("provider")]},Ab:{name:"updateEmail",j:[Kl("email")]},Bb:{name:"updatePassword",j:[Kl("password")]},dd:{name:"updatePhoneNumber",j:[Yl("phone")]},Cb:{name:"updateProfile",j:[zl("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[Kl("email"),Zl(zl("opt_actionCodeSettings",!0),Ql(null,!0),"opt_actionCodeSettings",!0)]}}),tf(wl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),tf(_l.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),tf(_e.prototype,{na:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),ef(Xc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:Gl("appVerificationDisabledForTesting")}}),tf(Jc.prototype,{confirm:{name:"confirm",j:[Kl("verificationCode")]}}),nf(uo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[go,Ao,xo,fo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Zl(Kl(),zl(),"json")]),nf(Po,"credential",(function(t,e){return new ko(t,e)}),[Kl("email"),Kl("password")]),tf(ko.prototype,{w:{name:"toJSON",j:[Kl(null,!0)]}}),tf(_o.prototype,{Ca:{name:"addScope",j:[Kl("scope")]},Ka:{name:"setCustomParameters",j:[zl("customOAuthParameters")]}}),nf(_o,"credential",wo,[Zl(Kl(),zl(),"token")]),nf(Po,"credentialWithLink",Oo,[Kl("email"),Kl("emailLink")]),tf(Eo.prototype,{Ca:{name:"addScope",j:[Kl("scope")]},Ka:{name:"setCustomParameters",j:[zl("customOAuthParameters")]}}),nf(Eo,"credential",Io,[Zl(Kl(),zl(),"token")]),tf(To.prototype,{Ca:{name:"addScope",j:[Kl("scope")]},Ka:{name:"setCustomParameters",j:[zl("customOAuthParameters")]}}),nf(To,"credential",So,[Zl(Kl(),Zl(zl(),Ql()),"idToken"),Zl(Kl(),Ql(),"accessToken",!0)]),tf(Co.prototype,{Ka:{name:"setCustomParameters",j:[zl("customOAuthParameters")]}}),nf(Co,"credential",No,[Zl(Kl(),zl(),"token"),Kl("secret",!0)]),tf(bo.prototype,{Ca:{name:"addScope",j:[Kl("scope")]},credential:{name:"credential",j:[Zl(Kl(),Zl(zl(),Ql()),"optionsOrIdToken"),Zl(Kl(),Ql(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[zl("customOAuthParameters")]}}),tf(po.prototype,{w:{name:"toJSON",j:[Kl(null,!0)]}}),tf(ho.prototype,{w:{name:"toJSON",j:[Kl(null,!0)]}}),nf(Mo,"credential",Fo,[Kl("verificationId"),Kl("verificationCode")]),tf(Mo.prototype,{eb:{name:"verifyPhoneNumber",j:[Zl(Kl(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Xl(t.session,ao)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Xl(t.session,so)&&Jl(t.multiFactorHint):t.session&&t.multiFactorUid?Xl(t.session,so)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),tf(Do.prototype,{w:{name:"toJSON",j:[Kl(null,!0)]}}),tf(T.prototype,{toJSON:{name:"toJSON",j:[Kl(null,!0)]}}),tf(Go.prototype,{toJSON:{name:"toJSON",j:[Kl(null,!0)]}}),tf(Ko.prototype,{toJSON:{name:"toJSON",j:[Kl(null,!0)]}}),tf(ih.prototype,{toJSON:{name:"toJSON",j:[Kl(null,!0)]}}),tf(eh.prototype,{Qc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}}]}}),tf(hh.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}},Kl("displayName",!0)]},ad:{name:"unenroll",j:[Zl({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Jl},Kl(),"multiFactorInfoIdentifier")]}}),tf(Bl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),nf(_i,"parseLink",ki,[Kl("link")]),nf(Nl,"assertion",(function(t){return new uh(t)}),[Yl("phone")]),function(){if(void 0===Sn||!Sn.INTERNAL||!Sn.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ui,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:si,VERIFY_AND_CHANGE_EMAIL:ci,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:al,AuthCredential:uo,Error:T};nf(t,"EmailAuthProvider",Po,[]),nf(t,"FacebookAuthProvider",_o,[]),nf(t,"GithubAuthProvider",Eo,[]),nf(t,"GoogleAuthProvider",To,[]),nf(t,"TwitterAuthProvider",Co,[]),nf(t,"OAuthProvider",bo,[Kl("providerId")]),nf(t,"SAMLAuthProvider",mo,[Kl("providerId")]),nf(t,"PhoneAuthProvider",Mo,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof al)}}]),nf(t,"RecaptchaVerifier",Bl,[Zl(Kl(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),zl("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof Sn.app.App)}}]),nf(t,"ActionCodeURL",_i,[]),nf(t,"PhoneMultiFactorGenerator",Nl,[]),Sn.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new al(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Sn.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:b((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:b(t.mc,t),addAuthTokenListener:b(t.cc,t),removeAuthTokenListener:b(t.Oc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Sn.registerVersion("@firebase/auth","0.16.0"),Sn.INTERNAL.extendNamespace({User:_h})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Cn=function(t,e){return(Cn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Nn(t,e){function n(){this.constructor=t}Cn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var kn=function(){return(kn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function An(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function Pn(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function On(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rn(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Dn(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Rn(arguments[e]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xn=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Re(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Oe(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),Ln=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return xe(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),Mn=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new xn(e)}}catch(t){}return new Ln},Fn=Mn("localStorage"),Un=Mn("sessionStorage"),jn=new fn("@firebase/database"),Vn=function(){var t=1;return function(){return t++}}(),qn=function(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,he(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new Ue;n.update(e);var r=n.digest();return pe.encodeByteArray(r)},Bn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=Bn.apply(null,i):n+="object"==typeof i?Re(i):i,n+=" "}return n},Wn=null,Hn=!0,Kn=function(t,e){he(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(jn.logLevel=on.VERBOSE,Wn=jn.log.bind(jn),e&&Un.set("logging_enabled",!0)):"function"==typeof t?Wn=t:(Wn=null,Un.remove("logging_enabled"))},Gn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===Hn&&(Hn=!1,null===Wn&&!0===Un.get("logging_enabled")&&Kn(!0)),Wn){var n=Bn.apply(null,t);Wn(n)}},zn=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Gn.apply(void 0,Dn([t],e))}},$n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+Bn.apply(void 0,Dn(t));jn.error(n)},Qn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+Bn.apply(void 0,Dn(t));throw jn.error(n),new Error(n)},Yn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+Bn.apply(void 0,Dn(t));jn.warn(n)},Xn=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Jn="[MIN_NAME]",Zn="[MAX_NAME]",tr=function(t,e){if(t===e)return 0;if(t===Jn||e===Zn)return-1;if(e===Jn||t===Zn)return 1;var n=ur(t),r=ur(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},er=function(t,e){return t===e?0:t<e?-1:1},nr=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Re(e))},rr=function(t){if("object"!=typeof t||null===t)return Re(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Re(e[i]),r+=":",r+=rr(t[e[i]]);return r+="}"},ir=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var ar=function(t){he(!Xn(t),"Invalid JSON number");var e,n,r,i,o,a=1023;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),a))+a,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var u=s.join(""),c="";for(o=0;o<64;o+=8){var h=parseInt(u.substr(o,8),2).toString(16);1===h.length&&(h="0"+h),c+=h}return c.toLowerCase()},sr=new RegExp("^-?(0*)\\d{1,10}$"),ur=function(t){if(sr.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},cr=function(t){try{t()}catch(t){setTimeout((function(){var e=t.stack||"";throw Yn("Exception was thrown by user callback.",e),t}),Math.floor(0))}},hr=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},lr=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=tr(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),fr=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Ge(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Ge(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Ge(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),pr=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=Fn.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Fn.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(he("string"==typeof t,"typeof type must == string"),he("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return or(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}();var dr,vr,gr,yr,mr,br=function(t,e){var n=_r(t),r=n.namespace;"firebase.com"===n.domain&&Qn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Qn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Yn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new pr(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new lr(n.pathString)}},_r=function(t){var e="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"==typeof t){var c=t.indexOf("//");c>=0&&(s=t.substring(0,c-1),t=t.substring(c+2));var h=t.indexOf("/");-1===h&&(h=t.length);var l=t.indexOf("?");-1===l&&(l=t.length),e=t.substring(0,Math.min(h,l)),h<l&&(i=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(h,l)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=On(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var s=a.split("=");2===s.length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Yn("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,l)));(c=e.indexOf(":"))>=0?(a="https"===s||"wss"===s,u=parseInt(e.substring(c+1),10)):c=e.length;var p=e.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var d=e.indexOf(".");r=e.substring(0,d).toLowerCase(),n=e.substring(d+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},wr=/[\[\].#$\/\u0000-\u001F\u007F]/,Er=/[\[\].#$\u0000-\u001F\u007F]/,Ir=function(t){return"string"==typeof t&&0!==t.length&&!wr.test(t)},Tr=function(t){return"string"==typeof t&&0!==t.length&&!Er.test(t)},Sr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!Xn(t)||t&&"object"==typeof t&&xe(t,".sv")},Cr=function(t,e,n,r,i){i&&void 0===n||Nr(We(t,e,i),n,r)},Nr=function(t,e,n){var r=n instanceof lr?new fr(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(Xn(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>10485760/3&&Ge(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(or(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!Ir(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),Nr(t,n,r),r.pop()})),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},kr=function(t,e,n,r,i){if(!i||void 0!==n){var o=We(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];or(n,(function(t,e){var n=new lr(t);if(Nr(o,e,r.child(n)),".priority"===n.getBack()&&!Sr(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Ir(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(lr.comparePaths);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&a.contains(r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(o,a)}},Ar=function(t,e,n,r){if(!r||void 0!==n){if(Xn(n))throw new Error(We(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Sr(n))throw new Error(We(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Pr=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(We(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Or=function(t,e,n,r){if(!(r&&void 0===n||Ir(n)))throw new Error(We(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Rr=function(t,e,n,r){if(!(r&&void 0===n||Tr(n)))throw new Error(We(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Dr=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Rr(t,e,n,r)},xr=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},Lr=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Ir(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Tr(t)}(r))throw new Error(We(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Mr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(We(t,e,r)+"must be a boolean.")},Fr=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Be("OnDisconnect.cancel",0,1,arguments.length),He("OnDisconnect.cancel",1,t,!0);var e=new ye;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Be("OnDisconnect.remove",0,1,arguments.length),xr("OnDisconnect.remove",this.path_),He("OnDisconnect.remove",1,t,!0);var e=new ye;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Be("OnDisconnect.set",1,2,arguments.length),xr("OnDisconnect.set",this.path_),Cr("OnDisconnect.set",1,t,this.path_,!1),He("OnDisconnect.set",2,e,!0);var n=new ye;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Be("OnDisconnect.setWithPriority",2,3,arguments.length),xr("OnDisconnect.setWithPriority",this.path_),Cr("OnDisconnect.setWithPriority",1,t,this.path_,!1),Ar("OnDisconnect.setWithPriority",2,e,!1),He("OnDisconnect.setWithPriority",3,n,!0);var r=new ye;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Be("OnDisconnect.update",1,2,arguments.length),xr("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Yn("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}kr("OnDisconnect.update",1,t,this.path_,!1),He("OnDisconnect.update",2,e,!0);var i=new ye;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),Ur=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Be("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),jr=(dr="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",vr=0,gr=[],function(t){var e,n=t===vr;vr=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=dr.charAt(t%64),t=Math.floor(t/64);he(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===gr[e];e--)gr[e]=0;gr[e]++}else for(e=0;e<12;e++)gr[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=dr.charAt(gr[e]);return he(20===i.length,"nextPushId: Length should be 20."),i}),Vr=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),qr=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Vr(Jn,t),r=new Vr(Jn,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Vr.MIN},t}(),Br=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Nn(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return yr},set:function(t){yr=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return tr(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw le("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Vr.MIN},e.prototype.maxPost=function(){return new Vr(Zn,yr)},e.prototype.makePost=function(t,e){return he("string"==typeof t,"KeyIndex indexValue must always be a string."),new Vr(t,yr)},e.prototype.toString=function(){return".key"},e}(qr),Wr=new Br;var Hr,Kr,Gr,zr=function(t){return"number"==typeof t?"number:"+ar(t):"string:"+t},$r=function(t){if(t.isLeafNode()){var e=t.val();he("string"==typeof e||"number"==typeof e||"object"==typeof e&&xe(e,".sv"),"Priority must be a string or number.")}else he(t===mr||t.isEmpty(),"priority of unexpected type.");he(t===mr||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Qr=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,he(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),$r(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Hr},set:function(t){Hr=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(he(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+zr(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?ar(this.value_):this.value_,this.lazyHash_=qn(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(he(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return he(i>=0,"Unknown leaf type: "+n),he(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var Yr,Xr,Jr=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Nn(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?tr(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Vr.MIN},e.prototype.maxPost=function(){return new Vr(Zn,new Qr("[PRIORITY-POST]",Gr))},e.prototype.makePost=function(t,e){var n=Kr(t);return new Vr(e,new Qr("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(qr)),Zr=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),ti=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:ni.EMPTY_NODE,this.right=null!=o?o:ni.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return ni.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return ni.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),ei=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new ti(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),ni=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ti.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ti.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Zr(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Zr(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Zr(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Zr(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new ei,t}(),ri=Math.log(2),ii=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/ri,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),oi=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,a,s=r-e;if(0===s)return null;if(1===s)return o=t[e],a=n?n(o):o,new ti(a,o.node,ti.BLACK,null,null);var u=parseInt(s/2,10)+e,c=i(e,u),h=i(u+1,r);return o=t[u],a=n?n(o):o,new ti(a,o.node,ti.BLACK,c,h)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),h=t[o],l=n?n(h):h;u(new ti(l,h.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var h=e.nextBitIsOne(),l=Math.pow(2,e.count-(c+1));h?s(l,ti.BLACK):(s(l,ti.BLACK),s(l,ti.RED))}return o}(new ii(t.length));return new ni(r||e,o)},ai={},si=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return he(ai&&Jr,"ChildrenNode.ts has not been loaded"),Yr=Yr||new t({".priority":ai},{".priority":Jr})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Le(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof ni?e:null},t.prototype.hasIndex=function(t){return xe(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){he(e!==Wr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,a=n.getIterator(Vr.Wrap),s=a.getNext();s;)o=o||e.isDefinedOn(s.node),i.push(s),s=a.getNext();r=o?oi(i,e.getCompare()):ai;var u=e.toString(),c=kn({},this.indexSet_);c[u]=e;var h=kn({},this.indexes_);return h[u]=r,new t(h,c)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Fe(this.indexes_,(function(t,i){var o=Le(r.indexSet_,i);if(he(o,"Missing index implementation for "+i),t===ai){if(o.isDefinedOn(e.node)){for(var a=[],s=n.getIterator(Vr.Wrap),u=s.getNext();u;)u.name!==e.name&&a.push(u),u=s.getNext();return a.push(e),oi(a,o.getCompare())}return ai}var c=n.get(e.name),h=t;return c&&(h=h.remove(new Vr(e.name,c))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Fe(this.indexes_,(function(t){if(t===ai)return t;var r=n.get(e.name);return r?t.remove(new Vr(e.name,r)):t})),this.indexSet_)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ui(t,e){return tr(t.name,e.name)}function ci(t,e){return tr(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hi=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&$r(this.priorityNode_),this.children_.isEmpty()&&he(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Xr||(Xr=new t(new ni(ci),null,si.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Xr},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Xr:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(he(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Vr(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Xr:this.priorityNode_;return new t(i,a,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;he(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Jr,(function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+zr(this.getPriority().val())+":"),this.forEachChild(Jr,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":qn(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Vr(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Vr(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Vr(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Vr.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Vr.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===li?-1:0},t.prototype.withIndex=function(e){if(e===Wr||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Wr||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Jr),r=e.getIterator(Jr),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Wr?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),li=new(function(t){function e(){return t.call(this,new ni(ci),hi.EMPTY_NODE,si.Default)||this}return Nn(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return hi.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(hi));Object.defineProperties(Vr,{MIN:{value:new Vr(Jn,hi.EMPTY_NODE)},MAX:{value:new Vr(Zn,li)}}),Br.__EMPTY_NODE=hi.EMPTY_NODE,Qr.__childrenNodeConstructor=hi,mr=li,function(t){Gr=t}(li);function fi(t,e){if(void 0===e&&(e=null),null===t)return hi.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),he(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Qr(t,fi(e));if(t instanceof Array){var n=hi.EMPTY_NODE;return or(t,(function(e,r){if(xe(t,e)&&"."!==e.substring(0,1)){var i=fi(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(fi(e))}var r=[],i=!1;if(or(t,(function(t,e){if("."!==t.substring(0,1)){var n=fi(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Vr(t,n)))}})),0===r.length)return hi.EMPTY_NODE;var o=oi(r,ui,(function(t){return t.name}),ci);if(i){var a=oi(r,Jr.getCompare());return new hi(o,fi(e),new si({".priority":a},{".priority":Jr}))}return new hi(o,fi(e),si.Default)}!function(t){Kr=t}(fi);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var pi,di=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Nn(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?tr(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Vr.MIN},e.prototype.maxPost=function(){return Vr.MAX},e.prototype.makePost=function(t,e){var n=fi(t);return new Vr(e,n)},e.prototype.toString=function(){return".value"},e}(qr)),vi=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,he(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return Nn(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?tr(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=fi(t),r=hi.EMPTY_NODE.updateChild(this.indexPath_,n);return new Vr(e,r)},e.prototype.maxPost=function(){var t=hi.EMPTY_NODE.updateChild(this.indexPath_,li);return new Vr(Zn,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(qr),gi=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Be("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Be("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Be("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Be("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Be("DataSnapshot.child",0,1,arguments.length),e=String(e),Rr("DataSnapshot.child",1,e,!1);var n=new lr(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Jr)},t.prototype.hasChild=function(t){Be("DataSnapshot.hasChild",1,1,arguments.length),Rr("DataSnapshot.hasChild",1,t,!1);var e=new lr(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Be("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Be("DataSnapshot.forEach",1,1,arguments.length),He("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),Jr))}))},t.prototype.hasChildren=function(){return Be("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Be("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Be("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),yi=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Re(this.snapshot.exportVal())},t}(),mi=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),bi=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new yi("value",this,new gi(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){he(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new mi(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),_i=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,xe(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new mi(this,t,e):null},t.prototype.createEvent=function(t,e){he(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new yi(t.type,this,new gi(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){he(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var a=r[0],s=i[0];return!(s!==a||e.callbacks_[a]&&this.callbacks_[s]&&e.callbacks_[a]!==this.callbacks_[s])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),wi=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return he(pi,"Reference.ts has not been loaded"),pi},set:function(t){pi=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Wr){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Jn)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Zn)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Jr){if(null!=e&&!Sr(e)||null!=n&&!Sr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(he(t.getIndex()instanceof vi||t.getIndex()===di,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Be("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Be("Query.on",2,4,arguments.length),Pr("Query.on",1,e,!1),He("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[e]=n,this.onChildEvent(a,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new bi(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new _i(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Be("Query.off",0,3,arguments.length),Pr("Query.off",1,t,!0),He("Query.off",2,e,!0),Ke("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new bi(o,null,n||null)}else t&&(e&&((i={})[t]=e),r=new _i(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var o=this;Be("Query.once",1,4,arguments.length),Pr("Query.once",1,e,!1),He("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),s=!0,u=new ye;u.promise.catch((function(){}));var c=function(t){s&&(s=!1,o.off(e,c),n&&n.bind(a.context)(t),u.resolve(t))};return this.on(e,c,(function(t){o.off(e,c),a.cancel&&a.cancel.bind(a.context)(t),u.reject(t)})),u.promise},t.prototype.limitToFirst=function(e){if(Be("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Be("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Be("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Rr("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new lr(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new vi(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Be("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(Wr);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Be("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Jr);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Be("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(di);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Be("Query.startAt",0,2,arguments.length),Cr("Query.startAt",1,e,this.path,!0),Or("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Be("Query.endAt",0,2,arguments.length),Cr("Query.endAt",1,e,this.path,!0),Or("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Be("Query.equalTo",1,2,arguments.length),Cr("Query.equalTo",1,t,this.path,!1),Or("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Be("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Be("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=rr(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Be("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,He(t,3,r.cancel,!0),r.context=n,Ke(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(We(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Ei=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),Ii=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),Ti=function(t,e,n){return t&&"object"==typeof t?(he(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Si(t[".sv"],e,n):"object"==typeof t[".sv"]?Ci(t[".sv"],e):void he(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Si=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:he(!1,"Unexpected server value: "+t)}},Ci=function(t,e,n){t.hasOwnProperty("increment")||he(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&he(!1,"Unexpected increment value: "+r);var i=e.node();if(he(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},Ni=function(t,e,n,r){return Ai(e,new Ii(n,t),r)},ki=function(t,e,n){return Ai(t,new Ei(e),n)};function Ai(t,e,n){var r,i=t.getPriority().val(),o=Ti(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=Ti(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new Qr(s,fi(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Qr(o))),u.forEachChild(Jr,(function(t,i){var o=Ai(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pi,Oi=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Jr,(function(t,e){n.remember(new lr(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();if(t=t.popFront(),this.children.has(r))this.children.get(r).forget(t)&&this.children.delete(r);return 0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new lr(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Pi||(Pi={}));var Ri,Di,xi=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,he(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),Li=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Pi.ACK_USER_WRITE,this.source=xi.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return he(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new lr(e));return new t(lr.Empty,n,this.revert)}return he(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),Mi=function(){function t(t,e){void 0===e&&(Ri||(Ri=new ni(er)),e=Ri),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return or(e,(function(t,e){n=n.set(new lr(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:lr.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new lr(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r=e.getFront(),i=(this.children.get(r)||t.Empty).setTree(e.popFront(),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(lr.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,lr.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,lr.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(lr.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),Fi=function(){function t(t,e){this.source=t,this.path=e,this.type=Pi.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,lr.Empty):new t(this.source,this.path.popFront())},t}(),Ui=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Pi.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,lr.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),ji=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Pi.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new lr(e));return n.isEmpty()?null:n.value?new Ui(this.source,lr.Empty,n.value):new t(this.source,lr.Empty,n)}return he(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Vi=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),qi=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new Vi(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new Vi(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new Vi(hi.EMPTY_NODE,!1,!1),new Vi(hi.EMPTY_NODE,!1,!1)),t}(),Bi=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),Wi=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){he(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Bi.childRemovedChange(e,a)):he(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Bi.childAddedChange(e,n)):o.trackChildChange(Bi.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Jr,(function(t,r){e.hasChild(t)||n.trackChildChange(Bi.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(Jr,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(Bi.childChangedChange(e,r,i))}else n.trackChildChange(Bi.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?hi.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Hi=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;he(e===Bi.CHILD_ADDED||e===Bi.CHILD_CHANGED||e===Bi.CHILD_REMOVED,"Only child changes supported for tracking"),he(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===Bi.CHILD_ADDED&&i===Bi.CHILD_REMOVED)this.changeMap.set(n,Bi.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===Bi.CHILD_REMOVED&&i===Bi.CHILD_ADDED)this.changeMap.delete(n);else if(e===Bi.CHILD_REMOVED&&i===Bi.CHILD_CHANGED)this.changeMap.set(n,Bi.childRemovedChange(n,r.oldSnap));else if(e===Bi.CHILD_CHANGED&&i===Bi.CHILD_ADDED)this.changeMap.set(n,Bi.childAddedChange(n,t.snapshotNode));else{if(e!==Bi.CHILD_CHANGED||i!==Bi.CHILD_CHANGED)throw le("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Bi.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Ki=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Gi=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Vi(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),zi=function(t,e){this.viewCache=t,this.changes=e},$i=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){he(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),he(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,a,s=new Hi;if(n.type===Pi.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(e,u.path,u.snap,r,i,s):(he(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.getServerCache().isFiltered()&&!u.path.isEmpty(),o=this.applyServerOverwrite_(e,u.path,u.snap,r,i,a,s))}else if(n.type===Pi.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(e,c.path,c.children,r,i,s):(he(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,c.path,c.children,r,i,a,s))}else if(n.type===Pi.ACK_USER_WRITE){var h=n;o=h.revert?this.revertUserWrite_(e,h.path,r,i,s):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,s)}else{if(n.type!==Pi.LISTEN_COMPLETE)throw le("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,s)}var l=s.getChanges();return t.maybeAddValueEvent_(e,o,l),new zi(o,l)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Bi.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,s=void 0;if(e.isEmpty())if(he(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof hi?u:hi.EMPTY_NODE,h=n.calcCompleteEventChildren(c);a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var l=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var f=e.getFront();if(".priority"===f){he(1===e.getLength(),"Can't have a priority with additional path components");var p=o.getNode();s=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,p,s);a=null!=d?this.filter_.updatePriority(p,d):o.getNode()}else{var v=e.popFront(),g=void 0;if(o.isCompleteForChild(f)){s=t.getServerCache().getNode();var y=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),s);g=null!=y?o.getNode().getImmediateChild(f).updateChild(v,y):o.getNode().getImmediateChild(f)}else g=n.calcCompleteChild(f,t.getServerCache());a=null!=g?this.filter_.updateChild(o.getNode(),f,g,v,r,i):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,a){var s,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(e,n);s=c.updateFullNode(u.getNode(),h,null)}else{var l=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),p=u.getNode().getImmediateChild(l).updateChild(f,n);s=".priority"===l?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),l,p,f,Ki,null)}var d=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),v=new Gi(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,v,a)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var a,s,u=t.getEventCache(),c=new Gi(r,t,i);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var h=e.getFront();if(".priority"===h)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var l=e.popFront(),f=u.getNode().getImmediateChild(h),p=void 0;if(l.isEmpty())p=n;else{var d=c.getCompleteChild(h);p=null!=d?".priority"===l.getBack()&&d.getChild(l.parent()).isEmpty()?d:d.updateChild(l,n):hi.EMPTY_NODE}if(f.equals(p))a=t;else{var v=this.filter_.updateChild(u.getNode(),h,p,l,c,o);a=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,a){var s=this,u=e;return r.foreach((function(r,c){var h=n.child(r);t.cacheHasChild_(e,h.getFront())&&(u=s.applyUserOverwrite_(u,h,c,i,o,a))})),r.foreach((function(r,c){var h=n.child(r);t.cacheHasChild_(e,h.getFront())||(u=s.applyUserOverwrite_(u,h,c,i,o,a))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,a){var s=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:Mi.Empty.setTree(e,n);var h=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(h.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),l=s.applyMerge_(u,n);c=s.applyServerOverwrite_(c,new lr(e),l,r,i,o,a)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!h.hasChild(e)&&!u){var l=t.getServerCache().getNode().getImmediateChild(e),f=s.applyMerge_(l,n);c=s.applyServerOverwrite_(c,new lr(e),f,r,i,o,a)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,s.getNode().getChild(e),r,i,a,o);if(e.isEmpty()){var u=Mi.Empty;return s.getNode().forEachChild(Wr,(function(t,e){u=u.set(new lr(t),e)})),this.applyServerMerge_(t,e,u,r,i,a,o)}return t}var c=Mi.Empty;return n.foreach((function(t,n){var r=e.child(t);s.isCompleteForPath(r)&&(c=c.set(t,s.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,a,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Ki,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var a=new Gi(n,t,r),s=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();he(h instanceof hi,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(h)}c=c,u=this.filter_.updateFullNode(s,c,i)}else{var l=e.getFront(),f=n.calcCompleteChild(l,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(l)&&(f=s.getImmediateChild(l)),(u=null!=f?this.filter_.updateChild(s,l,f,e.popFront(),a,i):t.getEventCache().getNode().hasChild(l)?this.filter_.updateChild(s,l,hi.EMPTY_NODE,e.popFront(),a,i):s).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(lr.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},t}(),Qi=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===Bi.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(Bi.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,Bi.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,Bi.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,Bi.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,Bi.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,Bi.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,a=n.filter((function(t){return t.type===e}));a.sort(this.compareChanges_.bind(this)),a.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw le("Should only compare child_ events.");var n=new Vr(t.childName,t.snapshotNode),r=new Vr(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Yi=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Wi(n.getIndex()),i=n.getNodeFilter();this.processor_=new $i(i);var o=e.getServerCache(),a=e.getEventCache(),s=r.updateFullNode(hi.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(hi.EMPTY_NODE,a.getNode(),null),c=new Vi(s,o.isFullyInitialized(),r.filtersNodes()),h=new Vi(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new qi(h,c),this.eventGenerator_=new Qi(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){he(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){e=e;var i=t.createCancelEvent(e,r);i&&n.push(i)}))}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===Pi.MERGE&&null!==t.source.queryId&&(he(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),he(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),he(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];e.getNode().isLeafNode()||e.getNode().forEachChild(Jr,(function(t,e){n.push(Bi.childAddedChange(t,e))}));return e.isFullyInitialized()&&n.push(Bi.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),Xi=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return he(Di,"Reference.ts has not been loaded"),Di},set:function(t){he(!Di,"__referenceConstructor has already been defined"),Di=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var a=this.views.get(o);return he(null!=a,"SyncTree gave us an op for an invalid query."),a.applyOperation(t,e,n)}var s=[];try{for(var u=On(this.views.values()),c=u.next();!c.done;c=u.next()){a=c.value;s=s.concat(a.applyOperation(t,e,n))}}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return s},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),a=this.views.get(o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;s?u=!0:r instanceof hi?(s=n.calcCompleteEventChildren(r),u=!1):(s=hi.EMPTY_NODE,u=!1);var c=new qi(new Vi(s,u,!1),new Vi(r,i,!1));a=new Yi(t,c),this.views.set(o,a)}return a.addEventRegistration(e),a.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i,o,a=e.queryIdentifier(),s=[],u=[],c=this.hasCompleteView();if("default"===a)try{for(var h=On(this.views.entries()),l=h.next();!l.done;l=h.next()){var f=Rn(l.value,2),p=f[0],d=f[1];u=u.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(p),d.getQuery().getQueryParams().loadsAllData()||s.push(d.getQuery()))}}catch(t){i={error:t}}finally{try{l&&!l.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}else(d=this.views.get(a))&&(u=u.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(a),d.getQuery().getQueryParams().loadsAllData()||s.push(d.getQuery())));return c&&!this.hasCompleteView()&&s.push(new t.__referenceConstructor(e.repo,e.path)),{removed:s,events:u}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=On(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=On(this.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r||a.getCompleteServerCache(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=On(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Ji=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new Mi(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=lr.relativePath(i,e);return o=o.updateChild(a,n),new t(this.writeTree_.set(i,o))}var s=new Mi(n);return new t(this.writeTree_.setTree(e,s))},t.prototype.addWrites=function(t,e){var n=this;return or(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,Mi.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(lr.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Jr,(function(e,n){t.push(new Vr(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Vr(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new Mi(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return Zi(lr.Empty,this.writeTree_,t)},t.Empty=new t(new Mi(null)),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?(he(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Zi(t.child(e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(t.child(".priority"),r)),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var to=function(){function t(){this.visibleWrites_=Ji.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new eo(t,this)},t.prototype.addOverwrite=function(t,e,n,r){he(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){he(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));he(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&a>=0;){var s=this.allWrites_[a];s.visible&&(a>=n&&this.recordContainsPath_(s,r.path)?i=!1:r.path.contains(s.path)&&(o=!0)),a--}if(i){if(o)return this.resetTree_(),!0;r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):or(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))}));return!0}return!1},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);if(!i&&o.isEmpty())return n;if(i||null!=n||o.hasCompleteWrite(lr.Empty)){var a=t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e);c=n||hi.EMPTY_NODE;return a.apply(c)}return null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var u=this.visibleWrites_.childCompoundWrite(e);if(u.isEmpty())return n;if(null!=n||u.hasCompleteWrite(lr.Empty)){var c=n||hi.EMPTY_NODE;return u.apply(c)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=hi.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Jr,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Jr,(function(t,e){var r=i.childCompoundWrite(new lr(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){he(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(t),u=s.getCompleteNode(lr.Empty);if(null!=u)a=u;else{if(null==e)return[];a=s.apply(e)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var c=[],h=o.getCompare(),l=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),f=l.getNext();f&&c.length<r;)0!==h(f,n)&&c.push(f),f=l.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,lr.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Ji.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)n.contains(a)?(s=lr.relativePath(n,a),r=r.addWrite(s,o.snap)):a.contains(n)&&(s=lr.relativePath(a,n),r=r.addWrite(lr.Empty,o.snap.getChild(s)));else{if(!o.children)throw le("WriteRecord should have .snap or .children");if(n.contains(a))s=lr.relativePath(n,a),r=r.addWrites(s,o.children);else if(a.contains(n))if((s=lr.relativePath(a,n)).isEmpty())r=r.addWrites(lr.Empty,o.children);else{var u=Le(o.children,s.getFront());if(u){var c=u.getChild(s.popFront());r=r.addWrite(lr.Empty,c)}}}}}return r},t}(),eo=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),no=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=Mi.Empty,this.pendingWriteTree_=new to,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Ui(xi.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=Mi.fromObject(e);return this.applyOperationToSyncPoints_(new ji(xi.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=Mi.Empty;return null!=n.snap?r=r.set(lr.Empty,!0):or(n.children,(function(t,e){r=r.set(new lr(t),e)})),this.applyOperationToSyncPoints_(new Li(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Ui(xi.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=Mi.fromObject(e);return this.applyOperationToSyncPoints_(new ji(xi.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Fi(xi.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=lr.relativePath(a,e),c=new Ui(xi.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=lr.relativePath(a,e),c=Mi.fromObject(n),h=new ji(xi.forServerTaggedQuery(s),u,c);return this.applyTaggedOperation_(a,h)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,a=i.queryId,s=lr.relativePath(o,e),u=new Fi(xi.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=lr.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var a,s=this.syncPointTree_.get(r);(s?(o=o||s.hasCompleteView(),i=i||s.getCompleteServerCache(lr.Empty)):(s=new Xi,this.syncPointTree_=this.syncPointTree_.set(r,s)),null!=i)?a=!0:(a=!1,i=hi.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(lr.Empty);n&&(i=i.updateImmediateChild(t,n))})));var u=s.viewExistsForQuery(e);if(!u&&!e.getQueryParams().loadsAllData()){var c=t.makeQueryKey_(e);he(!this.queryToTagMap.has(c),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(c,h),this.tagToQueryMap.set(h,c)}var l=this.pendingWriteTree_.childWrites(r),f=s.addEventRegistration(e,n,l,i,a);if(!u&&!o){var p=s.viewForQuery(e);f=f.concat(this.setupListener_(e,p))}return f},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===e.queryIdentifier()||a.viewExistsForQuery(e))){var u=a.removeEventRegistration(e,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;s=u.events;var h=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),l=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(h&&!l){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var v=p[d],g=v.getQuery(),y=this.createListenerForView_(v);this.listenProvider_.startListening(t.queryForListening_(g),this.tagForQuery_(g),y.hashFn,y.onComplete)}}if(!l&&c.length>0&&!r)if(h){this.listenProvider_.stopListening(t.queryForListening_(e),null)}else c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}));this.removeTags_(c)}return s},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=lr.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),or(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),s=this.syncPointTree_.subtree(r);if(i)he(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),or(n,(function(t,e){r=r.concat(e)})),r})),c=0;c<u.length;++c){var h=u[c];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||hi.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return he(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new lr(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);he(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(lr.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(lr.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(lr.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,h=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,h))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(lr.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(lr.Empty));var a=[];return e.children.inorderTraversal((function(e,o){var s=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(a=a.concat(i.applyOperationDescendantsHelper_(c,o,s,u)))})),o&&(a=a.concat(o.applyOperation(t,r,n))),a},t.nextQueryTag_=1,t}(),ro=function(){function t(){this.rootNode_=hi.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),io=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),xe(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return ve(this.counters_)},t}(),oo=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new io),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),ao=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=kn({},t);return this.last_&&or(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),so=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new ao(t);var n=1e4+2e4*Math.random();hr(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;or(e,(function(e,i){i>0&&xe(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),hr(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),uo=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new co(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r)t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),co=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();Wn&&Gn("event: "+e.toString()),cr(n)}}},t.prototype.getPath=function(){return this.path_},t}(),ho=function(){function t(t){this.allowedEvents_=t,this.listeners_={},he(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Dn(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){he(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),lo=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Nn(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return he("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ho),fo=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||be()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Nn(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return he("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ho),po=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&cr((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},t}(),vo=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zn(t),this.stats_=oo.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new po(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new go((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Rn(t,5),i=r[0],o=r[1],a=r[2];r[3],r[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Rn(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!!t.forceAllow_||!(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Re(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=(n=fe(e),pe.encodeByteArray(n,!0)),i=ir(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},t.prototype.incrementIncomingBytes_=function(t){var e=Re(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),go=function(){function t(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Vn(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(t){Gn("frame writing exception"),t.stack&&Gn(t.stack),Gn(t)}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Gn("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){Gn("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},t}(),yo="";function mo(t){yo=t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bo=null;"undefined"!=typeof MozWebSocket?bo=MozWebSocket:"undefined"!=typeof WebSocket&&(bo=WebSocket);var _o=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zn(this.connId),this.stats_=oo.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Fn.set("previous_websocket_failure",!0);try{if(Ie());else{var r={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new bo(this.connURL,[],r)}}catch(t){this.log_("Error instantiating WebSocket.");var i=t.message||t.data;return i&&this.log_(i),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==bo&&!t.forceDisallow_},t.previouslyFailed=function(){return Fn.isInMemoryStorage||!0===Fn.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){Fn.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Oe(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(he(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Re(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=ir(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),wo=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[vo,_o]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=_o&&_o.isAvailable(),o=i&&!_o.previouslyFailed();if(e.webSocketOnly&&(i||Yn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[_o];else{var a=this.transports_=[];try{for(var s=On(t.ALL_TRANSPORTS),u=s.next();!u.done;u=s.next()){var c=u.value;c&&c.isAvailable()&&a.push(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Eo=function(){function t(t,e,n,r,i,o,a,s){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=a,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zn("c:"+this.id+":"),this.transportManager_=new wo(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=hr((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=nr("t",t),n=nr("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=nr("t",t),n=nr("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=nr("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?$n("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):$n("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Yn("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),hr((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):hr((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Fn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Io=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),To=function(t){function e(n,r,i,o,a,s,u){var c=t.call(this)||this;if(c.repoInfo_=n,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=o,c.onServerInfoUpdate_=a,c.authTokenProvider_=s,c.authOverride_=u,c.id=e.nextPersistentConnectionId_++,c.log_=zn("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingGets_=[],c.outstandingPutCount_=0,c.outstandingGetCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=1e3,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,u&&!Ie())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return c.scheduleConnect_(0),lo.getInstance().on("visible",c.onVisible_,c),-1===n.host.indexOf("fblocal")&&fo.getInstance().on("online",c.onOnline_,c),c}return Nn(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Re(i)),he(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new ye,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[o];void 0!==t&&i===t&&(delete e.outstandingGets_[o],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),he(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),he(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r.queryObject(),a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&xe(t,"w")){var n=Le(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();Yn("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=De(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t,e=this;if(this.connected_&&this.authToken_){var n=this.authToken_,r=(t=De(n).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,(function(t){var r=t.s,i=t.d||"error";e.authToken_===n&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),he(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Re(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):$n("Unrecognized action received from server: "+Re(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;he(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,a=this,s=this.lastSessionId,u=!1,c=null,h=function(){c?c.close():(u=!0,i())};this.realtime_={close:h,sendRequest:function(t){he(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}};var l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(l).then((function(t){u?Gn("getToken() completed but was canceled"):(Gn("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,c=new Eo(o,a.repoInfo_,a.applicationId_,n,r,i,(function(t){Yn(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")}),s))})).then(null,(function(e){a.log_("Failed to get token: "+e),u||(t.repoInfo_.nodeAdmin&&Yn(e),h())}))}},e.prototype.interrupt=function(t){Gn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){Gn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Me(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return rr(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new lr(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){Gn("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=On(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,On(a.values())),u=s.next();!u.done;u=s.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},e.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+yo.replace(/\./g,"-")]=1,be()?t["framework.cordova"]=1:Ee()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=fo.getInstance().currentlyOnline();return Me(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Io),So=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=zn("p:rest:"),i.listens_={},i}return Nn(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(he(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var s=e.getListenId_(t,r),u={};this.listens_[s]=u;var c=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",c,(function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,r),Le(o.listens_,s)===u)&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=t.getQueryParams().toRestQueryStringParameters(),r=t.path.toString(),i=new ye;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e.auth=o);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}(e);r.log_("Sending REST request for "+a);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(n&&4===s.readyState){r.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);var t=null;if(s.status>=200&&s.status<300){try{t=Oe(s.responseText)}catch(t){Yn("Failed to parse JSON response for "+a+": "+s.responseText)}n(null,t)}else 401!==s.status&&404!==s.status&&Yn("Got unsuccessful REST response for "+a+" Status: "+s.status),n(s.status);n=null}},s.open("GET",a,!0),s.send()}))},e}(Io),Co=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new uo,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Oi,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=oo.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new So(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Re(e)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new To(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),this.statsReporter_=oo.getOrCreateReporter(this.repoInfo_,(function(){return new so(t.stats_,t.server_)})),this.transactionsInit_(),this.infoData_=new ro,this.infoSyncTree_=new no({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e.path);return a.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new no({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);t.eventQueue_.raiseEventsForChangedPath(e.path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new lr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new lr(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var a=Fe(e,(function(t){return fi(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var s=fi(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)}else if(n){var u=Fe(e,(function(t){return fi(t)}));o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=fi(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var h=i;o.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;or(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new lr("/.info/"+t),r=fi(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this;return this.server_.get(t).then((function(n){var r=fi(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return e.eventQueue_.raiseEventsAtPath(t.path,i),Promise.resolve(new gi(r,t.getRef(),t.getQueryParams().getIndex()))}),(function(n){e.log_("get for query "+Re(t)+" falling back to cache after error: "+n);var r=e.serverSyncTree_.calcCompleteEventCache(t.path);return r.isEmpty()?Promise.reject(new Error(n)):Promise.resolve(new gi(r,t.getRef(),t.getQueryParams().getIndex()))}))},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),a=fi(e,n),s=this.serverSyncTree_.calcCompleteEventCache(t),u=ki(a,s,o),c=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(h),this.server_.put(t.toString(),a.val(!0),(function(e,n){var o="ok"===e;o||Yn("set at "+t+" failed: "+e);var a=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,a),i.callOnCompleteCallback(r,e,n)}));var l=this.abortTransactions_(t);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),a={};if(or(e,(function(e,n){i=!1,a[e]=Ni(t.child(e),fi(n),r.serverSyncTree_,o)})),i)Gn("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var s=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,a,s);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||Yn("update at "+t+" failed: "+e);var a=r.serverSyncTree_.ackUserWrite(s,!o),u=a.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,a),r.callOnCompleteCallback(n,e,i)})),or(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new Oi;this.onDisconnect_.forEachTree(lr.Empty,(function(r,i){var o=Ni(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(lr.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new Oi,this.eventQueue_.raiseEventsForChangedPath(lr.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=fi(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=fi(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Me(e))return Gn("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&or(e,(function(e,n){var i=fi(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new ao(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);or(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),Gn.apply(void 0,Dn([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&cr((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new Uo(this))},enumerable:!1,configurable:!0}),t}(),No=function(){function t(e){this.indexedFilter_=new Wi(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Vr(e,n))||(n=hi.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=hi.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(hi.EMPTY_NODE);var i=this;return e.forEachChild(Jr,(function(t,e){i.matches(new Vr(t,e))||(r=r.updateImmediateChild(t,hi.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),ko=function(){function t(t){this.rangedFilter_=new No(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Vr(e,n))||(n=hi.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=hi.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=hi.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(hi.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(t,e){return h(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var l=!1;i.hasNext();){a=i.getNext();!l&&c(s,a)<=0&&(l=!0),l&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,hi.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var s=t;he(s.numChildren()===this.limit_,"");var u=new Vr(e,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var l=s.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(Bi.childChangedChange(e,n,l)),s.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Bi.childRemovedChange(e,l));var d=s.updateImmediateChild(e,hi.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Bi.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?t:h&&o(c,u)>=0?(null!=i&&(i.trackChildChange(Bi.childRemovedChange(c.name,c.node)),i.trackChildChange(Bi.childAddedChange(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(c.name,hi.EMPTY_NODE)):t},t}(),Ao=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jr}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return he(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return he(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Jn},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return he(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return he(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Zn},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return he(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==Jr&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Jr},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new Wi(this.getIndex()):this.hasLimit()?new ko(this):new No(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===Jr?e=n.PRIORITY_INDEX:this.index_===di?e=n.VALUE_INDEX:this.index_===Wr?e=n.KEY_INDEX:(he(this.index_ instanceof vi,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=Re(e),this.startSet_&&(r[n.START_AT]=Re(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+Re(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=Re(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+Re(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),Po=function(t){function e(e,n){if(!(e instanceof Co))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,Ao.DEFAULT,!1)||this}return Nn(e,t),e.prototype.getKey=function(){return Be("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Be("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof lr||(null===this.path.getFront()?Dr("Reference.child",1,t,!1):Rr("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Be("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Be("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Be("Reference.set",1,2,arguments.length),xr("Reference.set",this.path),Cr("Reference.set",1,t,this.path,!1),He("Reference.set",2,e,!0);var n=new ye;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Be("Reference.update",1,2,arguments.length),xr("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Yn("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}kr("Reference.update",1,t,this.path,!1),He("Reference.update",2,e,!0);var i=new ye;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Be("Reference.setWithPriority",2,3,arguments.length),xr("Reference.setWithPriority",this.path),Cr("Reference.setWithPriority",1,t,this.path,!1),Ar("Reference.setWithPriority",2,e,!1),He("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new ye;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Be("Reference.remove",0,1,arguments.length),xr("Reference.remove",this.path),He("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Be("Reference.transaction",1,3,arguments.length),xr("Reference.transaction",this.path),He("Reference.transaction",1,t,!1),He("Reference.transaction",2,e,!0),Mr("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new ye;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new Ur(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Be("Reference.setPriority",1,2,arguments.length),xr("Reference.setPriority",this.path),Ar("Reference.setPriority",1,t,!1),He("Reference.setPriority",2,e,!0);var n=new ye;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Be("Reference.push",0,2,arguments.length),xr("Reference.push",this.path),Cr("Reference.push",1,t,this.path,!0),He("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=jr(r),o=this.child(i),a=this.child(i);return n=null!=t?o.set(t,e).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return xr("Reference.onDisconnect",this.path),new Fr(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(wi);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wi.__referenceConstructor=Po,Xi.__referenceConstructor=Po;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Oo,Ro=function(){this.children={},this.childCount=0,this.value=null},Do=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Ro),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof lr?e:new lr(e),r=this,i=n.getFront();null!==i;){r=new t(i,r,Le(r.node_.children,i)||new Ro),i=(n=n.popFront()).getFront()}return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){he(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;or(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new lr(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=xe(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(Oo||(Oo={})),Co.MAX_TRANSACTION_RETRIES_=25,Co.prototype.transactionsInit_=function(){this.transactionQueueTree_=new Do},Co.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new Po(this,t);o.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:Vn(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=this.getLatestState_(t);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var c=new gi(a.currentInputSnapshot,new Po(this,a.path),Jr);a.onComplete(null,!1,c)}}else{Nr("transaction failed: Data returned ",u,a.path),a.status=Oo.RUN;var h=this.transactionQueueTree_.subTree(t),l=h.getValue()||[];l.push(a),h.setValue(l);var f=void 0;if("object"==typeof u&&null!==u&&xe(u,".priority"))f=Le(u,".priority"),he(Sr(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else f=(this.serverSyncTree_.calcCompleteEventCache(t)||hi.EMPTY_NODE).getPriority().val();f=f;var p=this.generateServerValues(),d=fi(u,f),v=ki(d,s,p);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_();var g=this.serverSyncTree_.applyUserOverwrite(t,v,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,g),this.sendReadyTransactions_()}},Co.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||hi.EMPTY_NODE},Co.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);he(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===Oo.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},Co.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),o=i,a=i.hash(),s=0;s<e.length;s++){var u=e[s];he(u.status===Oo.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=Oo.SENT,u.retryCount++;var c=lr.relativePath(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var h=o.val(!0),l=t;this.server_.put(l.toString(),h,(function(r){n.log_("transaction put response",{path:l.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<e.length;a++){if(e[a].status=Oo.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[a].currentWriteId)),e[a].onComplete){var s=e[a].currentOutputSnapshotResolved,u=new Po(n,e[a].path),c=new gi(s,u,Jr);o.push(e[a].onComplete.bind(null,null,!0,c))}e[a].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i);for(a=0;a<o.length;a++)cr(o[a])}else{if("datastale"===r)for(a=0;a<e.length;a++)e[a].status===Oo.SENT_NEEDS_ABORT?e[a].status=Oo.NEEDS_ABORT:e[a].status=Oo.RUN;else{Yn("transaction at "+l.toString()+" failed: "+r);for(a=0;a<e.length;a++)e[a].status=Oo.NEEDS_ABORT,e[a].abortReason=r}n.rerunTransactions_(t)}}),a)},Co.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},Co.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter((function(t){return t.status===Oo.RUN})).map((function(t){return t.currentWriteId})),a=0;a<t.length;a++){var s=t[a],u=lr.relativePath(e,s.path),c=!1,h=void 0;if(he(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===Oo.NEEDS_ABORT)c=!0,h=s.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===Oo.RUN)if(s.retryCount>=Co.MAX_TRANSACTION_RETRIES_)c=!0,h="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var l=this.getLatestState_(s.path,o);s.currentInputSnapshot=l;var f=t[a].update(l.val());if(void 0!==f){Nr("transaction failed: Data returned ",f,s.path);var p=fi(f);"object"==typeof f&&null!=f&&xe(f,".priority")||(p=p.updatePriority(l.getPriority()));var d=s.currentWriteId,v=this.generateServerValues(),g=ki(p,l,v);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=g,s.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(d),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(s.path,g,s.currentWriteId,s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,h="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],c&&(t[a].status=Oo.COMPLETED,n=t[a].unwatcher,setTimeout(n,Math.floor(0)),t[a].onComplete))if("nodata"===h){var y=new Po(this,t[a].path),m=t[a].currentInputSnapshot,b=new gi(m,y,Jr);r.push(t[a].onComplete.bind(null,null,!1,b))}else r.push(t[a].onComplete.bind(null,new Error(h),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(a=0;a<r.length;a++)cr(r[a]);this.sendReadyTransactions_()}},Co.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},Co.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},Co.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},Co.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Oo.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},Co.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},Co.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status===Oo.SENT_NEEDS_ABORT);else if(e[o].status===Oo.SENT)he(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=Oo.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(he(e[o].status===Oo.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)cr(n[o])}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var xo,Lo=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(Gn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Yn(t)},t}(),Mo=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),Fo=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return xo||(xo=new t),xo},t.prototype.interrupt=function(){var t,e,n,r;try{for(var i=On(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,On(Object.keys(this.repos_[a]))),u=s.next();!u.done;u=s.next()){var c=u.value;this.repos_[a][c].interrupt()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var i=On(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,On(Object.keys(this.repos_[a]))),u=s.next();!u.done;u=s.next()){var c=u.value;this.repos_[a][c].resume()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new pr(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new Mo)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||Qn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Gn("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,a=br(i,r),s=a.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,i="http://"+u+"?ns="+s.namespace,s=(a=br(i,r)).repoInfo):o=!a.repoInfo.secure;var c=r&&o?new Mo:new Lo(t,e);return Lr("Invalid Firebase Database URL",1,a),a.path.isEmpty()||Qn("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(s,t,c).database},t.prototype.deleteRepo=function(t){var e=Le(this.repos_,t.app.name);e&&Le(e,t.key)===t||Qn("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Le(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=Le(r,t.toURLString());return i&&Qn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Co(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),Uo=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return An(e,void 0,void 0,(function(){return Pn(this,(function(t){return this.checkDeleted_("delete"),Fo.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof Co||Qn("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Po(this.repo_,lr.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?Qn("Cannot call useEmulator() after instance has already been initialized."):Fo.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Be("database.ref",0,1,arguments.length),t instanceof Po?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Be(e,1,1,arguments.length);var n=br(t,this.repo_.repoInfo_.nodeAdmin);Lr(e,1,n);var r=n.repoInfo;return r.isCustomHost()||r.host===this.repo_.repoInfo_.host||Qn(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&Qn("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Be("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Be("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}();var jo=Object.freeze({__proto__:null,forceLongPolling:function(){_o.forceDisallow(),vo.forceAllow()},forceWebSockets:function(){vo.forceDisallow()},isWebSocketsAvailable:function(){return _o.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,a=t.nodeAdmin,s=void 0!==a&&a;mo(r);var u=new tn("auth-internal",new nn("database-standalone"));return u.setComponent(new Ze("auth-internal",(function(){return i}),"PRIVATE")),{instance:Fo.getInstance().databaseFromApp(e,u,n,s),namespace:o}}}),Vo=To;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */To.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},To.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var qo=Eo,Bo=pr,Wo=Object.freeze({__proto__:null,DataConnection:Vo,RealTimeConnection:qo,hijackHash:function(t){var e=To.prototype.put;return To.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){To.prototype.put=e}},ConnectionTarget:Bo,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Fo.getInstance().forceRestClient(t)}}),Ho=Uo.ServerValue;!function(t){mo(t.SDK_VERSION),t.INTERNAL.registerComponent(new Ze("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return Fo.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:Po,Query:wi,Database:Uo,DataSnapshot:gi,enableLogging:Kn,INTERNAL:jo,ServerValue:Ho,TEST_ACCESS:Wo}).setMultipleInstances(!0)),t.registerVersion("@firebase/database","0.8.1")}(Sn);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Ko=function(t,e){return(Ko=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Go(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var zo,$o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Qo=Qo||{},Yo=$o||self;function Xo(){}function Jo(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Zo(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ta="closure_uid_"+(1e9*Math.random()>>>0),ea=0;function na(t,e,n){return t.call.apply(t.bind,arguments)}function ra(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ia(t,e,n){return(ia=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:ra).apply(null,arguments)}function oa(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function aa(){return Date.now()}function sa(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ua(){this.j=this.j,this.i=this.i}ua.prototype.j=!1,ua.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(t){Object.prototype.hasOwnProperty.call(t,ta)&&t[ta]||(t[ta]=++ea)})(this)},ua.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var ca=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ha=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function la(t){return Array.prototype.concat.apply([],arguments)}function fa(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function pa(t){return/^[\s\xa0]*$/.test(t)}var da,va=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ga(t,e){return-1!=t.indexOf(e)}function ya(t,e){return t<e?-1:t>e?1:0}t:{var ma=Yo.navigator;if(ma){var ba=ma.userAgent;if(ba){da=ba;break t}}da=""}function _a(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function wa(t){var e={};for(var n in t)e[n]=t[n];return e}var Ea="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ia(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Ea.length;o++)n=Ea[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ta(t){return Ta[" "](t),t}Ta[" "]=Xo;var Sa,Ca,Na=ga(da,"Opera"),ka=ga(da,"Trident")||ga(da,"MSIE"),Aa=ga(da,"Edge"),Pa=Aa||ka,Oa=ga(da,"Gecko")&&!(ga(da.toLowerCase(),"webkit")&&!ga(da,"Edge"))&&!(ga(da,"Trident")||ga(da,"MSIE"))&&!ga(da,"Edge"),Ra=ga(da.toLowerCase(),"webkit")&&!ga(da,"Edge");function Da(){var t=Yo.document;return t?t.documentMode:void 0}t:{var xa="",La=(Ca=da,Oa?/rv:([^\);]+)(\)|;)/.exec(Ca):Aa?/Edge\/([\d\.]+)/.exec(Ca):ka?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ca):Ra?/WebKit\/(\S+)/.exec(Ca):Na?/(?:Version)[ \/]?(\S+)/.exec(Ca):void 0);if(La&&(xa=La?La[1]:""),ka){var Ma=Da();if(null!=Ma&&Ma>parseFloat(xa)){Sa=String(Ma);break t}}Sa=xa}var Fa,Ua={};function ja(t){return function(t,e){var n=Ua;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=va(String(Sa)).split("."),r=va(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=ya(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ya(0==a[2].length,0==s[2].length)||ya(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(Yo.document&&ka){var Va=Da();Fa=Va||(parseInt(Sa,10)||void 0)}else Fa=void 0;var qa=Fa,Ba=!ka||9<=Number(qa),Wa=ka&&!ja("9"),Ha=function(){if(!Yo.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Yo.addEventListener("test",Xo,e),Yo.removeEventListener("test",Xo,e)}catch(t){}return t}();function Ka(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Ga(t,e){if(Ka.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Oa){t:{try{Ta(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:za[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Ka.prototype.b=function(){this.defaultPrevented=!0},sa(Ga,Ka);var za={2:"touch",3:"pen",4:"mouse"};Ga.prototype.b=function(){Ga.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Wa)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var $a="closure_listenable_"+(1e6*Math.random()|0),Qa=0;function Ya(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Qa,this.Y=this.Z=!1}function Xa(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Ja(t){this.src=t,this.a={},this.b=0}function Za(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=ca(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Xa(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ts(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Ja.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=ts(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new Ya(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var es="closure_lm_"+(1e6*Math.random()|0),ns={};function rs(t,e,n,r,i){if(r&&r.once)return os(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)rs(t,e[o],n,r,i);return null}return n=ps(n),t&&t[$a]?t.va(e,n,Zo(r)?!!r.capture:!!r,i):is(t,e,n,!1,r,i)}function is(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=Zo(i)?!!i.capture:!!i;if(a&&!Ba)return null;var s=ls(t);if(s||(t[es]=s=new Ja(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=hs,e=Ba?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ha||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(us(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function os(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)os(t,e[o],n,r,i);return null}return n=ps(n),t&&t[$a]?t.wa(e,n,Zo(r)?!!r.capture:!!r,i):is(t,e,n,!0,r,i)}function as(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)as(t,e[o],n,r,i);else r=Zo(r)?!!r.capture:!!r,n=ps(n),t&&t[$a]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=ts(o=t.a[e],n,r,i))&&(Xa(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=ls(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ts(e,n,r,i)),(n=-1<t?e[t]:null)&&ss(n))}function ss(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[$a])Za(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(us(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ls(e))?(Za(n,t),0==n.b&&(n.src=null,e[es]=null)):Xa(t)}}}function us(t){return t in ns?ns[t]:ns[t]="on"+t}function cs(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&ss(t),n.call(r,e)}function hs(t,e){if(t.Y)return!0;if(!Ba){if(!e)t:{e=["window","event"];for(var n=Yo,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return cs(t,e=new Ga(e,this))}return cs(t,new Ga(e,this))}function ls(t){return(t=t[es])instanceof Ja?t:null}var fs="__closure_events_fn_"+(1e9*Math.random()>>>0);function ps(t){return"function"==typeof t?t:(t[fs]||(t[fs]=function(e){return t.handleEvent(e)}),t[fs])}function ds(){ua.call(this),this.c=new Ja(this),this.J=this,this.C=null}function vs(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Ka(e,t);else if(e instanceof Ka)e.target=e.target||t;else{var i=e;Ia(e=new Ka(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.a=n[o];i=gs(a,r,!0,e)&&i}if(i=gs(a=e.a=t,r,!0,e)&&i,i=gs(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=gs(a=e.a=n[o],r,!1,e)&&i}function gs(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&Za(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}sa(ds,ua),ds.prototype[$a]=!0,(zo=ds.prototype).addEventListener=function(t,e,n,r){rs(this,t,e,n,r)},zo.removeEventListener=function(t,e,n,r){as(this,t,e,n,r)},zo.G=function(){if(ds.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Xa(n[r]);delete e.a[t],e.b--}}this.C=null},zo.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},zo.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var ys=Yo.JSON.stringify;function ms(){this.b=this.a=null}var bs,_s=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Es}),(function(t){t.reset()}));function ws(){var t=Cs,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Es(){this.next=this.b=this.a=null}function Is(t){Yo.setTimeout((function(){throw t}),0)}function Ts(t,e){bs||function(){var t=Yo.Promise.resolve(void 0);bs=function(){t.then(Ns)}}(),Ss||(bs(),Ss=!0),Cs.add(t,e)}ms.prototype.add=function(t,e){var n=_s.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Es.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Es.prototype.reset=function(){this.next=this.b=this.a=null};var Ss=!1,Cs=new ms;function Ns(){for(var t;t=ws();){try{t.a.call(t.b)}catch(t){Is(t)}var e=_s;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Ss=!1}function ks(t,e){ds.call(this),this.b=t||1,this.a=e||Yo,this.f=ia(this.Za,this),this.g=aa()}function As(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Ps(t,e,n){if("function"==typeof t)n&&(t=ia(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ia(t.handleEvent,t)}return 2147483647<Number(e)?-1:Yo.setTimeout(t,e||0)}function Os(t){t.a=Ps((function(){t.a=null,t.c&&(t.c=!1,Os(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}sa(ks,ds),(zo=ks.prototype).aa=!1,zo.M=null,zo.Za=function(){if(this.aa){var t=aa()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),vs(this,"tick"),this.aa&&(As(this),this.start()))}},zo.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=aa())},zo.G=function(){ks.X.G.call(this),As(this),delete this.a};var Rs=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Ko(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Os(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Yo.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(ua);function Ds(t){ua.call(this),this.b=t,this.a={}}sa(Ds,ua);var xs=[];function Ls(t,e,n,r){Array.isArray(n)||(n&&(xs[0]=n.toString()),n=xs);for(var i=0;i<n.length;i++){var o=rs(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Ms(t){_a(t.a,(function(t,e){this.a.hasOwnProperty(e)&&ss(t)}),t),t.a={}}function Fs(){this.a=!0}function Us(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return ys(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Ds.prototype.G=function(){Ds.X.G.call(this),Ms(this)},Ds.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fs.prototype.info=function(){};var js={},Vs=null;function qs(){return Vs=Vs||new ds}function Bs(t){Ka.call(this,js.Fa,t)}function Ws(t){var e=qs();vs(e,new Bs(e,t))}function Hs(t,e){Ka.call(this,js.STAT_EVENT,t),this.stat=e}function Ks(t){var e=qs();vs(e,new Hs(e,t))}function Gs(t){Ka.call(this,js.Ga,t)}function zs(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Yo.setTimeout((function(){t()}),e)}js.Fa="serverreachability",sa(Bs,Ka),js.STAT_EVENT="statevent",sa(Hs,Ka),js.Ga="timingevent",sa(Gs,Ka);var $s={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Qs={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Ys(){}function Xs(t){var e;return(e=t.a)||(e=t.a={}),e}function Js(){}Ys.prototype.a=null;var Zs,tu={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function eu(){Ka.call(this,"d")}function nu(){Ka.call(this,"c")}function ru(){}function iu(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Ds(this),this.P=ou,t=Pa?125:void 0,this.R=new ks(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}sa(eu,Ka),sa(nu,Ka),sa(ru,Ys),Zs=new ru;var ou=45e3,au={},su={};function uu(t,e,n){t.H=1,t.i=Pu(Tu(e)),t.j=n,t.I=!0,cu(t,null)}function cu(t,e){t.u=aa(),fu(t),t.l=Tu(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Wu(n.b,"t",r),t.D=0,t.a=Fc(t.g,t.g.C?e:null),0<t.O&&(t.F=new Rs(ia(t.Ca,t,t.a),t.O)),Ls(t.J,t.a,"readystatechange",t.Xa),e=t.B?wa(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Ws(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");a=2<=l.length&&"type"==l[1]?a+(h+"=")+c+"&":a+(h+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function hu(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=lu(t,n);if(i==su){4==e&&(t.h=4,Ks(14),r=!1),Us(t.c,t.f,null,"[Incomplete Response]");break}if(i==au){t.h=4,Ks(15),Us(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Us(t.c,t.f,i,null),yu(t,i)}4==e&&0==n.length&&(t.h=1,Ks(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ac(e),e.F=!0,Ks(11))):(Us(t.c,t.f,n,"[Invalid Chunked Response]"),gu(t),vu(t))}function lu(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?su:(n=Number(e.substring(n,r)),isNaN(n)?au:(r+=1)+n>e.length?su:(e=e.substr(r,n),t.D=r+n,e))}function fu(t){t.T=aa()+t.P,pu(t,t.P)}function pu(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=zs(ia(t.Va,t),e)}function du(t){t.o&&(Yo.clearTimeout(t.o),t.o=null)}function vu(t){0==t.g.v||t.A||Rc(t.g,t)}function gu(t){du(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,As(t.R),Ms(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function yu(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Yu(n.b,t)))if(n.I=t.N,!t.C&&Yu(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Oc(n),_c(n)}kc(n),Ks(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=zs(ia(n.Sa,n),6e3));if(1>=Qu(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else xc(n,11)}else if((t.C||n.a==t)&&Oc(n),!pa(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"==typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=u.b;!l.a&&(ga(h,"spdy")||ga(h,"quic")||ga(h,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(Xu(l,l.b),l.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Au(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=aa()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=Mc(u,u.C?u.ga:null,u.fa),p.C){Ju(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(du(d),fu(d)),u.a=p}else Nc(u);0<n.g.length&&Ic(n)}else"stop"!=i[0]&&"close"!=i[0]||xc(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?xc(n,7):bc(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Ws(4)}catch(t){}}function mu(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Jo(t)||"string"==typeof t)ha(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Jo(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Jo(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function bu(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof bu)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function _u(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];wu(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)wu(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function wu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(zo=iu.prototype).setTimeout=function(t){this.P=t},zo.Xa=function(t){t=t.target;var e=this.F;e&&3==vc(t)?e.f():this.Ca(t)},zo.Ca=function(t){try{if(t==this.a)t:{var e=vc(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Pa&&!this.a.$())){this.A||4!=e||7==n||Ws(8==n||0>=r?3:2),du(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pa(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,Ks(12),gu(this),vu(this);break t}Us(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,yu(this,u)}this.I?(hu(this,e,o),Pa&&this.b&&3==e&&(Ls(this.J,this.R,"tick",this.Wa),this.R.start())):(Us(this.c,this.f,o,null),yu(this,o)),4==e&&gu(this),this.b&&!this.A&&(4==e?Rc(this.g,this):(this.b=!1,fu(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Ks(12)):(this.h=0,Ks(13)),gu(this),vu(this)}}}catch(t){}},zo.Wa=function(){if(this.a){var t=vc(this.a),e=this.a.$();this.D<e.length&&(du(this),hu(this,t,e),this.b&&4!=t&&fu(this))}},zo.cancel=function(){this.A=!0,gu(this)},zo.Va=function(){this.o=null;var t=aa();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Ws(3),Ks(17)),gu(this),this.h=2,vu(this)):pu(this,this.T-t)},(zo=bu.prototype).K=function(){_u(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},zo.L=function(){return _u(this),this.a.concat()},zo.get=function(t,e){return wu(this.b,t)?this.b[t]:e},zo.set=function(t,e){wu(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},zo.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Eu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Iu(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Iu){this.a=void 0!==e?e:t.a,Su(this,t.f),this.j=t.j,Cu(this,t.c),Nu(this,t.h),this.g=t.g,e=t.b;var n=new ju;n.c=e.c,e.a&&(n.a=new bu(e.a),n.b=e.b),ku(this,n),this.i=t.i}else t&&(n=String(t).match(Eu))?(this.a=!!e,Su(this,n[1]||"",!0),this.j=Ou(n[2]||""),Cu(this,n[3]||"",!0),Nu(this,n[4]),this.g=Ou(n[5]||"",!0),ku(this,n[6]||"",!0),this.i=Ou(n[7]||"")):(this.a=!!e,this.b=new ju(null,this.a))}function Tu(t){return new Iu(t)}function Su(t,e,n){t.f=n?Ou(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Cu(t,e,n){t.c=n?Ou(e,!0):e}function Nu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function ku(t,e,n){e instanceof ju?(t.b=e,function(t,e){e&&!t.f&&(Vu(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(qu(this,e),Wu(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Ru(e,Fu)),t.b=new ju(e,t.a))}function Au(t,e,n){t.b.set(e,n)}function Pu(t){return Au(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^aa()).toString(36)),t}function Ou(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ru(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Du),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Du(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Iu.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ru(e,xu,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Ru(e,xu,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ru(n,"/"==n.charAt(0)?Mu:Lu,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Ru(n,Uu)),t.join("")};var xu=/[#\/\?@]/g,Lu=/[#\?:]/g,Mu=/[#\?]/g,Fu=/[#\?@]/g,Uu=/#/g;function ju(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Vu(t){t.a||(t.a=new bu,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function qu(t,e){Vu(t),e=Hu(t,e),wu(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,wu((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&_u(t)))}function Bu(t,e){return Vu(t),e=Hu(t,e),wu(t.a.b,e)}function Wu(t,e,n){qu(t,e),0<n.length&&(t.c=null,t.a.set(Hu(t,e),fa(n)),t.b+=n.length)}function Hu(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(zo=ju.prototype).add=function(t,e){Vu(this),this.c=null,t=Hu(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},zo.forEach=function(t,e){Vu(this),this.a.forEach((function(n,r){ha(n,(function(n){t.call(e,n,r,this)}),this)}),this)},zo.L=function(){Vu(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},zo.K=function(t){Vu(this);var e=[];if("string"==typeof t)Bu(this,t)&&(e=la(e,this.a.get(Hu(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=la(e,t[n])}return e},zo.set=function(t,e){return Vu(this),this.c=null,Bu(this,t=Hu(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},zo.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},zo.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var Ku=function(t,e){this.b=t,this.a=e};function Gu(t){this.g=t||zu,Yo.PerformanceNavigationTiming?t=0<(t=Yo.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(Yo.ia&&Yo.ia.ya&&Yo.ia.ya()&&Yo.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var zu=10;function $u(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Qu(t){return t.b?1:t.a?t.a.size:0}function Yu(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Xu(t,e){t.a?t.a.add(e):t.b=e}function Ju(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Zu(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Go(t.a.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return fa(t.c)}function tc(){}function ec(){this.a=new tc}function nc(t,e,n){var r=n||"";try{mu(t,(function(t,n){var i=t;Zo(t)&&(i=ys(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function rc(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Gu.prototype.cancel=function(){var t,e;if(this.c=Zu(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Go(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},tc.prototype.stringify=function(t){return Yo.JSON.stringify(t,void 0)},tc.prototype.parse=function(t){return Yo.JSON.parse(t,void 0)};var ic=Yo.JSON.parse;function oc(t){ds.call(this),this.headers=new bu,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=ac,this.D=this.F=!1}sa(oc,ds);var ac="",sc=/^https?$/i,uc=["POST","PUT"];function cc(t){return"content-type"==t.toLowerCase()}function hc(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,lc(t),pc(t)}function lc(t){t.u||(t.u=!0,vs(t,"complete"),vs(t,"error"))}function fc(t){if(t.b&&void 0!==Qo&&(!t.s[1]||4!=vc(t)||2!=t.W()))if(t.l&&4==vc(t))Ps(t.za,0,t);else if(vs(t,"readystatechange"),4==vc(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Eu)[1]||null;if(!o&&Yo.self&&Yo.self.location){var a=Yo.self.location.protocol;o=a.substr(0,a.length-1)}i=!sc.test(o?o.toLowerCase():"")}e=i}if(e)vs(t,"complete"),vs(t,"success");else{t.h=6;try{var s=2<vc(t)?t.a.statusText:""}catch(n){s=""}t.f=s+" ["+t.W()+"]",lc(t)}}finally{pc(t)}}}function pc(t,e){if(t.a){dc(t);var n=t.a,r=t.s[0]?Xo:null;t.a=null,t.s=null,e||vs(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function dc(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Yo.clearTimeout(t.m),t.m=null)}function vc(t){return t.a?t.a.readyState:0}function gc(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return _a(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Au(t,e,n))}function yc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function mc(t){this.pa=0,this.g=[],this.c=new Fs,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=yc("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=yc("baseRetryDelayMs",5e3,t),this.Ra=yc("retryDelaySeedMs",1e4,t),this.Ma=yc("forwardChannelMaxRetries",2,t),this.ma=yc("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Gu(t&&t.concurrentRequestLimit),this.ka=new ec,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function bc(t){if(wc(t),3==t.v){var e=t.R++,n=Tu(t.B);Au(n,"SID",t.J),Au(n,"RID",e),Au(n,"TYPE","terminate"),Sc(t,n),(e=new iu(t,t.c,e,void 0)).H=2,e.i=Pu(Tu(n)),n=!1,Yo.navigator&&Yo.navigator.sendBeacon&&(n=Yo.navigator.sendBeacon(e.i.toString(),"")),!n&&Yo.Image&&((new Image).src=e.i,n=!0),n||(e.a=Fc(e.g,null),e.a.ba(e.i)),e.u=aa(),fu(e)}Lc(t)}function _c(t){t.a&&(Ac(t),t.a.cancel(),t.a=null)}function wc(t){_c(t),t.j&&(Yo.clearTimeout(t.j),t.j=null),Oc(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Yo.clearTimeout(t.h),t.h=null)}function Ec(t,e){t.g.push(new Ku(t.Oa++,e)),3==t.v&&Ic(t)}function Ic(t){$u(t.b)||t.h||(t.h=!0,Ts(t.Ba,t),t.u=0)}function Tc(t,e){var n;n=e?e.f:t.R++;var r=Tu(t.B);Au(r,"SID",t.J),Au(r,"RID",n),Au(r,"AID",t.P),Sc(t,r),t.i&&t.l&&gc(r,t.i,t.l),n=new iu(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Cc(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Xu(t.b,n),uu(n,r,e)}function Sc(t,e){t.f&&mu({},(function(t,n){Au(e,n,t)}))}function Cc(t,e,n){n=Math.min(t.g.length,n);var r=t.f?ia(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{nc(h,a,"req"+c+"_")}catch(t){r&&r(h)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Nc(t){t.a||t.j||(t.T=1,Ts(t.Aa,t),t.o=0)}function kc(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=zs(ia(t.Aa,t),Dc(t,t.o)),t.o++,!0)}function Ac(t){null!=t.s&&(Yo.clearTimeout(t.s),t.s=null)}function Pc(t){t.a=new iu(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Tu(t.la);Au(e,"RID","rpc"),Au(e,"SID",t.J),Au(e,"CI",t.H?"0":"1"),Au(e,"AID",t.P),Sc(t,e),Au(e,"TYPE","xmlhttp"),t.i&&t.l&&gc(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Pu(Tu(e)),n.j=null,n.I=!0,cu(n,t)}function Oc(t){null!=t.m&&(Yo.clearTimeout(t.m),t.m=null)}function Rc(t,e){var n=null;if(t.a==e){Oc(t),Ac(t),t.a=null;var r=2}else{if(!Yu(t.b,e))return;n=e.s,Ju(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=aa()-e.u;var i=t.u;vs(r=qs(),new Gs(r,n,e,i)),Ic(t)}else Nc(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Qu(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=zs(ia(t.Ba,t,e),Dc(t,t.u)),t.u++,0)))}(t,e)||2==r&&kc(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:xc(t,5);break;case 4:xc(t,10);break;case 3:xc(t,6);break;default:xc(t,2)}}function Dc(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function xc(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=ia(t.Ya,t);n||(n=new Iu("//www.google.com/images/cleardot.gif"),Yo.location&&"http"==Yo.location.protocol||Su(n,"https"),Pu(n)),function(t,e){var n=new Fs;if(Yo.Image){var r=new Image;r.onload=oa(rc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=oa(rc,n,r,"TestLoadImage: error",!1,e),r.onabort=oa(rc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=oa(rc,n,r,"TestLoadImage: timeout",!1,e),Yo.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ks(2);t.v=0,t.f&&t.f.ra(e),Lc(t),wc(t)}function Lc(t){t.v=0,t.I=-1,t.f&&(0==Zu(t.b).length&&0==t.g.length||(t.b.c.length=0,fa(t.g),t.g.length=0),t.f.qa())}function Mc(t,e,n){var r=function(t){return t instanceof Iu?Tu(t):new Iu(t,void 0)}(n);if(""!=r.c)e&&Cu(r,e+"."+r.c),Nu(r,r.h);else{var i=Yo.location;r=function(t,e,n,r){var i=new Iu(null,void 0);return t&&Su(i,t),e&&Cu(i,e),n&&Nu(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&_a(t.V,(function(t,e){Au(r,e,t)})),e=t.A,n=t.na,e&&n&&Au(r,e,n),Au(r,"VER",t.ha),Sc(t,r),r}function Fc(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new oc(t.Na)).F=t.C,e}function Uc(){}function jc(){if(ka&&!(10<=Number(qa)))throw Error("Environmental error: no available transport.")}function Vc(t,e){ds.call(this),this.a=new mc(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!pa(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!pa(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Wc(this)}function qc(t){eu.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Bc(){nu.call(this),this.status=1}function Wc(t){this.a=t}(zo=oc.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Xs(this.H):Xs(Zs),this.a.onreadystatechange=ia(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void hc(this,t)}t=n||"";var i=new bu(this.headers);r&&mu(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=cc,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Yo.FormData&&t instanceof Yo.FormData,!(0<=ca(uc,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{dc(this),0<this.o&&((this.D=function(t){return ka&&ja(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=ia(this.xa,this)):this.m=Ps(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){hc(this,t)}},zo.xa=function(){void 0!==Qo&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,vs(this,"timeout"),this.abort(8))},zo.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,vs(this,"complete"),vs(this,"abort"),pc(this))},zo.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),pc(this,!0)),oc.X.G.call(this)},zo.za=function(){this.j||(this.A||this.l||this.g?fc(this):this.Ua())},zo.Ua=function(){fc(this)},zo.W=function(){try{return 2<vc(this)?this.a.status:-1}catch(t){return-1}},zo.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},zo.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ic(e)}},zo.ua=function(){return this.h},zo.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(zo=mc.prototype).ha=8,zo.v=1,zo.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new iu(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Ia(r=wa(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Cc(this,n,e),Au(i=Tu(this.B),"RID",t),Au(i,"CVER",22),this.A&&Au(i,"X-HTTP-Session-Id",this.A),Sc(this,i),this.i&&r&&gc(i,this.i,r),Xu(this.b,n),this.Ia&&Au(i,"TYPE","init"),this.da?(Au(i,"$req",e),Au(i,"SID","null"),n.U=!0,uu(n,i,null)):uu(n,i,e),this.v=2}}else 3==this.v&&(t?Tc(this,t):0==this.g.length||$u(this.b)||Tc(this))},zo.Aa=function(){if(this.j=null,Pc(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=zs(ia(this.Ta,this),t)}},zo.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Ks(10),_c(this),Pc(this))},zo.Sa=function(){null!=this.m&&(this.m=null,_c(this),kc(this),Ks(19))},zo.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Ks(2)):(this.c.info("Failed to ping google.com"),Ks(1))},(zo=Uc.prototype).ta=function(){},zo.sa=function(){},zo.ra=function(){},zo.qa=function(){},zo.Ja=function(){},jc.prototype.a=function(t,e){return new Vc(t,e)},sa(Vc,ds),Vc.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Ks(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Mc(t,null,t.fa),Ic(t)},Vc.prototype.close=function(){bc(this.a)},Vc.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Ec(this.a,e)}else this.l?((e={}).__data__=ys(t),Ec(this.a,e)):Ec(this.a,t)},Vc.prototype.G=function(){this.a.f=null,delete this.f,bc(this.a),delete this.a,Vc.X.G.call(this)},sa(qc,eu),sa(Bc,nu),sa(Wc,Uc),Wc.prototype.ta=function(){vs(this.a,"a")},Wc.prototype.sa=function(t){vs(this.a,new qc(t))},Wc.prototype.ra=function(t){vs(this.a,new Bc(t))},Wc.prototype.qa=function(){vs(this.a,"b")},jc.prototype.createWebChannel=jc.prototype.a,Vc.prototype.send=Vc.prototype.h,Vc.prototype.open=Vc.prototype.g,Vc.prototype.close=Vc.prototype.close,$s.NO_ERROR=0,$s.TIMEOUT=8,$s.HTTP_ERROR=6,Qs.COMPLETE="complete",Js.EventType=tu,tu.OPEN="a",tu.CLOSE="b",tu.ERROR="c",tu.MESSAGE="d",ds.prototype.listen=ds.prototype.va,oc.prototype.listenOnce=oc.prototype.wa,oc.prototype.getLastError=oc.prototype.Qa,oc.prototype.getLastErrorCode=oc.prototype.ua,oc.prototype.getStatus=oc.prototype.W,oc.prototype.getResponseJson=oc.prototype.Pa,oc.prototype.getResponseText=oc.prototype.$,oc.prototype.send=oc.prototype.ba;var Hc=$s,Kc=Qs,Gc=js,zc=10,$c=11,Qc=Js,Yc=oc,Xc=function(t,e){return(Xc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Jc(t,e){function n(){this.constructor=t}Xc(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Zc(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function th(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function eh(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nh=new fn("@firebase/firestore");function rh(){return nh.logLevel}function ih(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(nh.logLevel<=on.DEBUG){var r=e.map(sh);nh.debug.apply(nh,eh(["Firestore (8.2.0): "+t],r))}}function oh(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(nh.logLevel<=on.ERROR){var r=e.map(sh);nh.error.apply(nh,eh(["Firestore (8.2.0): "+t],r))}}function ah(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(nh.logLevel<=on.WARN){var r=e.map(sh);nh.warn.apply(nh,eh(["Firestore (8.2.0): "+t],r))}}function sh(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.0) INTERNAL ASSERTION FAILED: "+t;throw oh(e),new Error(e)}function ch(t,e){t||uh()}function hh(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fh=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=lh(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function ph(t,e){return t<e?-1:t>e?1:0}function dh(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function vh(t){return t+"\0"}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gh=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.i,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return ph(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();gh.h=new gh("");var yh={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},mh=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Jc(e,t),e}(Error),bh=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(gh.fromBase64String(e))}catch(e){throw new mh(yh.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(gh.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}(),_h=function(t){this._=t};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(){if("undefined"==typeof Uint8Array)throw new mh(yh.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Eh(){if("undefined"==typeof atob)throw new mh(yh.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Ih=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jc(e,t),e.fromBase64String=function(t){return Eh(),new e(bh.fromBase64String(t))},e.fromUint8Array=function(t){return wh(),new e(bh.fromUint8Array(t))},e.prototype.toBase64=function(){return Eh(),this._.toBase64()},e.prototype.toUint8Array=function(){return wh(),this._.toUint8Array()},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(_h),Th=function(){function t(t){this.uid=t}return t.prototype.T=function(){return null!=this.uid},t.prototype.I=function(){return this.T()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Th.UNAUTHENTICATED=new Th(null),Th.m=new Th("google-credentials-uid"),Th.A=new Th("first-party-uid");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Sh=function(t,e){this.user=e,this.type="OAuth",this.R={},this.R.Authorization="Bearer "+t},Ch=function(){function t(){this.P=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.g=function(){},t.prototype.V=function(t){this.P=t,t(Th.UNAUTHENTICATED)},t.prototype.p=function(){this.P=null},t}(),Nh=function(){function t(t){var e=this;this.v=null,this.currentUser=Th.UNAUTHENTICATED,this.S=!1,this.D=0,this.P=null,this.forceRefresh=!1,this.v=function(){e.D++,e.currentUser=e.C(),e.S=!0,e.P&&e.P(e.currentUser)},this.D=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.v):(this.v(null),t.get().then((function(t){e.auth=t,e.v&&e.auth.addAuthTokenListener(e.v)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.D,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.D!==e?(ih("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(ch("string"==typeof n.accessToken),new Sh(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.g=function(){this.forceRefresh=!0},t.prototype.V=function(t){this.P=t,this.S&&t(this.currentUser)},t.prototype.p=function(){this.auth&&this.auth.removeAuthTokenListener(this.v),this.v=null,this.P=null},t.prototype.C=function(){var t=this.auth&&this.auth.getUid();return ch(null===t||"string"==typeof t),new Th(t)},t}(),kh=function(){function t(t,e){this.N=t,this.F=e,this.type="FirstParty",this.user=Th.A}return Object.defineProperty(t.prototype,"R",{get:function(){var t={"X-Goog-AuthUser":this.F},e=this.N.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Ah=function(){function t(t,e){this.N=t,this.F=e}return t.prototype.getToken=function(){return Promise.resolve(new kh(this.N,this.F))},t.prototype.V=function(t){t(Th.A)},t.prototype.p=function(){},t.prototype.g=function(){},t}(),Ph=function(t,e,n,r,i,o){this.O=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.k=o},Oh=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"M",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Rh=function(){function t(){}return t.prototype.L=function(t){},t.prototype.$=function(){},t}(),Dh=function(){function t(){var t=this;this.B=function(){return t.q()},this.U=function(){return t.K()},this.W=[],this.j()}return t.prototype.L=function(t){this.W.push(t)},t.prototype.$=function(){window.removeEventListener("online",this.B),window.removeEventListener("offline",this.U)},t.prototype.j=function(){window.addEventListener("online",this.B),window.addEventListener("offline",this.U)},t.prototype.q=function(){ih("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.W;t<e.length;t++)(0,e[t])(0)},t.prototype.K=function(){ih("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.W;t<e.length;t++)(0,e[t])(1)},t.G=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(t){return null==t}function Lh(t){return 0===t&&1/t==-1/0}function Mh(t){return"number"==typeof t&&Number.isInteger(t)&&!Lh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fh,Uh,jh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(t){switch(t){case yh.OK:return uh();case yh.CANCELLED:case yh.UNKNOWN:case yh.DEADLINE_EXCEEDED:case yh.RESOURCE_EXHAUSTED:case yh.INTERNAL:case yh.UNAVAILABLE:case yh.UNAUTHENTICATED:return!1;case yh.INVALID_ARGUMENT:case yh.NOT_FOUND:case yh.ALREADY_EXISTS:case yh.PERMISSION_DENIED:case yh.FAILED_PRECONDITION:case yh.ABORTED:case yh.OUT_OF_RANGE:case yh.UNIMPLEMENTED:case yh.DATA_LOSS:return!0;default:return uh()}}function qh(t){if(void 0===t)return oh("GRPC error has no .code"),yh.UNKNOWN;switch(t){case Fh.OK:return yh.OK;case Fh.CANCELLED:return yh.CANCELLED;case Fh.UNKNOWN:return yh.UNKNOWN;case Fh.DEADLINE_EXCEEDED:return yh.DEADLINE_EXCEEDED;case Fh.RESOURCE_EXHAUSTED:return yh.RESOURCE_EXHAUSTED;case Fh.INTERNAL:return yh.INTERNAL;case Fh.UNAVAILABLE:return yh.UNAVAILABLE;case Fh.UNAUTHENTICATED:return yh.UNAUTHENTICATED;case Fh.INVALID_ARGUMENT:return yh.INVALID_ARGUMENT;case Fh.NOT_FOUND:return yh.NOT_FOUND;case Fh.ALREADY_EXISTS:return yh.ALREADY_EXISTS;case Fh.PERMISSION_DENIED:return yh.PERMISSION_DENIED;case Fh.FAILED_PRECONDITION:return yh.FAILED_PRECONDITION;case Fh.ABORTED:return yh.ABORTED;case Fh.OUT_OF_RANGE:return yh.OUT_OF_RANGE;case Fh.UNIMPLEMENTED:return yh.UNIMPLEMENTED;case Fh.DATA_LOSS:return yh.DATA_LOSS;default:return uh()}}(Uh=Fh||(Fh={}))[Uh.OK=0]="OK",Uh[Uh.CANCELLED=1]="CANCELLED",Uh[Uh.UNKNOWN=2]="UNKNOWN",Uh[Uh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Uh[Uh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Uh[Uh.NOT_FOUND=5]="NOT_FOUND",Uh[Uh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Uh[Uh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Uh[Uh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Uh[Uh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Uh[Uh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Uh[Uh.ABORTED=10]="ABORTED",Uh[Uh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Uh[Uh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Uh[Uh.INTERNAL=13]="INTERNAL",Uh[Uh.UNAVAILABLE=14]="UNAVAILABLE",Uh[Uh.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Bh=function(){function t(t){this.H=t.H,this.J=t.J}return t.prototype.Y=function(t){this.X=t},t.prototype.Z=function(t){this.tt=t},t.prototype.onMessage=function(t){this.et=t},t.prototype.close=function(){this.J()},t.prototype.send=function(t){this.H(t)},t.prototype.nt=function(){this.X()},t.prototype.st=function(t){this.tt(t)},t.prototype.it=function(t){this.et(t)},t}(),Wh=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Hh=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.k=e.k,n}return Jc(e,t),e.prototype.lt=function(t,e,n,r){return new Promise((function(i,o){var a=new Yc;a.listenOnce(Kc.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case Hc.NO_ERROR:var e=a.getResponseJson();ih("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Hc.TIMEOUT:ih("Connection",'RPC "'+t+'" timed out'),o(new mh(yh.DEADLINE_EXCEEDED,"Request time out"));break;case Hc.HTTP_ERROR:var n=a.getStatus();if(ih("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(yh).indexOf(e)>=0?e:yh.UNKNOWN}(r.status);o(new mh(s,r.message))}else o(new mh(yh.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new mh(yh.UNAVAILABLE,"Connection failed."));break;default:uh()}}finally{ih("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.ft=function(t,e){var n=[this.ot,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new jc,i=qs(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.O.projectId+"/databases/"+this.O.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.k};this.ht(o.initMessageHeaders,e),be()||Ee()||me().indexOf("Electron/")>=0||function(){var t=me();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||me().indexOf("MSAppHost/")>=0||we()||(o.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");ih("Connection","Creating WebChannel: "+a,o);var s=r.createWebChannel(a,o),u=!1,c=!1,h=new Bh({H:function(t){c?ih("Connection","Not sending because WebChannel is closed:",t):(u||(ih("Connection","Opening WebChannel transport."),s.open(),u=!0),ih("Connection","WebChannel sending:",t),s.send(t))},J:function(){return s.close()}}),l=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return l(s,Qc.EventType.OPEN,(function(){c||ih("Connection","WebChannel transport opened.")})),l(s,Qc.EventType.CLOSE,(function(){c||(c=!0,ih("Connection","WebChannel transport closed"),h.st())})),l(s,Qc.EventType.ERROR,(function(t){c||(c=!0,ah("Connection","WebChannel transport errored:",t),h.st(new mh(yh.UNAVAILABLE,"The operation could not be completed")))})),l(s,Qc.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];ch(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){ih("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=Fh[t];if(void 0!==e)return qh(e)}(o),u=i.message;void 0===a&&(a=yh.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,h.st(new mh(a,u)),s.close()}else ih("Connection","WebChannel received:",n),h.it(n)}})),l(i,Gc.STAT_EVENT,(function(t){t.stat===zc?ih("Connection","Detected buffering proxy"):t.stat===$c&&ih("Connection","Detected no buffering proxy")})),setTimeout((function(){h.nt()}),0),h},e}(function(){function t(t){this.rt=t,this.O=t.O;var e=t.ssl?"https":"http";this.ot=e+"://"+t.host,this.ct="projects/"+this.O.projectId+"/databases/"+this.O.database+"/documents"}return t.prototype.at=function(t,e,n,r){var i=this.ut(t,e);ih("RestConnection","Sending: ",i,n);var o={};return this.ht(o,r),this.lt(t,i,o,n).then((function(t){return ih("RestConnection","Received: ",t),t}),(function(e){throw ah("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype._t=function(t,e,n,r){return this.at(t,e,n,r)},t.prototype.ht=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.0",t["Content-Type"]="text/plain",e)for(var n in e.R)e.R.hasOwnProperty(n)&&(t[n]=e.R[n])},t.prototype.ut=function(t,e){var n=jh[t];return this.ot+"/v1/"+e+":"+n},t}()),Kh=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new mh(yh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new mh(yh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new mh(yh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new mh(yh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.dt=function(t){return this.seconds===t.seconds?ph(this.nanoseconds,t.nanoseconds):ph(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Gh=function(){function t(t){this.timestamp=t}return t.wt=function(e){return new t(e)},t.min=function(){return new t(new Kh(0,0))},t.prototype.u=function(t){return this.timestamp.dt(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.Et=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.Tt=function(){return this.timestamp},t}(),zh=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&uh(),void 0===n?n=t.length-e:n>t.length-e&&uh(),this.segments=t,this.offset=e,this.It=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.It},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.At(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.Rt(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Pt=function(t){return t=void 0===t?1:t,this.Rt(this.segments,this.offset+t,this.length-t)},t.prototype.yt=function(){return this.Rt(this.segments,this.offset,this.length-1)},t.prototype.gt=function(){return this.segments[this.offset]},t.prototype.Vt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.bt=function(){return 0===this.length},t.prototype.vt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.St=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.Dt=function(){return this.segments.slice(this.offset,this.limit())},t.At=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),$h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jc(e,t),e.prototype.Rt=function(t,n,r){return new e(t,n,r)},e.prototype.Ct=function(){return this.Dt().join("/")},e.prototype.toString=function(){return this.Ct()},e.xt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new mh(yh.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.Nt=function(){return new e([])},e}(zh),Qh=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Yh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jc(e,t),e.prototype.Rt=function(t,n,r){return new e(t,n,r)},e.Ft=function(t){return Qh.test(t)},e.prototype.Ct=function(){return this.Dt().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.Ft(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.Ct()},e.prototype.Ot=function(){return 1===this.length&&"__name__"===this.get(0)},e.kt=function(){return new e(["__name__"])},e.Mt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new mh(yh.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new mh(yh.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new mh(yh.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new mh(yh.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.Nt=function(){return new e([])},e}(zh),Xh=function(){function t(t){this.path=t}return t.Lt=function(e){return new t($h.xt(e))},t.$t=function(e){return new t($h.xt(e).Pt(5))},t.prototype.Bt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===$h.At(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.At=function(t,e){return $h.At(t.path,e.path)},t.qt=function(t){return t.length%2==0},t.Ut=function(e){return new t(new $h(e.slice()))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zh(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tl(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var el=function(){function t(t){this.fields=t,t.sort(Yh.At)}return t.prototype.Qt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].vt(t))return!0;return!1},t.prototype.isEqual=function(t){return dh(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),nl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(t){if(ch(!!t),"string"==typeof t){var e=0,n=nl.exec(t);if(ch(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:il(t.seconds),nanos:il(t.nanos)}}function il(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ol(t){return"string"==typeof t?gh.fromBase64String(t):gh.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function sl(t){var e=t.mapValue.fields.__previous_value__;return al(e)?sl(e):e}function ul(t){var e=rl(t.mapValue.fields.__local_write_time__.timestampValue);return new Kh(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?al(t)?4:10:uh()}function hl(t,e){var n=cl(t);if(n!==cl(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ul(t).isEqual(ul(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=rl(t.timestampValue),r=rl(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ol(t.bytesValue).isEqual(ol(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return il(t.geoPointValue.latitude)===il(e.geoPointValue.latitude)&&il(t.geoPointValue.longitude)===il(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return il(t.integerValue)===il(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=il(t.doubleValue),r=il(e.doubleValue);return n===r?Lh(n)===Lh(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return dh(t.arrayValue.values||[],e.arrayValue.values||[],hl);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Jh(n)!==Jh(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!hl(n[i],r[i])))return!1;return!0}(t,e);default:return uh()}}function ll(t,e){return void 0!==(t.values||[]).find((function(t){return hl(t,e)}))}function fl(t,e){var n=cl(t),r=cl(e);if(n!==r)return ph(n,r);switch(n){case 0:return 0;case 1:return ph(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=il(t.integerValue||t.doubleValue),r=il(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return pl(t.timestampValue,e.timestampValue);case 4:return pl(ul(t),ul(e));case 5:return ph(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ol(t),r=ol(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=ph(n[i],r[i]);if(0!==o)return o}return ph(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=ph(il(t.latitude),il(e.latitude));return 0!==n?n:ph(il(t.longitude),il(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=fl(n[i],r[i]);if(o)return o}return ph(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=ph(r[a],o[a]);if(0!==s)return s;var u=fl(n[r[a]],i[o[a]]);if(0!==u)return u}return ph(r.length,o.length)}(t.mapValue,e.mapValue);default:throw uh()}}function pl(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ph(t,e);var n=rl(t),r=rl(e),i=ph(n.seconds,r.seconds);return 0!==i?i:ph(n.nanos,r.nanos)}function dl(t){return vl(t)}function vl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=rl(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ol(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Xh.$t(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=vl(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+vl(t.fields[o])}return e+"}"}(t.mapValue):uh();var e,n}function gl(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.Ct()}}function yl(t){return!!t&&"integerValue"in t}function ml(t){return!!t&&"arrayValue"in t}function bl(t){return!!t&&"nullValue"in t}function _l(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wl(t){return!!t&&"mapValue"in t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var El=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.bt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!wl(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.Vt()])||null},t.prototype.isEqual=function(t){return hl(this.proto,t.proto)},t}(),Il=function(){function t(t){void 0===t&&(t=El.empty()),this.Kt=t,this.Wt=new Map}return t.prototype.set=function(t,e){return this.jt(t,e),this},t.prototype.delete=function(t){return this.jt(t,null),this},t.prototype.jt=function(t,e){for(var n=this.Wt,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===cl(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.Vt(),e)},t.prototype.Gt=function(){var t=this.zt(Yh.Nt(),this.Wt);return null!=t?new El(t):this.Kt},t.prototype.zt=function(t,e){var n=this,r=!1,i=this.Kt.field(t),o=wl(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var a=n.zt(t.child(i),e);null!=a&&(o[i]=a,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function Tl(t){var e=[];return Zh(t.fields||{},(function(t,n){var r=new Yh([t]);if(wl(n)){var i=Tl(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new el(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Sl=function(t,e){this.key=t,this.version=e},Cl=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Ht=r,o.Jt=!!i.Jt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Jc(e,t),e.prototype.field=function(t){return this.Ht.field(t)},e.prototype.data=function(){return this.Ht},e.prototype.Yt=function(){return this.Ht.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Jt===t.Jt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Ht.isEqual(t.Ht)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Ht.toString()+", {hasLocalMutations: "+this.Jt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Jt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Sl),Nl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Jc(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Sl),kl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jc(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Sl),Al=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Xt=null};function Pl(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new Al(t,e,n,r,i,o,a)}function Ol(t){var e=hh(t);if(null===e.Xt){var n=e.path.Ct();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.Ct()+t.op.toString()+dl(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.Ct()+t.dir}(t)})).join(","),xh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Hl(e.startAt)),e.endAt&&(n+="|ub:",n+=Hl(e.endAt)),e.Xt=n}return e.Xt}function Rl(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Gl(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!hl(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$l(t.startAt,e.startAt)&&$l(t.endAt,e.endAt)}function Dl(t){return Xh.qt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var xl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Jc(e,t),e.create=function(t,n,r){return t.Ot()?"in"===n||"not-in"===n?this.Zt(t,n,r):new Ll(t,n,r):"array-contains"===n?new jl(t,r):"in"===n?new Vl(t,r):"not-in"===n?new ql(t,r):"array-contains-any"===n?new Bl(t,r):new e(t,n,r)},e.Zt=function(t,e,n){return"in"===e?new Ml(t,n):new Fl(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.te(fl(e,this.value)):null!==e&&cl(this.value)===cl(e)&&this.te(fl(e,this.value))},e.prototype.te=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return uh()}},e.prototype.ee=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Ll=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Xh.$t(r.referenceValue),i}return Jc(e,t),e.prototype.matches=function(t){var e=Xh.At(t.key,this.key);return this.te(e)},e}(xl),Ml=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Ul("in",n),r}return Jc(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(xl),Fl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Ul("not-in",n),r}return Jc(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(xl);function Ul(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Xh.$t(t.referenceValue)}))}var jl=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Jc(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return ml(e)&&ll(e.arrayValue,this.value)},e}(xl),Vl=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Jc(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&ll(this.value.arrayValue,e)},e}(xl),ql=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Jc(e,t),e.prototype.matches=function(t){if(ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!ll(this.value.arrayValue,e)},e}(xl),Bl=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Jc(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!ml(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return ll(e.value.arrayValue,t)}))},e}(xl),Wl=function(t,e){this.position=t,this.before=e};function Hl(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return dl(t)})).join(",")}var Kl=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Gl(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function zl(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.Ot()?Xh.At(Xh.$t(a.referenceValue),n.key):fl(a,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function $l(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!hl(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ql=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.ne=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.se=null,this.ie=null,this.startAt,this.endAt};function Yl(t,e,n,r,i,o,a,s){return new Ql(t,e,n,r,i,o,a,s)}function Xl(t){return new Ql(t)}function Jl(t){return!xh(t.limit)&&"F"===t.limitType}function Zl(t){return!xh(t.limit)&&"L"===t.limitType}function tf(t){return t.ne.length>0?t.ne[0].field:null}function ef(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.ee())return r.field}return null}function nf(t){return null!==t.collectionGroup}function rf(t){var e=hh(t);if(null===e.se){e.se=[];var n=ef(e),r=tf(e);if(null!==n&&null===r)n.Ot()||e.se.push(new Kl(n)),e.se.push(new Kl(Yh.kt(),"asc"));else{for(var i=!1,o=0,a=e.ne;o<a.length;o++){var s=a[o];e.se.push(s),s.field.Ot()&&(i=!0)}if(!i){var u=e.ne.length>0?e.ne[e.ne.length-1].dir:"asc";e.se.push(new Kl(Yh.kt(),u))}}}return e.se}function of(t){var e=hh(t);if(!e.ie)if("F"===e.limitType)e.ie=Pl(e.path,e.collectionGroup,rf(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=rf(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Kl(o.field,a))}var s=e.endAt?new Wl(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Wl(e.startAt.position,!e.startAt.before):null;e.ie=Pl(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.ie}function af(t,e,n){return new Ql(t.path,t.collectionGroup,t.ne.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function sf(t,e){return Rl(of(t),of(e))&&t.limitType===e.limitType}function uf(t){return Ol(of(t))+"|lt:"+t.limitType}function cf(t){return"Query(target="+function(t){var e=t.path.Ct();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.Ct()+" "+e.op+" "+dl(e.value);var e})).join(", ")+"]"),xh(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.Ct()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Hl(t.startAt)),t.endAt&&(e+=", endAt: "+Hl(t.endAt)),"Target("+e+")"}(of(t))+"; limitType="+t.limitType+")"}function hf(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.Bt(t.collectionGroup)&&t.path.vt(n):Xh.qt(t.path)?t.path.isEqual(n):t.path.St(n)}(t,e)&&function(t,e){for(var n=0,r=t.ne;n<r.length;n++){var i=r[n];if(!i.field.Ot()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!zl(t.startAt,rf(t),e)||t.endAt&&zl(t.endAt,rf(t),e))}(t,e)}function lf(t){return function(e,n){for(var r=!1,i=0,o=rf(t);i<o.length;i++){var a=o[i],s=ff(a,e,n);if(0!==s)return s;r=r||a.field.Ot()}return 0}}function ff(t,e,n){var r=t.field.Ot()?Xh.At(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?fl(r,i):uh()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return uh()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pf=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=Gh.min()),void 0===o&&(o=Gh.min()),void 0===a&&(a=gh.h),this.target=t,this.targetId=e,this.re=n,this.sequenceNumber=r,this.oe=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.ce=function(e){return new t(this.target,this.targetId,this.re,e,this.oe,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.ae=function(e,n){return new t(this.target,this.targetId,this.re,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.ue=function(e){return new t(this.target,this.targetId,this.re,this.sequenceNumber,this.oe,e,this.resumeToken)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(t,e){if(t.he){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lh(e)?"-0":e}}function vf(t){return{integerValue:""+t}}function gf(t,e){return Mh(e)?vf(e):df(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yf=function(){this.le=void 0};function mf(t,e,n){return t instanceof wf?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ef?If(t,e):t instanceof Tf?Sf(t,e):function(t,e){var n=_f(t,e),r=Nf(n)+Nf(t._e);return yl(n)&&yl(t._e)?vf(r):df(t.fe,r)}(t,e)}function bf(t,e,n){return t instanceof Ef?If(t,e):t instanceof Tf?Sf(t,e):n}function _f(t,e){return t instanceof Cf?yl(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var wf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jc(e,t),e}(yf),Ef=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Jc(e,t),e}(yf);function If(t,e){for(var n=kf(e),r=function(t){n.some((function(e){return hl(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Tf=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Jc(e,t),e}(yf);function Sf(t,e){for(var n=kf(e),r=function(t){n=n.filter((function(e){return!hl(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Cf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).fe=e,r._e=n,r}return Jc(e,t),e}(yf);function Nf(t){return il(t.integerValue||t.doubleValue)}function kf(t){return ml(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Af=function(t,e){this.field=t,this.transform=e},Pf=function(t,e){this.version=t,this.transformResults=e},Of=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.de=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"we",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Rf(t,e){return void 0!==t.updateTime?e instanceof Cl&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Cl}var Df=function(){};function xf(t,e,n){return t instanceof jf?function(t,e,n){var r=t.value;if(n.transformResults){var i=Bf(t.fieldTransforms,e,n.transformResults);r=Hf(t.fieldTransforms,r,i)}return new Cl(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Vf?function(t,e,n){if(!Rf(t.Ee,e))return new kl(t.key,n.version);var r=qf(t,e,n.transformResults?Bf(t.fieldTransforms,e,n.transformResults):[]);return new Cl(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Nl(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Lf(t,e,n,r){return t instanceof jf?function(t,e,n,r){if(!Rf(t.Ee,e))return e;var i=t.value;if(t.fieldTransforms){var o=Wf(t.fieldTransforms,n,e,r);i=Hf(t.fieldTransforms,i,o)}var a=Uf(e);return new Cl(t.key,a,i,{Jt:!0})}(t,e,r,n):t instanceof Vf?function(t,e,n,r){if(!Rf(t.Ee,e))return e;var i=Uf(e),o=qf(t,e,Wf(t.fieldTransforms,n,e,r));return new Cl(t.key,i,o,{Jt:!0})}(t,e,r,n):function(t,e){return Rf(t.Ee,e)?new Nl(t.key,Gh.min()):e}(t,e)}function Mf(t,e){return void 0!==t.fieldTransforms?function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],a=e instanceof Cl?e.field(o.field):void 0,s=_f(o.transform,a||null);null!=s&&(n=null==n?(new Il).set(o.field,s):n.set(o.field,s))}return n?n.Gt():null}(t.fieldTransforms,e):null}function Ff(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ee.isEqual(e.Ee)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&dh(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ef&&e instanceof Ef||t instanceof Tf&&e instanceof Tf?dh(t.elements,e.elements,hl):t instanceof Cf&&e instanceof Cf?hl(t._e,e._e):t instanceof wf&&e instanceof wf}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Te.isEqual(e.Te))}function Uf(t){return t instanceof Cl?t.version:Gh.min()}var jf=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.Ee=r,o.fieldTransforms=i,o.type=0,o}return Jc(e,t),e}(Df),Vf=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.Te=r,a.Ee=i,a.fieldTransforms=o,a.type=1,a}return Jc(e,t),e}(Df);function qf(t,e,n){var r;return r=function(t,e){var n=new Il(e);return t.Te.fields.forEach((function(e){if(!e.bt()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Gt()}(t,r=e instanceof Cl?e.data():El.empty()),Hf(t.fieldTransforms,r,n)}function Bf(t,e,n){var r=[];ch(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=null;e instanceof Cl&&(s=e.field(o.field)),r.push(bf(a,s,n[i]))}return r}function Wf(t,e,n,r){for(var i=[],o=0,a=t;o<a.length;o++){var s=a[o],u=s.transform,c=null;n instanceof Cl&&(c=n.field(s.field)),null===c&&r instanceof Cl&&(c=r.field(s.field)),i.push(mf(u,c,e))}return i}function Hf(t,e,n){for(var r=new Il(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.Gt()}var Kf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ee=n,r.type=2,r.fieldTransforms=[],r}return Jc(e,t),e}(Df),Gf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ee=n,r.type=3,r.fieldTransforms=[],r}return Jc(e,t),e}(Df),zf=function(t){this.count=t},$f=function(){function t(t,e){this.At=t,this.root=e||Yf.EMPTY}return t.prototype.Ie=function(e,n){return new t(this.At,this.root.Ie(e,n,this.At).copy(null,null,Yf.me,null,null))},t.prototype.remove=function(e){return new t(this.At,this.root.remove(e,this.At).copy(null,null,Yf.me,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.bt();){var n=this.At(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.bt();){var r=this.At(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.bt=function(){return this.root.bt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Ae=function(){return this.root.Ae()},t.prototype.Re=function(){return this.root.Re()},t.prototype.Pe=function(t){return this.root.Pe(t)},t.prototype.forEach=function(t){this.Pe((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Pe((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ye=function(t){return this.root.ye(t)},t.prototype.ge=function(){return new Qf(this.root,null,this.At,!1)},t.prototype.Ve=function(t){return new Qf(this.root,t,this.At,!1)},t.prototype.pe=function(){return new Qf(this.root,null,this.At,!0)},t.prototype.be=function(t){return new Qf(this.root,t,this.At,!0)},t}(),Qf=function(){function t(t,e,n,r){this.ve=r,this.Se=[];for(var i=1;!t.bt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ve?t.left:t.right;else{if(0===i){this.Se.push(t);break}this.Se.push(t),t=this.ve?t.right:t.left}}return t.prototype.De=function(){var t=this.Se.pop(),e={key:t.key,value:t.value};if(this.ve)for(t=t.left;!t.bt();)this.Se.push(t),t=t.right;else for(t=t.right;!t.bt();)this.Se.push(t),t=t.left;return e},t.prototype.Ce=function(){return this.Se.length>0},t.prototype.xe=function(){if(0===this.Se.length)return null;var t=this.Se[this.Se.length-1];return{key:t.key,value:t.value}},t}(),Yf=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.bt=function(){return!1},t.prototype.Pe=function(t){return this.left.Pe(t)||t(this.key,this.value)||this.right.Pe(t)},t.prototype.ye=function(t){return this.right.ye(t)||t(this.key,this.value)||this.left.ye(t)},t.prototype.min=function(){return this.left.bt()?this:this.left.min()},t.prototype.Ae=function(){return this.min().key},t.prototype.Re=function(){return this.right.bt()?this.key:this.right.Re()},t.prototype.Ie=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ie(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ie(t,e,n))).Ne()},t.prototype.Fe=function(){if(this.left.bt())return t.EMPTY;var e=this;return e.left.Oe()||e.left.left.Oe()||(e=e.ke()),(e=e.copy(null,null,null,e.left.Fe(),null)).Ne()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.bt()||i.left.Oe()||i.left.left.Oe()||(i=i.ke()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Oe()&&(i=i.Me()),i.right.bt()||i.right.Oe()||i.right.left.Oe()||(i=i.Le()),0===n(e,i.key)){if(i.right.bt())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Fe())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Ne()},t.prototype.Oe=function(){return this.color},t.prototype.Ne=function(){var t=this;return t.right.Oe()&&!t.left.Oe()&&(t=t.$e()),t.left.Oe()&&t.left.left.Oe()&&(t=t.Me()),t.left.Oe()&&t.right.Oe()&&(t=t.Be()),t},t.prototype.ke=function(){var t=this.Be();return t.right.left.Oe()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Me())).$e()).Be()),t},t.prototype.Le=function(){var t=this.Be();return t.left.left.Oe()&&(t=(t=t.Me()).Be()),t},t.prototype.$e=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.Me=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Be=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.qe=function(){var t=this.Ue();return Math.pow(2,t)<=this.size+1},t.prototype.Ue=function(){if(this.Oe()&&this.left.Oe())throw uh();if(this.right.Oe())throw uh();var t=this.left.Ue();if(t!==this.right.Ue())throw uh();return t+(this.Oe()?0:1)},t}();Yf.EMPTY=null,Yf.RED=!0,Yf.me=!1,Yf.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw uh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw uh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw uh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw uh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw uh()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Ie=function(t,e,n){return new Yf(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.bt=function(){return!0},t.prototype.Pe=function(t){return!1},t.prototype.ye=function(t){return!1},t.prototype.Ae=function(){return null},t.prototype.Re=function(){return null},t.prototype.Oe=function(){return!1},t.prototype.qe=function(){return!0},t.prototype.Ue=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Xf=function(){function t(t){this.At=t,this.data=new $f(this.At)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Ae()},t.prototype.last=function(){return this.data.Re()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Pe((function(e,n){return t(e),!1}))},t.prototype.Qe=function(t,e){for(var n=this.data.Ve(t[0]);n.Ce();){var r=n.De();if(this.At(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ke=function(t,e){var n;for(n=void 0!==e?this.data.Ve(e):this.data.ge();n.Ce();)if(!t(n.De().key))return},t.prototype.We=function(t){var e=this.data.Ve(t);return e.Ce()?e.De().key:null},t.prototype.ge=function(){return new Jf(this.data.ge())},t.prototype.Ve=function(t){return new Jf(this.data.Ve(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Ie(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.bt=function(){return this.data.bt()},t.prototype.je=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.ge(),r=e.data.ge();n.Ce();){var i=n.De().key,o=r.De().key;if(0!==this.At(i,o))return!1}return!0},t.prototype.Dt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.At);return n.data=e,n},t}(),Jf=function(){function t(t){this.Ge=t}return t.prototype.De=function(){return this.Ge.De().key},t.prototype.Ce=function(){return this.Ge.Ce()},t}(),Zf=new $f(Xh.At);function tp(){return Zf}function ep(){return tp()}var np=new $f(Xh.At);function rp(){return np}var ip=new $f(Xh.At);function op(){return ip}var ap=new Xf(Xh.At);function sp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ap,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var up=new Xf(ph);function cp(){return up}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hp=function(){function t(t){this.At=t?function(e,n){return t(e,n)||Xh.At(e.key,n.key)}:function(t,e){return Xh.At(t.key,e.key)},this.ze=rp(),this.He=new $f(this.At)}return t.Je=function(e){return new t(e.At)},t.prototype.has=function(t){return null!=this.ze.get(t)},t.prototype.get=function(t){return this.ze.get(t)},t.prototype.first=function(){return this.He.Ae()},t.prototype.last=function(){return this.He.Re()},t.prototype.bt=function(){return this.He.bt()},t.prototype.indexOf=function(t){var e=this.ze.get(t);return e?this.He.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.He.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.He.Pe((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ze.Ie(t.key,t),e.He.Ie(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ze.remove(t),this.He.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.He.ge(),r=e.He.ge();n.Ce();){var i=n.De().key,o=r.De().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.At=this.At,r.ze=e,r.He=n,r},t}(),lp=function(){function t(){this.Ye=new $f(Xh.At)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Ye.get(e);n?0!==t.type&&3===n.type?this.Ye=this.Ye.Ie(e,t):3===t.type&&1!==n.type?this.Ye=this.Ye.Ie(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Ye=this.Ye.Ie(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Ye=this.Ye.Ie(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Ye=this.Ye.remove(e):1===t.type&&2===n.type?this.Ye=this.Ye.Ie(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Ye=this.Ye.Ie(e,{type:2,doc:t.doc}):uh():this.Ye=this.Ye.Ie(e,t)},t.prototype.Xe=function(){var t=[];return this.Ye.Pe((function(e,n){t.push(n)})),t},t}(),fp=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.Ze=n,this.docChanges=r,this.tn=i,this.fromCache=o,this.en=a,this.nn=s}return t.sn=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,hp.Je(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.tn.bt()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.en===t.en&&this.tn.isEqual(t.tn)&&sf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ze.isEqual(t.Ze)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),pp=function(){function t(t,e,n,r,i){this.oe=t,this.rn=e,this.on=n,this.cn=r,this.an=i}return t.un=function(e,n){var r=new Map;return r.set(e,dp.hn(e,n)),new t(Gh.min(),r,cp(),tp(),sp())},t}(),dp=function(){function t(t,e,n,r,i){this.resumeToken=t,this.ln=e,this._n=n,this.fn=r,this.dn=i}return t.hn=function(e,n){return new t(gh.h,n,sp(),sp(),sp())},t}(),vp=function(t,e,n,r){this.wn=t,this.removedTargetIds=e,this.key=n,this.En=r},gp=function(t,e){this.targetId=t,this.Tn=e},yp=function(t,e,n,r){void 0===n&&(n=gh.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},mp=function(){function t(){this.In=0,this.mn=wp(),this.An=gh.h,this.Rn=!1,this.Pn=!0}return Object.defineProperty(t.prototype,"ln",{get:function(){return this.Rn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.An},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"yn",{get:function(){return 0!==this.In},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gn",{get:function(){return this.Pn},enumerable:!1,configurable:!0}),t.prototype.Vn=function(t){t.o()>0&&(this.Pn=!0,this.An=t)},t.prototype.pn=function(){var t=sp(),e=sp(),n=sp();return this.mn.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:uh()}})),new dp(this.An,this.Rn,t,e,n)},t.prototype.bn=function(){this.Pn=!1,this.mn=wp()},t.prototype.vn=function(t,e){this.Pn=!0,this.mn=this.mn.Ie(t,e)},t.prototype.Sn=function(t){this.Pn=!0,this.mn=this.mn.remove(t)},t.prototype.Dn=function(){this.In+=1},t.prototype.Cn=function(){this.In-=1},t.prototype.xn=function(){this.Pn=!0,this.Rn=!0},t}(),bp=function(){function t(t){this.Nn=t,this.Fn=new Map,this.On=tp(),this.kn=_p(),this.Mn=new Xf(ph)}return t.prototype.Ln=function(t){for(var e=0,n=t.wn;e<n.length;e++){var r=n[e];t.En instanceof Cl?this.$n(r,t.En):t.En instanceof Nl&&this.Bn(r,t.key,t.En)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.Bn(r,t.key,t.En)},t.prototype.qn=function(t){var e=this;this.Un(t,(function(n){var r=e.Qn(n);switch(t.state){case 0:e.Kn(n)&&r.Vn(t.resumeToken);break;case 1:r.Cn(),r.yn||r.bn(),r.Vn(t.resumeToken);break;case 2:r.Cn(),r.yn||e.removeTarget(n);break;case 3:e.Kn(n)&&(r.xn(),r.Vn(t.resumeToken));break;case 4:e.Kn(n)&&(e.Wn(n),r.Vn(t.resumeToken));break;default:uh()}}))},t.prototype.Un=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Fn.forEach((function(t,r){n.Kn(r)&&e(r)}))},t.prototype.jn=function(t){var e=t.targetId,n=t.Tn.count,r=this.Gn(e);if(r){var i=r.target;if(Dl(i))if(0===n){var o=new Xh(i.path);this.Bn(e,o,new Nl(o,Gh.min()))}else ch(1===n);else this.zn(e)!==n&&(this.Wn(e),this.Mn=this.Mn.add(e))}},t.prototype.Hn=function(t){var e=this,n=new Map;this.Fn.forEach((function(r,i){var o=e.Gn(i);if(o){if(r.ln&&Dl(o.target)){var a=new Xh(o.target.path);null!==e.On.get(a)||e.Jn(i,a)||e.Bn(i,a,new Nl(a,t))}r.gn&&(n.set(i,r.pn()),r.bn())}}));var r=sp();this.kn.forEach((function(t,n){var i=!0;n.Ke((function(t){var n=e.Gn(t);return!n||2===n.re||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new pp(t,n,this.Mn,this.On,r);return this.On=tp(),this.kn=_p(),this.Mn=new Xf(ph),i},t.prototype.$n=function(t,e){if(this.Kn(t)){var n=this.Jn(t,e.key)?2:0;this.Qn(t).vn(e.key,n),this.On=this.On.Ie(e.key,e),this.kn=this.kn.Ie(e.key,this.Yn(e.key).add(t))}},t.prototype.Bn=function(t,e,n){if(this.Kn(t)){var r=this.Qn(t);this.Jn(t,e)?r.vn(e,1):r.Sn(e),this.kn=this.kn.Ie(e,this.Yn(e).delete(t)),n&&(this.On=this.On.Ie(e,n))}},t.prototype.removeTarget=function(t){this.Fn.delete(t)},t.prototype.zn=function(t){var e=this.Qn(t).pn();return this.Nn.Xn(t).size+e._n.size-e.dn.size},t.prototype.Dn=function(t){this.Qn(t).Dn()},t.prototype.Qn=function(t){var e=this.Fn.get(t);return e||(e=new mp,this.Fn.set(t,e)),e},t.prototype.Yn=function(t){var e=this.kn.get(t);return e||(e=new Xf(ph),this.kn=this.kn.Ie(t,e)),e},t.prototype.Kn=function(t){var e=null!==this.Gn(t);return e||ih("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Gn=function(t){var e=this.Fn.get(t);return e&&e.yn?null:this.Nn.Zn(t)},t.prototype.Wn=function(t){var e=this;this.Fn.set(t,new mp),this.Nn.Xn(t).forEach((function(n){e.Bn(t,n,null)}))},t.prototype.Jn=function(t,e){return this.Nn.Xn(t).has(e)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(){return new $f(Xh.At)}function wp(){return new $f(Xh.At)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ep={asc:"ASCENDING",desc:"DESCENDING"},Ip={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Tp=function(t,e){this.O=t,this.he=e};function Sp(t,e){return t.he?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cp(t,e){return t.he?e.toBase64():e.toUint8Array()}function Np(t,e){return Sp(t,e.Tt())}function kp(t){return ch(!!t),Gh.wt(function(t){var e=rl(t);return new Kh(e.seconds,e.nanos)}(t))}function Ap(t,e){return function(t){return new $h(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).Ct()}function Pp(t){var e=$h.xt(t);return ch(td(e)),e}function Op(t,e){return Ap(t.O,e.path)}function Rp(t,e){var n=Pp(e);if(n.get(1)!==t.O.projectId)throw new mh(yh.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.O.projectId);if(n.get(3)!==t.O.database)throw new mh(yh.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.O.database);return new Xh(Mp(n))}function Dp(t,e){return Ap(t.O,e)}function xp(t){var e=Pp(t);return 4===e.length?$h.Nt():Mp(e)}function Lp(t){return new $h(["projects",t.O.projectId,"databases",t.O.database]).Ct()}function Mp(t){return ch(t.length>4&&"documents"===t.get(4)),t.Pt(5)}function Fp(t,e,n){return{name:Op(t,e),fields:n.proto.mapValue.fields}}function Up(t,e,n){var r=Rp(t,e.name),i=kp(e.updateTime),o=new El({mapValue:{fields:e.fields}});return new Cl(r,i,o,{hasCommittedMutations:!!n})}function jp(t,e){var n;if(e instanceof jf)n={update:Fp(t,e.key,e.value)};else if(e instanceof Kf)n={delete:Op(t,e.key)};else if(e instanceof Vf)n={update:Fp(t,e.key,e.data),updateMask:Zp(e.Te)};else{if(!(e instanceof Gf))return uh();n={verify:Op(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof wf)return{fieldPath:e.field.Ct(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ef)return{fieldPath:e.field.Ct(),appendMissingElements:{values:n.elements}};if(n instanceof Tf)return{fieldPath:e.field.Ct(),removeAllFromArray:{values:n.elements}};if(n instanceof Cf)return{fieldPath:e.field.Ct(),increment:n._e};throw uh()}(0,t)}))),e.Ee.we||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Np(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:uh()}(t,e.Ee)),n}function Vp(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Of.updateTime(kp(t.updateTime)):void 0!==t.exists?Of.exists(t.exists):Of.de()}(e.currentDocument):Of.de(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)ch("REQUEST_TIME"===e.setToServerValue),n=new wf;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Ef(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Tf(i)}else"increment"in e?n=new Cf(t,e.increment):uh();var o=Yh.Mt(e.fieldPath);return new Af(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Rp(t,e.update.name),o=new El({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new el(e.map((function(t){return Yh.Mt(t)})))}(e.updateMask);return new Vf(i,o,a,n,r)}return new jf(i,o,n,r)}if(e.delete){var s=Rp(t,e.delete);return new Kf(s,n)}if(e.verify){var u=Rp(t,e.verify);return new Gf(u,n)}return uh()}function qp(t,e){return{documents:[Dp(t,e.path)]}}function Bp(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Dp(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Dp(t,r.yt()),n.structuredQuery.from=[{collectionId:r.Vt()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(_l(t.value))return{unaryFilter:{field:Qp(t.field),op:"IS_NAN"}};if(bl(t.value))return{unaryFilter:{field:Qp(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(_l(t.value))return{unaryFilter:{field:Qp(t.field),op:"IS_NOT_NAN"}};if(bl(t.value))return{unaryFilter:{field:Qp(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qp(t.field),op:$p(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Qp(t.field),direction:zp(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.he||xh(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Kp(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Kp(e.endAt)),n}function Wp(t){var e=xp(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ch(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=Hp(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new Kl(Yp(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return xh(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Gp(n.startAt));var h=null;return n.endAt&&(h=Gp(n.endAt)),Yl(e,i,s,a,u,"F",c,h)}function Hp(t){return t?void 0!==t.unaryFilter?[Jp(t)]:void 0!==t.fieldFilter?[Xp(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Hp(t)})).reduce((function(t,e){return t.concat(e)})):uh():[]}function Kp(t){return{before:t.before,values:t.position}}function Gp(t){var e=!!t.before,n=t.values||[];return new Wl(n,e)}function zp(t){return Ep[t]}function $p(t){return Ip[t]}function Qp(t){return{fieldPath:t.Ct()}}function Yp(t){return Yh.Mt(t.fieldPath)}function Xp(t){return xl.create(Yp(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return uh()}}(t.fieldFilter.op),t.fieldFilter.value)}function Jp(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Yp(t.unaryFilter.field);return xl.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Yp(t.unaryFilter.field);return xl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Yp(t.unaryFilter.field);return xl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Yp(t.unaryFilter.field);return xl.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return uh()}}function Zp(t){var e=[];return t.fields.forEach((function(t){return e.push(t.Ct())})),{fieldPaths:e}}function td(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t){return new Tp(t,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nd=function(){function t(t){var e=this;this.ts=null,this.es=null,this.result=void 0,this.error=void 0,this.ns=!1,this.ss=!1,t((function(t){e.ns=!0,e.result=t,e.ts&&e.ts(t)}),(function(t){e.ns=!0,e.error=t,e.es&&e.es(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.ss&&uh(),this.ss=!0,this.ns?this.error?this.rs(n,this.error):this.os(e,this.result):new t((function(t,i){r.ts=function(n){r.os(e,n).next(t,i)},r.es=function(e){r.rs(n,e).next(t,i)}}))},t.prototype.cs=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.us=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.os=function(e,n){return e?this.us((function(){return e(n)})):t.resolve(n)},t.prototype.rs=function(e,n){return e?this.us((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.hs=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.ls=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.hs(r)},t}(),rd=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this._s=new Wh,this.transaction.oncomplete=function(){n._s.resolve()},this.transaction.onabort=function(){e.error?n._s.reject(new ad(t,e.error)):n._s.resolve()},this.transaction.onerror=function(e){var r=ld(e.target.error);n._s.reject(new ad(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new ad(n,e)}},Object.defineProperty(t.prototype,"fs",{get:function(){return this._s.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this._s.reject(t),this.aborted||(ih("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new ud(e)},t}(),id=function(){function t(e,n,r){this.name=e,this.version=n,this.ds=r,12.2===t.ws(me())&&oh("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return ih("SimpleDb","Removing database:",t),cd(window.indexedDB.deleteDatabase(t)).cs()},t.G=function(){if("undefined"==typeof indexedDB)return!1;if(t.Es())return!0;var e=me(),n=t.ws(e),r=0<n&&n<10,i=t.Ts(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Es=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Is)},t.As=function(t,e){return t.store(e)},t.ws=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Ts=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Rs=function(t){return Zc(this,void 0,void 0,(function(){var e,n=this;return th(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(ih("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ad(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new mh(yh.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new ad(t,n))},i.onupgradeneeded=function(t){ih("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.ds.Ps(e,i.transaction,t.oldVersion,n.version).next((function(){ih("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.ys&&(this.db.onversionchange=function(t){return n.ys(t)}),this.db)]}}))}))},t.prototype.gs=function(t){this.ys=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Zc(this,void 0,void 0,(function(){var i,o,a,s,u;return th(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,c,h;return th(this,(function(l){switch(l.label){case 0:++o,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,s.Rs(t)];case 2:return s.db=l.sent(),e=rd.open(s.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),nd.reject(t)})).cs(),u={},a.catch((function(){})),[4,e.fs];case 3:return[2,(u.value=(l.sent(),a),u)];case 4:return c=l.sent(),h="FirebaseError"!==c.name&&o<3,ih("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),s.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),od=function(){function t(t){this.Vs=t,this.ps=!1,this.bs=null}return Object.defineProperty(t.prototype,"ns",{get:function(){return this.ps},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vs",{get:function(){return this.bs},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Vs=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ps=!0},t.prototype.Ss=function(t){this.bs=t},t.prototype.delete=function(){return cd(this.Vs.delete())},t}(),ad=function(t){function e(e,n){var r=this;return(r=t.call(this,yh.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Jc(e,t),e}(mh);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(t){return"IndexedDbTransactionError"===t.name}var ud=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(ih("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(ih("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),cd(n)},t.prototype.add=function(t){return ih("SimpleDb","ADD",this.store.name,t,t),cd(this.store.add(t))},t.prototype.get=function(t){var e=this;return cd(this.store.get(t)).next((function(n){return void 0===n&&(n=null),ih("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return ih("SimpleDb","DELETE",this.store.name,t),cd(this.store.delete(t))},t.prototype.count=function(){return ih("SimpleDb","COUNT",this.store.name),cd(this.store.count())},t.prototype.Ds=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Cs(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.xs=function(t,e){ih("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ns=!1;var r=this.cursor(n);return this.Cs(r,(function(t,e,n){return n.delete()}))},t.prototype.Fs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Cs(r,e)},t.prototype.Os=function(t){var e=this.cursor({});return new nd((function(n,r){e.onerror=function(t){var e=ld(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.Cs=function(t,e){var n=[];return new nd((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new od(i),a=e(i.primaryKey,i.value,o);if(a instanceof nd){var s=a.catch((function(t){return o.done(),nd.reject(t)}));n.push(s)}o.ns?r():null===o.vs?i.continue():i.continue(o.vs)}else r()}})).next((function(){return nd.hs(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ns?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function cd(t){return new nd((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=ld(t.target.error);n(e)}}))}var hd=!1;function ld(t){var e=id.ws(me());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new mh("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return hd||(hd=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fd=function(){function t(t,e,n,r,i){this.ks=t,this.Ms=e,this.Ls=n,this.op=r,this.$s=i,this.Bs=new Wh,this.then=this.Bs.promise.then.bind(this.Bs.promise),this.Bs.promise.catch((function(t){}))}return t.qs=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.Us=setTimeout((function(){return e.Qs()}),t)},t.prototype.Ks=function(){return this.Qs()},t.prototype.cancel=function(t){null!==this.Us&&(this.clearTimeout(),this.Bs.reject(new mh(yh.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Qs=function(){var t=this;this.ks.Ws((function(){return null!==t.Us?(t.clearTimeout(),t.op().then((function(e){return t.Bs.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Us&&(this.$s(this),clearTimeout(this.Us),this.Us=null)},t}();function pd(t,e){if(oh("AsyncQueue",e+": "+t),sd(t))return new mh(yh.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dd=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.js=t,this.Ms=e,this.Gs=n,this.zs=r,this.Hs=i,this.Js=0,this.Ys=null,this.Xs=Date.now(),this.reset()}return t.prototype.reset=function(){this.Js=0},t.prototype.Zs=function(){this.Js=this.Hs},t.prototype.ti=function(t){var e=this;this.cancel();var n=Math.floor(this.Js+this.ei()),r=Math.max(0,Date.now()-this.Xs),i=Math.max(0,n-r);i>0&&ih("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Js+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ys=this.js.ni(this.Ms,i,(function(){return e.Xs=Date.now(),t()})),this.Js*=this.zs,this.Js<this.Gs&&(this.Js=this.Gs),this.Js>this.Hs&&(this.Js=this.Hs)},t.prototype.si=function(){null!==this.Ys&&(this.Ys.Ks(),this.Ys=null)},t.prototype.cancel=function(){null!==this.Ys&&(this.Ys.cancel(),this.Ys=null)},t.prototype.ei=function(){return(Math.random()-.5)*this.Js},t}(),vd=function(){function t(t,e,n,r,i,o){this.js=t,this.ii=n,this.ri=r,this.oi=i,this.listener=o,this.state=0,this.ci=0,this.ai=null,this.stream=null,this.ui=new dd(t,e)}return t.prototype.hi=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.li=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this._i()},t.prototype.stop=function(){return Zc(this,void 0,void 0,(function(){return th(this,(function(t){switch(t.label){case 0:return this.hi()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.fi=function(){this.state=0,this.ui.reset()},t.prototype.di=function(){var t=this;this.li()&&null===this.ai&&(this.ai=this.js.ni(this.ii,6e4,(function(){return t.wi()})))},t.prototype.Ei=function(t){this.Ti(),this.stream.send(t)},t.prototype.wi=function(){return Zc(this,void 0,void 0,(function(){return th(this,(function(t){return this.li()?[2,this.close(0)]:[2]}))}))},t.prototype.Ti=function(){this.ai&&(this.ai.cancel(),this.ai=null)},t.prototype.close=function(t,e){return Zc(this,void 0,void 0,(function(){return th(this,(function(n){switch(n.label){case 0:return this.Ti(),this.ui.cancel(),this.ci++,3!==t?this.ui.reset():e&&e.code===yh.RESOURCE_EXHAUSTED?(oh(e.toString()),oh("Using maximum backoff delay to prevent overloading the backend."),this.ui.Zs()):e&&e.code===yh.UNAUTHENTICATED&&this.oi.g(),null!==this.stream&&(this.Ii(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Z(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.Ii=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.mi(this.ci),n=this.ci;this.oi.getToken().then((function(e){t.ci===n&&t.Ai(e)}),(function(n){e((function(){var e=new mh(yh.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Ri(e)}))}))},t.prototype.Ai=function(t){var e=this,n=this.mi(this.ci);this.stream=this.Pi(t),this.stream.Y((function(){n((function(){return e.state=2,e.listener.Y()}))})),this.stream.Z((function(t){n((function(){return e.Ri(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype._i=function(){var t=this;this.state=4,this.ui.ti((function(){return Zc(t,void 0,void 0,(function(){return th(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.Ri=function(t){return ih("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.mi=function(t){var e=this;return function(n){e.js.Ws((function(){return e.ci===t?n():(ih("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),gd=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).fe=i,a}return Jc(e,t),e.prototype.Pi=function(t){return this.ri.ft("Listen",t)},e.prototype.onMessage=function(t){this.ui.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:uh()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.he?(ch(void 0===e||"string"==typeof e),gh.fromBase64String(e||"")):(ch(void 0===e||e instanceof Uint8Array),gh.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?yh.UNKNOWN:qh(t.code);return new mh(e,t.message||"")}(s);n=new yp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Rp(t,r.document.name),o=kp(r.document.updateTime);var s=new El({mapValue:{fields:r.document.fields}}),u=(a=new Cl(i,o,s,{}),r.targetIds||[]),c=r.removedTargetIds||[];n=new vp(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Rp(t,r.document),o=r.readTime?kp(r.readTime):Gh.min(),s=new Nl(i,o),a=r.removedTargetIds||[],n=new vp([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Rp(t,r.document),o=r.removedTargetIds||[],n=new vp([],o,i,null);else{if(!("filter"in e))return uh();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new zf(r),o=h.targetId,n=new gp(o,i)}return n}(this.fe,t),n=function(t){if(!("targetChange"in t))return Gh.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Gh.min():e.readTime?kp(e.readTime):Gh.min()}(t);return this.listener.yi(e,n)},e.prototype.gi=function(t){var e={};e.database=Lp(this.fe),e.addTarget=function(t,e){var n,r=e.target;return(n=Dl(r)?{documents:qp(t,r)}:{query:Bp(t,r)}).targetId=e.targetId,e.resumeToken.o()>0?n.resumeToken=Cp(t,e.resumeToken):e.oe.u(Gh.min())>0&&(n.readTime=Sp(t,e.oe.Tt())),n}(this.fe,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return uh()}}(0,e.re);return null==n?null:{"goog-listen-tags":n}}(this.fe,t);n&&(e.labels=n),this.Ei(e)},e.prototype.Vi=function(t){var e={};e.database=Lp(this.fe),e.removeTarget=t,this.Ei(e)},e}(vd),yd=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).fe=i,a.pi=!1,a}return Jc(e,t),Object.defineProperty(e.prototype,"bi",{get:function(){return this.pi},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.pi=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.Ii=function(){this.pi&&this.vi([])},e.prototype.Pi=function(t){return this.ri.ft("Write",t)},e.prototype.onMessage=function(t){if(ch(!!t.streamToken),this.lastStreamToken=t.streamToken,this.pi){this.ui.reset();var e=function(t,e){return t&&t.length>0?(ch(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?kp(t.updateTime):kp(e);n.isEqual(Gh.min())&&(n=kp(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Pf(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=kp(t.commitTime);return this.listener.Si(n,e)}return ch(!t.writeResults||0===t.writeResults.length),this.pi=!0,this.listener.Di()},e.prototype.Ci=function(){var t={};t.database=Lp(this.fe),this.Ei(t)},e.prototype.vi=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return jp(e.fe,t)}))};this.Ei(n)},e}(vd),md=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.ri=n,i.fe=r,i.xi=!1,i}return Jc(e,t),e.prototype.Ni=function(){if(this.xi)throw new mh(yh.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.at=function(t,e,n){var r=this;return this.Ni(),this.credentials.getToken().then((function(i){return r.ri.at(t,e,n,i)})).catch((function(t){throw t.code===yh.UNAUTHENTICATED&&r.credentials.g(),t}))},e.prototype._t=function(t,e,n){var r=this;return this.Ni(),this.credentials.getToken().then((function(i){return r.ri._t(t,e,n,i)})).catch((function(t){throw t.code===yh.UNAUTHENTICATED&&r.credentials.g(),t}))},e.prototype.terminate=function(){this.xi=!1},e}((function(){})),bd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_d=function(){function t(){this.Fi=[]}return t.prototype.Oi=function(t){this.Fi.push(t)},t.prototype.ki=function(){this.Fi.forEach((function(t){return t()}))},t}(),wd={Mi:!1,Li:0,$i:0,Bi:0},Ed=function(){function t(t,e,n){this.qi=t,this.Ui=e,this.Qi=n}return t.Ki=function(e){return new t(e,t.Wi,t.ji)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ed.Wi=10,Ed.ji=1e3,Ed.Gi=new Ed(41943040,Ed.Wi,Ed.ji),Ed.zi=new Ed(-1,0,0);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Id=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.Hi=function(t){return n.Ji(t)},this.Yi=function(t){return e.Xi(t)})}return t.prototype.Ji=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.Yi&&this.Yi(t),t},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(t){return Zc(this,void 0,void 0,(function(){return th(this,(function(e){if(t.code!==yh.FAILED_PRECONDITION||t.message!==bd)throw t;return ih("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Id.Zi=-1;var Sd=function(t,e){this.progress=t,this.tr=e},Cd=function(){function t(t,e,n,r){this.batchId=t,this.er=e,this.baseMutations=n,this.mutations=r}return t.prototype.nr=function(t,e,n){for(var r=n.sr,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=xf(o,e,r[i]))}return e},t.prototype.ir=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Lf(i,e,e,this.er))}for(var o=e,a=0,s=this.mutations;a<s.length;a++){var u=s[a];u.key.isEqual(t)&&(e=Lf(u,e,o,this.er))}return e},t.prototype.rr=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.ir(r.key,t.get(r.key));i&&(n=n.Ie(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),sp())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&dh(this.mutations,t.mutations,(function(t,e){return Ff(t,e)}))&&dh(this.baseMutations,t.baseMutations,(function(t,e){return Ff(t,e)}))},t}(),Nd=function(){function t(t,e,n,r){this.batch=t,this.cr=e,this.sr=n,this.ar=r}return t.from=function(e,n,r){ch(e.mutations.length===r.length);for(var i=op(),o=e.mutations,a=0;a<o.length;a++)i=i.Ie(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),kd=function(){function t(t,e){this.ur=t,this.hr=e,this.lr={}}return t.prototype.get=function(t){var e=this.ur(t),n=this.lr[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.hr(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ur(t),r=this.lr[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.hr(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.lr[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ur(t),n=this.lr[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.hr(n[r][0],t))return 1===n.length?delete this.lr[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Zh(this.lr,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.bt=function(){return tl(this.lr)},t}(),Ad=function(){function t(){this._r=new kd((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.dr=!1}return t.prototype.wr=function(t){var e=this._r.get(t);return e?e.readTime:Gh.min()},t.prototype.Er=function(t,e){this.Tr(),this._r.set(t.key,{Ir:t,readTime:e})},t.prototype.mr=function(t,e){void 0===e&&(e=null),this.Tr(),this._r.set(t,{Ir:null,readTime:e})},t.prototype.Ar=function(t,e){this.Tr();var n=this._r.get(e);return void 0!==n?nd.resolve(n.Ir):this.Rr(t,e)},t.prototype.getEntries=function(t,e){return this.Pr(t,e)},t.prototype.apply=function(t){return this.Tr(),this.dr=!0,this.yr(t)},t.prototype.Tr=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=ph(n,i);return 0===a?ph(r,o):a}var Od=function(){function t(t){this.gr=t,this.buffer=new Xf(Pd),this.Vr=0}return t.prototype.pr=function(){return++this.Vr},t.prototype.br=function(t){var e=[t,this.pr()];if(this.buffer.size<this.gr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Pd(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Rd=function(){function t(t,e){this.vr=t,this.ks=e,this.Sr=!1,this.Dr=null}return t.prototype.start=function(t){-1!==this.vr.params.qi&&this.Cr(t)},t.prototype.stop=function(){this.Dr&&(this.Dr.cancel(),this.Dr=null)},Object.defineProperty(t.prototype,"Nr",{get:function(){return null!==this.Dr},enumerable:!1,configurable:!0}),t.prototype.Cr=function(t){var e=this,n=this.Sr?3e5:6e4;ih("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Dr=this.ks.ni("lru_garbage_collection",n,(function(){return Zc(e,void 0,void 0,(function(){var e;return th(this,(function(n){switch(n.label){case 0:this.Dr=null,this.Sr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Fr(this.vr)];case 2:return n.sent(),[3,7];case 3:return sd(e=n.sent())?(ih("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Td(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Cr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Dd=function(){function t(t,e){this.Or=t,this.params=e}return t.prototype.kr=function(t,e){return this.Or.Mr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Lr=function(t,e){var n=this;if(0===e)return nd.resolve(Id.Zi);var r=new Od(e);return this.Or.Un(t,(function(t){return r.br(t.sequenceNumber)})).next((function(){return n.Or.$r(t,(function(t){return r.br(t)}))})).next((function(){return r.maxValue}))},t.prototype.Br=function(t,e,n){return this.Or.Br(t,e,n)},t.prototype.qr=function(t,e){return this.Or.qr(t,e)},t.prototype.Ur=function(t,e){var n=this;return-1===this.params.qi?(ih("LruGarbageCollector","Garbage collection skipped; disabled"),nd.resolve(wd)):this.Qr(t).next((function(r){return r<n.params.qi?(ih("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.qi),wd):n.Kr(t,e)}))},t.prototype.Qr=function(t){return this.Or.Qr(t)},t.prototype.Kr=function(t,e){var n,r,i,o,a,s,u,c=this,h=Date.now();return this.kr(t,this.params.Ui).next((function(e){return e>c.params.Qi?(ih("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Qi+" from "+e),r=c.params.Qi):r=e,o=Date.now(),c.Lr(t,r)})).next((function(r){return n=r,a=Date.now(),c.Br(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.qr(t,n)})).next((function(t){return u=Date.now(),rh()<=on.DEBUG&&ih("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-h)+"ms"),nd.resolve({Mi:!0,Li:r,$i:i,Bi:t})}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(t,e,n){if(!n)throw new mh(yh.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Ld(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new mh(yh.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Md(t,e,n,r){if(!0===e&&!0===r)throw new mh(yh.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Fd(t){if(!Xh.qt(t))throw new mh(yh.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Ud(t){if(Xh.qt(t))throw new mh(yh.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function jd(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":uh()}function Vd(t,e){if("_delegate"in t&&(t=t._),!(t instanceof e)){if(e.name===t.constructor.name)throw new mh(yh.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=jd(t);throw new mh(yh.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function qd(t,e){if(e<=0)throw new mh(yh.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bd=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new mh(yh.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new mh(yh.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Md("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Wd=new Map,Hd=function(){function t(t,e){this.Wr="(lite)",this.jr=new Bd({}),this.Gr=!1,t instanceof Oh?(this.zr=t,this.Hr=new Ch):(this.Jr=t,this.zr=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new mh(yh.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oh(t.options.projectId)}(t),this.Hr=new Nh(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Jr)throw new mh(yh.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Jr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Yr",{get:function(){return this.Gr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xr",{get:function(){return void 0!==this.Zr},enumerable:!1,configurable:!0}),t.prototype.eo=function(t){if(this.Gr)throw new mh(yh.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.jr=new Bd(t),void 0!==t.credentials&&(this.Hr=function(t){if(!t)return new Ch;switch(t.type){case"gapi":var e=t.client;return ch(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Ah(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new mh(yh.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.no=function(){return this.jr},t.prototype.so=function(){return this.Gr=!0,this.jr},t.prototype._delete=function(){return this.Zr||(this.Zr=this.io()),this.Zr},t.prototype.io=function(){return this,(t=Wd.get(this))&&(ih("ComponentProvider","Removing Datastore"),Wd.delete(this),t.terminate()),Promise.resolve();var t},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=zd(e)),e=Gd(t.get(n),e);return zd(e)}function Gd(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function zd(t){return t+""}function $d(t){var e=t.length;if(ch(e>=2),2===e)return ch(""===t.charAt(0)&&""===t.charAt(1)),$h.Nt();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&uh(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:uh()}o=a+2}return new $h(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qd=function(t,e){this.seconds=t,this.nanoseconds=e},Yd=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Yd.store="owner",Yd.key="owner";var Xd=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Xd.store="mutationQueues",Xd.keyPath="userId";var Jd=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Jd.store="mutations",Jd.keyPath="batchId",Jd.userMutationsIndex="userMutationsIndex",Jd.userMutationsKeyPath=["userId","batchId"];var Zd=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Kd(e)]},t.key=function(t,e,n){return[t,Kd(e),n]},t}();Zd.store="documentMutations",Zd.PLACEHOLDER=new Zd;var tv=function(t,e){this.path=t,this.readTime=e},ev=function(t,e){this.path=t,this.version=e},nv=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};nv.store="remoteDocuments",nv.readTimeIndex="readTimeIndex",nv.readTimeIndexPath="readTime",nv.collectionReadTimeIndex="collectionReadTimeIndex",nv.collectionReadTimeIndexPath=["parentPath","readTime"];var rv=function(t){this.byteSize=t};rv.store="remoteDocumentGlobal",rv.key="remoteDocumentGlobalKey";var iv=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};iv.store="targets",iv.keyPath="targetId",iv.queryTargetsIndexName="queryTargetsIndex",iv.queryTargetsKeyPath=["canonicalId","targetId"];var ov=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};ov.store="targetDocuments",ov.keyPath=["targetId","path"],ov.documentTargetsIndex="documentTargetsIndex",ov.documentTargetsKeyPath=["path","targetId"];var av=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};av.key="targetGlobalKey",av.store="targetGlobal";var sv=function(t,e){this.collectionId=t,this.parent=e};sv.store="collectionParents",sv.keyPath=["collectionId","parent"];var uv=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};uv.store="clientMetadata",uv.keyPath="clientId";var cv=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};cv.store="bundles",cv.keyPath="bundleId";var hv=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};hv.store="namedQueries",hv.keyPath="name";var lv=eh(eh(eh(eh([Xd.store,Jd.store,Zd.store,nv.store,iv.store,Yd.store,av.store,ov.store],[uv.store]),[rv.store]),[sv.store]),[cv.store,hv.store]),fv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ro=e,r.oo=n,r}return Jc(e,t),e}(_d);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(t,e){var n=hh(t);return id.As(n.ro,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dv=function(t){this.co=t};function vv(t,e){if(e.document)return Up(t.co,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Xh.Ut(e.noDocument.path),r=_v(e.noDocument.readTime);return new Nl(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Xh.Ut(e.unknownDocument.path);return r=_v(e.unknownDocument.version),new kl(i,r)}return uh()}function gv(t,e,n){var r=yv(n),i=e.key.path.yt().Dt();if(e instanceof Cl){var o=function(t,e){return{name:Op(t,e.key),fields:e.Yt().mapValue.fields,updateTime:Sp(t,e.version.Tt())}}(t.co,e),a=e.hasCommittedMutations;return new nv(null,null,o,a,r,i)}if(e instanceof Nl){var s=e.key.path.Dt(),u=bv(e.version);return a=e.hasCommittedMutations,new nv(null,new tv(s,u),null,a,r,i)}if(e instanceof kl){var c=e.key.path.Dt(),h=bv(e.version);return new nv(new ev(c,h),null,null,!0,r,i)}return uh()}function yv(t){var e=t.Tt();return[e.seconds,e.nanoseconds]}function mv(t){var e=new Kh(t[0],t[1]);return Gh.wt(e)}function bv(t){var e=t.Tt();return new Qd(e.seconds,e.nanoseconds)}function _v(t){var e=new Kh(t.seconds,t.nanoseconds);return Gh.wt(e)}function wv(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Vp(t.co,e)})),r=e.mutations.length-1;r>=0;--r){var i=e.mutations[r];void 0!==(null==i?void 0:i.transform)&&(e.mutations[r-1].updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r,1),--r)}var o=e.mutations.map((function(e){return Vp(t.co,e)})),a=Kh.fromMillis(e.localWriteTimeMs);return new Cd(e.batchId,a,n,o)}function Ev(t){var e,n,r=_v(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?_v(t.lastLimboFreeSnapshotVersion):Gh.min();return void 0!==t.query.documents?(ch(1===(n=t.query).documents.length),e=of(Xl(xp(n.documents[0])))):e=function(t){return of(Wp(t))}(t.query),new pf(e,t.targetId,0,t.lastListenSequenceNumber,r,i,gh.fromBase64String(t.resumeToken))}function Iv(t,e){var n,r=bv(e.oe),i=bv(e.lastLimboFreeSnapshotVersion);n=Dl(e.target)?qp(t.co,e.target):Bp(t.co,e.target);var o=e.resumeToken.toBase64();return new iv(e.targetId,Ol(e.target),r,o,e.sequenceNumber,i,n)}function Tv(t){var e=Wp({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?af(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sv=function(){function t(){}return t.prototype.ao=function(t,e){return Cv(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:_v(e.createTime),version:e.version};var e}))},t.prototype.uo=function(t,e){return Cv(t).put({bundleId:(n=e).id,createTime:bv(kp(n.createTime)),version:n.version});var n},t.prototype.ho=function(t,e){return Nv(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Tv(e.bundledQuery),readTime:_v(e.readTime)};var e}))},t.prototype.lo=function(t,e){return Nv(t).put(function(t){return{name:t.name,readTime:bv(kp(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Cv(t){return pv(t,cv.store)}function Nv(t){return pv(t,hv.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kv=function(){function t(){this._o=new Av}return t.prototype.fo=function(t,e){return this._o.add(e),nd.resolve()},t.prototype.wo=function(t,e){return nd.resolve(this._o.getEntries(e))},t}(),Av=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.Vt(),n=t.yt(),r=this.index[e]||new Xf($h.At),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.Vt(),n=t.yt(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Xf($h.At)).Dt()},t}(),Pv=function(){function t(){this.Eo=new Av}return t.prototype.fo=function(t,e){var n=this;if(!this.Eo.has(e)){var r=e.Vt(),i=e.yt();t.Oi((function(){n.Eo.add(e)}));var o={collectionId:r,parent:Kd(i)};return Ov(t).put(o)}return nd.resolve()},t.prototype.wo=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[vh(e),""],!1,!0);return Ov(t).Ds(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push($d(o.parent))}return n}))},t}();function Ov(t){return pv(t,sv.store)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(t,e,n){var r=t.store(Jd.store),i=t.store(Zd.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.Fs({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){ch(1===s)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=Zd.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return nd.hs(o).next((function(){return c}))}function Dv(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw uh();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xv=function(){function t(t,e,n,r){this.userId=t,this.fe=e,this.To=n,this.Io=r,this.mo={}}return t.Ao=function(e,n,r,i){return ch(""!==e.uid),new t(e.T()?e.uid:"",n,r,i)},t.prototype.Ro=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mv(t).Fs({index:Jd.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Po=function(t,e,n,r){var i=this,o=Fv(t),a=Mv(t);return a.add({}).next((function(s){ch("number"==typeof s);for(var u=new Cd(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return jp(t.co,e)})),i=n.mutations.map((function(e){return jp(t.co,e)}));return new Jd(e,n.batchId,n.er.toMillis(),r,i)}(i.fe,i.userId,u),h=[],l=new Xf((function(t,e){return ph(t.Ct(),e.Ct())})),f=0,p=r;f<p.length;f++){var d=p[f],v=Zd.key(i.userId,d.key.path,s);l=l.add(d.key.path.yt()),h.push(a.put(c)),h.push(o.put(v,Zd.PLACEHOLDER))}return l.forEach((function(e){h.push(i.To.fo(t,e))})),t.Oi((function(){i.mo[s]=u.keys()})),nd.hs(h).next((function(){return u}))}))},t.prototype.yo=function(t,e){var n=this;return Mv(t).get(e).next((function(t){return t?(ch(t.userId===n.userId),wv(n.fe,t)):null}))},t.prototype.Vo=function(t,e){var n=this;return this.mo[e]?nd.resolve(this.mo[e]):this.yo(t,e).next((function(t){if(t){var r=t.keys();return n.mo[e]=r,r}return null}))},t.prototype.po=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Mv(t).Fs({index:Jd.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(ch(e.batchId>=r),o=wv(n.fe,e)),i.done()})).next((function(){return o}))},t.prototype.bo=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Mv(t).Fs({index:Jd.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.vo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Mv(t).Ds(Jd.userMutationsIndex,n).next((function(t){return t.map((function(t){return wv(e.fe,t)}))}))},t.prototype.So=function(t,e){var n=this,r=Zd.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Fv(t).Fs({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],h=$d(u);if(s===n.userId&&e.path.isEqual(h))return Mv(t).get(c).next((function(t){if(!t)throw uh();ch(t.userId===n.userId),o.push(wv(n.fe,t))}));a.done()})).next((function(){return o}))},t.prototype.Do=function(t,e){var n=this,r=new Xf(ph),i=[];return e.forEach((function(e){var o=Zd.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Fv(t).Fs({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=$d(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),nd.hs(i).next((function(){return n.Co(t,r)}))},t.prototype.xo=function(t,e){var n=this,r=e.path,i=r.length+1,o=Zd.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Xf(ph);return Fv(t).Fs({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],h=$d(u);a===n.userId&&r.vt(h)?h.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Co(t,s)}))},t.prototype.Co=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Mv(t).get(e).next((function(t){if(null===t)throw uh();ch(t.userId===n.userId),r.push(wv(n.fe,t))})))})),nd.hs(i).next((function(){return r}))},t.prototype.No=function(t,e){var n=this;return Rv(t.ro,this.userId,e).next((function(r){return t.Oi((function(){n.Fo(e.batchId)})),nd.forEach(r,(function(e){return n.Io.Oo(t,e)}))}))},t.prototype.Fo=function(t){delete this.mo[t]},t.prototype.ko=function(t){var e=this;return this.Ro(t).next((function(n){if(!n)return nd.resolve();var r=IDBKeyRange.lowerBound(Zd.prefixForUser(e.userId)),i=[];return Fv(t).Fs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=$d(t[1]);i.push(o)}else r.done()})).next((function(){ch(0===i.length)}))}))},t.prototype.Mo=function(t,e){return Lv(t,this.userId,e)},t.prototype.Lo=function(t){var e=this;return Uv(t).get(this.userId).next((function(t){return t||new Xd(e.userId,-1,"")}))},t}();function Lv(t,e,n){var r=Zd.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Fv(t).Fs({range:o,Ns:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Mv(t){return pv(t,Jd.store)}function Fv(t){return pv(t,Zd.store)}function Uv(t){return pv(t,Xd.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jv=function(){function t(t){this.$o=t}return t.prototype.next=function(){return this.$o+=2,this.$o},t.Bo=function(){return new t(0)},t.qo=function(){return new t(-1)},t}(),Vv=function(){function t(t,e){this.Io=t,this.fe=e}return t.prototype.Uo=function(t){var e=this;return this.Qo(t).next((function(n){var r=new jv(n.highestTargetId);return n.highestTargetId=r.next(),e.Ko(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Wo=function(t){return this.Qo(t).next((function(t){return Gh.wt(new Kh(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.jo=function(t){return this.Qo(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Go=function(t,e,n){var r=this;return this.Qo(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.Tt()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ko(t,i)}))},t.prototype.zo=function(t,e){var n=this;return this.Ho(t,e).next((function(){return n.Qo(t).next((function(r){return r.targetCount+=1,n.Jo(e,r),n.Ko(t,r)}))}))},t.prototype.Yo=function(t,e){return this.Ho(t,e)},t.prototype.Xo=function(t,e){var n=this;return this.Zo(t,e.targetId).next((function(){return qv(t).delete(e.targetId)})).next((function(){return n.Qo(t)})).next((function(e){return ch(e.targetCount>0),e.targetCount-=1,n.Ko(t,e)}))},t.prototype.Br=function(t,e,n){var r=this,i=0,o=[];return qv(t).Fs((function(a,s){var u=Ev(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Xo(t,u)))})).next((function(){return nd.hs(o)})).next((function(){return i}))},t.prototype.Un=function(t,e){return qv(t).Fs((function(t,n){var r=Ev(n);e(r)}))},t.prototype.Qo=function(t){return Bv(t).get(av.key).next((function(t){return ch(null!==t),t}))},t.prototype.Ko=function(t,e){return Bv(t).put(av.key,e)},t.prototype.Ho=function(t,e){return qv(t).put(Iv(this.fe,e))},t.prototype.Jo=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.tc=function(t){return this.Qo(t).next((function(t){return t.targetCount}))},t.prototype.ec=function(t,e){var n=Ol(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return qv(t).Fs({range:r,index:iv.queryTargetsIndexName},(function(t,n,r){var o=Ev(n);Rl(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.nc=function(t,e,n){var r=this,i=[],o=Wv(t);return e.forEach((function(e){var a=Kd(e.path);i.push(o.put(new ov(n,a))),i.push(r.Io.sc(t,n,e))})),nd.hs(i)},t.prototype.ic=function(t,e,n){var r=this,i=Wv(t);return nd.forEach(e,(function(e){var o=Kd(e.path);return nd.hs([i.delete([n,o]),r.Io.rc(t,n,e)])}))},t.prototype.Zo=function(t,e){var n=Wv(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.oc=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Wv(t),i=sp();return r.Fs({range:n,Ns:!0},(function(t,e,n){var r=$d(t[1]),o=new Xh(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Mo=function(t,e){var n=Kd(e.path),r=IDBKeyRange.bound([n],[vh(n)],!1,!0),i=0;return Wv(t).Fs({index:ov.documentTargetsIndex,Ns:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Zn=function(t,e){return qv(t).get(e).next((function(t){return t?Ev(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(t){return pv(t,iv.store)}function Bv(t){return pv(t,av.store)}function Wv(t){return pv(t,ov.store)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hv=function(){function t(t,e){this.db=t,this.vr=function(t,e){return new Dd(t,e)}(this,e)}return t.prototype.Mr=function(t){var e=this.cc(t);return this.db.ac().tc(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.cc=function(t){var e=0;return this.$r(t,(function(t){e++})).next((function(){return e}))},t.prototype.Un=function(t,e){return this.db.ac().Un(t,e)},t.prototype.$r=function(t,e){return this.uc(t,(function(t,n){return e(n)}))},t.prototype.sc=function(t,e,n){return Kv(t,n)},t.prototype.rc=function(t,e,n){return Kv(t,n)},t.prototype.Br=function(t,e,n){return this.db.ac().Br(t,e,n)},t.prototype.Oo=function(t,e){return Kv(t,e)},t.prototype.hc=function(t,e){return function(t,e){var n=!1;return Uv(t).Os((function(r){return Lv(t,r,e).next((function(t){return t&&(n=!0),nd.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.qr=function(t,e){var n=this,r=this.db._c().lc(),i=[],o=0;return this.uc(t,(function(a,s){if(s<=e){var u=n.hc(t,a).next((function(e){if(!e)return o++,r.Ar(t,a).next((function(){return r.mr(a),Wv(t).delete([0,Kd(a.path)])}))}));i.push(u)}})).next((function(){return nd.hs(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.ce(t.oo);return this.db.ac().Yo(t,n)},t.prototype.fc=function(t,e){return Kv(t,e)},t.prototype.uc=function(t,e){var n,r=Wv(t),i=Id.Zi;return r.Fs({index:ov.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==Id.Zi&&e(new Xh($d(n)),i),i=s,n=a):i=Id.Zi})).next((function(){i!==Id.Zi&&e(new Xh($d(n)),i)}))},t.prototype.Qr=function(t){return this.db._c().dc(t)},t}();function Kv(t,e){return Wv(t).put(function(t,e){return new ov(0,Kd(t.path),e)}(e,t.oo))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gv=function(){function t(t,e){this.fe=t,this.To=e}return t.prototype.Er=function(t,e,n){return Qv(t).put(Yv(e),n)},t.prototype.mr=function(t,e){var n=Qv(t),r=Yv(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.wc(t,r)}))},t.prototype.Ar=function(t,e){var n=this;return Qv(t).get(Yv(e)).next((function(t){return n.Ec(t)}))},t.prototype.Tc=function(t,e){var n=this;return Qv(t).get(Yv(e)).next((function(t){var e=n.Ec(t);return e?{Ir:e,size:Dv(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=ep();return this.Ic(t,e,(function(t,e){var i=n.Ec(e);r=r.Ie(t,i)})).next((function(){return r}))},t.prototype.mc=function(t,e){var n=this,r=ep(),i=new $f(Xh.At);return this.Ic(t,e,(function(t,e){var o=n.Ec(e);o?(r=r.Ie(t,o),i=i.Ie(t,Dv(e))):(r=r.Ie(t,null),i=i.Ie(t,0))})).next((function(){return{Ac:r,Rc:i}}))},t.prototype.Ic=function(t,e,n){if(e.bt())return nd.resolve();var r=IDBKeyRange.bound(e.first().path.Dt(),e.last().path.Dt()),i=e.ge(),o=i.De();return Qv(t).Fs({range:r},(function(t,e,r){for(var a=Xh.Ut(t);o&&Xh.At(o,a)<0;)n(o,null),o=i.De();o&&o.isEqual(a)&&(n(o,e),o=i.Ce()?i.De():null),o?r.Ss(o.path.Dt()):r.done()})).next((function(){for(;o;)n(o,null),o=i.Ce()?i.De():null}))},t.prototype.Pc=function(t,e,n){var r=this,i=rp(),o=e.path.length+1,a={};if(n.isEqual(Gh.min())){var s=e.path.Dt();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.Dt(),c=yv(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=nv.collectionReadTimeIndex}return Qv(t).Fs(a,(function(t,n,a){if(t.length===o){var s=vv(r.fe,n);e.path.vt(s.key.path)?s instanceof Cl&&hf(e,s)&&(i=i.Ie(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.lc=function(t){return new zv(this,!!t&&t.yc)},t.prototype.dc=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return $v(t).get(rv.key).next((function(t){return ch(!!t),t}))},t.prototype.wc=function(t,e){return $v(t).put(rv.key,e)},t.prototype.Ec=function(t){if(t){var e=vv(this.fe,t);return e instanceof Nl&&e.version.isEqual(Gh.min())?null:e}return null},t}(),zv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).gc=e,r.yc=n,r.Vc=new kd((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Jc(e,t),e.prototype.yr=function(t){var e=this,n=[],r=0,i=new Xf((function(t,e){return ph(t.Ct(),e.Ct())}));return this._r.forEach((function(o,a){var s=e.Vc.get(o);if(a.Ir){var u=gv(e.gc.fe,a.Ir,e.wr(o));i=i.add(o.path.yt());var c=Dv(u);r+=c-s,n.push(e.gc.Er(t,o,u))}else if(r-=s,e.yc){var h=gv(e.gc.fe,new Nl(o,Gh.min()),e.wr(o));n.push(e.gc.Er(t,o,h))}else n.push(e.gc.mr(t,o))})),i.forEach((function(r){n.push(e.gc.To.fo(t,r))})),n.push(this.gc.updateMetadata(t,r)),nd.hs(n)},e.prototype.Rr=function(t,e){var n=this;return this.gc.Tc(t,e).next((function(t){return null===t?(n.Vc.set(e,0),null):(n.Vc.set(e,t.size),t.Ir)}))},e.prototype.Pr=function(t,e){var n=this;return this.gc.mc(t,e).next((function(t){var e=t.Ac;return t.Rc.forEach((function(t,e){n.Vc.set(t,e)})),e}))},e}(Ad);function $v(t){return pv(t,rv.store)}function Qv(t){return pv(t,nv.store)}function Yv(t){return t.path.Dt()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xv=function(){function t(t){this.fe=t}return t.prototype.Ps=function(t,e,n,r){var i=this;ch(n<r&&n>=0&&r<=11);var o=new rd("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Yd.store)}(t),function(t){t.createObjectStore(Xd.store,{keyPath:Xd.keyPath}),t.createObjectStore(Jd.store,{keyPath:Jd.keyPath,autoIncrement:!0}).createIndex(Jd.userMutationsIndex,Jd.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Zd.store)}(t),Jv(t),function(t){t.createObjectStore(nv.store)}(t));var a=nd.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(ov.store),t.deleteObjectStore(iv.store),t.deleteObjectStore(av.store)}(t),Jv(t)),a=a.next((function(){return function(t){var e=t.store(av.store),n=new av(0,0,Gh.min().Tt(),0);return e.put(av.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(Jd.store).Ds().next((function(n){t.deleteObjectStore(Jd.store),t.createObjectStore(Jd.store,{keyPath:Jd.keyPath,autoIncrement:!0}).createIndex(Jd.userMutationsIndex,Jd.userMutationsKeyPath,{unique:!0});var r=e.store(Jd.store),i=n.map((function(t){return r.put(t)}));return nd.hs(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(uv.store,{keyPath:uv.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.bc(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(rv.store)}(t),i.vc(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.Sc(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Dc(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(nv.store);e.createIndex(nv.readTimeIndex,nv.readTimeIndexPath,{unique:!1}),e.createIndex(nv.collectionReadTimeIndex,nv.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Cc(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(cv.store,{keyPath:cv.keyPath})}(t),function(t){t.createObjectStore(hv.store,{keyPath:hv.keyPath})}(t)}))),a},t.prototype.vc=function(t){var e=0;return t.store(nv.store).Fs((function(t,n){e+=Dv(n)})).next((function(){var n=new rv(e);return t.store(rv.store).put(rv.key,n)}))},t.prototype.bc=function(t){var e=this,n=t.store(Xd.store),r=t.store(Jd.store);return n.Ds().next((function(n){return nd.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Ds(Jd.userMutationsIndex,i).next((function(r){return nd.forEach(r,(function(r){ch(r.userId===n.userId);var i=wv(e.fe,r);return Rv(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Sc=function(t){var e=t.store(ov.store),n=t.store(nv.store);return t.store(av.store).get(av.key).next((function(t){var r=[];return n.Fs((function(n,i){var o=new $h(n),a=function(t){return[0,Kd(t)]}(o);r.push(e.get(a).next((function(n){return n?nd.resolve():function(n){return e.put(new ov(0,Kd(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return nd.hs(r)}))}))},t.prototype.Dc=function(t,e){t.createObjectStore(sv.store,{keyPath:sv.keyPath});var n=e.store(sv.store),r=new Av,i=function(t){if(r.add(t)){var e=t.Vt(),i=t.yt();return n.put({collectionId:e,parent:Kd(i)})}};return e.store(nv.store).Fs({Ns:!0},(function(t,e){var n=new $h(t);return i(n.yt())})).next((function(){return e.store(Zd.store).Fs({Ns:!0},(function(t,e){t[0];var n=t[1],r=(t[2],$d(n));return i(r.yt())}))}))},t.prototype.Cc=function(t){var e=this,n=t.store(iv.store);return n.Fs((function(t,r){var i=Ev(r),o=Iv(e.fe,i);return n.put(o)}))},t}();function Jv(t){t.createObjectStore(ov.store,{keyPath:ov.keyPath}).createIndex(ov.documentTargetsIndex,ov.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(iv.store,{keyPath:iv.keyPath}).createIndex(iv.queryTargetsIndexName,iv.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(av.store)}var Zv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",tg=function(){function t(e,n,r,i,o,a,s,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.js=o,this.window=a,this.document=s,this.xc=c,this.Nc=h,this.Fc=null,this.Oc=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kc=null,this.inForeground=!1,this.Mc=null,this.Lc=null,this.$c=Number.NEGATIVE_INFINITY,this.Bc=function(t){return Promise.resolve()},!t.G())throw new mh(yh.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Io=new Hv(this,i),this.qc=n+"main",this.fe=new dv(u),this.Uc=new id(this.qc,11,new Xv(this.fe)),this.Qc=new Vv(this.Io,this.fe),this.To=new Pv,this.Kc=function(t,e){return new Gv(t,e)}(this.fe,this.To),this.Wc=new Sv,this.window&&this.window.localStorage?this.jc=this.window.localStorage:(this.jc=null,!1===h&&oh("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Gc().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new mh(yh.FAILED_PRECONDITION,Zv);return t.zc(),t.Hc(),t.Jc(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Qc.jo(e)}))})).then((function(e){t.Fc=new Id(e,t.xc)})).then((function(){t.Oc=!0})).catch((function(e){return t.Uc&&t.Uc.close(),Promise.reject(e)}))},t.prototype.Yc=function(t){var e=this;return this.Bc=function(n){return Zc(e,void 0,void 0,(function(){return th(this,(function(e){return this.Nr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Xc=function(t){var e=this;this.Uc.gs((function(n){return Zc(e,void 0,void 0,(function(){return th(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.Zc=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.js.Ws((function(){return Zc(e,void 0,void 0,(function(){return th(this,(function(t){switch(t.label){case 0:return this.Nr?[4,this.Gc()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Gc=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return ng(e).put(new uv(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.ta(e).next((function(e){e||(t.isPrimary=!1,t.js.ea((function(){return t.Bc(!1)})))}))})).next((function(){return t.na(e)})).next((function(n){return t.isPrimary&&!n?t.sa(e).next((function(){return!1})):!!n&&t.ia(e).next((function(){return!0}))}))})).catch((function(e){if(sd(e))return ih("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return ih("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.js.ea((function(){return t.Bc(e)})),t.isPrimary=e}))},t.prototype.ta=function(t){var e=this;return eg(t).get(Yd.key).next((function(t){return nd.resolve(e.ra(t))}))},t.prototype.oa=function(t){return ng(t).delete(this.clientId)},t.prototype.ca=function(){return Zc(this,void 0,void 0,(function(){var t,e,n,r,i=this;return th(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.aa(this.$c,18e5)?[3,2]:(this.$c=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=pv(t,uv.store);return e.Ds().next((function(t){var n=i.ua(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return nd.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.jc)for(e=0,n=t;e<n.length;e++)r=n[e],this.jc.removeItem(this.ha(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.Jc=function(){var t=this;this.Lc=this.js.ni("client_metadata_refresh",4e3,(function(){return t.Gc().then((function(){return t.ca()})).then((function(){return t.Jc()}))}))},t.prototype.ra=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.na=function(t){var e=this;return this.Nc?nd.resolve(!0):eg(t).get(Yd.key).next((function(n){if(null!==n&&e.aa(n.leaseTimestampMs,5e3)&&!e.la(n.ownerId)){if(e.ra(n)&&e.networkEnabled)return!0;if(!e.ra(n)){if(!n.allowTabSynchronization)throw new mh(yh.FAILED_PRECONDITION,Zv);return!1}}return!(!e.networkEnabled||!e.inForeground)||ng(t).Ds().next((function(t){return void 0===e.ua(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&ih("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.$=function(){return Zc(this,void 0,void 0,(function(){var t=this;return th(this,(function(e){switch(e.label){case 0:return this.Oc=!1,this._a(),this.Lc&&(this.Lc.cancel(),this.Lc=null),this.fa(),this.da(),[4,this.Uc.runTransaction("shutdown","readwrite",[Yd.store,uv.store],(function(e){var n=new fv(e,Id.Zi);return t.sa(n).next((function(){return t.oa(n)}))}))];case 1:return e.sent(),this.Uc.close(),this.wa(),[2]}}))}))},t.prototype.ua=function(t,e){var n=this;return t.filter((function(t){return n.aa(t.updateTimeMs,e)&&!n.la(t.clientId)}))},t.prototype.Ea=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return ng(e).Ds().next((function(e){return t.ua(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Nr",{get:function(){return this.Oc},enumerable:!1,configurable:!0}),t.prototype.Ta=function(t){return xv.Ao(t,this.fe,this.To,this.Io)},t.prototype.ac=function(){return this.Qc},t.prototype._c=function(){return this.Kc},t.prototype.Ia=function(){return this.To},t.prototype.ma=function(){return this.Wc},t.prototype.runTransaction=function(t,e,n){var r=this;ih("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Uc.runTransaction(t,o,lv,(function(o){return i=new fv(o,r.Fc?r.Fc.next():Id.Zi),"readwrite-primary"===e?r.ta(i).next((function(t){return!!t||r.na(i)})).next((function(e){if(!e)throw oh("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.js.ea((function(){return r.Bc(!1)})),new mh(yh.FAILED_PRECONDITION,bd);return n(i)})).next((function(t){return r.ia(i).next((function(){return t}))})):r.Aa(i).next((function(){return n(i)}))})).then((function(t){return i.ki(),t}))},t.prototype.Aa=function(t){var e=this;return eg(t).get(Yd.key).next((function(t){if(null!==t&&e.aa(t.leaseTimestampMs,5e3)&&!e.la(t.ownerId)&&!e.ra(t)&&!(e.Nc||e.allowTabSynchronization&&t.allowTabSynchronization))throw new mh(yh.FAILED_PRECONDITION,Zv)}))},t.prototype.ia=function(t){var e=new Yd(this.clientId,this.allowTabSynchronization,Date.now());return eg(t).put(Yd.key,e)},t.G=function(){return id.G()},t.prototype.sa=function(t){var e=this,n=eg(t);return n.get(Yd.key).next((function(t){return e.ra(t)?(ih("IndexedDbPersistence","Releasing primary lease."),n.delete(Yd.key)):nd.resolve()}))},t.prototype.aa=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(oh("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.zc=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Mc=function(){t.js.Ws((function(){return t.inForeground="visible"===t.document.visibilityState,t.Gc()}))},this.document.addEventListener("visibilitychange",this.Mc),this.inForeground="visible"===this.document.visibilityState)},t.prototype.fa=function(){this.Mc&&(this.document.removeEventListener("visibilitychange",this.Mc),this.Mc=null)},t.prototype.Hc=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.kc=function(){e._a(),e.js.Ws((function(){return e.$()}))},this.window.addEventListener("unload",this.kc))},t.prototype.da=function(){this.kc&&(this.window.removeEventListener("unload",this.kc),this.kc=null)},t.prototype.la=function(t){var e;try{var n=null!==(null===(e=this.jc)||void 0===e?void 0:e.getItem(this.ha(t)));return ih("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return oh("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype._a=function(){if(this.jc)try{this.jc.setItem(this.ha(this.clientId),String(Date.now()))}catch(t){oh("Failed to set zombie client id.",t)}},t.prototype.wa=function(){if(this.jc)try{this.jc.removeItem(this.ha(this.clientId))}catch(t){}},t.prototype.ha=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function eg(t){return pv(t,Yd.store)}function ng(t){return pv(t,uv.store)}function rg(t,e){var n=t.projectId;return t.M||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var ig=function(){function t(t,e,n){this.Kc=t,this.Ra=e,this.To=n}return t.prototype.Pa=function(t,e){var n=this;return this.Ra.So(t,e).next((function(r){return n.ya(t,e,r)}))},t.prototype.ya=function(t,e,n){return this.Kc.Ar(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].ir(e,t);return t}))},t.prototype.ga=function(t,e,n){var r=ep();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].ir(t,e);r=r.Ie(t,e)})),r},t.prototype.Va=function(t,e){var n=this;return this.Kc.getEntries(t,e).next((function(e){return n.pa(t,e)}))},t.prototype.pa=function(t,e){var n=this;return this.Ra.Do(t,e).next((function(r){var i=n.ga(t,e,r),o=tp();return i.forEach((function(t,e){e||(e=new Nl(t,Gh.min())),o=o.Ie(t,e)})),o}))},t.prototype.Pc=function(t,e,n){return function(t){return Xh.qt(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.ba(t,e.path):nf(e)?this.va(t,e,n):this.Sa(t,e,n)},t.prototype.ba=function(t,e){return this.Pa(t,new Xh(e)).next((function(t){var e=rp();return t instanceof Cl&&(e=e.Ie(t.key,t)),e}))},t.prototype.va=function(t,e,n){var r=this,i=e.collectionGroup,o=rp();return this.To.wo(t,i).next((function(a){return nd.forEach(a,(function(a){var s=function(t,e){return new Ql(e,null,t.ne.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.Sa(t,s,n).next((function(t){t.forEach((function(t,e){o=o.Ie(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Sa=function(t,e,n){var r,i,o=this;return this.Kc.Pc(t,e,n).next((function(n){return r=n,o.Ra.xo(t,e)})).next((function(e){return i=e,o.Da(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,h=r.get(c),l=Lf(u,h,h,o.er);r=l instanceof Cl?r.Ie(c,l):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){hf(e,n)||(r=r.remove(t))})),r}))},t.prototype.Da=function(t,e,n){for(var r=sp(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Vf&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Kc.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Cl&&(c=c.Ie(t,e))})),c}))},t}(),og=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Ca=n,this.xa=r}return t.Na=function(e,n){for(var r=sp(),i=sp(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),ag=function(){function t(){}return t.prototype.Fa=function(t){this.Oa=t},t.prototype.Pc=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.ne.length||1===t.ne.length&&t.ne[0].field.Ot())}(e)||n.isEqual(Gh.min())?this.ka(t,e):this.Oa.Va(t,r).next((function(o){var a=i.Ma(e,o);return(Jl(e)||Zl(e))&&i.La(e.limitType,a,r,n)?i.ka(t,e):(rh()<=on.DEBUG&&ih("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),cf(e)),i.Oa.Pc(t,e,n).next((function(t){return a.forEach((function(e){t=t.Ie(e.key,e)})),t})))}))},t.prototype.Ma=function(t,e){var n=new Xf(lf(t));return e.forEach((function(e,r){r instanceof Cl&&hf(t,r)&&(n=n.add(r))})),n},t.prototype.La=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.ka=function(t,e){return rh()<=on.DEBUG&&ih("QueryEngine","Using full collection scan to execute query:",cf(e)),this.Oa.Pc(t,e,Gh.min())},t}(),sg=function(){function t(t,e,n,r){this.persistence=t,this.$a=e,this.fe=r,this.Ba=new $f(ph),this.qa=new kd((function(t){return Ol(t)}),Rl),this.Ua=Gh.min(),this.Ra=t.Ta(n),this.Qa=t._c(),this.Qc=t.ac(),this.Ka=new ig(this.Qa,this.Ra,this.persistence.Ia()),this.Wc=t.ma(),this.$a.Fa(this.Ka)}return t.prototype.Fr=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Ur(n,e.Ba)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(t,e,n,r){return new sg(t,e,n,r)}function cg(t,e){return Zc(this,void 0,void 0,(function(){var n,r,i,o;return th(this,(function(a){switch(a.label){case 0:return n=hh(t),r=n.Ra,i=n.Ka,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Ra.vo(t).next((function(a){return o=a,r=n.persistence.Ta(e),i=new ig(n.Qa,r,n.persistence.Ia()),r.vo(t)})).next((function(e){for(var n=[],r=[],a=sp(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var g=0,y=v.mutations;g<y.length;g++){var m=y[g];a=a.add(m.key)}}return i.Va(t,a).next((function(t){return{Wa:t,ja:n,Ga:r}}))}))}))];case 1:return o=a.sent(),[2,(n.Ra=r,n.Ka=i,n.$a.Fa(n.Ka),o)]}}))}))}function hg(t,e){var n=hh(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Qa.lc({yc:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=nd.resolve();return o.forEach((function(t){a=a.next((function(){return r.Ar(e,t)})).next((function(e){var o=e,a=n.ar.get(t);ch(null!==a),(!o||o.version.u(a)<0)&&(o=i.nr(t,o,n))&&r.Er(o,n.cr)}))})),a.next((function(){return t.Ra.No(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Ra.ko(t)})).next((function(){return n.Ka.Va(t,r)}))}))}function lg(t){var e=hh(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.Qc.Wo(t)}))}function fg(t,e){var n=hh(t),r=e.oe,i=n.Ba;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Qa.lc({yc:!0});i=n.Ba;var a=[];e.rn.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.Qc.ic(t,e.dn,o).next((function(){return n.Qc.nc(t,e._n,o)})));var u=e.resumeToken;if(u.o()>0){var c=s.ae(u,r).ce(t.oo);i=i.Ie(o,c),function(t,e,n){return ch(e.resumeToken.o()>0),0===t.resumeToken.o()||e.oe.Et()-t.oe.Et()>=3e8||n._n.size+n.fn.size+n.dn.size>0}(s,c,e)&&a.push(n.Qc.Yo(t,c))}}}));var s=tp();if(e.cn.forEach((function(r,i){e.an.has(r)&&a.push(n.persistence.Io.fc(t,r))})),a.push(pg(t,o,e.cn,r,void 0).next((function(t){s=t}))),!r.isEqual(Gh.min())){var u=n.Qc.Wo(t).next((function(e){return n.Qc.Go(t,t.oo,r)}));a.push(u)}return nd.hs(a).next((function(){return o.apply(t)})).next((function(){return n.Ka.pa(t,s)}))})).then((function(t){return n.Ba=i,t}))}function pg(t,e,n,r,i){var o=sp();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=tp();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a instanceof Nl&&a.version.isEqual(Gh.min())?(e.mr(n,u),o=o.Ie(n,a)):null==s||a.version.u(s.version)>0||0===a.version.u(s.version)&&s.hasPendingWrites?(e.Er(a,u),o=o.Ie(n,a)):ih("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function dg(t,e){var n=hh(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Ra.po(t,e)}))}function vg(t,e){var n=hh(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.Qc.ec(t,e).next((function(i){return i?(r=i,nd.resolve(r)):n.Qc.Uo(t).next((function(i){return r=new pf(e,i,0,t.oo),n.Qc.zo(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Ba.get(t.targetId);return(null===r||t.oe.u(r.oe)>0)&&(n.Ba=n.Ba.Ie(t.targetId,t),n.qa.set(e,t.targetId)),t}))}function gg(t,e,n){return Zc(this,void 0,void 0,(function(){var r,i,o,a;return th(this,(function(s){switch(s.label){case 0:r=hh(t),i=r.Ba.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Io.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!sd(a=s.sent()))throw a;return ih("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.Ba=r.Ba.remove(e),r.qa.delete(i.target),[2]}}))}))}function yg(t,e,n){var r=hh(t),i=Gh.min(),o=sp();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=hh(t),i=r.qa.get(n);return void 0!==i?nd.resolve(r.Ba.get(i)):r.Qc.ec(e,n)}(r,t,of(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Qc.oc(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.$a.Pc(t,e,n?i:Gh.min(),n?o:sp())})).next((function(t){return{documents:t,za:o}}))}))}function mg(t,e){var n=hh(t),r=hh(n.Qc),i=n.Ba.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Zn(t,e).next((function(t){return t?t.target:null}))}))}function bg(t){var e=hh(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=hh(t),i=tp(),o=yv(n),a=Qv(e),s=IDBKeyRange.lowerBound(o,!0);return a.Fs({index:nv.readTimeIndex,range:s},(function(t,e){var n=vv(r.fe,e);i=i.Ie(n.key,n),o=e.readTime})).next((function(){return{tr:i,readTime:mv(o)}}))}(e.Qa,t,e.Ua)})).then((function(t){var n=t.tr,r=t.readTime;return e.Ua=r,n}))}function _g(t){return Zc(this,void 0,void 0,(function(){var e;return th(this,(function(n){return[2,(e=hh(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Qv(t),n=Gh.min();return e.Fs({index:nv.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=mv(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Ua=t}))]}))}))}function wg(t,e,n,r){return Zc(this,void 0,void 0,(function(){var i,o,a,s,u,c,h,l,f,p;return th(this,(function(d){switch(d.label){case 0:for(i=hh(t),o=sp(),a=tp(),s=op(),u=0,c=n;u<c.length;u++)h=c[u],l=e.Ha(h.metadata.name),h.document&&(o=o.add(l)),a=a.Ie(l,e.Ja(h)),s=s.Ie(l,e.Ya(h.metadata.readTime));return f=i.Qa.lc({yc:!0}),[4,vg(i,function(t){return of(Xl($h.xt("__bundle__/docs/"+t)))}(r))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return pg(t,f,a,Gh.min(),s).next((function(e){return f.apply(t),e})).next((function(e){return i.Qc.Zo(t,p.targetId).next((function(){return i.Qc.nc(t,o,p.targetId)})).next((function(){return i.Ka.pa(t,e)}))}))}))]}}))}))}function Eg(t,e,n){return void 0===n&&(n=sp()),Zc(this,void 0,void 0,(function(){var r,i;return th(this,(function(o){switch(o.label){case 0:return[4,vg(t,of(Tv(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=hh(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=kp(e.readTime);if(r.oe.u(o)>=0)return i.Wc.lo(t,e);var a=r.ae(gh.h,o);return i.Ba=i.Ba.Ie(a.targetId,a),i.Qc.Yo(t,a).next((function(){return i.Qc.Zo(t,r.targetId)})).next((function(){return i.Qc.nc(t,n,r.targetId)})).next((function(){return i.Wc.lo(t,e)}))}))]}}))}))
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Ig=function(){function t(t){this.fe=t,this.Xa=new Map,this.Za=new Map}return t.prototype.ao=function(t,e){return nd.resolve(this.Xa.get(e))},t.prototype.uo=function(t,e){var n;return this.Xa.set(e.id,{id:(n=e).id,version:n.version,createTime:kp(n.createTime)}),nd.resolve()},t.prototype.ho=function(t,e){return nd.resolve(this.Za.get(e))},t.prototype.lo=function(t,e){return this.Za.set(e.name,function(t){return{name:t.name,query:Tv(t.bundledQuery),readTime:kp(t.readTime)}}(e)),nd.resolve()},t}(),Tg=function(){function t(){this.tu=new Xf(Sg.eu),this.nu=new Xf(Sg.su)}return t.prototype.bt=function(){return this.tu.bt()},t.prototype.sc=function(t,e){var n=new Sg(t,e);this.tu=this.tu.add(n),this.nu=this.nu.add(n)},t.prototype.iu=function(t,e){var n=this;t.forEach((function(t){return n.sc(t,e)}))},t.prototype.rc=function(t,e){this.ru(new Sg(t,e))},t.prototype.ou=function(t,e){var n=this;t.forEach((function(t){return n.rc(t,e)}))},t.prototype.cu=function(t){var e=this,n=new Xh(new $h([])),r=new Sg(n,t),i=new Sg(n,t+1),o=[];return this.nu.Qe([r,i],(function(t){e.ru(t),o.push(t.key)})),o},t.prototype.au=function(){var t=this;this.tu.forEach((function(e){return t.ru(e)}))},t.prototype.ru=function(t){this.tu=this.tu.delete(t),this.nu=this.nu.delete(t)},t.prototype.uu=function(t){var e=new Xh(new $h([])),n=new Sg(e,t),r=new Sg(e,t+1),i=sp();return this.nu.Qe([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Mo=function(t){var e=new Sg(t,0),n=this.tu.We(e);return null!==n&&t.isEqual(n.key)},t}(),Sg=function(){function t(t,e){this.key=t,this.hu=e}return t.eu=function(t,e){return Xh.At(t.key,e.key)||ph(t.hu,e.hu)},t.su=function(t,e){return ph(t.hu,e.hu)||Xh.At(t.key,e.key)},t}(),Cg=function(){function t(t,e){this.To=t,this.Io=e,this.Ra=[],this.lu=1,this._u=new Xf(Sg.eu)}return t.prototype.Ro=function(t){return nd.resolve(0===this.Ra.length)},t.prototype.Po=function(t,e,n,r){var i=this.lu;this.lu++,this.Ra.length>0&&this.Ra[this.Ra.length-1];var o=new Cd(i,e,n,r);this.Ra.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this._u=this._u.add(new Sg(u.key,i)),this.To.fo(t,u.key.path.yt())}return nd.resolve(o)},t.prototype.yo=function(t,e){return nd.resolve(this.fu(e))},t.prototype.po=function(t,e){var n=e+1,r=this.du(n),i=r<0?0:r;return nd.resolve(this.Ra.length>i?this.Ra[i]:null)},t.prototype.bo=function(){return nd.resolve(0===this.Ra.length?-1:this.lu-1)},t.prototype.vo=function(t){return nd.resolve(this.Ra.slice())},t.prototype.So=function(t,e){var n=this,r=new Sg(e,0),i=new Sg(e,Number.POSITIVE_INFINITY),o=[];return this._u.Qe([r,i],(function(t){var e=n.fu(t.hu);o.push(e)})),nd.resolve(o)},t.prototype.Do=function(t,e){var n=this,r=new Xf(ph);return e.forEach((function(t){var e=new Sg(t,0),i=new Sg(t,Number.POSITIVE_INFINITY);n._u.Qe([e,i],(function(t){r=r.add(t.hu)}))})),nd.resolve(this.wu(r))},t.prototype.xo=function(t,e){var n=e.path,r=n.length+1,i=n;Xh.qt(i)||(i=i.child(""));var o=new Sg(new Xh(i),0),a=new Xf(ph);return this._u.Ke((function(t){var e=t.key.path;return!!n.vt(e)&&(e.length===r&&(a=a.add(t.hu)),!0)}),o),nd.resolve(this.wu(a))},t.prototype.wu=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.fu(t);null!==r&&n.push(r)})),n},t.prototype.No=function(t,e){var n=this;ch(0===this.Eu(e.batchId,"removed")),this.Ra.shift();var r=this._u;return nd.forEach(e.mutations,(function(i){var o=new Sg(i.key,e.batchId);return r=r.delete(o),n.Io.Oo(t,i.key)})).next((function(){n._u=r}))},t.prototype.Fo=function(t){},t.prototype.Mo=function(t,e){var n=new Sg(e,0),r=this._u.We(n);return nd.resolve(e.isEqual(r&&r.key))},t.prototype.ko=function(t){return this.Ra.length,nd.resolve()},t.prototype.Eu=function(t,e){return this.du(t)},t.prototype.du=function(t){return 0===this.Ra.length?0:t-this.Ra[0].batchId},t.prototype.fu=function(t){var e=this.du(t);return e<0||e>=this.Ra.length?null:this.Ra[e]},t}(),Ng=function(){function t(t,e){this.To=t,this.Tu=e,this.docs=new $f(Xh.At),this.size=0}return t.prototype.Er=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.Tu(e);return this.docs=this.docs.Ie(r,{Ir:e,size:a,readTime:n}),this.size+=a-o,this.To.fo(t,r.path.yt())},t.prototype.mr=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Ar=function(t,e){var n=this.docs.get(e);return nd.resolve(n?n.Ir:null)},t.prototype.getEntries=function(t,e){var n=this,r=ep();return e.forEach((function(t){var e=n.docs.get(t);r=r.Ie(t,e?e.Ir:null)})),nd.resolve(r)},t.prototype.Pc=function(t,e,n){for(var r=rp(),i=new Xh(e.path.child("")),o=this.docs.Ve(i);o.Ce();){var a=o.De(),s=a.key,u=a.value,c=u.Ir,h=u.readTime;if(!e.path.vt(s.path))break;h.u(n)<=0||c instanceof Cl&&hf(e,c)&&(r=r.Ie(c.key,c))}return nd.resolve(r)},t.prototype.Iu=function(t,e){return nd.forEach(this.docs,(function(t){return e(t)}))},t.prototype.lc=function(t){return new kg(this)},t.prototype.dc=function(t){return nd.resolve(this.size)},t}(),kg=function(t){function e(e){var n=this;return(n=t.call(this)||this).gc=e,n}return Jc(e,t),e.prototype.yr=function(t){var e=this,n=[];return this._r.forEach((function(r,i){i&&i.Ir?n.push(e.gc.Er(t,i.Ir,e.wr(r))):e.gc.mr(r)})),nd.hs(n)},e.prototype.Rr=function(t,e){return this.gc.Ar(t,e)},e.prototype.Pr=function(t,e){return this.gc.getEntries(t,e)},e}(Ad),Ag=function(){function t(t){this.persistence=t,this.mu=new kd((function(t){return Ol(t)}),Rl),this.lastRemoteSnapshotVersion=Gh.min(),this.highestTargetId=0,this.Au=0,this.Ru=new Tg,this.targetCount=0,this.Pu=jv.Bo()}return t.prototype.Un=function(t,e){return this.mu.forEach((function(t,n){return e(n)})),nd.resolve()},t.prototype.Wo=function(t){return nd.resolve(this.lastRemoteSnapshotVersion)},t.prototype.jo=function(t){return nd.resolve(this.Au)},t.prototype.Uo=function(t){return this.highestTargetId=this.Pu.next(),nd.resolve(this.highestTargetId)},t.prototype.Go=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Au&&(this.Au=e),nd.resolve()},t.prototype.Ho=function(t){this.mu.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Pu=new jv(e),this.highestTargetId=e),t.sequenceNumber>this.Au&&(this.Au=t.sequenceNumber)},t.prototype.zo=function(t,e){return this.Ho(e),this.targetCount+=1,nd.resolve()},t.prototype.Yo=function(t,e){return this.Ho(e),nd.resolve()},t.prototype.Xo=function(t,e){return this.mu.delete(e.target),this.Ru.cu(e.targetId),this.targetCount-=1,nd.resolve()},t.prototype.Br=function(t,e,n){var r=this,i=0,o=[];return this.mu.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.mu.delete(a),o.push(r.Zo(t,s.targetId)),i++)})),nd.hs(o).next((function(){return i}))},t.prototype.tc=function(t){return nd.resolve(this.targetCount)},t.prototype.ec=function(t,e){var n=this.mu.get(e)||null;return nd.resolve(n)},t.prototype.nc=function(t,e,n){return this.Ru.iu(e,n),nd.resolve()},t.prototype.ic=function(t,e,n){this.Ru.ou(e,n);var r=this.persistence.Io,i=[];return r&&e.forEach((function(e){i.push(r.Oo(t,e))})),nd.hs(i)},t.prototype.Zo=function(t,e){return this.Ru.cu(e),nd.resolve()},t.prototype.oc=function(t,e){var n=this.Ru.uu(e);return nd.resolve(n)},t.prototype.Mo=function(t,e){return nd.resolve(this.Ru.Mo(e))},t}(),Pg=function(){function t(t,e){var n=this;this.yu={},this.Fc=new Id(0),this.Oc=!1,this.Oc=!0,this.Io=t(this),this.Qc=new Ag(this),this.To=new kv,this.Kc=function(t,e){return new Ng(t,(function(t){return n.Io.gu(t)}))}(this.To),this.fe=new dv(e),this.Wc=new Ig(this.fe)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.$=function(){return this.Oc=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Nr",{get:function(){return this.Oc},enumerable:!1,configurable:!0}),t.prototype.Xc=function(){},t.prototype.Zc=function(){},t.prototype.Ia=function(){return this.To},t.prototype.Ta=function(t){var e=this.yu[t.I()];return e||(e=new Cg(this.To,this.Io),this.yu[t.I()]=e),e},t.prototype.ac=function(){return this.Qc},t.prototype._c=function(){return this.Kc},t.prototype.ma=function(){return this.Wc},t.prototype.runTransaction=function(t,e,n){var r=this;ih("MemoryPersistence","Starting transaction:",t);var i=new Og(this.Fc.next());return this.Io.Vu(),n(i).next((function(t){return r.Io.pu(i).next((function(){return t}))})).cs().then((function(t){return i.ki(),t}))},t.prototype.bu=function(t,e){return nd.ls(Object.values(this.yu).map((function(n){return function(){return n.Mo(t,e)}})))},t}(),Og=function(t){function e(e){var n=this;return(n=t.call(this)||this).oo=e,n}return Jc(e,t),e}(_d),Rg=function(){function t(t){this.persistence=t,this.vu=new Tg,this.Su=null}return t.Du=function(e){return new t(e)},Object.defineProperty(t.prototype,"Cu",{get:function(){if(this.Su)return this.Su;throw uh()},enumerable:!1,configurable:!0}),t.prototype.sc=function(t,e,n){return this.vu.sc(n,e),this.Cu.delete(n.toString()),nd.resolve()},t.prototype.rc=function(t,e,n){return this.vu.rc(n,e),this.Cu.add(n.toString()),nd.resolve()},t.prototype.Oo=function(t,e){return this.Cu.add(e.toString()),nd.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.vu.cu(e.targetId).forEach((function(t){return n.Cu.add(t.toString())}));var r=this.persistence.ac();return r.oc(t,e.targetId).next((function(t){t.forEach((function(t){return n.Cu.add(t.toString())}))})).next((function(){return r.Xo(t,e)}))},t.prototype.Vu=function(){this.Su=new Set},t.prototype.pu=function(t){var e=this,n=this.persistence._c().lc();return nd.forEach(this.Cu,(function(r){var i=Xh.Lt(r);return e.xu(t,i).next((function(t){t||n.mr(i)}))})).next((function(){return e.Su=null,n.apply(t)}))},t.prototype.fc=function(t,e){var n=this;return this.xu(t,e).next((function(t){t?n.Cu.delete(e.toString()):n.Cu.add(e.toString())}))},t.prototype.gu=function(t){return 0},t.prototype.xu=function(t,e){var n=this;return nd.ls([function(){return nd.resolve(n.vu.Mo(e))},function(){return n.persistence.ac().Mo(t,e)},function(){return n.persistence.bu(t,e)}])},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(t,e){return"firestore_clients_"+t+"_"+e}function xg(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.T()&&(r+="_"+e.uid),r}function Lg(t,e){return"firestore_targets_"+t+"_"+e}var Mg=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Nu=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new mh(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(oh("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Fu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Fg=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Nu=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new mh(r.error.code,r.error.message)),i?new t(e,r.state,o):(oh("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Fu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ug=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Nu=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=cp(),a=0;i&&a<r.activeTargetIds.length;++a)i=Mh(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(oh("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),jg=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Nu=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(oh("SharedClientState","Failed to parse online state: "+e),null)},t}(),Vg=function(){function t(){this.activeTargetIds=cp()}return t.prototype.Ou=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ku=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Fu=function(){var t={activeTargetIds:this.activeTargetIds.Dt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),qg=function(){function t(t,e,n,r,i){this.window=t,this.js=e,this.persistenceKey=n,this.Mu=r,this.Lu=null,this.$u=null,this.Hi=null,this.Bu=this.qu.bind(this),this.Uu=new $f(ph),this.Nr=!1,this.Qu=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ku=Dg(this.persistenceKey,this.Mu),this.Wu=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Uu=this.Uu.Ie(this.Mu,new Vg),this.ju=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Gu=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.zu=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Hu=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ju=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Bu)}return t.G=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Zc(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,h,l=this;return th(this,(function(f){switch(f.label){case 0:return[4,this.Lu.Ea()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Mu&&(i=this.getItem(Dg(this.persistenceKey,r)))&&(o=Ug.Nu(r,i))&&(this.Uu=this.Uu.Ie(o.clientId,o));for(this.Yu(),(a=this.storage.getItem(this.Hu))&&(s=this.Xu(a))&&this.Zu(s),u=0,c=this.Qu;u<c.length;u++)h=c[u],this.qu(h);return this.Qu=[],this.window.addEventListener("unload",(function(){return l.$()})),this.Nr=!0,[2]}}))}))},t.prototype.Xi=function(t){this.setItem(this.Wu,JSON.stringify(t))},t.prototype.th=function(){return this.eh(this.Uu)},t.prototype.nh=function(t){var e=!1;return this.Uu.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.sh=function(t){this.ih(t,"pending")},t.prototype.rh=function(t,e,n){this.ih(t,e,n),this.oh(t)},t.prototype.ah=function(t){var e="not-current";if(this.nh(t)){var n=this.storage.getItem(Lg(this.persistenceKey,t));if(n){var r=Fg.Nu(t,n);r&&(e=r.state)}}return this.uh.Ou(t),this.Yu(),e},t.prototype.hh=function(t){this.uh.ku(t),this.Yu()},t.prototype.lh=function(t){return this.uh.activeTargetIds.has(t)},t.prototype._h=function(t){this.removeItem(Lg(this.persistenceKey,t))},t.prototype.fh=function(t,e,n){this.dh(t,e,n)},t.prototype.wh=function(t,e,n){var r=this;e.forEach((function(t){r.oh(t)})),this.currentUser=t,n.forEach((function(t){r.sh(t)}))},t.prototype.Eh=function(t){this.Th(t)},t.prototype.Ih=function(){this.mh()},t.prototype.$=function(){this.Nr&&(this.window.removeEventListener("storage",this.Bu),this.removeItem(this.Ku),this.Nr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return ih("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){ih("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){ih("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.qu=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(ih("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ku)return void oh("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.ea((function(){return Zc(e,void 0,void 0,(function(){var t,e,r,i,o,a;return th(this,(function(s){if(this.Nr){if(null!==n.key)if(this.ju.test(n.key)){if(null==n.newValue)return t=this.Ah(n.key),[2,this.Rh(t,null)];if(e=this.Ph(n.key,n.newValue))return[2,this.Rh(e.clientId,e)]}else if(this.Gu.test(n.key)){if(null!==n.newValue&&(r=this.yh(n.key,n.newValue)))return[2,this.gh(r)]}else if(this.zu.test(n.key)){if(null!==n.newValue&&(i=this.Vh(n.key,n.newValue)))return[2,this.ph(i)]}else if(n.key===this.Hu){if(null!==n.newValue&&(o=this.Xu(n.newValue)))return[2,this.Zu(o)]}else if(n.key===this.Wu)(a=function(t){var e=Id.Zi;if(null!=t)try{var n=JSON.parse(t);ch("number"==typeof n),e=n}catch(t){oh("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Id.Zi&&this.Hi(a);else if(n.key===this.Ju)return[2,this.Lu.bh()]}else this.Qu.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"uh",{get:function(){return this.Uu.get(this.Mu)},enumerable:!1,configurable:!0}),t.prototype.Yu=function(){this.setItem(this.Ku,this.uh.Fu())},t.prototype.ih=function(t,e,n){var r=new Mg(this.currentUser,t,e,n),i=xg(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Fu())},t.prototype.oh=function(t){var e=xg(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Th=function(t){var e={clientId:this.Mu,onlineState:t};this.storage.setItem(this.Hu,JSON.stringify(e))},t.prototype.dh=function(t,e,n){var r=Lg(this.persistenceKey,t),i=new Fg(t,e,n);this.setItem(r,i.Fu())},t.prototype.mh=function(){this.setItem(this.Ju,"value-not-used")},t.prototype.Ah=function(t){var e=this.ju.exec(t);return e?e[1]:null},t.prototype.Ph=function(t,e){var n=this.Ah(t);return Ug.Nu(n,e)},t.prototype.yh=function(t,e){var n=this.Gu.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Mg.Nu(new Th(i),r,e)},t.prototype.Vh=function(t,e){var n=this.zu.exec(t),r=Number(n[1]);return Fg.Nu(r,e)},t.prototype.Xu=function(t){return jg.Nu(t)},t.prototype.gh=function(t){return Zc(this,void 0,void 0,(function(){return th(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.Lu.Sh(t.batchId,t.state,t.error)]:(ih("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.ph=function(t){return this.Lu.Dh(t.targetId,t.state,t.error)},t.prototype.Rh=function(t,e){var n=this,r=e?this.Uu.Ie(t,e):this.Uu.remove(t),i=this.eh(this.Uu),o=this.eh(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.Lu.Ch(a,s).then((function(){n.Uu=r}))},t.prototype.Zu=function(t){this.Uu.get(t.clientId)&&this.$u(t.onlineState)},t.prototype.eh=function(t){var e=cp();return t.forEach((function(t,n){e=e.je(n.activeTargetIds)})),e},t}(),Bg=function(){function t(){this.xh=new Vg,this.Nh={},this.$u=null,this.Hi=null}return t.prototype.sh=function(t){},t.prototype.rh=function(t,e,n){},t.prototype.ah=function(t){return this.xh.Ou(t),this.Nh[t]||"not-current"},t.prototype.fh=function(t,e,n){this.Nh[t]=e},t.prototype.hh=function(t){this.xh.ku(t)},t.prototype.lh=function(t){return this.xh.activeTargetIds.has(t)},t.prototype._h=function(t){delete this.Nh[t]},t.prototype.th=function(){return this.xh.activeTargetIds},t.prototype.nh=function(t){return this.xh.activeTargetIds.has(t)},t.prototype.start=function(){return this.xh=new Vg,Promise.resolve()},t.prototype.wh=function(t,e,n){},t.prototype.Eh=function(t){},t.prototype.$=function(){},t.prototype.Xi=function(t){},t.prototype.Ih=function(){},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(){return"undefined"!=typeof window?window:null}function Hg(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kg=function(){function t(t,e){this.ks=t,this.$u=e,this.state="Unknown",this.Fh=0,this.Oh=null,this.kh=!0}return t.prototype.Mh=function(){var t=this;0===this.Fh&&(this.Lh("Unknown"),this.Oh=this.ks.ni("online_state_timeout",1e4,(function(){return t.Oh=null,t.$h("Backend didn't respond within 10 seconds."),t.Lh("Offline"),Promise.resolve()})))},t.prototype.Bh=function(t){"Online"===this.state?this.Lh("Unknown"):(this.Fh++,this.Fh>=1&&(this.qh(),this.$h("Connection failed 1 times. Most recent error: "+t.toString()),this.Lh("Offline")))},t.prototype.set=function(t){this.qh(),this.Fh=0,"Online"===t&&(this.kh=!1),this.Lh(t)},t.prototype.Lh=function(t){t!==this.state&&(this.state=t,this.$u(t))},t.prototype.$h=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.kh?(oh(e),this.kh=!1):ih("OnlineStateTracker",e)},t.prototype.qh=function(){null!==this.Oh&&(this.Oh.cancel(),this.Oh=null)},t}(),Gg=function(t,e,n,r,i){var o=this;this.Uh=t,this.Qh=e,this.ks=n,this.Kh={},this.Wh=[],this.jh=new Map,this.Gh=new Set,this.zh=[],this.Hh=i,this.Hh.L((function(t){n.Ws((function(){return Zc(o,void 0,void 0,(function(){return th(this,(function(t){switch(t.label){case 0:return ey(this)?(ih("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Zc(this,void 0,void 0,(function(){var e;return th(this,(function(n){switch(n.label){case 0:return(e=hh(t)).Gh.add(4),[4,$g(e)];case 1:return n.sent(),e.Jh.set("Unknown"),e.Gh.delete(4),[4,zg(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Jh=new Kg(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(t){return Zc(this,void 0,void 0,(function(){var e,n;return th(this,(function(r){switch(r.label){case 0:if(!ey(t))return[3,4];e=0,n=t.zh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function $g(t){return Zc(this,void 0,void 0,(function(){var e,n;return th(this,(function(r){switch(r.label){case 0:e=0,n=t.zh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Qg(t,e){var n=hh(t);n.jh.has(e.targetId)||(n.jh.set(e.targetId,e),ty(n)?Zg(n):gy(n).li()&&Xg(n,e))}function Yg(t,e){var n=hh(t),r=gy(n);n.jh.delete(e),r.li()&&Jg(n,e),0===n.jh.size&&(r.li()?r.di():ey(n)&&n.Jh.set("Unknown"))}function Xg(t,e){t.Yh.Dn(e.targetId),gy(t).gi(e)}function Jg(t,e){t.Yh.Dn(e),gy(t).Vi(e)}function Zg(t){t.Yh=new bp({Xn:function(e){return t.Kh.Xn(e)},Zn:function(e){return t.jh.get(e)||null}}),gy(t).start(),t.Jh.Mh()}function ty(t){return ey(t)&&!gy(t).hi()&&t.jh.size>0}function ey(t){return 0===hh(t).Gh.size}function ny(t){t.Yh=void 0}function ry(t){return Zc(this,void 0,void 0,(function(){return th(this,(function(e){return t.jh.forEach((function(e,n){Xg(t,e)})),[2]}))}))}function iy(t,e){return Zc(this,void 0,void 0,(function(){return th(this,(function(n){return ny(t),ty(t)?(t.Jh.Bh(e),Zg(t)):t.Jh.set("Unknown"),[2]}))}))}function oy(t,e,n){return Zc(this,void 0,void 0,(function(){var r,i,o;return th(this,(function(a){switch(a.label){case 0:if(t.Jh.set("Online"),!(e instanceof yp&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return Zc(this,void 0,void 0,(function(){var n,r,i,o;return th(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.jh.has(o)?[4,t.Kh.Xh(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.jh.delete(o),t.Yh.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),ih("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,ay(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof vp?t.Yh.Ln(e):e instanceof gp?t.Yh.jn(e):t.Yh.qn(e),n.isEqual(Gh.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,lg(t.Uh)];case 8:return i=a.sent(),n.u(i)>=0?[4,function(t,e){var n=t.Yh.Hn(e);return n.rn.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.jh.get(r);i&&t.jh.set(r,i.ae(n.resumeToken,e))}})),n.on.forEach((function(e){var n=t.jh.get(e);if(n){t.jh.set(e,n.ae(gh.h,n.oe)),Jg(t,e);var r=new pf(n.target,e,1,n.sequenceNumber);Xg(t,r)}})),t.Kh.Zh(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return ih("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,ay(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function ay(t,e,n){return Zc(this,void 0,void 0,(function(){var r=this;return th(this,(function(i){switch(i.label){case 0:if(!sd(e))throw e;return t.Gh.add(1),[4,$g(t)];case 1:return i.sent(),t.Jh.set("Offline"),n||(n=function(){return lg(t.Uh)}),t.ks.ea((function(){return Zc(r,void 0,void 0,(function(){return th(this,(function(e){switch(e.label){case 0:return ih("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Gh.delete(1),[4,zg(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function sy(t,e){return e().catch((function(n){return ay(t,n,e)}))}function uy(t){return Zc(this,void 0,void 0,(function(){var e,n,r,i,o;return th(this,(function(a){switch(a.label){case 0:e=hh(t),n=yy(e),r=e.Wh.length>0?e.Wh[e.Wh.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return ey(t)&&t.Wh.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,dg(e.Uh,r)];case 3:return null===(i=a.sent())?(0===e.Wh.length&&n.di(),[3,7]):(r=i.batchId,function(t,e){t.Wh.push(e);var n=yy(t);n.li()&&n.bi&&n.vi(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,ay(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return cy(e)&&hy(e),[2]}}))}))}function cy(t){return ey(t)&&!yy(t).hi()&&t.Wh.length>0}function hy(t){yy(t).start()}function ly(t){return Zc(this,void 0,void 0,(function(){return th(this,(function(e){return yy(t).Ci(),[2]}))}))}function fy(t){return Zc(this,void 0,void 0,(function(){var e,n,r,i;return th(this,(function(o){for(e=yy(t),n=0,r=t.Wh;n<r.length;n++)i=r[n],e.vi(i.mutations);return[2]}))}))}function py(t,e,n){return Zc(this,void 0,void 0,(function(){var r,i;return th(this,(function(o){switch(o.label){case 0:return r=t.Wh.shift(),i=Nd.from(r,e,n),[4,sy(t,(function(){return t.Kh.tl(i)}))];case 1:return o.sent(),[4,uy(t)];case 2:return o.sent(),[2]}}))}))}function dy(t,e){return Zc(this,void 0,void 0,(function(){return th(this,(function(n){switch(n.label){case 0:return e&&yy(t).bi?[4,function(t,e){return Zc(this,void 0,void 0,(function(){var n,r;return th(this,(function(i){switch(i.label){case 0:return Vh(r=e.code)&&r!==yh.ABORTED?(n=t.Wh.shift(),yy(t).fi(),[4,sy(t,(function(){return t.Kh.el(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,uy(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return cy(t)&&hy(t),[2]}}))}))}function vy(t,e){return Zc(this,void 0,void 0,(function(){var n;return th(this,(function(r){switch(r.label){case 0:return n=hh(t),e?(n.Gh.delete(2),[4,zg(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Gh.add(2),[4,$g(n)]);case 3:r.sent(),n.Jh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function gy(t){var e=this;return t.nl||(t.nl=function(t,e,n){var r=hh(t);return r.Ni(),new gd(e,r.ri,r.credentials,r.fe,n)}(t.Qh,t.ks,{Y:ry.bind(null,t),Z:iy.bind(null,t),yi:oy.bind(null,t)}),t.zh.push((function(n){return Zc(e,void 0,void 0,(function(){return th(this,(function(e){switch(e.label){case 0:return n?(t.nl.fi(),ty(t)?Zg(t):t.Jh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.nl.stop()];case 2:e.sent(),ny(t),e.label=3;case 3:return[2]}}))}))}))),t.nl}function yy(t){var e=this;return t.sl||(t.sl=function(t,e,n){var r=hh(t);return r.Ni(),new yd(e,r.ri,r.credentials,r.fe,n)}(t.Qh,t.ks,{Y:ly.bind(null,t),Z:dy.bind(null,t),Di:fy.bind(null,t),Si:py.bind(null,t)}),t.zh.push((function(n){return Zc(e,void 0,void 0,(function(){return th(this,(function(e){switch(e.label){case 0:return n?(t.sl.fi(),[4,uy(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.sl.stop()];case 3:e.sent(),t.Wh.length>0&&(ih("RemoteStore","Stopping write stream with "+t.Wh.length+" pending writes"),t.Wh=[]),e.label=4;case 4:return[2]}}))}))}))),t.sl
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var my=function(){this.il=void 0,this.listeners=[]},by=function(){this.queries=new kd((function(t){return uf(t)}),sf),this.onlineState="Unknown",this.rl=new Set};function _y(t,e){return Zc(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return th(this,(function(c){switch(c.label){case 0:if(n=hh(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new my),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.ol(r)];case 2:return a.il=c.sent(),[3,4];case 3:return s=c.sent(),u=pd(s,"Initialization of query '"+cf(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.cl(n.onlineState),o.il&&e.al(o.il)&&Ty(n),[2]}}))}))}function wy(t,e){return Zc(this,void 0,void 0,(function(){var n,r,i,o,a;return th(this,(function(s){return n=hh(t),r=e.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.ul(r))]:[2]}))}))}function Ey(t,e){for(var n=hh(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].al(a)&&(r=!0);u.il=a}}r&&Ty(n)}function Iy(t,e,n){var r=hh(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function Ty(t){t.rl.forEach((function(t){t.next()}))}var Sy=function(){function t(t,e,n){this.query=t,this.hl=e,this.ll=!1,this._l=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.al=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new fp(t.query,t.docs,t.Ze,e,t.tn,t.fromCache,t.en,!0)}var o=!1;return this.ll?this.fl(t)&&(this.hl.next(t),o=!0):this.dl(t,this.onlineState)&&(this.wl(t),o=!0),this._l=t,o},t.prototype.onError=function(t){this.hl.error(t)},t.prototype.cl=function(t){this.onlineState=t;var e=!1;return this._l&&!this.ll&&this.dl(this._l,t)&&(this.wl(this._l),e=!0),e},t.prototype.dl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.El&&n||t.docs.bt()&&"Offline"!==e)},t.prototype.fl=function(t){if(t.docChanges.length>0)return!0;var e=this._l&&this._l.hasPendingWrites!==t.hasPendingWrites;return!(!t.en&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.wl=function(t){t=fp.sn(t.query,t.docs,t.tn,t.fromCache),this.ll=!0,this.hl.next(t)},t}(),Cy=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.Tl=function(){return"metadata"in this.payload},t}(),Ny=function(){function t(t){this.fe=t}return t.prototype.Ha=function(t){return Rp(this.fe,t)},t.prototype.Ja=function(t){return t.metadata.exists?Up(this.fe,t.document,!1):new Nl(this.Ha(t.metadata.name),this.Ya(t.metadata.readTime))},t.prototype.Ya=function(t){return kp(t)},t}(),ky=function(){function t(t,e,n){this.Il=t,this.Uh=e,this.fe=n,this.queries=[],this.documents=[],this.progress=Ay(t)}return t.prototype.ml=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.Al=function(t){for(var e=new Map,n=new Ny(this.fe),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.Ha(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],h=(e.get(c)||sp()).add(a);e.set(c,h)}}return e},t.prototype.complete=function(){return Zc(this,void 0,void 0,(function(){var t,e,n,r,i;return th(this,(function(o){switch(o.label){case 0:return[4,wg(this.Uh,new Ny(this.fe),this.documents,this.Il.id)];case 1:t=o.sent(),e=this.Al(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,Eg(this.Uh,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Sd(Object.assign({},this.progress),t))]}}))}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Py=function(t){this.key=t},Oy=function(t){this.key=t},Ry=function(){function t(t,e){this.query=t,this.Rl=e,this.Pl=null,this.ln=!1,this.yl=sp(),this.tn=sp(),this.gl=lf(t),this.Vl=new hp(this.gl)}return Object.defineProperty(t.prototype,"pl",{get:function(){return this.Rl},enumerable:!1,configurable:!0}),t.prototype.bl=function(t,e){var n=this,r=e?e.vl:new lp,i=e?e.Vl:this.Vl,o=e?e.tn:this.tn,a=i,s=!1,u=Jl(this.query)&&i.size===this.query.limit?i.last():null,c=Zl(this.query)&&i.size===this.query.limit?i.first():null;if(t.Pe((function(t,e){var h=i.get(t),l=e instanceof Cl?e:null;l&&(l=hf(n.query,l)?l:null);var f=!!h&&n.tn.has(h.key),p=!!l&&(l.Jt||n.tn.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data().isEqual(l.data())?f!==p&&(r.track({type:3,doc:l}),d=!0):n.Sl(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.gl(l,u)>0||c&&n.gl(l,c)<0)&&(s=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(s=!0)),d&&(l?(a=a.add(l),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),Jl(this.query)||Zl(this.query))for(;a.size>this.query.limit;){var h=Jl(this.query)?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Vl:a,vl:r,La:s,tn:o}},t.prototype.Sl=function(t,e){return t.Jt&&e.hasCommittedMutations&&!e.Jt},t.prototype.yr=function(t,e,n){var r=this,i=this.Vl;this.Vl=t.Vl,this.tn=t.tn;var o=t.vl.Xe();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return uh()}};return n(t)-n(e)}(t.type,e.type)||r.gl(t.doc,e.doc)})),this.Dl(n);var a=e?this.Cl():[],s=0===this.yl.size&&this.ln?1:0,u=s!==this.Pl;return this.Pl=s,0!==o.length||u?{snapshot:new fp(this.query,t.Vl,i,o,t.tn,0===s,u,!1),xl:a}:{xl:a}},t.prototype.cl=function(t){return this.ln&&"Offline"===t?(this.ln=!1,this.yr({Vl:this.Vl,vl:new lp,tn:this.tn,La:!1},!1)):{xl:[]}},t.prototype.Nl=function(t){return!this.Rl.has(t)&&!!this.Vl.has(t)&&!this.Vl.get(t).Jt},t.prototype.Dl=function(t){var e=this;t&&(t._n.forEach((function(t){return e.Rl=e.Rl.add(t)})),t.fn.forEach((function(t){})),t.dn.forEach((function(t){return e.Rl=e.Rl.delete(t)})),this.ln=t.ln)},t.prototype.Cl=function(){var t=this;if(!this.ln)return[];var e=this.yl;this.yl=sp(),this.Vl.forEach((function(e){t.Nl(e.key)&&(t.yl=t.yl.add(e.key))}));var n=[];return e.forEach((function(e){t.yl.has(e)||n.push(new Oy(e))})),this.yl.forEach((function(t){e.has(t)||n.push(new Py(t))})),n},t.prototype.Fl=function(t){this.Rl=t.za,this.yl=sp();var e=this.bl(t.documents);return this.yr(e,!0)},t.prototype.Ol=function(){return fp.sn(this.query,this.Vl,this.tn,0===this.Pl)},t}(),Dy=function(t,e,n){this.query=t,this.targetId=e,this.view=n},xy=function(t){this.key=t,this.kl=!1},Ly=function(){function t(t,e,n,r,i,o){this.Uh=t,this.Ml=e,this.Ll=n,this.$l=r,this.currentUser=i,this.Bl=o,this.ql={},this.Ul=new kd((function(t){return uf(t)}),sf),this.Ql=new Map,this.Kl=[],this.Wl=new $f(Xh.At),this.jl=new Map,this.Gl=new Tg,this.zl={},this.Hl=new Map,this.Jl=jv.qo(),this.onlineState="Unknown",this.Yl=void 0}return Object.defineProperty(t.prototype,"Xl",{get:function(){return!0===this.Yl},enumerable:!1,configurable:!0}),t}();function My(t,e){return Zc(this,void 0,void 0,(function(){var n,r,i,o,a,s;return th(this,(function(u){switch(u.label){case 0:return n=lm(t),(o=n.Ul.get(e))?(r=o.targetId,n.$l.ah(r),i=o.view.Ol(),[3,4]):[3,1];case 1:return[4,vg(n.Uh,of(e))];case 2:return a=u.sent(),s=n.$l.ah(a.targetId),r=a.targetId,[4,Fy(n,e,r,"current"===s)];case 3:i=u.sent(),n.Xl&&Qg(n.Ml,a),u.label=4;case 4:return[2,i]}}))}))}function Fy(t,e,n,r){return Zc(this,void 0,void 0,(function(){var i,o,a,s,u,c;return th(this,(function(h){switch(h.label){case 0:return t.Zl=function(e,n,r){return function(t,e,n,r){return Zc(this,void 0,void 0,(function(){var i,o,a;return th(this,(function(s){switch(s.label){case 0:return(i=e.view.bl(n)).La?[4,yg(t.Uh,e.query,!1).then((function(t){var n=t.documents;return e.view.bl(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.rn.get(e.targetId),a=e.view.yr(i,t.Xl,o),[2,(Yy(t,e.targetId,a.xl),a.snapshot)]}}))}))}(t,e,n,r)},[4,yg(t.Uh,e,!0)];case 1:return i=h.sent(),o=new Ry(e,i.za),a=o.bl(i.documents),s=dp.hn(n,r&&"Offline"!==t.onlineState),u=o.yr(a,t.Xl,s),Yy(t,n,u.xl),c=new Dy(e,n,o),[2,(t.Ul.set(e,c),t.Ql.has(n)?t.Ql.get(n).push(e):t.Ql.set(n,[e]),u.snapshot)]}}))}))}function Uy(t,e){return Zc(this,void 0,void 0,(function(){var n,r,i;return th(this,(function(o){switch(o.label){case 0:return n=hh(t),r=n.Ul.get(e),(i=n.Ql.get(r.targetId)).length>1?[2,(n.Ql.set(r.targetId,i.filter((function(t){return!sf(t,e)}))),void n.Ul.delete(e))]:n.Xl?(n.$l.hh(r.targetId),n.$l.nh(r.targetId)?[3,2]:[4,gg(n.Uh,r.targetId,!1).then((function(){n.$l._h(r.targetId),Yg(n.Ml,r.targetId),$y(n,r.targetId)})).catch(Td)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return $y(n,r.targetId),[4,gg(n.Uh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function jy(t,e,n){return Zc(this,void 0,void 0,(function(){var r,i,o,a;return th(this,(function(s){switch(s.label){case 0:r=fm(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=hh(t),i=Kh.now(),o=e.reduce((function(t,e){return t.add(e.key)}),sp());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ka.Va(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],h=Mf(c,n.get(c.key));null!=h&&a.push(new Vf(c.key,h,Tl(h.proto.mapValue),Of.exists(!0)))}return r.Ra.Po(t,i,a,e)}))})).then((function(t){var e=t.rr(n);return{batchId:t.batchId,_r:e}}))}(r.Uh,e)];case 2:return i=s.sent(),r.$l.sh(i.batchId),function(t,e,n){var r=t.zl[t.currentUser.I()];r||(r=new $f(ph)),r=r.Ie(e,n),t.zl[t.currentUser.I()]=r}(r,i.batchId,n),[4,Zy(r,i._r)];case 3:return s.sent(),[4,uy(r.Ml)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=pd(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Vy(t,e){return Zc(this,void 0,void 0,(function(){var n,r;return th(this,(function(i){switch(i.label){case 0:n=hh(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,fg(n.Uh,e)];case 2:return r=i.sent(),e.rn.forEach((function(t,e){var r=n.jl.get(e);r&&(ch(t._n.size+t.fn.size+t.dn.size<=1),t._n.size>0?r.kl=!0:t.fn.size>0?ch(r.kl):t.dn.size>0&&(ch(r.kl),r.kl=!1))})),[4,Zy(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Td(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function qy(t,e,n){var r=hh(t);if(r.Xl&&0===n||!r.Xl&&1===n){var i=[];r.Ul.forEach((function(t,n){var r=n.view.cl(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=hh(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].cl(e)&&(r=!0)})),r&&Ty(n)}(r.Ll,e),i.length&&r.ql.yi(i),r.onlineState=e,r.Xl&&r.$l.Eh(e)}}function By(t,e,n){return Zc(this,void 0,void 0,(function(){var r,i,o,a,s,u;return th(this,(function(c){switch(c.label){case 0:return(r=hh(t)).$l.fh(e,"rejected",n),i=r.jl.get(e),(o=i&&i.key)?(a=(a=new $f(Xh.At)).Ie(o,new Nl(o,Gh.min())),s=sp().add(o),u=new pp(Gh.min(),new Map,new Xf(ph),a,s),[4,Vy(r,u)]):[3,2];case 1:return c.sent(),r.Wl=r.Wl.remove(o),r.jl.delete(e),Jy(r),[3,4];case 2:return[4,gg(r.Uh,e,!1).then((function(){return $y(r,e,n)})).catch(Td)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Wy(t,e){return Zc(this,void 0,void 0,(function(){var n,r,i;return th(this,(function(o){switch(o.label){case 0:n=hh(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,hg(n.Uh,e)];case 2:return i=o.sent(),zy(n,r,null),Gy(n,r),n.$l.rh(r,"acknowledged"),[4,Zy(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Td(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Hy(t,e,n){return Zc(this,void 0,void 0,(function(){var r,i;return th(this,(function(o){switch(o.label){case 0:r=hh(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=hh(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Ra.yo(t,e).next((function(e){return ch(null!==e),r=e.keys(),n.Ra.No(t,e)})).next((function(){return n.Ra.ko(t)})).next((function(){return n.Ka.Va(t,r)}))}))}(r.Uh,e)];case 2:return i=o.sent(),zy(r,e,n),Gy(r,e),r.$l.rh(e,"rejected",n),[4,Zy(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Td(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Ky(t,e){return Zc(this,void 0,void 0,(function(){var n,r,i,o,a;return th(this,(function(s){switch(s.label){case 0:ey((n=hh(t)).Ml)||ih("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=hh(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Ra.bo(t)}))}(n.Uh)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.Hl.get(r)||[]).push(e),n.Hl.set(r,i),[3,4]);case 3:return o=s.sent(),a=pd(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function Gy(t,e){(t.Hl.get(e)||[]).forEach((function(t){t.resolve()})),t.Hl.delete(e)}function zy(t,e,n){var r=hh(t),i=r.zl[r.currentUser.I()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.zl[r.currentUser.I()]=i}}function $y(t,e,n){void 0===n&&(n=null),t.$l.hh(e);for(var r=0,i=t.Ql.get(e);r<i.length;r++){var o=i[r];t.Ul.delete(o),n&&t.ql.t_(o,n)}t.Ql.delete(e),t.Xl&&t.Gl.cu(e).forEach((function(e){t.Gl.Mo(e)||Qy(t,e)}))}function Qy(t,e){var n=t.Wl.get(e);null!==n&&(Yg(t.Ml,n),t.Wl=t.Wl.remove(e),t.jl.delete(n),Jy(t))}function Yy(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Py?(t.Gl.sc(o.key,e),Xy(t,o)):o instanceof Oy?(ih("SyncEngine","Document no longer in limbo: "+o.key),t.Gl.rc(o.key,e),t.Gl.Mo(o.key)||Qy(t,o.key)):uh()}}function Xy(t,e){var n=e.key;t.Wl.get(n)||(ih("SyncEngine","New document in limbo: "+n),t.Kl.push(n),Jy(t))}function Jy(t){for(;t.Kl.length>0&&t.Wl.size<t.Bl;){var e=t.Kl.shift(),n=t.Jl.next();t.jl.set(n,new xy(e)),t.Wl=t.Wl.Ie(e,n),Qg(t.Ml,new pf(of(Xl(e.path)),n,2,Id.Zi))}}function Zy(t,e,n){return Zc(this,void 0,void 0,(function(){var r,i,o,a;return th(this,(function(s){switch(s.label){case 0:return r=hh(t),i=[],o=[],a=[],r.Ul.bt()?[3,3]:(r.Ul.forEach((function(t,s){a.push(r.Zl(s,e,n).then((function(t){if(t){r.Xl&&r.$l.fh(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=og.Na(s.targetId,t);o.push(e)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.ql.yi(i),[4,function(t,e){return Zc(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,h;return th(this,(function(l){switch(l.label){case 0:n=hh(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return nd.forEach(e,(function(e){return nd.forEach(e.Ca,(function(r){return n.persistence.Io.sc(t,e.targetId,r)})).next((function(){return nd.forEach(e.xa,(function(r){return n.persistence.Io.rc(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!sd(r=l.sent()))throw r;return ih("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.Ba.get(s),c=u.oe,h=u.ue(c),n.Ba=n.Ba.Ie(s,h));return[2]}}))}))}(r.Uh,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function tm(t,e){return Zc(this,void 0,void 0,(function(){var n,r;return th(this,(function(i){switch(i.label){case 0:return(n=hh(t)).currentUser.isEqual(e)?[3,3]:(ih("SyncEngine","User change. New user:",e.I()),[4,cg(n.Uh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Hl.forEach((function(t){t.forEach((function(t){t.reject(new mh(yh.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Hl.clear()}(n),n.$l.wh(e,r.ja,r.Ga),[4,Zy(n,r.Wa)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function em(t,e){var n=hh(t),r=n.jl.get(e);if(r&&r.kl)return sp().add(r.key);var i=sp(),o=n.Ql.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Ul.get(u);i=i.je(c.view.pl)}return i}function nm(t,e){return Zc(this,void 0,void 0,(function(){var n,r,i;return th(this,(function(o){switch(o.label){case 0:return[4,yg((n=hh(t)).Uh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Fl(r),[2,(n.Xl&&Yy(n,e.targetId,i.xl),i)]}}))}))}function rm(t){return Zc(this,void 0,void 0,(function(){var e;return th(this,(function(n){return[2,bg((e=hh(t)).Uh).then((function(t){return Zy(e,t)}))]}))}))}function im(t,e,n,r){return Zc(this,void 0,void 0,(function(){var i,o;return th(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=hh(t),r=hh(n.Ra);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Vo(t,e).next((function(e){return e?n.Ka.Va(t,e):nd.resolve(null)}))}))}((i=hh(t)).Uh,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,uy(i.Ml)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(zy(i,e,r||null),Gy(i,e),function(t,e){hh(hh(t).Ra).Fo(e)}(i.Uh,e)):uh(),a.label=4;case 4:return[4,Zy(i,o)];case 5:return a.sent(),[3,7];case 6:ih("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function om(t,e){return Zc(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return th(this,(function(h){switch(h.label){case 0:return lm(n=hh(t)),fm(n),!0!==e||!0===n.Yl?[3,3]:(r=n.$l.th(),[4,am(n,r.Dt())]);case 1:return i=h.sent(),n.Yl=!0,[4,vy(n.Ml,!0)];case 2:for(h.sent(),o=0,a=i;o<a.length;o++)s=a[o],Qg(n.Ml,s);return[3,7];case 3:return!1!==e||!1===n.Yl?[3,7]:(u=[],c=Promise.resolve(),n.Ql.forEach((function(t,e){n.$l.lh(e)?u.push(e):c=c.then((function(){return $y(n,e),gg(n.Uh,e,!0)})),Yg(n.Ml,e)})),[4,c]);case 4:return h.sent(),[4,am(n,u)];case 5:return h.sent(),function(t){var e=hh(t);e.jl.forEach((function(t,n){Yg(e.Ml,n)})),e.Gl.au(),e.jl=new Map,e.Wl=new $f(Xh.At)}(n),n.Yl=!1,[4,vy(n.Ml,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function am(t,e,n){return Zc(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,h,l,f,p,d,v;return th(this,(function(g){switch(g.label){case 0:n=hh(t),r=[],i=[],o=0,a=e,g.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.Ql.get(s))&&0!==c.length?[4,vg(n.Uh,of(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),h=0,l=c,g.label=3;case 3:return h<l.length?(f=l[h],p=n.Ul.get(f),[4,nm(n,p)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,mg(n.Uh,s)];case 8:return v=g.sent(),[4,vg(n.Uh,v)];case 9:return u=g.sent(),[4,Fy(n,sm(v),s,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.ql.yi(i),r)]}}))}))}function sm(t){return Yl(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function um(t){var e=hh(t);return hh(hh(e.Uh).persistence).Ea()}function cm(t,e,n,r){return Zc(this,void 0,void 0,(function(){var i,o,a;return th(this,(function(s){switch(s.label){case 0:return(i=hh(t)).Yl?(ih("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Ql.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,bg(i.Uh)];case 3:return o=s.sent(),a=pp.un(e,"current"===n),[4,Zy(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,gg(i.Uh,e,!0)];case 6:return s.sent(),$y(i,e,r),[3,8];case 7:uh(),s.label=8;case 8:return[2]}}))}))}function hm(t,e,n){return Zc(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,h,l,f;return th(this,(function(p){switch(p.label){case 0:if(!(r=lm(t)).Yl)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(a=o[i],r.Ql.has(a)?(ih("SyncEngine","Adding an already active target "+a),[3,5]):[4,mg(r.Uh,a)]):[3,6];case 2:return s=p.sent(),[4,vg(r.Uh,s)];case 3:return u=p.sent(),[4,Fy(r,sm(s),u.targetId,!1)];case 4:p.sent(),Qg(r.Ml,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return th(this,(function(e){switch(e.label){case 0:return r.Ql.has(t)?[4,gg(r.Uh,t,!1).then((function(){Yg(r.Ml,t),$y(r,t)})).catch(Td)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,l=n,p.label=7;case 7:return h<l.length?(f=l[h],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function lm(t){var e=hh(t);return e.Ml.Kh.Zh=Vy.bind(null,e),e.Ml.Kh.Xn=em.bind(null,e),e.Ml.Kh.Xh=By.bind(null,e),e.ql.yi=Ey.bind(null,e.Ll),e.ql.t_=Iy.bind(null,e.Ll),e}function fm(t){var e=hh(t);return e.Ml.Kh.tl=Wy.bind(null,e),e.Ml.Kh.el=Hy.bind(null,e),e}function pm(t,e,n){var r=hh(t);(function(t,e,n){return Zc(this,void 0,void 0,(function(){var r,i,o,a,s,u;return th(this,(function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,function(t,e){var n=hh(t),r=kp(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return n.Wc.ao(t,e.id)})).then((function(t){return!!t&&t.createTime.u(r)>=0}))}(t.Uh,r)];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n.e_(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n.n_(Ay(r)),i=new ky(r,t.Uh,e.fe),[4,e.s_()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.ml(o)]:[3,10];case 7:return(a=c.sent())&&n.n_(a),[4,e.s_()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return s=c.sent(),[4,Zy(t,s.tr,void 0)];case 12:return c.sent(),[4,function(t,e){var n=hh(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.Wc.uo(t,e)}))}(t.Uh,r)];case 13:return c.sent(),n.e_(s.progress),[3,15];case 14:return ah("SyncEngine","Loading bundle failed with "+(u=c.sent())),n.i_(u),[3,15];case 15:return[2]}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(r,e,n).then((function(){r.$l.Ih()}))}var dm=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Zc(this,void 0,void 0,(function(){return th(this,(function(e){switch(e.label){case 0:return this.fe=ed(t.rt.O),this.$l=this.r_(t),this.persistence=this.o_(t),[4,this.persistence.start()];case 1:return e.sent(),this.c_=this.a_(t),this.Uh=this.u_(t),[2]}}))}))},t.prototype.a_=function(t){return null},t.prototype.u_=function(t){return ug(this.persistence,new ag,t.h_,this.fe)},t.prototype.o_=function(t){return new Pg(Rg.Du,this.fe)},t.prototype.r_=function(t){return new Bg},t.prototype.terminate=function(){return Zc(this,void 0,void 0,(function(){return th(this,(function(t){switch(t.label){case 0:return this.c_&&this.c_.stop(),[4,this.$l.$()];case 1:return t.sent(),[4,this.persistence.$()];case 2:return t.sent(),[2]}}))}))},t}(),vm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).l_=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Jc(e,t),e.prototype.initialize=function(e){return Zc(this,void 0,void 0,(function(){return th(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,_g(this.Uh)];case 2:return n.sent(),[4,this.l_.initialize(this,e)];case 3:return n.sent(),[4,fm(this.l_.Lu)];case 4:return n.sent(),[4,uy(this.l_.Ml)];case 5:return n.sent(),[2]}}))}))},e.prototype.u_=function(t){return ug(this.persistence,new ag,t.h_,this.fe)},e.prototype.a_=function(t){var e=this.persistence.Io.vr;return new Rd(e,t.ks)},e.prototype.o_=function(t){var e=rg(t.rt.O,t.rt.persistenceKey),n=void 0!==this.cacheSizeBytes?Ed.Ki(this.cacheSizeBytes):Ed.Gi;return new tg(this.synchronizeTabs,e,t.clientId,n,t.ks,Wg(),Hg(),this.fe,this.$l,!!this.forceOwnership)},e.prototype.r_=function(t){return new Bg},e}(dm),gm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).l_=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Jc(e,t),e.prototype.initialize=function(e){return Zc(this,void 0,void 0,(function(){var n,r=this;return th(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.l_.Lu,this.$l instanceof qg?(this.$l.Lu={Sh:im.bind(null,n),Dh:cm.bind(null,n),Ch:hm.bind(null,n),Ea:um.bind(null,n),bh:rm.bind(null,n)},[4,this.$l.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Yc((function(t){return Zc(r,void 0,void 0,(function(){return th(this,(function(e){switch(e.label){case 0:return[4,om(this.l_.Lu,t)];case 1:return e.sent(),this.c_&&(t&&!this.c_.Nr?this.c_.start(this.Uh):t||this.c_.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.r_=function(t){var e=Wg();if(!qg.G(e))throw new mh(yh.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=rg(t.rt.O,t.rt.persistenceKey);return new qg(e,t.ks,n,t.clientId,t.h_)},e}(vm),ym=function(){function t(){}return t.prototype.initialize=function(t,e){return Zc(this,void 0,void 0,(function(){var n=this;return th(this,(function(r){switch(r.label){case 0:return this.Uh?[3,2]:(this.Uh=t.Uh,this.$l=t.$l,this.Qh=this.__(e),this.Ml=this.f_(e),this.Ll=this.d_(e),this.Lu=this.w_(e,!t.synchronizeTabs),this.$l.$u=function(t){return qy(n.Lu,t,1)},this.Ml.Kh.E_=tm.bind(null,this.Lu),[4,vy(this.Ml,this.Lu.Xl)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.d_=function(t){return new by},t.prototype.__=function(t){var e,n=ed(t.rt.O),r=(e=t.rt,new Hh(e));return function(t,e,n){return new md(t,e,n)}(t.credentials,r,n)},t.prototype.f_=function(t){var e,n,r,i,o,a=this;return e=this.Uh,n=this.Qh,r=t.ks,i=function(t){return qy(a.Lu,t,0)},o=Dh.G()?new Dh:new Rh,new Gg(e,n,r,i,o)},t.prototype.w_=function(t,e){return function(t,e,n,r,i,o,a){var s=new Ly(t,e,n,r,i,o);return a&&(s.Yl=!0),s}(this.Uh,this.Ml,this.Ll,this.$l,t.h_,t.Bl,e)},t.prototype.terminate=function(){return function(t){return Zc(this,void 0,void 0,(function(){var e;return th(this,(function(n){switch(n.label){case 0:return e=hh(t),ih("RemoteStore","RemoteStore shutting down."),e.Gh.add(5),[4,$g(e)];case 1:return n.sent(),e.Hh.$(),e.Jh.set("Unknown"),[2]}}))}))}(this.Ml)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return Zc(this,void 0,void 0,(function(){var r;return th(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return Zc(this,void 0,void 0,(function(){return th(this,(function(t){return[2]}))}))},releaseLock:function(){}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bm=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.T_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.T_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.I_=function(){this.muted=!0},t.prototype.T_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),_m=function(){function t(t,e){var n=this;this.m_=t,this.fe=e,this.metadata=new Wh,this.buffer=new Uint8Array,this.A_=new TextDecoder("utf-8"),this.R_().then((function(t){t&&t.Tl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.m_.cancel()},t.prototype.getMetadata=function(){return Zc(this,void 0,void 0,(function(){return th(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.s_=function(){return Zc(this,void 0,void 0,(function(){return th(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.R_())]}}))}))},t.prototype.R_=function(){return Zc(this,void 0,void 0,(function(){var t,e,n,r;return th(this,(function(i){switch(i.label){case 0:return[4,this.P_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.A_.decode(t),n=Number(e),isNaN(n)&&this.y_("length string ("+e+") is not valid number"),[4,this.g_(n)]);case 2:return r=i.sent(),[2,new Cy(JSON.parse(r),t.length+n)]}}))}))},t.prototype.V_=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.P_=function(){return Zc(this,void 0,void 0,(function(){var t,e;return th(this,(function(n){switch(n.label){case 0:return this.V_()<0?[4,this.p_()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.V_())<0&&this.y_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.g_=function(t){return Zc(this,void 0,void 0,(function(){var e;return th(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.p_()]:[3,3];case 1:n.sent()&&this.y_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.A_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.y_=function(t){throw this.m_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.p_=function(){return Zc(this,void 0,void 0,(function(){var t,e;return th(this,(function(n){switch(n.label){case 0:return[4,this.m_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),wm=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new mh(yh.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.b_=new Yh(t)}return t.prototype.isEqual=function(t){return this.b_.isEqual(t.b_)},t}(),Em=function(t){this._methodName=t},Im=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.Vt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.Ct()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Sm(this.firestore,this.v_,this.S_.path.yt())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),Tm=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),Sm=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Xl(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Jc(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.Vt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.Ct()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.yt();return t.bt()?null:new Im(this.firestore,null,new Xh(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(Tm);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof _h&&(t=t._),xd("collection","path",e),t instanceof Hd)return Ud(n=$h.xt.apply($h,eh([e],r))),new Sm(t,null,n);if(!(t instanceof Im||t instanceof Sm))throw new mh(yh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ud(n=$h.xt.apply($h,eh([t.path],r)).child($h.xt(e))),new Sm(t.firestore,null,n)}function Nm(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof _h&&(t=t._),1===arguments.length&&(e=fh.t()),xd("doc","path",e),t instanceof Hd)return Fd(n=$h.xt.apply($h,eh([e],r))),new Im(t,null,new Xh(n));if(!(t instanceof Im||t instanceof Sm))throw new mh(yh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Fd(n=t.D_.child($h.xt.apply($h,eh([e],r)))),new Im(t.firestore,t instanceof Sm?t.v_:null,new Xh(n))}function km(t,e){return t instanceof _h&&(t=t._),e instanceof _h&&(e=e._),(t instanceof Im||t instanceof Sm)&&(e instanceof Im||e instanceof Sm)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function Am(t,e){return t instanceof _h&&(t=t._),e instanceof _h&&(e=e._),t instanceof Tm&&e instanceof Tm&&t.firestore===e.firestore&&sf(t.C_,e.C_)&&t.v_===e.v_
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Pm=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new mh(yh.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new mh(yh.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.dt=function(t){return ph(this.x_,t.x_)||ph(this.N_,t.N_)},t}(),Om=/^__.*__$/,Rm=function(){function t(t,e,n){this.data=t,this.Te=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Te?new Vf(t,this.data,this.Te,e,this.fieldTransforms):new jf(t,this.data,e,this.fieldTransforms)},t}(),Dm=function(){function t(t,e,n){this.data=t,this.Te=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new Vf(t,this.data,this.Te,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw uh()}}var Lm=function(){function t(t,e,n,r,i,o){this.settings=t,this.O=e,this.fe=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Te=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.O,this.fe,this.ignoreUndefinedProperties,this.fieldTransforms,this.Te)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return eb(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Te.find((function(e){return t.vt(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.vt(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(xm(this.k_)&&Om.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Mm=function(){function t(t,e,n){this.O=t,this.ignoreUndefinedProperties=e,this.fe=n||ed(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Lm({k_:t,methodName:e,j_:n,path:Yh.Nt(),B_:!1,W_:r},this.O,this.fe,this.ignoreUndefinedProperties)},t}();function Fm(t){var e=t.so(),n=ed(t.zr);return new Mm(t.zr,!!e.ignoreUndefinedProperties,n)}function Um(t,e,n,r,i,o){void 0===o&&(o={});var a=t.G_(o.merge||o.mergeFields?2:0,e,n,i);Xm("Data must be an object, but it was:",a,r);var s,u,c=Qm(r,a);if(o.merge)s=new el(a.Te),u=a.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=Jm(e,f[l],n);if(!a.contains(p))throw new mh(yh.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");nb(h,p)||h.push(p)}s=new el(h),u=a.fieldTransforms.filter((function(t){return s.Qt(t.field)}))}else s=null,u=a.fieldTransforms;return new Rm(new El(c),s,u)}var jm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jc(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Te.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Em);function Vm(t,e,n){return new Lm({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.O,e.fe,e.ignoreUndefinedProperties)}var qm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jc(e,t),e.prototype.z_=function(t){return new Af(t.path,new wf)},e.prototype.isEqual=function(t){return t instanceof e},e}(Em),Bm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Jc(e,t),e.prototype.z_=function(t){var e=Vm(this,t,!0),n=this.H_.map((function(t){return $m(t,e)})),r=new Ef(n);return new Af(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Em),Wm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Jc(e,t),e.prototype.z_=function(t){var e=Vm(this,t,!0),n=this.H_.map((function(t){return $m(t,e)})),r=new Tf(n);return new Af(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Em),Hm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Jc(e,t),e.prototype.z_=function(t){var e=new Cf(t.fe,gf(t.fe,this.J_));return new Af(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Em);function Km(t,e,n,r){var i=t.G_(1,e,n);Xm("Data must be an object, but it was:",i,r);var o=[],a=new Il;Zh(r,(function(t,r){var s=tb(e,t,n);r instanceof _h&&(r=r._);var u=i.U_(s);if(r instanceof jm)o.push(s);else{var c=$m(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new el(o);return new Dm(a.Gt(),s,i.fieldTransforms)}function Gm(t,e,n,r,i,o){var a=t.G_(1,e,n),s=[Jm(e,r,n)],u=[i];if(o.length%2!=0)throw new mh(yh.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(Jm(e,o[c])),u.push(o[c+1]);for(var h=[],l=new Il,f=s.length-1;f>=0;--f)if(!nb(h,s[f])){var p=s[f],d=u[f];d instanceof _h&&(d=d._);var v=a.U_(p);if(d instanceof jm)h.push(p);else{var g=$m(d,v);null!=g&&(h.push(p),l.set(p,g))}}var y=new el(h);return new Dm(l.Gt(),y,a.fieldTransforms)}function zm(t,e,n,r){return void 0===r&&(r=!1),$m(n,t.G_(r?4:3,e))}function $m(t,e){if(t instanceof _h&&(t=t._),Ym(t))return Xm("Unsupported field value:",e,t),Qm(t,e);if(t instanceof Em)return function(t,e){if(!xm(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Te.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=$m(o[i],e.Q_(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof _h&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return gf(e.fe,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Kh.fromDate(t);return{timestampValue:Sp(e.fe,n)}}if(t instanceof Kh)return n=new Kh(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Sp(e.fe,n)};if(t instanceof Pm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof bh)return{bytesValue:Cp(e.fe,t.l)};if(t instanceof Im){n=e.O;var r=t.firestore.zr;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ap(t.firestore.zr||e.O,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+jd(t))}(t,e)}function Qm(t,e){var n={};return tl(t)?e.path&&e.path.length>0&&e.Te.push(e.path):Zh(t,(function(t,r){var i=$m(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Ym(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Kh||t instanceof Pm||t instanceof bh||t instanceof Im||t instanceof Em)}function Xm(t,e,n){if(!Ym(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=jd(n);throw"an object"===r?e.K_(t+" a custom object"):e.K_(t+" "+r)}}function Jm(t,e,n){if(e instanceof _h&&(e=e._),e instanceof wm)return e.b_;if("string"==typeof e)return tb(t,e);throw eb("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Zm=new RegExp("[~\\*/\\[\\]]");function tb(t,e,n){if(e.search(Zm)>=0)throw eb("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(wm.bind.apply(wm,eh([void 0],e.split("."))))).b_}catch(r){throw eb("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function eb(t,e,n,r,i){var o=r&&!r.bt(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new mh(yh.INVALID_ARGUMENT,(s+=". ")+t+u)}function nb(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rb=function(){function t(t){this.Qh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Zc(this,void 0,void 0,(function(){var e,n=this;return th(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new mh(yh.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Zc(this,void 0,void 0,(function(){var n,r,i,o,a,s;return th(this,(function(u){switch(u.label){case 0:return n=hh(t),r=Lp(n.fe)+"/documents",i={documents:e.map((function(t){return Op(n.fe,t)}))},[4,n._t("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){ch(!!e.found),e.found.name,e.found.updateTime;var n=Rp(t,e.found.name),r=kp(e.found.updateTime),i=new El({mapValue:{fields:e.found.fields}});return new Cl(n,r,i,{})}(t,e):"missing"in e?function(t,e){ch(!!e.missing),ch(!!e.readTime);var n=Rp(t,e.missing),r=kp(e.readTime);return new Nl(n,r)}(t,e):uh()}(n.fe,t);a.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=a.get(t.toString());ch(!!e),s.push(e)})),s)]}}))}))}(this.Qh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof Nl||t instanceof Cl?n.sf(t):uh()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.Ee(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new Kf(t,this.Ee(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Zc(this,void 0,void 0,(function(){var t,e=this;return th(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Xh.Lt(n);e.mutations.push(new Gf(r,e.Ee(r)))})),[4,function(t,e){return Zc(this,void 0,void 0,(function(){var n,r,i;return th(this,(function(o){switch(o.label){case 0:return n=hh(t),r=Lp(n.fe)+"/documents",i={writes:e.map((function(t){return jp(n.fe,t)}))},[4,n.at("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Qh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof Cl)e=t.version;else{if(!(t instanceof Nl))throw uh();e=Gh.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new mh(yh.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.Ee=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Of.updateTime(e):Of.de()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(Gh.min()))throw new mh(yh.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Of.updateTime(e)}return Of.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),ib=function(){function t(t,e,n,r){this.ks=t,this.Qh=e,this.updateFunction=n,this.Bs=r,this.cf=5,this.ui=new dd(this.ks,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.ui.ti((function(){return Zc(t,void 0,void 0,(function(){var t,e,n=this;return th(this,(function(r){return t=new rb(this.Qh),(e=this.uf(t))&&e.then((function(e){n.ks.Ws((function(){return t.commit().then((function(){n.Bs.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!xh(e)&&e.catch&&e.then?e:(this.Bs.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Bs.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this.ks.Ws((function(){return e.af(),Promise.resolve()}))):this.Bs.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Vh(e)}return!1},t}(),ob=function(){function t(t,e,n){var r=this;this.credentials=t,this.ks=e,this.rt=n,this.user=Th.UNAUTHENTICATED,this.clientId=fh.t(),this._f=function(){},this.S=new Wh,this.credentials.V((function(t){ih("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r._f(t)),r.S.resolve()}))}return t.prototype.getConfiguration=function(){return Zc(this,void 0,void 0,(function(){return th(this,(function(t){switch(t.label){case 0:return[4,this.S.promise];case 1:return[2,(t.sent(),{ks:this.ks,rt:this.rt,clientId:this.clientId,credentials:this.credentials,h_:this.user,Bl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.S.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this.ks.wf)throw new mh(yh.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.ks.Ef();var e=new Wh;return this.ks.Tf((function(){return Zc(t,void 0,void 0,(function(){var t,n;return th(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.p(),e.resolve(),[3,6];case 5:return t=r.sent(),n=pd(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(t,e){return Zc(this,void 0,void 0,(function(){var n,r=this;return th(this,(function(i){switch(i.label){case 0:return t.ks.Af(),ih("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=i.sent(),[4,e.initialize(n)];case 2:return i.sent(),t.ff((function(n){return t.ks.ea((function(){return Zc(r,void 0,void 0,(function(){return th(this,(function(t){switch(t.label){case 0:return[4,cg(e.Uh,n)];case 1:return t.sent(),[2]}}))}))}))})),e.persistence.Xc((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function sb(t,e){return Zc(this,void 0,void 0,(function(){var n,r;return th(this,(function(i){switch(i.label){case 0:return t.ks.Af(),[4,ub(t)];case 1:return n=i.sent(),ih("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t.ks.ea((function(){return function(t,e){return Zc(this,void 0,void 0,(function(){var n,r;return th(this,(function(i){switch(i.label){case 0:return(n=hh(t)).ks.Af(),ih("RemoteStore","RemoteStore received new credentials"),r=ey(n),n.Gh.add(3),[4,$g(n)];case 1:return i.sent(),r&&n.Jh.set("Unknown"),[4,n.Kh.E_(e)];case 2:return i.sent(),n.Gh.delete(3),[4,zg(n)];case 3:return i.sent(),[2]}}))}))}(e.Ml,n)}))})),t.If=e,[2]}}))}))}function ub(t){return Zc(this,void 0,void 0,(function(){return th(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(ih("FirestoreClient","Using default OfflineComponentProvider"),[4,ab(t,new dm)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function cb(t){return Zc(this,void 0,void 0,(function(){return th(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(ih("FirestoreClient","Using default OnlineComponentProvider"),[4,sb(t,new ym)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function hb(t){return ub(t).then((function(t){return t.persistence}))}function lb(t){return ub(t).then((function(t){return t.Uh}))}function fb(t){return cb(t).then((function(t){return t.Ml}))}function pb(t){return cb(t).then((function(t){return t.Lu}))}function db(t){return Zc(this,void 0,void 0,(function(){var e,n;return th(this,(function(r){switch(r.label){case 0:return[4,cb(t)];case 1:return e=r.sent(),[2,((n=e.Ll).ol=My.bind(null,e.Lu),n.ul=Uy.bind(null,e.Lu),n)]}}))}))}function vb(t,e,n){var r=this;void 0===n&&(n={});var i=new Wh;return t.ks.Ws((function(){return Zc(r,void 0,void 0,(function(){var r;return th(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new bm({next:function(o){e.Ws((function(){return wy(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new mh(yh.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new mh(yh.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new Sy(Xl(n.path),o,{includeMetadataChanges:!0,El:!0});return _y(t,a)},[4,db(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.ks,e,n,i])]}}))}))})),i.promise}function gb(t,e,n){var r=this;void 0===n&&(n={});var i=new Wh;return t.ks.Ws((function(){return Zc(r,void 0,void 0,(function(){var r;return th(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new bm({next:function(n){e.Ws((function(){return wy(t,a)})),n.fromCache&&"server"===r.source?i.reject(new mh(yh.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new Sy(n,o,{includeMetadataChanges:!0,El:!0});return _y(t,a)},[4,db(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.ks,e,n,i])]}}))}))})),i.promise}var yb=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.ui=new dd(this,"async_queue_retry"),this.vf=function(){var e=Hg();e&&ih("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ui.si()};var e=Hg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ws=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=Hg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.ea=function(t){var e=this;this.Ws((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return Zc(this,void 0,void 0,(function(){var t,e=this;return th(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.ui.reset(),[3,4];case 3:if(!sd(t=n.sent()))throw t;return ih("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.ui.ti((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,oh("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.ni=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=fd.qs(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&uh()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Zc(this,void 0,void 0,(function(){var t;return th(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Ff=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].Ms===t)return!0;return!1},t.prototype.Of=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.Ls-e.Ls}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Ks(),"all"!==t&&i.Ms===t)break}return e.Nf()}))},t.prototype.kf=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}(),mb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Mf=new yb,r.Wr="name"in e?e.name:"[DEFAULT]",r}return Jc(e,t),e.prototype.io=function(){return this.Lf||_b(this),this.Lf.terminate()},e}(Hd);function bb(t){return t.Lf||_b(t),t.Lf.df(),t.Lf}function _b(t){var e=t.so(),n=function(t,e,n){return new Ph(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.zr,t.Wr,e);t.Lf=new ob(t.Hr,t.Mf,n)}function wb(t,e,n){var r=this,i=new Wh;return t.ks.enqueue((function(){return Zc(r,void 0,void 0,(function(){var r;return th(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,ab(t,n)];case 1:return o.sent(),[4,sb(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===yh.FAILED_PRECONDITION||t.code===yh.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Eb(t){if(t.Yr||t.Xr)throw new mh(yh.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ib=function(){function t(){}return t.prototype.$f=function(t,e){switch(void 0===e&&(e="none"),cl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return il(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf(ol(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.Wf(t.arrayValue,e);case 10:return this.jf(t.mapValue,e);default:throw uh()}},t.prototype.jf=function(t,e){var n=this,r={};return Zh(t.fields||{},(function(t,i){r[t]=n.$f(i,e)})),r},t.prototype.Kf=function(t){return new Pm(il(t.latitude),il(t.longitude))},t.prototype.Wf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.$f(t,e)}))},t.prototype.qf=function(t,e){switch(e){case"previous":var n=sl(t);return null==n?null:this.$f(n,e);case"estimate":return this.Bf(ul(t));default:return null}},t.prototype.Bf=function(t){var e=rl(t);return new Kh(e.seconds,e.nanos)},t.prototype.Gf=function(t,e){var n=$h.xt(t);ch(td(n));var r=new Oh(n.get(1),n.get(3)),i=new Xh(n.Pt(5));return r.isEqual(e)||oh("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Tb=function(){function t(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.Vt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Im(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Jf},t.prototype.data=function(){if(this.Jf){if(this.v_){var t=new Sb(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.$f(this.Jf.Yt())}},t.prototype.get=function(t){if(this.Jf){var e=this.Jf.data().field(Cb("DocumentSnapshot.get",t));if(null!==e)return this.Hf.$f(e)}},t}(),Sb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jc(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Tb);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(t,e){return"string"==typeof e?tb(t,e):e instanceof _h?e._.b_:e.b_}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(t){if(Zl(t)&&0===t.ne.length)throw new mh(yh.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var kb=function(){};function Ab(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.Yf(t)}return t}var Pb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xf=e,i.Zf=n,i.td=r,i.type="where",i}return Jc(e,t),e.prototype.Yf=function(t){var e=Fm(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.Ot()){if("array-contains"===o||"array-contains-any"===o)throw new mh(yh.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Fb(a,o);for(var u=[],c=0,h=a;c<h.length;c++){var l=h[c];u.push(Mb(r,t,l))}s={arrayValue:{values:u}}}else s=Mb(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Fb(a,o),s=zm(n,"where",a,"in"===o||"not-in"===o);var f=xl.create(i,o,s);return function(t,e){if(e.ee()){var n=ef(t);if(null!==n&&!n.isEqual(e.field))throw new mh(yh.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=tf(t);null!==r&&Ub(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new mh(yh.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new mh(yh.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t.C_,0,e,t.firestore.zr,this.Xf,this.Zf,this.td);return new Tm(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new Ql(t.path,t.collectionGroup,t.ne.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(kb),Ob=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Xf=e,r.ed=n,r.type="orderBy",r}return Jc(e,t),e.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new mh(yh.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new mh(yh.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Kl(e,n);return function(t,e){if(null===tf(t)){var n=ef(t);null!==n&&Ub(t,n,e.field)}}(t,r),r}(t.C_,this.Xf,this.ed);return new Tm(t.firestore,t.v_,function(t,e){var n=t.ne.concat([e]);return new Ql(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(kb),Rb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.nd=n,i.sd=r,i}return Jc(e,t),e.prototype.Yf=function(t){return new Tm(t.firestore,t.v_,af(t.C_,this.nd,this.sd))},e}(kb),Db=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Jc(e,t),e.prototype.Yf=function(t){var e=Lb(t,this.type,this.rd,this.od);return new Tm(t.firestore,t.v_,function(t,e){return new Ql(t.path,t.collectionGroup,t.ne.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(kb),xb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Jc(e,t),e.prototype.Yf=function(t){var e=Lb(t,this.type,this.rd,this.od);return new Tm(t.firestore,t.v_,function(t,e){return new Ql(t.path,t.collectionGroup,t.ne.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(kb);function Lb(t,e,n,r){if(n[0]instanceof _h&&(n[0]=n[0]._),n[0]instanceof Tb)return function(t,e,n,r,i){if(!r)throw new mh(yh.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=rf(t);a<s.length;a++){var u=s[a];if(u.field.Ot())o.push(gl(e,r.key));else{var c=r.field(u.field);if(al(c))throw new mh(yh.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.Ct();throw new mh(yh.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Wl(o,i)}(t.C_,t.firestore.zr,e,n[0].Jf,r);var i=Fm(t.firestore);return function(t,e,n,r,i,o){var a=t.ne;if(i.length>a.length)throw new mh(yh.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.Ot()){if("string"!=typeof c)throw new mh(yh.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!nf(t)&&-1!==c.indexOf("/"))throw new mh(yh.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child($h.xt(c));if(!Xh.qt(h))throw new mh(yh.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new Xh(h);s.push(gl(e,l))}else{var f=zm(n,r,c);s.push(f)}}return new Wl(s,o)}(t.C_,t.firestore.zr,i,e,n,r)}function Mb(t,e,n){if(n instanceof _h&&(n=n._),"string"==typeof n){if(""===n)throw new mh(yh.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!nf(e)&&-1!==n.indexOf("/"))throw new mh(yh.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child($h.xt(n));if(!Xh.qt(r))throw new mh(yh.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return gl(t,new Xh(r))}if(n instanceof Im)return gl(t,n.S_);throw new mh(yh.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+jd(n)+".")}function Fb(t,e){if(!Array.isArray(t)||0===t.length)throw new mh(yh.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new mh(yh.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Ub(t,e,n){if(!n.isEqual(e))throw new mh(yh.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Vb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Jc(e,t),e.prototype.Uf=function(t){return new bh(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.zr);return new Im(this.firestore,null,e)},e}(Ib);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Bb=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Wb=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this).zf=e,s.ad=e,s.metadata=o,s}return Jc(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new Hb(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.$f(this.Jf.Yt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf){var n=this.Jf.data().field(Cb("DocumentSnapshot.get",t));if(null!==n)return this.Hf.$f(n,e.serverTimestamps)}},e}(Tb),Hb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jc(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Wb),Kb=function(){function t(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new Bb(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.ud.docs.forEach((function(r){t.call(e,new Hb(n.zf,n.Hf,r.key,r,new Bb(n.ud.tn.has(r.key),n.ud.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.ud.nn)throw new mh(yh.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===e||(this.hd=function(t,e){if(t.ud.Ze.bt()){var n=0;return t.ud.docChanges.map((function(e){var r=new Hb(t.zf,t.Hf,e.doc.key,e.doc,new Bb(t.ud.tn.has(e.doc.key),t.ud.fromCache),t.query.v_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t.ud.Ze;return t.ud.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Hb(t.zf,t.Hf,e.doc.key,e.doc,new Bb(t.ud.tn.has(e.doc.key),t.ud.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Gb(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.ld=e),this.hd},t}();function Gb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return uh()}}function zb(t,e){return t instanceof Wb&&e instanceof Wb?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof Kb&&e instanceof Kb&&t.zf===e.zf&&Am(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $b=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Jc(e,t),e.prototype.Uf=function(t){return new bh(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.zr);return new Im(this.firestore,null,e)},e}(Ib);function Qb(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Vd(t,Im);var o=Vd(t.firestore,mb),a=Fm(o);return e instanceof _h&&(e=e._),Xb(o,[("string"==typeof e||e instanceof wm?Gm(a,"updateDoc",t.S_,e,n,r):Km(a,"updateDoc",t.S_,e)).F_(t.S_,Of.exists(!0))])}function Yb(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof _h&&(t=t._);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||qb(i[s])||(a=i[s],s++);var u,c,h,l={includeMetadataChanges:a.includeMetadataChanges};if(qb(i[s])){var f=i[s];i[s]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Im)c=Vd(t.firestore,mb),h=Xl(t.S_.path),u={next:function(e){i[s]&&i[s](Jb(c,t,e))},error:i[s+1],complete:i[s+2]};else{var p=Vd(t,Tm);c=Vd(p.firestore,mb),h=p.C_;var d=new $b(c);u={next:function(t){i[s]&&i[s](new Kb(c,d,p,t))},error:i[s+1],complete:i[s+2]},Nb(t.C_)}return function(t,e,n,r){var i=this,o=new bm(r),a=new Sy(e,o,n);return t.ks.Ws((function(){return Zc(i,void 0,void 0,(function(){var e;return th(this,(function(n){switch(n.label){case 0:return e=_y,[4,db(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.I_(),t.ks.Ws((function(){return Zc(i,void 0,void 0,(function(){var e;return th(this,(function(n){switch(n.label){case 0:return e=wy,[4,db(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(bb(c),h,l,u)}function Xb(t,e){return function(t,e){var n=this,r=new Wh;return t.ks.Ws((function(){return Zc(n,void 0,void 0,(function(){var n;return th(this,(function(i){switch(i.label){case 0:return n=jy,[4,pb(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(bb(t),e)}function Jb(t,e,n){var r=n.docs.get(e.S_),i=new $b(t);return new Wb(t,i,e.S_,r,new Bb(n.hasPendingWrites,n.fromCache),e.v_)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zb=function(){function t(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=Fm(t)}return t.prototype.set=function(t,e,n){this.Ed();var r=t_(t,this.zf),i=jb(r.v_,e,n),o=Um(this.wd,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.fd.push(o.F_(r.S_,Of.de())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Ed();var o,a=t_(t,this.zf);return e instanceof _h&&(e=e._),o="string"==typeof e||e instanceof wm?Gm(this.wd,"WriteBatch.update",a.S_,e,n,r):Km(this.wd,"WriteBatch.update",a.S_,e),this.fd.push(o.F_(a.S_,Of.exists(!0))),this},t.prototype.delete=function(t){this.Ed();var e=t_(t,this.zf);return this.fd=this.fd.concat(new Kf(e.S_,Of.de())),this},t.prototype.commit=function(){return this.Ed(),this.dd=!0,this.fd.length>0?this._d(this.fd):Promise.resolve()},t.prototype.Ed=function(){if(this.dd)throw new mh(yh.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function t_(t,e){if(t instanceof _h&&(t=t._),t.firestore!==e)throw new mh(yh.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).zf=e,r}return Jc(e,t),e.prototype.get=function(e){var n=this,r=t_(e,this.zf),i=new $b(this.zf);return t.prototype.get.call(this,e).then((function(t){return new Wb(n.zf,i,r.S_,t.Jf,new Bb(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.zf=t,this.Td=e,this.wd=Fm(t)}return t.prototype.get=function(t){var e=this,n=t_(t,this.zf),r=new Vb(this.zf);return this.Td.ef([n.S_]).then((function(t){if(!t||1!==t.length)return uh();var i=t[0];if(i instanceof Nl)return new Tb(e.zf,r,n.S_,null,n.v_);if(i instanceof Cl)return new Tb(e.zf,r,i.key,i,n.v_);throw uh()}))},t.prototype.set=function(t,e,n){var r=t_(t,this.zf),i=jb(r.v_,e,n),o=Um(this.wd,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Td.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=t_(t,this.zf);return e instanceof _h&&(e=e._),o="string"==typeof e||e instanceof wm?Gm(this.wd,"Transaction.update",a.S_,e,n,r):Km(this.wd,"Transaction.update",a.S_,e),this.Td.update(a.S_,o),this},t.prototype.delete=function(t){var e=t_(t,this.zf);return this.Td.delete(e.S_),this},t}()),n_=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Eb(t=Vd(t,mb));var n=bb(t),r=t.so(),i=new ym;return wb(n,i,new vm(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Eb(t=Vd(t,mb));var e=bb(t),n=t.so(),r=new ym;return wb(e,r,new gm(r,n.cacheSizeBytes))}(t._)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.Yr&&!t.Xr)throw new mh(yh.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Wh;return t.Mf.Tf((function(){return Zc(e,void 0,void 0,(function(){var e;return th(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Zc(this,void 0,void 0,(function(){var e;return th(this,(function(n){switch(n.label){case 0:return id.G()?(e=t+"main",[4,id.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(rg(t.zr,t.Wr))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._)},t}(),r_=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Id=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Oh||(i.md=e),i}return Jc(e,t),Object.defineProperty(e.prototype,"zr",{get:function(){return this._.zr},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.no()),t)).merge,this._.eo(t)},e.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this._.no().host&&ah("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.ks.enqueue((function(){return Zc(e,void 0,void 0,(function(){var e,n;return th(this,(function(r){switch(r.label){case 0:return[4,hb(t)];case 1:return e=r.sent(),[4,fb(t)];case 2:return n=r.sent(),[2,(e.Zc(!0),function(t){var e=hh(t);return e.Gh.delete(0),zg(e)}(n))]}}))}))}))}(bb(Vd(this._,mb)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.ks.enqueue((function(){return Zc(e,void 0,void 0,(function(){var e,n;return th(this,(function(r){switch(r.label){case 0:return[4,hb(t)];case 1:return e=r.sent(),[4,fb(t)];case 2:return n=r.sent(),[2,(e.Zc(!1),function(t){return Zc(this,void 0,void 0,(function(){var e;return th(this,(function(n){switch(n.label){case 0:return(e=hh(t)).Gh.add(0),[4,$g(e)];case 1:return n.sent(),e.Jh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(bb(Vd(this._,mb)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Md("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this._._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Wh;return t.ks.Ws((function(){return Zc(e,void 0,void 0,(function(){var e;return th(this,(function(r){switch(r.label){case 0:return e=Ky,[4,pb(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(bb(Vd(this._,mb)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new bm(e);return t.ks.Ws((function(){return Zc(n,void 0,void 0,(function(){var e;return th(this,(function(n){switch(n.label){case 0:return e=function(t,e){hh(t).rl.add(e),e.next()},[4,db(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.I_(),t.ks.Ws((function(){return Zc(n,void 0,void 0,(function(){var e;return th(this,(function(n){switch(n.label){case 0:return e=function(t,e){hh(t).rl.delete(e)},[4,db(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(bb(t=Vd(t,mb)),qb(e)?e:{next:e})}(this._,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.md)throw new mh(yh.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new g_(this,Cm(this._,t))}catch(t){throw u_(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new s_(this,Nm(this._,t))}catch(t){throw u_(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new p_(this,function(t,e){if(t=Vd(t,Hd),xd("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new mh(yh.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Tm(t,null,function(t){return new Ql($h.Nt(),t)}(e))}(this._,t))}catch(t){throw u_(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Wh;return t.ks.Ws((function(){return Zc(n,void 0,void 0,(function(){var n;return th(this,(function(i){switch(i.label){case 0:return[4,function(t){return cb(t).then((function(t){return t.Qh}))}(t)];case 1:return n=i.sent(),new ib(t.ks,n,e,r).run(),[2]}}))}))})),r.promise}(bb(t),(function(n){return e(new e_(t,n))}))}(this._,(function(n){return t(new o_(e,n))}))},e.prototype.batch=function(){var t=this;return bb(this._),new a_(new Zb(this._,(function(e){return Xb(t._,e)})))},e.prototype.loadBundle=function(t){throw new mh(yh.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new mh(yh.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(_h),i_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Jc(e,t),e.prototype.Uf=function(t){return new Ih(new bh(t))},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.zr);return s_.Ad(e,this.firestore,null)},e}(Ib);var o_=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Jc(e,t),e.prototype.get=function(t){var e=this,n=y_(t);return this._.get(n).then((function(t){return new l_(e.zf,t)}))},e.prototype.set=function(t,e,n){var r=y_(t);return n?(Ld("Transaction.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=y_(t);return 2===arguments.length?this._.update(a,e):(r=this._).update.apply(r,eh([a,e,n],i)),this},e.prototype.delete=function(t){var e=y_(t);return this._.delete(e),this},e}(_h),a_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jc(e,t),e.prototype.set=function(t,e,n){var r=y_(t);return n?(Ld("WriteBatch.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=y_(t);return 2===arguments.length?this._.update(a,e):(r=this._).update.apply(r,eh([a,e,n],i)),this},e.prototype.delete=function(t){var e=y_(t);return this._.delete(e),this},e.prototype.commit=function(){return this._.commit()},e}(_h),s_=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new i_(e),r}return Jc(e,t),e.Rd=function(t,n,r){if(t.length%2!=0)throw new mh(yh.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.Ct()+" has "+t.length);return new e(n,new Im(n._,r,new Xh(t)))},e.Ad=function(t,n,r){return new e(n,new Im(n._,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new g_(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new g_(this.firestore,Cm(this._,t))}catch(t){throw u_(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof _h&&(t=t._),t instanceof Im&&km(this._,t)},e.prototype.set=function(t,e){e=Ld("DocumentReference.set",e);try{return function(t,e,n){t=Vd(t,Im);var r=Vd(t.firestore,mb),i=jb(t.v_,e,n);return Xb(r,[Um(Fm(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,Of.de())])}(this._,t,e)}catch(t){throw u_(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Qb(this._,t):Qb.apply(void 0,eh([this._,t,e],n))}catch(t){throw u_(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Xb(Vd((t=this._).firestore,mb),[new Kf(t.S_,Of.de())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=c_(e),i=h_(e,(function(e){return new l_(t.firestore,new Wb(t.firestore._,t.Hf,e.S_,e.Jf,e.metadata,t._.v_))}));return Yb(this._,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Vd(t,Im);var e=Vd(t.firestore,mb),n=bb(e),r=new $b(e);return function(t,e){var n=this,r=new Wh;return t.ks.Ws((function(){return Zc(n,void 0,void 0,(function(){var n;return th(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Zc(this,void 0,void 0,(function(){var r,i;return th(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=hh(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ka.Pa(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof Cl?n.resolve(i):i instanceof Nl?n.resolve(null):n.reject(new mh(yh.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=pd(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,lb(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new Wb(e,r,t.S_,n,new Bb(n instanceof Cl&&n.Jt,!0),t.v_)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=Vd(t,Im);var e=Vd(t.firestore,mb);return vb(bb(e),t.S_,{source:"server"}).then((function(n){return Jb(e,t,n)}))}(this._):function(t){t=Vd(t,Im);var e=Vd(t.firestore,mb);return vb(bb(e),t.S_).then((function(n){return Jb(e,t,n)}))}(this._)).then((function(t){return new l_(e.firestore,new Wb(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(_h);function u_(t,e,n){return t.message=t.message.replace(e,n),t}function c_(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!qb(r))return r}return{}}function h_(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=qb(t[0])?t[0]:qb(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var l_=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Jc(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new s_(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._.data(t)},e.prototype.get=function(t,e){return this._.get(t,e)},e.prototype.isEqual=function(t){return zb(this._,t._)},e}(_h),f_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jc(e,t),e.prototype.data=function(t){return this._.data(t)},e}(l_),p_=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new i_(e),r}return Jc(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Ab(this._,function(t,e,n){var r=e,i=Cb("where",t);return new Pb(i,r,n)}(t,n,r)))}catch(t){throw u_(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Ab(this._,function(t,e){void 0===e&&(e="asc");var n=e,r=Cb("orderBy",t);return new Ob(r,n)}(t,n)))}catch(t){throw u_(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Ab(this._,function(t){return qd("limit",t),new Rb("limit",t,"F")}(t)))}catch(t){throw u_(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Ab(this._,function(t){return qd("limitToLast",t),new Rb("limitToLast",t,"L")}(t)))}catch(t){throw u_(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ab(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Db("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw u_(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ab(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Db("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw u_(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ab(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xb("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw u_(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ab(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xb("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw u_(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Am(this._,t._)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Vd(t,Tm);var e=Vd(t.firestore,mb),n=bb(e),r=new $b(e);return function(t,e){var n=this,r=new Wh;return t.ks.Ws((function(){return Zc(n,void 0,void 0,(function(){var n;return th(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Zc(this,void 0,void 0,(function(){var r,i,o,a,s;return th(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,yg(t,e,!0)];case 1:return s=u.sent(),r=new Ry(e,s.za),i=r.bl(s.documents),o=r.yr(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=pd(a,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,lb(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new Kb(e,r,t,n)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=Vd(t,Tm);var e=Vd(t.firestore,mb),n=bb(e),r=new $b(e);return gb(n,t.C_,{source:"server"}).then((function(n){return new Kb(e,r,t,n)}))}(this._):function(t){t=Vd(t,Tm);var e=Vd(t.firestore,mb),n=bb(e),r=new $b(e);return Nb(t.C_),gb(n,t.C_).then((function(n){return new Kb(e,r,t,n)}))}(this._)).then((function(t){return new v_(e.firestore,new Kb(e.firestore._,e.Hf,e._,t.ud))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=c_(e),i=h_(e,(function(e){return new v_(t.firestore,new Kb(t.firestore._,t.Hf,t._,e.ud))}));return Yb(this._,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(_h),d_=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Jc(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new f_(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),e}(_h),v_=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Jc(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new p_(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._.docs.map((function(e){return new f_(t.zf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map((function(t){return new d_(e.zf,t)}))},e.prototype.forEach=function(t,e){var n=this;this._.forEach((function(r){t.call(e,new f_(n.zf,r))}))},e.prototype.isEqual=function(t){return zb(this._,t._)},e}(_h),g_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._=n,r}return Jc(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._.parent;return t?new s_(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new s_(this.firestore,void 0===t?Nm(this._):Nm(this._,t))}catch(t){throw u_(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Vd(t.firestore,mb),r=Nm(t),i=jb(t.v_,e);return Xb(n,[Um(Fm(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,Of.exists(!1))]).then((function(){return r}))}(this._,t).then((function(t){return new s_(e.firestore,t)}))},e.prototype.isEqual=function(t){return km(this._,t._)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(p_);function y_(t){return t instanceof _h&&(t=t._),Vd(t,Im)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var m_=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(wm.bind.apply(wm,eh([void 0],e))))||this}return Jc(e,t),e.documentId=function(){return new e(Yh.kt().Ct())},e.prototype.isEqual=function(t){return t instanceof _h&&(t=t._),t instanceof wm&&this._.b_.isEqual(t.b_)},e}(_h),b_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jc(e,t),e.serverTimestamp=function(){var t=new qm("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new jm("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Bm("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wm("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Hm("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e}(_h),__=function(){function t(){this.Pd={},this.yd=new Wh,this.gd={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this.Pd={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.yd.promise.catch(t)},t.prototype.then=function(t,e){return this.yd.promise.then(t,e)},t.prototype.e_=function(t){this.n_(t),this.Pd.complete&&this.Pd.complete(),this.yd.resolve(t)},t.prototype.i_=function(t){this.gd.taskState="Error",this.Pd.next&&this.Pd.next(this.gd),this.Pd.error&&this.Pd.error(t),this.yd.reject(t)},t.prototype.n_=function(t){this.gd=t,this.Pd.next&&this.Pd.next(t)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var w_,E_={Firestore:r_,GeoPoint:Pm,Timestamp:Kh,Blob:Ih,Transaction:o_,WriteBatch:a_,DocumentReference:s_,DocumentSnapshot:l_,Query:p_,QueryDocumentSnapshot:f_,QuerySnapshot:v_,CollectionReference:g_,FieldPath:m_,FieldValue:b_,setLogLevel:function(t){var e;e=t,nh.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t,e){t.INTERNAL.registerComponent(new Ze("firestore",(function(t){return function(t,e){return new r_(t,new mb(t,e),new n_)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},E_)))})(w_=Sn),w_.registerVersion("@firebase/firestore","2.1.0"),
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){t.prototype.loadBundle=function(t){return function(t,e){var n=new __;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new _m(t,e)}(function(t,e){if(t instanceof Uint8Array)return mm(t,e);if(t instanceof ArrayBuffer)return mm(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,ed(e));t.ks.Ws((function(){return Zc(i,void 0,void 0,(function(){var e;return th(this,(function(n){switch(n.label){case 0:return e=pm,[4,pb(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}}))}))}))}(bb(t._),t.zr,e,n),n}(this,t)},t.prototype.namedQuery=function(t){return function(t,e){return function(t,e){var n=this;return t.ks.enqueue((function(){return Zc(n,void 0,void 0,(function(){var n;return th(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=hh(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.Wc.ho(t,e)}))},[4,lb(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(bb(t._),e).then((function(e){return e?new p_(t,new Tm(t._,null,e.query)):null}))}(this,t)}}(r_);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var I_=function(t,e){return(I_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function T_(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function S_(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var C_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},N_=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return function(t,e){function n(){this.constructor=t}I_(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error);var k_=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return T_(this,void 0,void 0,(function(){var t;return S_(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return T_(this,void 0,void 0,(function(){return S_(this,(function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]}))}))},t.prototype.getContext=function(){return T_(this,void 0,void 0,(function(){var t,e;return S_(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var P_=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return A_(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?A_(t,(function(t){return e.decode(t)})):t},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var O_=function(){function t(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new P_,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new k_(e,n),this.cancelAllRequests=new Promise((function(t){o.deleteService=function(){return t()}}));try{var a=new URL(r);this.customDomain=a.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=r}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return T_(this,void 0,void 0,(function(){var r,i;return S_(this,(function(o){switch(o.label){case 0:n["Content-Type"]="application/json",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},t.prototype.call=function(t,e,n){return T_(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,h,l,f,p;return S_(this,(function(d){switch(d.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(a=d.sent()).authToken&&(o.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=n.timeout||7e4,u=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new N_("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(s),c=u.timer,h=u.promise,[4,Promise.race([R_(c,this.postJSON(r,i,o)),h,R_(c,this.cancelAllRequests)])];case 2:if(!(l=d.sent()))throw new N_("cancelled","Firebase Functions instance was deleted.");if(f=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var a=e&&e.error;if(a){var s=a.status;if("string"==typeof s){if(!C_[s])return new N_("internal","internal");r=C_[s],i=s}var u=a.message;"string"==typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new N_(r,i,o)}(l.status,l.json,this.serializer))throw f;if(!l.json)throw new N_("internal","Response is not valid JSON object.");if(void 0===(p=l.json.data)&&(p=l.json.result),void 0===p)throw new N_("internal","Response is missing data field.");return[2,{data:this.serializer.decode(p)}]}}))}))},t}();function R_(t,e){return T_(this,void 0,void 0,(function(){var n;return S_(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(t,e){var n={Functions:O_};t.INTERNAL.registerComponent(new Ze("functions",(function(t,n){var r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("messaging");return new O_(r,i,o,n,e)}),"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}(Sn,fetch.bind(self)),Sn.registerVersion("@firebase/functions","0.6.1");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var D_=function(){return(D_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function x_(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function L_(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function M_(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function F_(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}var U_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function j_(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}var V_,q_=j_((function(t,e){!function(t){function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,a){n(i=t[e].apply(t,r)).then(o,a)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new h(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function a(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function s(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function h(t,e){this._cursor=t,this._request=e}function l(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function d(t){this._db=t}function v(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new p(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new d(t)}))}function g(t){return r(indexedDB,"deleteDatabase",[t])}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(h,"_cursor",["direction","key","primaryKey","value"]),a(h,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(h.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new h(t,e._request)}))}))})})),l.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},l.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(l,"_store",["name","keyPath","indexNames","autoIncrement"]),a(l,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(l,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(l,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new l(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new l(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[l,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,l].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=v,t.deleteDb=g,Object.defineProperty(t,"__esModule",{value:!0})}(e)})),B_=((V_={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',V_["not-registered"]="Firebase Installation is not registered.",V_["installation-not-found"]="Firebase Installation not found.",V_["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',V_["app-offline"]="Could not process request. Application offline.",V_["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",V_),W_=new ke("installations","Installations",B_);function H_(t){return t instanceof Ne&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function G_(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function z_(t,e){return x_(this,void 0,void 0,(function(){var n,r;return L_(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,W_.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function $_(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Q_(t,e){var n=e.refreshToken,r=$_(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)),r}function Y_(t){return x_(this,void 0,void 0,(function(){var e;return L_(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function X_(t,e){var n=e.fid;return x_(this,void 0,void 0,(function(){var e,r,i,o,a,s;return L_(this,(function(u){switch(u.label){case 0:return e=K_(t),r=$_(t),i={fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:"w:0.4.19"},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,Y_((function(){return fetch(e,o)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return s=u.sent(),[2,{fid:s.fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:G_(s.authToken)}];case 3:return[4,z_("Create Installation",a)];case 4:throw u.sent()}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t){return btoa(String.fromCharCode.apply(String,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(F_(arguments[e]));return t}(t))).replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tw=/^[cdef][\w-]{21}$/;function ew(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return Z_(t).substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);return tw.test(e)?e:""}catch(t){return""}}function nw(t){return t.appName+"!"+t.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rw=new Map;function iw(t,e){var n=nw(t);ow(n,e),function(t,e){var n=sw();n&&n.postMessage({key:t,fid:e});uw()}(n,e)}function ow(t,e){var n,r,i=rw.get(t);if(i)try{for(var o=M_(i),a=o.next();!a.done;a=o.next()){(0,a.value)(e)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var aw=null;function sw(){return!aw&&"BroadcastChannel"in self&&((aw=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){ow(t.data.key,t.data.fid)}),aw}function uw(){0===rw.size&&aw&&(aw.close(),aw=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cw="firebase-installations-store",hw=null;function lw(){return hw||(hw=q_.openDb("firebase-installations-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(cw)}}))),hw}function fw(t,e){return x_(this,void 0,void 0,(function(){var n,r,i,o,a;return L_(this,(function(s){switch(s.label){case 0:return n=nw(t),[4,lw()];case 1:return r=s.sent(),i=r.transaction(cw,"readwrite"),[4,(o=i.objectStore(cw)).get(n)];case 2:return a=s.sent(),[4,o.put(e,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===e.fid||iw(t,e.fid),[2,e]}}))}))}function pw(t){return x_(this,void 0,void 0,(function(){var e,n,r;return L_(this,(function(i){switch(i.label){case 0:return e=nw(t),[4,lw()];case 1:return n=i.sent(),[4,(r=n.transaction(cw,"readwrite")).objectStore(cw).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function dw(t,e){return x_(this,void 0,void 0,(function(){var n,r,i,o,a,s;return L_(this,(function(u){switch(u.label){case 0:return n=nw(t),[4,lw()];case 1:return r=u.sent(),i=r.transaction(cw,"readwrite"),[4,(o=i.objectStore(cw)).get(n)];case 2:return a=u.sent(),void 0!==(s=e(a))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!s||a&&a.fid===s.fid||iw(t,s.fid),[2,s]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(t){return x_(this,void 0,void 0,(function(){var e,n,r;return L_(this,(function(i){switch(i.label){case 0:return[4,dw(t,(function(n){var r=function(t){return mw(t||{fid:ew(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(W_.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return x_(this,void 0,void 0,(function(){var n,r;return L_(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,X_(t,e)];case 1:return n=i.sent(),[2,fw(t,n)];case 2:return H_(r=i.sent())&&409===r.customData.serverCode?[4,pw(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,fw(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:gw(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function gw(t){return x_(this,void 0,void 0,(function(){var e,n,r,i;return L_(this,(function(o){switch(o.label){case 0:return[4,yw(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,J_(100)];case 3:return o.sent(),[4,yw(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,vw(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}}))}))}function yw(t){return dw(t,(function(t){if(!t)throw W_.create("installation-not-found");return mw(t)}))}function mw(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function bw(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return x_(this,void 0,void 0,(function(){var t,i,o,a,s,u,c;return L_(this,(function(h){switch(h.label){case 0:return t=function(t,e){var n=e.fid;return K_(t)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,e),i=Q_(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:"w:0.4.19"}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,Y_((function(){return fetch(t,s)}))];case 1:return(u=h.sent()).ok?[4,u.json()]:[3,3];case 2:return c=h.sent(),[2,G_(c)];case 3:return[4,z_("Generate Auth Token",u)];case 4:throw h.sent()}}))}))}function _w(t,e){return void 0===e&&(e=!1),x_(this,void 0,void 0,(function(){var n,r,i;return L_(this,(function(o){switch(o.label){case 0:return[4,dw(t.appConfig,(function(r){if(!Ew(r))throw W_.create("not-registered");var i=r.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(t)}(i))return r;if(1===i.requestStatus)return n=function(t,e){return x_(this,void 0,void 0,(function(){var n,r;return L_(this,(function(i){switch(i.label){case 0:return[4,ww(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,J_(100)];case 3:return i.sent(),[4,ww(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,_w(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw W_.create("app-offline");var o=function(t){var e={requestStatus:1,requestTime:Date.now()};return D_(D_({},t),{authToken:e})}(r);return n=function(t,e){return x_(this,void 0,void 0,(function(){var n,r,i;return L_(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,bw(t,e)];case 1:return n=o.sent(),i=D_(D_({},e),{authToken:n}),[4,fw(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!H_(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,pw(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=D_(D_({},e),{authToken:{requestStatus:0}}),[4,fw(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function ww(t){return dw(t,(function(t){if(!Ew(t))throw W_.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+1e4<Date.now()?D_(D_({},t),{authToken:{requestStatus:0}}):t}))}function Ew(t){return void 0!==t&&2===t.registrationStatus}function Iw(t){return x_(this,void 0,void 0,(function(){var e;return L_(this,(function(n){switch(n.label){case 0:return[4,vw(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(t,e){return x_(this,void 0,void 0,(function(){var n,r,i,o;return L_(this,(function(a){switch(a.label){case 0:return n=function(t,e){var n=e.fid;return K_(t)+"/"+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e),r=Q_(t,e),i={method:"DELETE",headers:r},[4,Y_((function(){return fetch(n,i)}))];case 1:return(o=a.sent()).ok?[3,3]:[4,z_("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Sw(t,e){var n=t.appConfig;return function(t,e){sw();var n=nw(t),r=rw.get(n);r||(r=new Set,rw.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=nw(t),r=rw.get(n);r&&(r.delete(e),0===r.size&&rw.delete(n),uw())}(n,e)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(t){return W_.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t.INTERNAL.registerComponent(new Ze("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw Cw("App Configuration");if(!t.name)throw Cw("App Name");try{for(var r=M_(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw Cw(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */return function(t){return x_(this,void 0,void 0,(function(){var e,n,r;return L_(this,(function(i){switch(i.label){case 0:return[4,vw(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):_w(t).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),x_(this,void 0,void 0,(function(){return L_(this,(function(n){switch(n.label){case 0:return[4,Iw(t.appConfig)];case 1:return n.sent(),[4,_w(t,e)];case 2:return[2,n.sent().token]}}))}))}(n,t)},delete:function(){return function(t){return x_(this,void 0,void 0,(function(){var e,n;return L_(this,(function(r){switch(r.label){case 0:return[4,dw(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw W_.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw W_.create("app-offline");case 3:return[4,Tw(e,n)];case 4:return r.sent(),[4,pw(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return Sw(n,t)}}}),"PUBLIC")),t.registerVersion("@firebase/installations","0.4.19")}(Sn);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Nw,kw=function(){return(kw=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Aw(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function Pw(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Ow(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rw(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}var Dw,xw=((Nw={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Nw["only-available-in-window"]="This method is available in a Window context.",Nw["only-available-in-sw"]="This method is available in a service worker context.",Nw["permission-default"]="The notification permission was not granted and dismissed instead.",Nw["permission-blocked"]="The notification permission was not granted and blocked instead.",Nw["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Nw["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Nw["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",Nw["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Nw["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",Nw["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",Nw["token-update-no-token"]="FCM returned no token when updating the user to push.",Nw["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Nw["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",Nw["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",Nw["invalid-vapid-key"]="The public VAPID key must be a string.",Nw["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Nw),Lw=new ke("messaging","Messaging",xw),Mw="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Fw(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Rw(arguments[e]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Uw(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"}(Dw||(Dw={}));function jw(t){return Aw(this,void 0,void 0,(function(){var e,n,r=this;return Pw(this,(function(i){switch(i.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=i.sent(),!e.map((function(t){return t.name})).includes("fcm_token_details_db"))return[2,null];i.label=2;case 2:return n=null,[4,q_.openDb("fcm_token_details_db",5,(function(e){return Aw(r,void 0,void 0,(function(){var r,i,o,a;return Pw(this,(function(s){switch(s.label){case 0:return e.oldVersion<2?[2]:e.objectStoreNames.contains("fcm_token_object_Store")?[4,(r=e.transaction.objectStore("fcm_token_object_Store")).index("fcmSenderId").get(t)]:[2];case 1:return i=s.sent(),[4,r.clear()];case 2:if(s.sent(),!i)return[2];if(2===e.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];n={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:Fw(o.vapidKey)}}}else(3===e.oldVersion||4===e.oldVersion)&&(n={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:Fw(o.auth),p256dh:Fw(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:Fw(o.vapidKey)}});return[2]}}))}))}))];case 3:return i.sent().close(),[4,q_.deleteDb("fcm_token_details_db")];case 4:return i.sent(),[4,q_.deleteDb("fcm_vapid_details_db")];case 5:return i.sent(),[4,q_.deleteDb("undefined")];case 6:return i.sent(),[2,Vw(n)?n:null]}}))}))}function Vw(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qw="firebase-messaging-store",Bw=null;function Ww(){return Bw||(Bw=q_.openDb("firebase-messaging-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(qw)}}))),Bw}function Hw(t){return Aw(this,void 0,void 0,(function(){var e,n,r;return Pw(this,(function(i){switch(i.label){case 0:return e=zw(t),[4,Ww()];case 1:return[4,i.sent().transaction(qw).objectStore(qw).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,jw(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,Kw(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function Kw(t,e){return Aw(this,void 0,void 0,(function(){var n,r,i;return Pw(this,(function(o){switch(o.label){case 0:return n=zw(t),[4,Ww()];case 1:return r=o.sent(),[4,(i=r.transaction(qw,"readwrite")).objectStore(qw).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function Gw(t){return Aw(this,void 0,void 0,(function(){var e,n,r;return Pw(this,(function(i){switch(i.label){case 0:return e=zw(t),[4,Ww()];case 1:return n=i.sent(),[4,(r=n.transaction(qw,"readwrite")).objectStore(qw).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function zw(t){return t.appConfig.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(t,e){return Aw(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Pw(this,(function(u){switch(u.label){case 0:return[4,Jw(t)];case 1:n=u.sent(),r=Zw(e),i={method:"POST",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(Xw(t.appConfig),i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),Lw.create("token-subscribe-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,Lw.create("token-subscribe-failed",{errorInfo:s});if(!o.token)throw Lw.create("token-subscribe-no-token");return[2,o.token]}}))}))}function Qw(t,e){return Aw(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Pw(this,(function(u){switch(u.label){case 0:return[4,Jw(t)];case 1:n=u.sent(),r=Zw(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(Xw(t.appConfig)+"/"+e.token,i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),Lw.create("token-update-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,Lw.create("token-update-failed",{errorInfo:s});if(!o.token)throw Lw.create("token-update-no-token");return[2,o.token]}}))}))}function Yw(t,e){return Aw(this,void 0,void 0,(function(){var n,r,i,o,a;return Pw(this,(function(s){switch(s.label){case 0:return[4,Jw(t)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(Xw(t.appConfig)+"/"+e,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw o=i.error.message,Lw.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw a=s.sent(),Lw.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))}function Xw(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function Jw(t){var e=t.appConfig,n=t.installations;return Aw(this,void 0,void 0,(function(){var t;return Pw(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function Zw(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==Mw&&(o.web.applicationPubKey=i),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(t,e,n){return Aw(this,void 0,void 0,(function(){var r,i,o,a;return Pw(this,(function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw Lw.create("permission-blocked");return[4,iE(e,n)];case 1:return r=s.sent(),[4,Hw(t)];case 2:return i=s.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:Fw(r.getKey("auth")),p256dh:Fw(r.getKey("p256dh"))},i?[3,3]:[2,rE(t,o)];case 3:if(u=i.subscriptionOptions,h=(c=o).vapidKey===u.vapidKey,l=c.endpoint===u.endpoint,f=c.auth===u.auth,p=c.p256dh===u.p256dh,h&&l&&f&&p)return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,Yw(t,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,rE(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,nE({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,h,l,f,p;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))}function eE(t,e){return Aw(this,void 0,void 0,(function(){var n,r;return Pw(this,(function(i){switch(i.label){case 0:return[4,Hw(t)];case 1:return(n=i.sent())?[4,Yw(t,n.token)]:[3,4];case 2:return i.sent(),[4,Gw(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function nE(t,e,n){return Aw(this,void 0,void 0,(function(){var r,i,o;return Pw(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,Qw(e,t)];case 1:return r=a.sent(),i=kw(kw({},t),{token:r,createTime:Date.now()}),[4,Kw(e,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,eE(e,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}function rE(t,e){return Aw(this,void 0,void 0,(function(){var n,r;return Pw(this,(function(i){switch(i.label){case 0:return[4,$w(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,Kw(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function iE(t,e){return Aw(this,void 0,void 0,(function(){var n;return Pw(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Uw(e)})]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function oE(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sE=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw Lw.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return Aw(this,void 0,void 0,(function(){var n;return Pw(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,Hw(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:Mw,r.label=2;case 2:return[2,tE(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return eE(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw Lw.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Lw.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Lw.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw Lw.create("only-available-in-window")},t.prototype.onMessage=function(){throw Lw.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw Lw.create("only-available-in-window")},t.prototype.onPush=function(t){return Aw(this,void 0,void 0,(function(){var e,n,r,i;return Pw(this,(function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(t))?[4,lE()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,hE(n,e)]:(r=!1,e.notification?[4,fE(uE(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,aE(1e3)]);case 4:return o.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return Aw(this,void 0,void 0,(function(){var r;return Pw(this,(function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,eE(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,Hw(this.firebaseDependencies)];case 3:return r=i.sent(),[4,eE(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,tE(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:Mw)];case 5:return i.sent(),[2]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return Aw(this,void 0,void 0,(function(){var r,i,o,a,s;return Pw(this,(function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;if(i)return i;return oE(t.data)?self.location.origin:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r))?(o=new URL(i,self.location.href),a=new URL(self.location.origin),o.host!==a.host?[2]:[4,cE(o)]):[2]):[2];case 1:return(s=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return s=u.sent(),[4,aE(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=u.sent(),u.label=6;case 6:return s?(r.messageType=Dw.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]):[2]}}))}))},t}();function uE(t){var e,n=kw({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function cE(t){return Aw(this,void 0,void 0,(function(){var e,n,r,i,o,a,s;return Pw(this,(function(u){switch(u.label){case 0:return[4,lE()];case 1:e=u.sent();try{for(n=Ow(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(t){a={error:t}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}function hE(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=Dw.PUSH_RECEIVED;try{for(var i=Ow(t),o=i.next();!o.done;o=i.next()){o.value.postMessage(e)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function lE(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function fE(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var pE=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return Aw(this,void 0,void 0,(function(){var e,n;return Pw(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===Dw.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),oE(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return Aw(this,void 0,void 0,(function(){return Pw(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw Lw.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,tE(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return Aw(this,void 0,void 0,(function(){return Pw(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=Mw),[2]}))}))},t.prototype.updateSwReg=function(t){return Aw(this,void 0,void 0,(function(){return Pw(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw Lw.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return Aw(this,void 0,void 0,(function(){var t,e;return Pw(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),Lw.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return Aw(this,void 0,void 0,(function(){return Pw(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,eE(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return Aw(this,void 0,void 0,(function(){var t;return Pw(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?Lw.create("permission-blocked"):Lw.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Lw.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Lw.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw Lw.create("invalid-sw-registration");if(this.swRegistration)throw Lw.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw Lw.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw Lw.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return Aw(this,void 0,void 0,(function(){var n;return Pw(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case Dw.NOTIFICATION_CLICKED:return"notification_open";case Dw.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function dE(t){return Lw.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vE={isSupported:gE};function gE(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Sn.INTERNAL.registerComponent(new Ze("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw dE("App Configuration Object");if(!t.name)throw dE("App Name");var r=t.options;try{for(var i=Ow(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw dE(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!gE())throw Lw.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new sE(n):new pE(n)}),"PUBLIC").setServiceProps(vE));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var yE=function(t,e){return(yE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var mE=function(){return(mE=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function bE(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function _E(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function wE(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var EE=function(t){function e(n,r){var i=t.call(this,BE(n),"Firebase Storage: "+r+" ("+BE(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return function(t,e){function n(){this.constructor=t}yE(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.codeEquals=function(t){return BE(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(Ne),IE="unknown",TE="object-not-found",SE="quota-exceeded",CE="unauthenticated",NE="unauthorized",kE="retry-limit-exceeded",AE="canceled",PE="invalid-url",OE="invalid-default-bucket",RE="no-default-bucket",DE="cannot-slice-blob",xE="server-file-wrong-size",LE="no-download-url",ME="invalid-argument",FE="app-deleted",UE="invalid-root-operation",jE="invalid-format",VE="internal-error",qE="unsupported-environment";function BE(t){return"storage/"+t}function WE(){return new EE(IE,"An unknown error occurred, please check the error payload for server response.")}function HE(){return new EE(AE,"User canceled the upload/download.")}function KE(){return new EE(DE,"Cannot slice blob for upload. Please retry the upload.")}function GE(t){return new EE(ME,t)}function zE(){return new EE(FE,"The Firebase app was deleted.")}function $E(t){return new EE(UE,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function QE(t,e){return new EE(jE,"String does not match format '"+t+"': "+e)}function YE(t){throw new EE(VE,"Internal error: "+t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var XE={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},JE=function(t,e){this.data=t,this.contentType=e||null};function ZE(t,e){switch(t){case XE.RAW:return new JE(tI(e));case XE.BASE64:case XE.BASE64URL:return new JE(eI(t,e));case XE.DATA_URL:return new JE((n=new nI(e)).base64?eI(XE.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw QE(XE.DATA_URL,"Malformed data URL.")}return tI(e)}(n.rest),function(t){return new nI(t).contentType}(e))}var n;throw WE()}function tI(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function eI(t,e){switch(t){case XE.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw QE(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case XE.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw QE(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(e){throw QE(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var nI=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw QE(XE.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */};var rI,iI={STATE_CHANGED:"state_changed"},oI="running",aI="pausing",sI="paused",uI="success",cI="canceling",hI="canceled",lI="error",fI={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function pI(t){switch(t){case oI:case aI:case cI:return fI.RUNNING;case sI:return fI.PAUSED;case uI:return fI.SUCCESS;case hI:return fI.CANCELED;case lI:default:return fI.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(rI||(rI={}));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var dI=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=rI.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=rI.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=rI.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw YE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw YE("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw YE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw YE("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),vI=function(){function t(){}return t.prototype.createXhrIo=function(){return new dI},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(t){return"string"==typeof t||t instanceof String}function yI(t){return mI()&&t instanceof Blob}function mI(){return"undefined"!=typeof Blob}function bI(t,e,n,r){if(r<e)throw new EE(ME,"Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw new EE(ME,"Invalid value for '"+t+"'. Expected "+n+" or less.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function wI(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=_I();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(mI())return new Blob(t);throw new EE(qE,"This browser doesn't seem to support creating Blobs")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var EI=function(){function t(t,e){var n=0,r="";yI(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(yI(this.data_)){var r=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===r?null:new t(r)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(mI()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(wI.apply(null,r))}var i=e.map((function(t){return gI(t)?ZE(XE.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}(),II=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(n){return new t(e,"")}if(""===n.path)return n;throw new EE(OE,"Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)";var i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var a="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<s.length;u++){var c=s[u],h=c.regex.exec(e);if(h){var l=h[c.indices.bucket],f=h[c.indices.path];f||(f=""),n=new t(l,f),c.postModify(n);break}}if(null==n)throw function(t){return new EE(PE,"Invalid URL '"+t+"'.")}(e);return n},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function TI(t){var e;try{e=JSON.parse(t)}catch(t){return null}return function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(t){return"https://firebasestorage.googleapis.com/v0"+t}function NI(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t,e){return e}var AI=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||kI},PI=null;function OI(){if(PI)return PI;var t=[];t.push(new AI("bucket")),t.push(new AI("generation")),t.push(new AI("metageneration")),t.push(new AI("name","fullPath",!0));var e=new AI("name");e.xform=function(t,e){return function(t){return!gI(t)||t.length<2?t:SI(t)}(e)},t.push(e);var n=new AI("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new AI("timeCreated")),t.push(new AI("updated")),t.push(new AI("md5Hash",null,!0)),t.push(new AI("cacheControl",null,!0)),t.push(new AI("contentDisposition",null,!0)),t.push(new AI("contentEncoding",null,!0)),t.push(new AI("contentLanguage",null,!0)),t.push(new AI("contentType",null,!0)),t.push(new AI("metadata","customMetadata",!0)),PI=t}function RI(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new II(n,r);return e.makeStorageReference(i)}})}(r,t),r}function DI(t,e,n){var r=TI(e);return null===r?null:RI(t,r,n)}function xI(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t,e,n){var r=TI(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t.makeStorageReference(new II(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var h=c[u];s=t.makeStorageReference(new II(e,h.name)),r.items.push(s)}return r}(t,e,r)}var MI=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(t){if(!t)throw WE()}function UI(t,e){return function(n,r){var i=DI(t,r,e);return FI(null!==i),i}}function jI(t,e){return function(n,r){var i=DI(t,r,e);return FI(null!==i),function(t,e){var n=TI(e);if(null===n)return null;if(!gI(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.bucket,r=t.fullPath;return CI("/b/"+i(n)+"/o/"+i(r))+NI({alt:"media",token:e})}))[0]}(i,r)}}function VI(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=new EE(CE,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new EE(SE,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new EE(NE,"User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function qI(t){var e=VI(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new EE(TE,"Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function BI(t,e,n){var r=CI(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new MI(r,"GET",UI(t,n),i);return o.errorHandler=qI(e),o}function WI(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=CI(e.bucketOnlyServerUrl()),s=t.maxOperationRetryTime,u=new MI(a,"GET",function(t,e){return function(n,r){var i=LI(t,e,r);return FI(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=VI(e),u}function HI(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var KI=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function GI(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){FI(!1)}return FI(!!n&&-1!==(e||["active"]).indexOf(n)),n}function zI(t,e,n,r,i,o,a,s){var u=new KI(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new EE(xE,"Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;i>0&&(h=Math.min(h,i));var l=u.current,f=l+h,p={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(l,f);if(null===d)throw KE();var v=e.maxUploadRetryTime,g=new MI(n,"POST",(function(t,n){var i,a=GI(t,["active","final"]),s=u.current+h,c=r.size();return i="final"===a?UI(e,o)(t,n):null,new KI(s,c,"final"===a,i)}),v);return g.headers=p,g.body=d.uploadData(),g.progressCallback=s||null,g.errorHandler=VI(t),g}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $I=function(t,e,n){if(function(t){return"function"==typeof t}(t)||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}},QI=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function YI(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var XI=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=OI(),this._resumable=this._shouldDoResumable(this._blob),this._state=oI,this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t.codeEquals(AE)?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition(lI))},this._metadataErrorHandler=function(t){r._request=void 0,t.codeEquals(AE)?r.completeTransitions_():(r._error=t,r._transition(lI))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){this._state===oI&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage.getAuthToken().then((function(n){switch(e._state){case oI:t(n);break;case cI:e._transition(hI);break;case aI:e._transition(sI)}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=HI(e,r,i),s={name:a.fullPath},u=CI(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},h=xI(a,n),l=t.maxUploadRetryTime,f=new MI(u,"POST",(function(t){var e;GI(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){FI(!1)}return FI(gI(e)),e}),l);return f.urlParams=s,f.headers=c,f.body=h,f.errorHandler=VI(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new MI(n,"POST",(function(t){var e=GI(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){FI(!1)}n||FI(!1);var i=Number(n);return FI(!isNaN(i)),new KI(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=VI(e),o}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage.makeRequest(r,n);t._request=i,i.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new KI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=zI(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(e){return t._error=e,void t._transition(lI)}var a=t._ref.storage.makeRequest(o,i);t._request=a,a.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition(uI)):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e){var n=BI(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition(uI)}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=HI(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+xI(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+s+"--",l=EI.getBlob(c,r,h);if(null===l)throw KE();var f={name:u.fullPath},p=CI(o),d=t.maxUploadRetryTime,v=new MI(p,"POST",UI(t,n),d);return v.urlParams=f,v.headers=a,v.body=l.uploadData(),v.errorHandler=VI(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition(uI)}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case cI:case aI:this._state=t,void 0!==this._request&&this._request.cancel();break;case oI:var e=this._state===sI;this._state=t,e&&(this._notifyObservers(),this._start());break;case sI:this._state=t,this._notifyObservers();break;case hI:this._error=HE(),this._state=t,this._notifyObservers();break;case lI:case uI:this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case aI:this._transition(sI);break;case cI:this._transition(hI);break;case oI:this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=pI(this._state);return new QI(this._transferred,this._blob.size(),t,this._metadata,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new $I(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(pI(this._state)){case fI.SUCCESS:YI(this._resolve.bind(null,this.snapshot))();break;case fI.CANCELED:case fI.ERROR:YI(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(pI(this._state)){case fI.RUNNING:case fI.PAUSED:t.next&&YI(t.next.bind(t,this.snapshot))();break;case fI.SUCCESS:t.complete&&YI(t.complete.bind(t))();break;case fI.CANCELED:case fI.ERROR:t.error&&YI(t.error.bind(t,this._error))();break;default:t.error&&YI(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t=this._state===sI||this._state===aI;return t&&this._transition(oI),t},t.prototype.pause=function(){var t=this._state===oI;return t&&this._transition(aI),t},t.prototype.cancel=function(){var t=this._state===oI||this._state===aI;return t&&this._transition(cI),t},t}(),JI=function(){function t(t,e){this._service=t,this._location=e instanceof II?e:II.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype.newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new II(this._location.bucket,"");return this.newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return SI(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new II(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw $E(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t){var e={prefixes:[],items:[]};return tT(t,e).then((function(){return e}))}function tT(t,e,n){return bE(this,void 0,void 0,(function(){var r,i,o;return _E(this,(function(a){switch(a.label){case 0:return[4,eT(t,{pageToken:n})];case 1:return r=a.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,tT(t,e,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function eT(t,e){return bE(this,void 0,void 0,(function(){var n,r,i;return _E(this,(function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&bI("options.maxResults",1,1e3,e.maxResults),[4,t.storage.getAuthToken()];case 1:return n=o.sent(),r=e||{},i=WI(t.storage,t._location,"/",r.pageToken,r.maxResults),[2,t.storage.makeRequest(i,n).getPromise()]}}))}))}function nT(t,e){return bE(this,void 0,void 0,(function(){var n,r;return _E(this,(function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage.getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=CI(e.fullServerUrl()),o=xI(n,r),a=t.maxOperationRetryTime,s=new MI(i,"PATCH",UI(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=qI(e),s}(t.storage,t._location,e,OI()),[2,t.storage.makeRequest(r,n).getPromise()]}}))}))}function rT(t){return bE(this,void 0,void 0,(function(){var e,n;return _E(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=CI(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new MI(r,"GET",jI(t,n),i);return o.errorHandler=qI(e),o}(t.storage,t._location,OI()),[2,t.storage.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new EE(LE,"The given file does not have any download URLs.");return t}))]}}))}))}function iT(t){return bE(this,void 0,void 0,(function(){var e,n;return _E(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=CI(e.fullServerUrl()),r=t.maxOperationRetryTime,i=new MI(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=qI(e),i}(t.storage,t._location),[2,t.storage.makeRequest(n,e).getPromise()]}}))}))}function oT(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new II(t._location.bucket,n);return new JI(t.storage,r)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aT=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),sT=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate),this._snapshot=new aT(this._delegate.snapshot,this,this._ref)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return this._snapshot},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new aT(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new aT(t,i,i._ref))}:{next:e.next?function(t){return e.next(new aT(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),uT=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new cT(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new cT(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),cT=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(oT(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new sT(function(t,e,n){return void 0===n&&(n=null),t._throwIfRoot("uploadBytesResumable"),new XI(t,new EI(e),n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){return void 0===e&&(e=XE.RAW),this._throwIfRoot("putString"),new sT(function(t,e,n,r){void 0===n&&(n=XE.RAW),t._throwIfRoot("putString");var i=ZE(n,e),o=mE({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new XI(t,new EI(i.data,!0),o)}(this._delegate,t,e,n),this)},t.prototype.listAll=function(){var t=this;return ZI(this._delegate).then((function(e){return new uT(e,t.storage)}))},t.prototype.list=function(t){var e=this;return eT(this._delegate,t).then((function(t){return new uT(t,e.storage)}))},t.prototype.getMetadata=function(){return function(t){return bE(this,void 0,void 0,(function(){var e,n;return _E(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=BI(t.storage,t._location,OI()),[2,t.storage.makeRequest(n,e).getPromise()]}}))}))}(this._delegate)},t.prototype.updateMetadata=function(t){return nT(this._delegate,t)},t.prototype.getDownloadURL=function(){return rT(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),iT(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw $E(t)},t}(),hT=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var lT=function(){function t(t,e,n,r,i,o,a,s,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise((function(t,e){l.resolve_=t,l.reject_=e,l.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());!
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){return void 0!==t}(s)?i():i(s)}catch(t){o(t)}else null!==a?((r=WE()).serverResponse=a.getResponseText(),t.errorCallback_?o(t.errorCallback_(a,r)):o(r)):n.canceled?o(r=t.appDelete_?zE():HE()):o(r=new EE(kE,"Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new fT(!1,null,!0)):this.backoffId_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function h(e){i=setTimeout((function(){i=null,t(l,s())}),e)}function l(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,wE([null,t],e));else{var i;s()||o?c.call.apply(c,wE([null,t],e)):(r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),h(i))}}var f=!1;function p(t){f||(f=!0,u||(null!==i?(t||(a=2),clearTimeout(i),h(0)):t||(a=1)))}return h(0),setTimeout((function(){o=!0,p(!0)}),n),p}((function(e,n){if(n)e(!1,new fT(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===rI.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new fT(a,n))}else{var s=n.getErrorCode()===rI.ABORT;e(!1,new fT(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),fT=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function pT(t,e,n,r){var i=NI(t.urlParams),o=t.url+i,a=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(a,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(a,n),function(t){var e=void 0!==Sn?Sn.SDK_VERSION:"AppManager";t["X-Firebase-Storage-Version"]="webjs/"+e}(a),new lT(o,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(t){return/^[A-Za-z]+:\/\//.test(t)}function vT(t,e){if(t instanceof yT){var n=t;if(null==n._bucket)throw new EE(RE,"No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new JI(n,n._bucket);return null!=e?vT(r,e):r}if(void 0!==e){if(e.includes(".."))throw GE('`path` param cannot contain ".."');return oT(t,e)}return t}function gT(t,e){if(e&&dT(e)){if(t instanceof yT)return new JI(t,e);throw GE("To use ref(service, url), the first argument must be a Storage instance.")}return vT(t,e)}var yT=function(){function t(t,e,n,r){var i,o;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?II.makeFromBucketSpec(r):(i=this.app.options,null==(o=null==i?void 0:i.storageBucket)?null:II.makeFromBucketSpec(o))}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){bI("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){bI("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype.getAuthToken=function(){return bE(this,void 0,void 0,(function(){var t,e;return _E(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype.makeStorageReference=function(t){return new JI(this,t)},t.prototype.makeRequest=function(t,e){var n=this;if(this._deleted)return new hT(zE());var r=pT(t,this._appId,e,this._pool);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},t}(),mT=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(dT(t))throw GE("ref() expected a child path but got a URL, use refFromURL instead.");return new cT(gT(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!dT(t))throw GE("refFromURL() expected a full URL but got a child path, use ref() instead.");try{II.makeFromUrl(t)}catch(t){throw GE("refFromUrl() expected a valid full URL but got an invalid one.")}return new cT(gT(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new mT(n,new yT(n,r,new vI,e))}!function(t){var e={TaskState:fI,TaskEvent:iI,StringFormat:XE,Storage:yT,Reference:cT};t.INTERNAL.registerComponent(new Ze("storage",bT,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.4.2")}(Sn);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var _T=function(){return(_T=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function wT(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var ET,IT,TT,ST=((ET={})["trace started"]="Trace {$traceName} was started before.",ET["trace stopped"]="Trace {$traceName} is not running.",ET["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",ET["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",ET["no window"]="Window is not available.",ET["no app id"]="App id is not available.",ET["no project id"]="Project id is not available.",ET["no api key"]="Api key is not available.",ET["invalid cc log"]="Attempted to queue invalid cc event",ET["FB not default"]="Performance can only start when Firebase app instance is the default one.",ET["RC response not ok"]="RC response is not ok",ET["invalid attribute name"]="Attribute name {$attributeName} is invalid.",ET["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",ET["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",ET["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",ET),CT=new ke("performance","Performance",ST),NT=new fn("Performance");NT.logLevel=on.INFO;var kT,AT=function(){function t(t){if(this.window=t,!t)throw CT.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Te()||(NT.info("IndexedDB is not supported by current browswer"),!1):(NT.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}})).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===IT&&(IT=new t(TT)),IT},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function PT(t,e){var n=t.length-e.length;if(n<0||n>1)throw CT.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OT,RT,DT=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=PT("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=PT("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw CT.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw CT.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw CT.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===kT&&(kT=new t),kT},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(){return OT}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"}(RT||(RT={}));var LT=["firebase_","google_","ga_"],MT=new RegExp("^[a-zA-Z]\\w*$");function FT(){var t=AT.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function UT(){switch(AT.getInstance().document.visibilityState){case"visible":return RT.VISIBLE;case"hidden":return RT.HIDDEN;default:return RT.UNKNOWN}}function jT(){var t=AT.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var VT=!0;function qT(t){var e=function(){var t=AT.getInstance().localStorage;if(!t)return;var e=t.getItem("@firebase/performance/configexpire");if(!(e&&(n=e,Number(n)>Date.now())))return;var n;var r=t.getItem("@firebase/performance/config");if(!r)return;try{return JSON.parse(r)}catch(t){return}}();return e?(BT(e),Promise.resolve()):function(t){return(e=DT.getInstance().installationsService.getToken(),e.then((function(t){})),e).then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+DT.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+DT.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:DT.getInstance().getAppId(),app_version:"0.4.5",sdk_version:"0.0.1"})});return fetch(r).then((function(t){if(t.ok)return t.json();throw CT.create("RC response not ok")}))})).catch((function(){NT.info("Could not fetch config, will use default configs")}));var e;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(t).then(BT).then((function(t){return function(t){var e=AT.getInstance().localStorage;if(!t||!e)return;e.setItem("@firebase/performance/config",JSON.stringify(t)),e.setItem("@firebase/performance/configexpire",String(Date.now()+60*DT.getInstance().configTimeToLive*60*1e3))}(t)}),(function(){}))}function BT(t){if(!t)return t;var e=DT.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=VT,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=WT(e.tracesSamplingRate),e.logNetworkAfterSampling=WT(e.networkRequestsSamplingRate),t}function WT(t){return Math.random()<=t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var HT,KT=1;function GT(){return KT=2,HT=HT||function(){var t=AT.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}().then((function(){return(t=DT.getInstance().installationsService.getId()).then((function(t){OT=t})),t;var t})).then((function(t){return qT(t)})).then((function(){return zT()}),(function(){return zT()}))}function zT(){KT=3}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $T,QT=3,YT=[],XT=!1;function JT(t){setTimeout((function(){var t,e;if(0!==QT)return YT.length?(t=YT.splice(0,1e3),e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),void function(t,e){return function(t){var e=DT.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then((function(t){return t.ok||NT.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=1e4;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(YT=wT(e,YT),NT.info("Retry transport request later.")),QT=3,JT(r)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:DT.getInstance().logSource,log_event:e},t).catch((function(){YT=wT(t,YT),QT--,NT.info("Tries left: "+QT+"."),JT(1e4)}))):JT(1e4)}),t)}function ZT(t){if(!t.eventTime||!t.message)throw CT.create("invalid cc log");YT=wT(YT,[t])}function tS(t,e){$T||($T=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];ZT({message:t.apply(void 0,e),eventTime:Date.now()})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(rS)),$T(t,e)}function eS(t){var e=DT.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&AT.getInstance().requiredApisAvailable()&&(t.isAuto&&UT()!==RT.VISIBLE||(3===KT?nS(t):GT().then((function(){return nS(t)}),(function(){return nS(t)}))))}function nS(t){if(xT()){var e=DT.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return tS(t,1)}),0)}}function rS(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:iS(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:iS(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function iS(){return{google_app_id:DT.getInstance().getAppId(),app_instance_id:xT(),web_app_info:{sdk_version:"0.4.5",page_url:AT.getInstance().getUrl(),service_worker_status:FT(),visibility_state:UT(),effective_connection_type:jT()},application_process_state:0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oS=["_fp","_fcp","_fid"];
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var aS=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=AT.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw CT.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw CT.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),eS(this)},t.prototype.record=function(t,e,n){if(t<=0)throw CT.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw CT.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=_T({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}eS(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(!function(t,e){return!(0===t.length||t.length>100)&&(e&&e.startsWith("_wt_")&&oS.indexOf(t)>-1||!t.startsWith("_"))}(t,this.name))throw CT.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(n=e,(r=Math.floor(n))<n&&NT.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n=function(t){return!(0===t.length||t.length>40||LT.some((function(e){return t.startsWith(e)}))||!t.match(MT))}(t),r=function(t){return 0!==t.length&&t.length<=100}(e);if(n&&r)this.customAttributes[t]=e;else{if(!n)throw CT.create("invalid attribute name",{attributeName:t});if(!r)throw CT.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return _T({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=AT.getInstance().getUrl();if(i){var o=new t("_wt_"+i,!0),a=Math.floor(1e3*AT.getInstance().getTimeOrigin());o.setStartTime(a),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));if(n){var s=n.find((function(t){return"first-paint"===t.name}));s&&s.startTime&&o.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find((function(t){return"first-contentful-paint"===t.name}));u&&u.startTime&&o.putMetric("_fcp",Math.floor(1e3*u.startTime)),r&&o.putMetric("_fid",Math.floor(1e3*r))}eS(o)}},t.createUserTimingTrace=function(e){eS(new t(e,!1,e))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(t){var e=t;if(e&&void 0!==e.responseStart){var n=AT.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=DT.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return tS(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(){xT()&&(setTimeout((function(){return function(){var t=AT.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){aS.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),aS.createOobTrace(e,n,t))}))}else aS.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=AT.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){sS(r[n])}t.setupObserver("resource",sS)}()}),0),setTimeout((function(){return function(){for(var t=AT.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){cS(r[n])}t.setupObserver("measure",cS)}()}),0))}function cS(t){var e=t.name;"FB-PERF-TRACE-MEASURE"!==e.substring(0,"FB-PERF-TRACE-MEASURE".length)&&aS.createUserTimingTrace(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hS=function(){function t(t){this.app=t,AT.getInstance().requiredApisAvailable()&&Se().then((function(t){t&&(XT||(JT(5500),XT=!0),GT().then(uS,uS))})).catch((function(t){NT.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new aS(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return DT.getInstance().instrumentationEnabled},set:function(t){DT.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return DT.getInstance().dataCollectionEnabled},set:function(t){DT.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){var e=function(t,e){if("[DEFAULT]"!==t.name)throw CT.create("FB not default");if("undefined"==typeof window)throw CT.create("no window");return function(t){TT=t}(window),DT.getInstance().firebaseAppInstance=t,DT.getInstance().installationsService=e,new hS(t)};t.INTERNAL.registerComponent(new Ze("performance",(function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();return e(n,r)}),"PUBLIC")),t.registerVersion("@firebase/performance","0.4.5")}(Sn);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var lS=function(){return(lS=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function fS(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function pS(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dS,vS,gS="https://www.googletagmanager.com/gtag/js";!function(t){t.EVENT="event",t.SET="set",t.CONFIG="config"}(dS||(dS={})),function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"}(vS||(vS={}));
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var yS,mS=new fn("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(t,e,n,r,i,o){return fS(this,void 0,void 0,(function(){var a,s,u,c;return pS(this,(function(h){switch(h.label){case 0:a=r[i],h.label=1;case 1:return h.trys.push([1,7,,8]),a?[4,e[a]]:[3,3];case 2:return h.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return s=h.sent(),(u=s.find((function(t){return t.measurementId===i})))?[4,e[u.appId]]:[3,6];case 5:h.sent(),h.label=6;case 6:return[3,8];case 7:return c=h.sent(),mS.error(c),[3,8];case 8:return t(dS.CONFIG,i,o),[2]}}))}))}function _S(t,e,n,r,i){return fS(this,void 0,void 0,(function(){var o,a,s,u,c,h,l,f;return pS(this,(function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),o=[],i&&i.send_to?(a=i.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(s=p.sent(),u=function(t){var n=s.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,h=a;c<h.length&&(l=h[c],"break"!==u(l));c++);p.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return p.sent(),t(dS.EVENT,r,i||{}),[3,5];case 4:return f=p.sent(),mS.error(f),[3,5];case 5:return[2]}}))}))}function wS(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,a){return fS(this,void 0,void 0,(function(){var s;return pS(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==dS.EVENT?[3,2]:[4,_S(t,e,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==dS.CONFIG?[3,4]:[4,bS(t,e,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:t(dS.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),mS.error(s),[3,7];case 7:return[2]}}))}))}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}var ES=((yS={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",yS["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",yS["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",yS["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",yS["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",yS["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",yS["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",yS["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',yS["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',yS),IS=new ke("analytics","Analytics",ES),TS=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function SS(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function CS(t){var e;return fS(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return pS(this,(function(c){switch(c.label){case 0:return n=t.appId,r=t.apiKey,i={method:"GET",headers:SS(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(o,i)];case 1:if(200===(a=c.sent()).status||304===a.status)return[3,6];s="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,a.json()];case 3:return u=c.sent(),(null===(e=u.error)||void 0===e?void 0:e.message)&&(s=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw IS.create("config-fetch-failed",{httpStatus:a.status,responseMessage:s});case 6:return[2,a.json()]}}))}))}function NS(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=TS),fS(this,void 0,void 0,(function(){var e,a,s,u,c,h,l;return pS(this,(function(f){switch(f.label){case 0:e=t.appId,a=t.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,kS(n,i)];case 2:return f.sent(),[3,4];case 3:if(s=f.sent(),a)return mS.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:e,measurementId:a}];throw s;case 4:return f.trys.push([4,6,,7]),[4,CS(t)];case 5:return u=f.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof Ne&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c=f.sent())){if(r.deleteThrottleMetadata(e),a)return mS.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:a}];throw c}return h=503===Number(c.customData.httpStatus)?ze(o,r.intervalMillis,30):ze(o,r.intervalMillis),l={throttleEndTimeMillis:Date.now()+h,backoffCount:o+1},r.setThrottleMetadata(e,l),mS.debug("Calling attemptFetch again in "+h+" millis"),[2,NS(t,l,n,r)];case 7:return[2]}}))}))}function kS(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(IS.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var AS=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(t,e,n,r,i){return fS(this,void 0,void 0,(function(){var o,a,s,u,c,h,l;return pS(this,(function(f){switch(f.label){case 0:return(o=function(t,e,n){return void 0===e&&(e=TS),fS(this,void 0,void 0,(function(){var r,i,o,a,s,u,c=this;return pS(this,(function(h){if(r=t.options,i=r.appId,o=r.apiKey,a=r.measurementId,!i)throw IS.create("no-app-id");if(!o){if(a)return[2,{measurementId:a,appId:i}];throw IS.create("no-api-key")}return s=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new AS,setTimeout((function(){return fS(c,void 0,void 0,(function(){return pS(this,(function(t){return u.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,NS({appId:i,apiKey:o,measurementId:a},s,u,e)]}))}))}(t)).then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&mS.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return mS.error(t)})),e.push(o),a=function(){return fS(this,void 0,void 0,(function(){var t;return pS(this,(function(e){switch(e.label){case 0:return Te()?[3,1]:(mS.warn(IS.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Se()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),mS.warn(IS.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([o,a])];case 1:return s=f.sent(),u=s[0],c=s[1],i("js",new Date),(l={}).origin="firebase",l.update=!0,h=l,null!=c&&(h.firebase_id=c),i(dS.CONFIG,u.measurementId,h),[2,u.measurementId]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OS,RS,DS={},xS=[],LS={},MS="dataLayer",FS="gtag",US=!1;function jS(t){if(US)throw IS.create("already-initialized");t.dataLayerName&&(MS=t.dataLayerName),t.gtagName&&(FS=t.gtagName)}function VS(t,e){!function(){var t=[];if(we()&&t.push("This is a browser extension environment."),Ce()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=IS.create("invalid-analytics-context",{errorInfo:e});mS.warn(n.message)}}();var n=t.options.appId;if(!n)throw IS.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw IS.create("no-api-key");mS.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=DS[n])throw IS.create("already-exists",{id:n});if(!US){(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(gS))return r}return null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)()||function(t){var e=document.createElement("script");e.src=gS+"?l="+t,e.async=!0,document.head.appendChild(e)}(MS),function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(MS);var r=wS(DS,xS,LS,MS,FS),i=r.wrappedGtag,o=r.gtagCore;RS=i,OS=o,US=!0}return DS[n]=PS(t,xS,LS,e,OS),{app:t,logEvent:function(t,e,r){(
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e,n,r,i){return fS(this,void 0,void 0,(function(){var o,a;return pS(this,(function(s){switch(s.label){case 0:return i&&i.global?(t(dS.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=s.sent(),a=lS(lS({},r),{send_to:o}),t(dS.EVENT,n,a),s.label=3;case 3:return[2]}}))}))})(RS,DS[n],t,e,r).catch((function(t){return mS.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return fS(this,void 0,void 0,(function(){var i;return pS(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(dS.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(dS.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(RS,DS[n],t,e).catch((function(t){return mS.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return fS(this,void 0,void 0,(function(){var i;return pS(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(dS.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(dS.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(RS,DS[n],t,e).catch((function(t){return mS.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return fS(this,void 0,void 0,(function(){var i,o,a,s,u;return pS(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return t(dS.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(dS.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(RS,DS[n],t,e).catch((function(t){return mS.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return fS(this,void 0,void 0,(function(){var n;return pS(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(DS[n],t).catch((function(t){return mS.error(t)}))},INTERNAL:{delete:function(){return delete DS[n],Promise.resolve()}}}}function qS(){return fS(this,void 0,void 0,(function(){return pS(this,(function(t){switch(t.label){case 0:if(we())return[2,!1];if(!Ce())return[2,!1];if(!Te())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Se()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */!function(t){t.INTERNAL.registerComponent(new Ze("analytics",(function(t){return VS(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:jS,EventName:vS,isSupported:qS})),t.INTERNAL.registerComponent(new Ze("analytics-internal",(function(t){try{return{logEvent:t.getProvider("analytics").getImmediate().logEvent}}catch(t){throw IS.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.2")}(Sn);var BS=function(){return(BS=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function WS(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function HS(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var KS,GS=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return WS(this,void 0,void 0,(function(){var e,n,r,i,o;return HS(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=a.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}}))}))},t}(),zS=((KS={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",KS["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",KS["registration-api-key"]="Undefined API key. Check Firebase app initialization.",KS["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",KS["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",KS["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",KS["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",KS["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",KS["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",KS["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',KS["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',KS["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",KS["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",KS),$S=new ke("remoteconfig","Remote Config",zS);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var QS=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return WS(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,h,l,f,p,d,v,g,y,m,b;return HS(this,(function(_){switch(_.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=_.sent(),n=e[0],r=e[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===w&&(w=navigator),w.languages&&w.languages[0]||w.language)},u={method:"POST",headers:a,body:JSON.stringify(s)},c=fetch(o,u),h=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),_.label=2;case 2:return _.trys.push([2,5,,6]),[4,Promise.race([c,h])];case 3:return _.sent(),[4,c];case 4:return l=_.sent(),[3,6];case 5:throw f=_.sent(),p="fetch-client-network","AbortError"===f.name&&(p="fetch-timeout"),$S.create(p,{originalErrorMessage:f.message});case 6:if(d=l.status,v=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];m=void 0,_.label=7;case 7:return _.trys.push([7,9,,10]),[4,l.json()];case 8:return m=_.sent(),[3,10];case 9:throw b=_.sent(),$S.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:g=m.entries,y=m.state,_.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===y?d=500:"NO_CHANGE"===y?d=304:"NO_TEMPLATE"!==y&&"EMPTY_CONFIG"!==y||(g={}),304!==d&&200!==d)throw $S.create("fetch-status",{httpStatus:d});return[2,{status:d,eTag:v,config:g}]}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var w}))}))},t}(),YS=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),XS=["1","true","t","yes","y","on"],JS=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&XS.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),ZS=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=on.DEBUG;break;case"silent":this._logger.logLevel=on.SILENT;break;default:this._logger.logLevel=on.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return WS(this,void 0,void 0,(function(){var t,e,n;return HS(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return WS(this,void 0,void 0,(function(){var t,e,n,r=this;return HS(this,(function(i){switch(i.label){case 0:t=new YS,setTimeout((function(){return WS(r,void 0,void 0,(function(){return HS(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof Ne&&-1!==t.code.indexOf(e)}(e,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}}))}))},t.prototype.fetchAndActivate=function(){return WS(this,void 0,void 0,(function(){return HS(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(BS(BS({},t),e))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new JS("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new JS("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new JS("static"))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(t,e){var n=t.target.error||void 0;return $S.create(e,{originalErrorMessage:n&&n.message})}var eC=function(){function t(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(tC(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore("app_namespace_store",{keyPath:"compositeKey"})}}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return WS(this,void 0,void 0,(function(){var e,n=this;return HS(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction(["app_namespace_store"],"readonly").objectStore("app_namespace_store"),a=n.createCompositeKey(t);try{var s=o.get(a);s.onerror=function(t){i(tC(t,"storage-get"))},s.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(t){i($S.create("storage-get",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.set=function(t,e){return WS(this,void 0,void 0,(function(){var n,r=this;return HS(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),s=r.createCompositeKey(t);try{var u=a.put({compositeKey:s,value:e});u.onerror=function(t){o(tC(t,"storage-set"))},u.onsuccess=function(){i()}}catch(t){o($S.create("storage-set",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.delete=function(t){return WS(this,void 0,void 0,(function(){var e,n=this;return HS(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),a=n.createCompositeKey(t);try{var s=o.delete(a);s.onerror=function(t){i(tC(t,"storage-delete"))},s.onsuccess=function(){r()}}catch(t){i($S.create("storage-delete",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),nC=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return WS(this,void 0,void 0,(function(){var t,e,n,r,i,o;return HS(this,(function(a){switch(a.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=a.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=a.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=a.sent())&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function rC(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r($S.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var iC,oC=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return WS(this,void 0,void 0,(function(){var e;return HS(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return WS(this,void 0,void 0,(function(){var e,i,o;return HS(this,(function(a){switch(a.label){case 0:return[4,rC(t.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof Ne&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=a.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+ze(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}(),aC="@firebase/remote-config";(iC=Sn).INTERNAL.registerComponent(new Ze("remoteConfig",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw $S.create("registration-window");var i=n.options,o=i.projectId,a=i.apiKey,s=i.appId;if(!o)throw $S.create("registration-project-id");if(!a)throw $S.create("registration-api-key");if(!s)throw $S.create("registration-app-id");e=e||"firebase";var u=new eC(s,n.name,e),c=new nC(u),h=new fn(aC);h.logLevel=on.ERROR;var l=new QS(r,iC.SDK_VERSION,e,o,a,s),f=new oC(l,u),p=new GS(f,u,c,h),d=new ZS(n,p,c,u,h);return d.ensureInitialized(),d}),"PUBLIC").setMultipleInstances(!0)),iC.registerVersion(aC,"0.1.30");
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Sn.registerVersion("firebase","8.2.0","app");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),Sn.registerVersion("firebase","8.2.0");var sC=j_((function(t,e){!function(e){t.exports=e()}((function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(e,n,o){if("undefined"!=typeof document){"number"==typeof(o=t({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(t){}n=r.write?r.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var u in o)o[u]&&(s+="; "+u,!0!==o[u]&&(s+="="+o[u].split(";")[0]));return document.cookie=e+"="+n+s}}function a(t,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],a=0;a<o.length;a++){var s=o[a].split("="),u=s.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=e(s[0]);if(u=(r.read||r)(u,c)||e(u),n)try{u=JSON.parse(u)}catch(t){}if(i[c]=u,t===c)break}catch(t){}}return t?i[t]:i}}return i.set=o,i.get=function(t){return a(t,!1)},i.getJSON=function(t){return a(t,!0)},i.remove=function(e,n){o(e,"",t(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))}))}));function uC(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function cC(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function hC(t){cC(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function lC(t,e){cC(2,arguments);var n=hC(t).getTime(),r=uC(e);return new Date(n+r)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Sn.registerVersion("firebase","8.2.0","app");function fC(t){return t.getTime()%6e4}function pC(t){var e=new Date(t.getTime()),n=Math.ceil(e.getTimezoneOffset());return e.setSeconds(0,0),6e4*n+(n>0?(6e4+fC(e))%6e4:fC(e))}function dC(t){cC(1,arguments);var e=hC(t);return!isNaN(e)}var vC={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function gC(t){return function(e){var n=e||{},r=n.width?String(n.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}var yC={date:gC({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:gC({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:gC({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},mC={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function bC(t){return function(e,n){var r,i=n||{};if("formatting"===(i.context?String(i.context):"standalone")&&t.formattingValues){var o=t.defaultFormattingWidth||t.defaultWidth,a=i.width?String(i.width):o;r=t.formattingValues[a]||t.formattingValues[o]}else{var s=t.defaultWidth,u=i.width?String(i.width):t.defaultWidth;r=t.values[u]||t.values[s]}return r[t.argumentCallback?t.argumentCallback(e):e]}}function _C(t){return function(e,n){var r=String(e),i=n||{},o=i.width,a=o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth],s=r.match(a);if(!s)return null;var u,c=s[0],h=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth];return u="[object Array]"===Object.prototype.toString.call(h)?function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}(h,(function(t){return t.test(c)})):function(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}(h,(function(t){return t.test(c)})),u=t.valueCallback?t.valueCallback(u):u,{value:u=i.valueCallback?i.valueCallback(u):u,rest:r.slice(c.length)}}}var wC,EC={code:"en-US",formatDistance:function(t,e,n){var r;return n=n||{},r="string"==typeof vC[t]?vC[t]:1===e?vC[t].one:vC[t].other.replace("{{count}}",e),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r},formatLong:yC,formatRelative:function(t,e,n,r){return mC[t]},localize:{ordinalNumber:function(t,e){var n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:bC({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:bC({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:bC({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:bC({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:bC({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(wC={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}},function(t,e){var n=String(t),r=e||{},i=n.match(wC.matchPattern);if(!i)return null;var o=i[0],a=n.match(wC.parsePattern);if(!a)return null;var s=wC.valueCallback?wC.valueCallback(a[0]):a[0];return{value:s=r.valueCallback?r.valueCallback(s):s,rest:n.slice(o.length)}}),era:_C({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:_C({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:_C({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:_C({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:_C({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function IC(t,e){cC(2,arguments);var n=uC(e);return lC(t,-n)}function TC(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var SC=function(t,e){var n=t.getUTCFullYear(),r=n>0?n:1-n;return TC("yy"===e?r%100:r,e.length)},CC=function(t,e){var n=t.getUTCMonth();return"M"===e?String(n+1):TC(n+1,2)},NC=function(t,e){return TC(t.getUTCDate(),e.length)},kC=function(t,e){return TC(t.getUTCHours()%12||12,e.length)},AC=function(t,e){return TC(t.getUTCHours(),e.length)},PC=function(t,e){return TC(t.getUTCMinutes(),e.length)},OC=function(t,e){return TC(t.getUTCSeconds(),e.length)},RC=function(t,e){var n=e.length,r=t.getUTCMilliseconds();return TC(Math.floor(r*Math.pow(10,n-3)),e.length)};function DC(t){cC(1,arguments);var e=1,n=hC(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function xC(t){cC(1,arguments);var e=hC(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=DC(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var a=DC(o);return e.getTime()>=i.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function LC(t){cC(1,arguments);var e=xC(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=DC(n);return r}function MC(t,e){cC(1,arguments);var n=e||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,o=null==i?0:uC(i),a=null==n.weekStartsOn?o:uC(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=hC(t),u=s.getUTCDay(),c=(u<a?7:0)+u-a;return s.setUTCDate(s.getUTCDate()-c),s.setUTCHours(0,0,0,0),s}function FC(t,e){cC(1,arguments);var n=hC(t,e),r=n.getUTCFullYear(),i=e||{},o=i.locale,a=o&&o.options&&o.options.firstWeekContainsDate,s=null==a?1:uC(a),u=null==i.firstWeekContainsDate?s:uC(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(r+1,0,u),c.setUTCHours(0,0,0,0);var h=MC(c,e),l=new Date(0);l.setUTCFullYear(r,0,u),l.setUTCHours(0,0,0,0);var f=MC(l,e);return n.getTime()>=h.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function UC(t,e){cC(1,arguments);var n=e||{},r=n.locale,i=r&&r.options&&r.options.firstWeekContainsDate,o=null==i?1:uC(i),a=null==n.firstWeekContainsDate?o:uC(n.firstWeekContainsDate),s=FC(t,e),u=new Date(0);u.setUTCFullYear(s,0,a),u.setUTCHours(0,0,0,0);var c=MC(u,e);return c}var jC="midnight",VC="noon",qC="morning",BC="afternoon",WC="evening",HC="night",KC={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if("yo"===e){var r=t.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return SC(t,e)},Y:function(t,e,n,r){var i=FC(t,r),o=i>0?i:1-i;return"YY"===e?TC(o%100,2):"Yo"===e?n.ordinalNumber(o,{unit:"year"}):TC(o,e.length)},R:function(t,e){return TC(xC(t),e.length)},u:function(t,e){return TC(t.getUTCFullYear(),e.length)},Q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return TC(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return TC(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){var r=t.getUTCMonth();switch(e){case"M":case"MM":return CC(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){var r=t.getUTCMonth();switch(e){case"L":return String(r+1);case"LL":return TC(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){var i=function(t,e){cC(1,arguments);var n=hC(t),r=MC(n,e).getTime()-UC(n,e).getTime();return Math.round(r/6048e5)+1}(t,r);return"wo"===e?n.ordinalNumber(i,{unit:"week"}):TC(i,e.length)},I:function(t,e,n){var r=function(t){cC(1,arguments);var e=hC(t),n=DC(e).getTime()-LC(e).getTime();return Math.round(n/6048e5)+1}(t);return"Io"===e?n.ordinalNumber(r,{unit:"week"}):TC(r,e.length)},d:function(t,e,n){return"do"===e?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):NC(t,e)},D:function(t,e,n){var r=function(t){cC(1,arguments);var e=hC(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/864e5)+1}(t);return"Do"===e?n.ordinalNumber(r,{unit:"dayOfYear"}):TC(r,e.length)},E:function(t,e,n){var r=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return TC(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return TC(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){var r=t.getUTCDay(),i=0===r?7:r;switch(e){case"i":return String(i);case"ii":return TC(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r,i=t.getUTCHours();switch(r=12===i?VC:0===i?jC:i/12>=1?"pm":"am",e){case"b":case"bb":case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r,i=t.getUTCHours();switch(r=i>=17?WC:i>=12?BC:i>=4?qC:HC,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if("ho"===e){var r=t.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return kC(t,e)},H:function(t,e,n){return"Ho"===e?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):AC(t,e)},K:function(t,e,n){var r=t.getUTCHours()%12;return"Ko"===e?n.ordinalNumber(r,{unit:"hour"}):TC(r,e.length)},k:function(t,e,n){var r=t.getUTCHours();return 0===r&&(r=24),"ko"===e?n.ordinalNumber(r,{unit:"hour"}):TC(r,e.length)},m:function(t,e,n){return"mo"===e?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):PC(t,e)},s:function(t,e,n){return"so"===e?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):OC(t,e)},S:function(t,e){return RC(t,e)},X:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();if(0===i)return"Z";switch(e){case"X":return zC(i);case"XXXX":case"XX":return $C(i);case"XXXXX":case"XXX":default:return $C(i,":")}},x:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"x":return zC(i);case"xxxx":case"xx":return $C(i);case"xxxxx":case"xxx":default:return $C(i,":")}},O:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+GC(i,":");case"OOOO":default:return"GMT"+$C(i,":")}},z:function(t,e,n,r){var i=(r._originalDate||t).getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+GC(i,":");case"zzzz":default:return"GMT"+$C(i,":")}},t:function(t,e,n,r){var i=r._originalDate||t;return TC(Math.floor(i.getTime()/1e3),e.length)},T:function(t,e,n,r){return TC((r._originalDate||t).getTime(),e.length)}};function GC(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var a=e||"";return n+String(i)+a+TC(o,2)}function zC(t,e){return t%60==0?(t>0?"-":"+")+TC(Math.abs(t)/60,2):$C(t,e)}function $C(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t);return r+TC(Math.floor(i/60),2)+n+TC(i%60,2)}function QC(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}}function YC(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}}var XC={p:YC,P:function(t,e){var n,r=t.match(/(P+)(p+)?/),i=r[1],o=r[2];if(!o)return QC(t,e);switch(i){case"P":n=e.dateTime({width:"short"});break;case"PP":n=e.dateTime({width:"medium"});break;case"PPP":n=e.dateTime({width:"long"});break;case"PPPP":default:n=e.dateTime({width:"full"})}return n.replace("{{date}}",QC(i,e)).replace("{{time}}",YC(o,e))}},JC=["D","DD"],ZC=["YY","YYYY"];function tN(t){return-1!==JC.indexOf(t)}function eN(t){return-1!==ZC.indexOf(t)}function nN(t,e,n){if("YYYY"===t)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===t)throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===t)throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===t)throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var rN=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,iN=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,oN=/^'([^]*?)'?$/,aN=/''/g,sN=/[a-zA-Z]/;function uN(t,e,n){cC(2,arguments);var r=String(e),i=n||{},o=i.locale||EC,a=o.options&&o.options.firstWeekContainsDate,s=null==a?1:uC(a),u=null==i.firstWeekContainsDate?s:uC(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=o.options&&o.options.weekStartsOn,h=null==c?0:uC(c),l=null==i.weekStartsOn?h:uC(i.weekStartsOn);if(!(l>=0&&l<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");var f=hC(t);if(!dC(f))throw new RangeError("Invalid time value");var p=pC(f),d=IC(f,p),v={firstWeekContainsDate:u,weekStartsOn:l,locale:o,_originalDate:f},g=r.match(iN).map((function(t){var e=t[0];return"p"===e||"P"===e?(0,XC[e])(t,o.formatLong,v):t})).join("").match(rN).map((function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return cN(n);var a=KC[r];if(a)return!i.useAdditionalWeekYearTokens&&eN(n)&&nN(n,e,t),!i.useAdditionalDayOfYearTokens&&tN(n)&&nN(n,e,t),a(d,n,o.localize,v);if(r.match(sN))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n})).join("");return g}function cN(t){return t.match(oN)[1].replace(aN,"'")}const hN=t=>{let e=t.getHours(),n=t.getMinutes();const r=e>=12?"pm":"am";e%=12,e=e||12,n=n<10?`0${n}`:n;return`${e}:${n} ${r}`},lN=()=>{let t=new Date,e=t.getDate(),n=t.getMonth()+1;const r=t.getFullYear();return e<10&&(e=`0${e}`),n<10&&(n=`0${n}`),t=`${n}-${e}-${r}`,t},fN=(t,e,n,r)=>{const i=Sn.database(),o=uN(new Date,"yyyy-mm-dd");i.ref(`/users/${r}/`).set({FirstName:t,LastName:e,Email:n,UserId:r,Joined:o}),((t,e)=>{const n=Math.floor(200*Math.random())+1,r=t;Sn.database().ref(`/boards/${e}`).push({ListCreated:r,UserId:e,NameOfList:"Your First List",Avatar:`https://picsum.photos/id/${n}/200/300`,TypeOfList:"multiple",WriteAccess:!0,ReadAccess:!0})})(o,r),(t=>{Sn.database().ref(`/memberCounter/${t}`).set({TotalMembers:0})})(r),(t=>{Sn.database().ref(`/listCounter/${t}`).set({TotalLists:1})})(r),(t=>{Sn.database().ref(`/memberPlan/${t}`).set({MemberPlan:"Premium"})})(r),(t=>{Sn.database().ref(`/language/${t}`).set({Language:"English"})})(r)},pN=async(t,e,n)=>{((t,e)=>{Sn.database().ref(`/listCounter/${e}`).update({TotalLists:t})})((await(t=>new Promise(((e,n)=>{Sn.database().ref(`/listCounter/${t}`).once("value").then((t=>{const r=t.val();r?e(r):n(r)}))})))(n)).TotalLists+1,n);const r=Math.floor(200*Math.random())+1;return Sn.database().ref(`/boards/${n}`).push({ListCreated:uN(new Date,"yyyy-mm-dd"),UserId:n,NameOfList:e,Avatar:`https://picsum.photos/id/${r}/200/300`,TypeOfList:t,WriteAccess:!0,ReadAccess:!0})},dN=t=>new Promise(((e,n)=>{Sn.database().ref(`/users/${t}`).once("value").then((t=>{const r=t.val()||"Anonymous";if("Anonymous"!==r){const t={firstName:r.FirstName,lastName:r.LastName};e(t)}else{n("Error")}}))})),vN=(t,e,n,r,i,o)=>{Sn.database().ref(`/boardsData/${t}/${e}`).push({Day:n,DayTrueOrFalse:!0,UserId:t,ListId:e,EmailWhoChecked:i,FirstNameWhoChecked:r.firstName,LastNameWhoChecked:r.lastName,Time:o})},gN=(t,e,n)=>{Sn.database().ref(`/boardsData/${t}/${e}/${n}`).remove()},yN=t=>new Promise(((e,n)=>{Sn.database().ref(`/users/${t}`).once("value").then((t=>{const r=t.val();r?e(r):n(r)}))})),mN=(t,e)=>new Promise(((n,r)=>{Sn.database().ref(`/boards/${t}/${e}`).once("value").then((t=>{const e=t.val();e?n(e):r(e)}))})),bN=(t,e,n)=>{Sn.database().ref(`/multipleBoardsData/${e}/${n}/${t.selectedDay}/${t.keyId}`).remove()},_N=async(t,e,n,r)=>{const i=await yN(e),o=hN(new Date);Sn.database().ref(`/multipleBoardsData/${e}/${n}/${t.selectedDay}/${t.keyId}`).push({Day:t.selectedDay,DayTrueOrFalse:!0,UserId:e,ListId:n,NameOfList:r,TypeOfList:"multiple",NameOfField:t.name,FieldId:t.keyId,Time:o,EmailWhoChecked:i.Email,FirstNameWhoChecked:i.FirstName,LastNameWhoChecked:i.LastName})},wN=(t,e,n)=>{const r=Sn.database();return new Promise(((i,o)=>{let a=null;a=r.ref().child(`/loggerData/${e}/${n}/${t.KeyId}`),a.once("value").then((t=>{const e=t.val();i(null!==e?{status:"data is not empty"}:{status:"data is emtpy"})})).catch((t=>{o(t)}))}))},EN=(t,e,n)=>{Sn.database().ref(`/loggerData/${t}/${e}/${n.KeyId}`).remove()},IN=async(t,e,n,r,i)=>{const o=await dN(t);console.log("userId",t),console.log("listId",e),console.log("item",n),console.log("displayName",r),console.log("firstName",o.firstName),console.log("lastName",o.lastName),console.log("boardName",i),console.log("typeOfList","logger");Sn.database().ref(`/loggerData/${t}/${e}/${n.KeyId}`).push({Day:lN(),DayTrueOrFalse:!0,UserId:t,OwnerOfListId:t,ListId:e,NameOfList:i,TypeOfList:"logger",NameOfField:n.Name,FieldId:n.KeyId,Time:hN(new Date),EmailWhoChecked:r,FirstNameWhoChecked:o.firstName,LastNameWhoChecked:o.lastName})};function TN(t,e,n){const r=t.slice();return r[13]=e[n],r}function SN(t){let e,n,r=t[1],i=[];for(let e=0;e<r.length;e+=1)i[e]=NN(TN(t,r,e));return{c(){e=g("div"),n=g("ul");for(let t=0;t<i.length;t+=1)i[t].c();this.h()},l(t){e=T(t,"DIV",{class:!0});var r=I(e);n=T(r,"UL",{tabindex:!0,role:!0,"aria-labelledby":!0,"aria-activedescendant":!0,class:!0});var o=I(n);for(let t=0;t<i.length;t+=1)i[t].l(o);o.forEach(d),r.forEach(d),this.h()},h(){E(n,"tabindex","-1"),E(n,"role","listbox"),E(n,"aria-labelledby","listbox-label"),E(n,"aria-activedescendant","listbox-item-3"),E(n,"class","max-h-56 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm"),E(e,"class","dropdown-menu absolute hidden mt-1 w-full rounded-md bg-white shadow-lg z-10 svelte-1ymjnsk")},m(t,r){p(t,e,r),f(e,n);for(let t=0;t<i.length;t+=1)i[t].m(n,null)},p(t,e){if(83&e){let o;for(r=t[1],o=0;o<r.length;o+=1){const a=TN(t,r,o);i[o]?i[o].p(a,e):(i[o]=NN(a),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},d(t){t&&d(e),v(i,t)}}}function CN(t){let e,n,r;return{c(){e=g("span"),n=y("svg"),r=y("path"),this.h()},l(t){e=T(t,"SPAN",{class:!0});var i=I(e);n=T(i,"svg",{class:!0,xmlns:!0,viewBox:!0,fill:!0,"aria-hidden":!0},1);var o=I(n);r=T(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0},1),I(r).forEach(d),o.forEach(d),i.forEach(d),this.h()},h(){E(r,"fill-rule","evenodd"),E(r,"d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"),E(r,"clip-rule","evenodd"),E(n,"class","h-5 w-5"),E(n,"xmlns","http://www.w3.org/2000/svg"),E(n,"viewBox","0 0 20 20"),E(n,"fill","currentColor"),E(n,"aria-hidden","true"),E(e,"class","absolute inset-y-0 right-0 flex items-center pr-4")},m(t,i){p(t,e,i),f(e,n),f(n,r)},d(t){t&&d(e)}}}function NN(t){let e,n,r,i,o,a,s,u,c,h,l,v=t[13].language+"",y=t[13].language===t[0]&&CN();function _(){return t[7](t[13])}return{c(){e=g("li"),n=g("div"),r=g("img"),o=b(),a=g("span"),s=m(v),u=b(),y&&y.c(),c=b(),this.h()},l(t){e=T(t,"LI",{id:!0,role:!0,class:!0});var i=I(e);n=T(i,"DIV",{class:!0});var h=I(n);r=T(h,"IMG",{src:!0,alt:!0,class:!0}),o=C(h),a=T(h,"SPAN",{class:!0});var l=I(a);s=S(l,v),l.forEach(d),h.forEach(d),u=C(i),y&&y.l(i),c=C(i),i.forEach(d),this.h()},h(){r.src!==(i=t[6](t[13].language))&&E(r,"src",i),E(r,"alt",""),E(r,"class","flex-shrink-0 h-6 w-6 rounded-full"),E(a,"class","ml-3 block font-normal truncate"),E(n,"class","flex items-center"),E(e,"id","listbox-item-0"),E(e,"role","option"),E(e,"class","text-gray-900 cursor-default select-none relative py-2 pl-3 pr-9 hover:bg-gray-400")},m(t,i){p(t,e,i),f(e,n),f(n,r),f(n,o),f(n,a),f(a,s),f(e,u),y&&y.m(e,null),f(e,c),h||(l=w(e,"click",_),h=!0)},p(n,o){t=n,2&o&&r.src!==(i=t[6](t[13].language))&&E(r,"src",i),2&o&&v!==(v=t[13].language+"")&&N(s,v),t[13].language===t[0]?y||(y=CN(),y.c(),y.m(e,c)):y&&(y.d(1),y=null)},d(t){t&&d(e),y&&y.d(),h=!1,l()}}}function kN(e){let n,r,i,o,a,s,u,c,h,l,v,_,k,A,P,O,R=e[3]&&SN(e);return{c(){n=g("div"),r=g("div"),i=g("button"),o=g("span"),a=g("img"),u=b(),c=g("span"),h=m(e[0]),l=b(),v=g("span"),_=y("svg"),k=y("path"),A=b(),R&&R.c(),this.h()},l(t){n=T(t,"DIV",{class:!0});var s=I(n);r=T(s,"DIV",{class:!0});var f=I(r);i=T(f,"BUTTON",{class:!0});var p=I(i);o=T(p,"SPAN",{class:!0});var g=I(o);a=T(g,"IMG",{src:!0,alt:!0,class:!0}),u=C(g),c=T(g,"SPAN",{class:!0});var y=I(c);h=S(y,e[0]),y.forEach(d),g.forEach(d),l=C(p),v=T(p,"SPAN",{class:!0});var m=I(v);_=T(m,"svg",{class:!0,xmlns:!0,viewBox:!0,fill:!0,"aria-hidden":!0},1);var b=I(_);k=T(b,"path",{"fill-rule":!0,d:!0,"clip-rule":!0},1),I(k).forEach(d),b.forEach(d),m.forEach(d),p.forEach(d),A=C(f),R&&R.l(f),f.forEach(d),s.forEach(d),this.h()},h(){a.src!==(s=e[2])&&E(a,"src",s),E(a,"alt",""),E(a,"class","flex-shrink-0 h-6 w-6 rounded-full"),E(c,"class","ml-3 block truncate"),E(o,"class","flex items-center"),E(k,"fill-rule","evenodd"),E(k,"d","M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"),E(k,"clip-rule","evenodd"),E(_,"class","h-5 w-5 text-gray-400"),E(_,"xmlns","http://www.w3.org/2000/svg"),E(_,"viewBox","0 0 20 20"),E(_,"fill","currentColor"),E(_,"aria-hidden","true"),E(v,"class","ml-3 absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"),E(i,"class","relative w-full bg-white border border-gray-300 rounded-md shadow-sm pl-3 pr-10 py-2 text-left cursor-default focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"),E(r,"class","dropdown inline-block relative"),E(n,"class","p-10")},m(t,s){p(t,n,s),f(n,r),f(r,i),f(i,o),f(o,a),f(o,u),f(o,c),f(c,h),f(i,l),f(i,v),f(v,_),f(_,k),f(r,A),R&&R.m(r,null),P||(O=w(i,"click",e[5]),P=!0)},p(t,[e]){4&e&&a.src!==(s=t[2])&&E(a,"src",s),1&e&&N(h,t[0]),t[3]?R?R.p(t,e):(R=SN(t),R.c(),R.m(r,null)):R&&(R.d(1),R=null)},i:t,o:t,d(t){t&&d(n),R&&R.d(),P=!1,O()}}}function AN(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};let i="english",o=[],a=null,s=null,u=!1,c=!1,h=null;const l=t=>r(void 0,void 0,void 0,(function*(){const e=yield(n=t,new Promise(((t,e)=>{Sn.database().ref(`/language/${n}`).once("value").then((n=>{const r=n.val();r?t(r):e(r)}))})));var n;f(e.Language)}));vt.subscribe((t=>{null!==t?(c=!0,h=t,l(t)):c=!1})),L((()=>r(void 0,void 0,void 0,(function*(){try{const t=yield(async()=>{try{return(await ie({method:"post",url:"https://graphql.datocms.com/",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer 41f51eee9f4edb4dc69b2a8e3139fe"},data:JSON.stringify({query:"query\n\t\t\t\tLangQuery {\n\t\t\t\t\tallLanguages {\n\t\t\t\t\t\tlanguage\n\t\t\t\t\t}\n\t\t\t\t\tlanguageFlagIcon {\n\t\t\t\t\t\ticelandicFlagLink\n\t\t\t\t\t\tswedishFlagLink\n\t\t\t\t\t\tenglishFlagLink\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t"})})).data.data}catch(t){return t}})(),e=t.allLanguages,r=t.languageFlagIcon;a=r,n(1,o=e),n(2,s=r.englishFlagLink)}catch(t){n(1,o=[])}}))));const f=t=>r(void 0,void 0,void 0,(function*(){n(2,s="English"===t?a.englishFlagLink:"slenska"===t?a.icelandicFlagLink:a.swedishFlagLink),n(0,i=t),yt.set(t);const e=yield(async t=>{let e="en";e="English"===t?"en":"slenska"===t?"is":"sv";try{return(await ie({method:"post",url:"https://graphql.datocms.com/",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer 41f51eee9f4edb4dc69b2a8e3139fe"},data:JSON.stringify({query:`query HardcodedStringsQuery {\n\t\t\t\t\tstring {\n\t\t\t\t\t\tcancel(locale: ${e})\n\t\t\t\t\t\tcreateList(locale: ${e})\n\t\t\t\t\t\tcreateNewList(locale: ${e})\n\t\t\t\t\t\tlogger(locale: ${e})\n\t\t\t\t\t\tlogout(locale: ${e})\n\t\t\t\t\t\tmultiple(locale: ${e})\n\t\t\t\t\t\tsingle(locale: ${e})\n\t\t\t\t\t\ttypeOfList(locale: ${e})\n\t\t\t\t\t\tyourBoards(locale: ${e})\n\t\t\t\t\t\tloginButton(locale: ${e})\n\t\t\t\t\t\tloginHeadline(locale: ${e})\n\t\t\t\t\t\temailPlaceholder(locale: ${e})\n\t\t\t\t\t\tforgotPassword(locale: ${e})\n\t\t\t\t\t\tpasswordPlaceholder(locale: ${e})\n\t\t\t\t\t\tcreateAccount(locale: ${e})\n\t\t\t\t\t\tregisterTerms(locale: ${e})\n\t\t\t\t\t\tsignupButton(locale: ${e})\n\t\t\t\t\t\tsignupHeadline(locale: ${e})\n\t\t\t\t\t\tfirstnamePlaceholder(locale: ${e})\n\t\t\t\t\t\tlastnamePlaceholder(locale: ${e})\n\t\t\t\t\t\tcreateAccount(locale: ${e})\n\t\t\t\t\t\talreadyHaveAccount(locale: ${e})\n\t\t\t\t\t\tpasswordError(locale: ${e})\n\t\t\t\t\t\temailError(locale: ${e})\n\t\t\t\t\t\tlastnameError(locale: ${e})\n\t\t\t\t\t\tfirstnameError(locale: ${e})\n\t\t\t\t\t\ttermsOfService(locale: ${e})\n\t\t\t\t\t\tand(locale: ${e})\n\t\t\t\t\t\tprivacyPolicy(locale: ${e})\n\t\t\t\t\t\tlistnamePlaceholder(locale: ${e})\n\t\t\t\t\t\tinformation(locale: ${e})\n\t\t\t\t\t\tday(locale: ${e})\n\t\t\t\t\t\ttime(locale: ${e})\n\t\t\t\t\t\tcheckedBy(locale: ${e})\n\t\t\t\t\t\temail(locale: ${e})\n\t\t\t\t\t\tsave(locale: ${e})\n\t\t\t\t\t\tadd(locale: ${e})\n\t\t\t\t\t\taddNewItem(locale: ${e})\n\t\t\t\t\t}\n\t\t\t\t}`})})).data.data.string}catch(t){return t}})(t);var r,o;gt.set(e),n(3,u=!1),c&&h&&(r=h,o=i,Sn.database().ref(`/language/${r}`).update({Language:o}))}));return[i,o,s,u,f,()=>{n(3,u=!u)},t=>{let e="";return e="English"===t?a.englishFlagLink:"slenska"===t?a.icelandicFlagLink:a.swedishFlagLink,e},t=>f(t.language)]}class PN extends ht{constructor(t){super(),ct(this,t,AN,kN,a,{})}}function ON(t){let e,n,r,i,o=t[1].logout+"";return{c(){e=g("button"),n=m(o),this.h()},l(t){e=T(t,"BUTTON",{class:!0});var r=I(e);n=S(r,o),r.forEach(d),this.h()},h(){E(e,"class","px-6 py-2 border border-blue-500 text-blue-500 max-w-max shadow-sm hover:shadow-md")},m(o,a){p(o,e,a),f(e,n),r||(i=w(e,"click",t[2]),r=!0)},p(t,e){2&e&&o!==(o=t[1].logout+"")&&N(n,o)},d(t){t&&d(e),r=!1,i()}}}function RN(t){let e,n,r,i,o=t[1].logout+"";return{c(){e=g("button"),n=m(o),this.h()},l(t){e=T(t,"BUTTON",{class:!0});var r=I(e);n=S(r,o),r.forEach(d),this.h()},h(){E(e,"class","px-6 py-2 border border-blue-500 text-blue-500 max-w-max shadow-sm hover:shadow-md")},m(o,a){p(o,e,a),f(e,n),r||(i=w(e,"click",t[2]),r=!0)},p(t,e){2&e&&o!==(o=t[1].logout+"")&&N(n,o)},d(t){t&&d(e),r=!1,i()}}}function DN(t){let e,n,r,i,o,a,s,u,c,h,l,v,y,_,w,N,k,P,O,R,D,x,L,M,F,U,j,V,q,B,W,H,K,G,z,$,Q,Y,X,J,Z,nt,rt,ut,ct,ht,lt,ft,pt,dt,vt,gt,yt,mt,bt,_t;h=new PN({});let wt=t[0]&&ON(t),Et=t[0]&&RN(t);return{c(){e=g("header"),n=g("div"),r=g("a"),i=g("img"),a=b(),s=g("div"),u=g("nav"),c=g("div"),it(h.$$.fragment),l=b(),wt&&wt.c(),v=b(),y=g("div"),_=g("a"),w=m("..."),N=b(),k=g("div"),P=g("a"),O=m("..."),R=b(),D=g("div"),x=g("a"),L=m("..."),M=b(),F=g("div"),U=g("a"),j=m("..."),V=b(),q=g("div"),B=g("a"),W=m("..."),H=b(),K=g("div"),G=g("nav"),z=g("ul"),Et&&Et.c(),$=b(),Q=g("div"),Y=g("a"),X=m("..."),J=b(),Z=g("div"),nt=g("a"),rt=m("..."),ut=b(),ct=g("div"),ht=g("a"),lt=m("..."),ft=b(),pt=g("div"),dt=g("a"),vt=m("..."),gt=b(),yt=g("div"),mt=g("a"),bt=m("..."),this.h()},l(t){e=T(t,"HEADER",{class:!0});var o=I(e);n=T(o,"DIV",{class:!0});var f=I(n);r=T(f,"A",{href:!0});var p=I(r);i=T(p,"IMG",{alt:!0,src:!0,class:!0}),p.forEach(d),f.forEach(d),a=C(o),s=T(o,"DIV",{class:!0,id:!0});var g=I(s);u=T(g,"NAV",{});var m=I(u);c=T(m,"DIV",{class:!0});var b=I(c);ot(h.$$.fragment,b),l=C(b),wt&&wt.l(b),b.forEach(d),v=C(m),y=T(m,"DIV",{style:!0});var E=I(y);_=T(E,"A",{href:!0});var A=I(_);w=S(A,"..."),A.forEach(d),E.forEach(d),N=C(m),k=T(m,"DIV",{style:!0});var tt=I(k);P=T(tt,"A",{href:!0});var et=I(P);O=S(et,"..."),et.forEach(d),tt.forEach(d),R=C(m),D=T(m,"DIV",{style:!0});var it=I(D);x=T(it,"A",{href:!0});var at=I(x);L=S(at,"..."),at.forEach(d),it.forEach(d),M=C(m),F=T(m,"DIV",{style:!0});var st=I(F);U=T(st,"A",{href:!0});var _t=I(U);j=S(_t,"..."),_t.forEach(d),st.forEach(d),V=C(m),q=T(m,"DIV",{style:!0});var It=I(q);B=T(It,"A",{href:!0});var Tt=I(B);W=S(Tt,"..."),Tt.forEach(d),It.forEach(d),m.forEach(d),g.forEach(d),H=C(o),K=T(o,"DIV",{class:!0});var St=I(K);G=T(St,"NAV",{});var Ct=I(G);z=T(Ct,"UL",{class:!0});var Nt=I(z);Et&&Et.l(Nt),Nt.forEach(d),$=C(Ct),Q=T(Ct,"DIV",{style:!0});var kt=I(Q);Y=T(kt,"A",{href:!0});var At=I(Y);X=S(At,"..."),At.forEach(d),kt.forEach(d),J=C(Ct),Z=T(Ct,"DIV",{style:!0});var Pt=I(Z);nt=T(Pt,"A",{href:!0});var Ot=I(nt);rt=S(Ot,"..."),Ot.forEach(d),Pt.forEach(d),ut=C(Ct),ct=T(Ct,"DIV",{style:!0});var Rt=I(ct);ht=T(Rt,"A",{href:!0});var Dt=I(ht);lt=S(Dt,"..."),Dt.forEach(d),Rt.forEach(d),ft=C(Ct),pt=T(Ct,"DIV",{style:!0});var xt=I(pt);dt=T(xt,"A",{href:!0});var Lt=I(dt);vt=S(Lt,"..."),Lt.forEach(d),xt.forEach(d),gt=C(Ct),yt=T(Ct,"DIV",{style:!0});var Mt=I(yt);mt=T(Mt,"A",{href:!0});var Ft=I(mt);bt=S(Ft,"..."),Ft.forEach(d),Mt.forEach(d),Ct.forEach(d),St.forEach(d),o.forEach(d),this.h()},h(){E(i,"alt","logo"),i.src!==(o="daysLogoMini.png")&&E(i,"src","daysLogoMini.png"),E(i,"class","h-20 pt-6"),E(r,"href","/"),E(n,"class","flex-1 flex justify-between items-center"),E(c,"class","lg:flex items-center justify-between text-base text-gray-700 pt-4 lg:pt-0"),E(_,"href","/dashboard"),A(y,"visibility","hidden"),A(y,"position","absolute"),E(P,"href","/single"),A(k,"visibility","hidden"),A(k,"position","absolute"),E(x,"href","/multiple"),A(D,"visibility","hidden"),A(D,"position","absolute"),E(U,"href","/logger"),A(F,"visibility","hidden"),A(F,"position","absolute"),E(B,"href","/forgotPassword"),A(q,"visibility","hidden"),A(q,"position","absolute"),E(s,"class","hidden lg:flex lg:items-center lg:w-auto w-full"),E(s,"id","menu"),E(z,"class","flex"),E(Y,"href","/dashboard"),A(Q,"visibility","hidden"),A(Q,"position","absolute"),E(nt,"href","/single"),A(Z,"visibility","hidden"),A(Z,"position","absolute"),E(ht,"href","/multiple"),A(ct,"visibility","hidden"),A(ct,"position","absolute"),E(dt,"href","/logger"),A(pt,"visibility","hidden"),A(pt,"position","absolute"),E(mt,"href","/forgotPassword"),A(yt,"visibility","hidden"),A(yt,"position","absolute"),E(K,"class","visible lg:invisible"),E(e,"class","lg:px-16 px-6 bg-white flex flex-wrap items-center lg:py-0 py-2")},m(t,o){p(t,e,o),f(e,n),f(n,r),f(r,i),f(e,a),f(e,s),f(s,u),f(u,c),at(h,c,null),f(c,l),wt&&wt.m(c,null),f(u,v),f(u,y),f(y,_),f(_,w),f(u,N),f(u,k),f(k,P),f(P,O),f(u,R),f(u,D),f(D,x),f(x,L),f(u,M),f(u,F),f(F,U),f(U,j),f(u,V),f(u,q),f(q,B),f(B,W),f(e,H),f(e,K),f(K,G),f(G,z),Et&&Et.m(z,null),f(G,$),f(G,Q),f(Q,Y),f(Y,X),f(G,J),f(G,Z),f(Z,nt),f(nt,rt),f(G,ut),f(G,ct),f(ct,ht),f(ht,lt),f(G,ft),f(G,pt),f(pt,dt),f(dt,vt),f(G,gt),f(G,yt),f(yt,mt),f(mt,bt),_t=!0},p(t,[e]){t[0]?wt?wt.p(t,e):(wt=ON(t),wt.c(),wt.m(c,null)):wt&&(wt.d(1),wt=null),t[0]?Et?Et.p(t,e):(Et=RN(t),Et.c(),Et.m(z,null)):Et&&(Et.d(1),Et=null)},i(t){_t||(tt(h.$$.fragment,t),_t=!0)},o(t){et(h.$$.fragment,t),_t=!1},d(t){t&&d(e),st(h),wt&&wt.d(),Et&&Et.d()}}}function xN(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};let i=null,o=null;dt.subscribe((t=>{n(0,i=t)})),gt.subscribe((t=>{null!==t&&n(1,o=t)}));return[i,o,()=>r(void 0,void 0,void 0,(function*(){yield Sn.auth().signOut(),dt.set(null),bk("/")}))]}class LN extends ht{constructor(t){super(),ct(this,t,xN,DN,a,{})}}function MN(t){let e,n,r,i;e=new LN({});const o=t[2].default,a=function(t,e,n,r){if(t){const i=u(t,e,n,r);return t[0](i)}}(o,t,t[1],null);return{c(){it(e.$$.fragment),n=b(),r=g("main"),a&&a.c(),this.h()},l(t){ot(e.$$.fragment,t),n=C(t),r=T(t,"MAIN",{class:!0});var i=I(r);a&&a.l(i),i.forEach(d),this.h()},h(){E(r,"class","svelte-hsbc7i")},m(t,o){at(e,t,o),p(t,n,o),p(t,r,o),a&&a.m(r,null),i=!0},p(t,[e]){a&&a.p&&2&e&&c(a,o,t,t[1],e,null,null)},i(t){i||(tt(e.$$.fragment,t),tt(a,t),i=!0)},o(t){et(e.$$.fragment,t),et(a,t),i=!1},d(t){st(e,t),t&&d(n),t&&d(r),a&&a.d(t)}}}async function FN(){try{const t=await(async()=>{try{return(await ie({method:"post",url:"https://graphql.datocms.com/",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer 41f51eee9f4edb4dc69b2a8e3139fe"},data:JSON.stringify({query:"query HardcodedStringsQuery {\n\t\t\t\t\tstring {\n\t\t\t\t\t\tcancel(locale: en)\n\t\t\t\t\t\tcreateList(locale: en)\n\t\t\t\t\t\tcreateNewList(locale: en)\n\t\t\t\t\t\tlogger(locale: en)\n\t\t\t\t\t\tlogout(locale: en)\n\t\t\t\t\t\tmultiple(locale: en)\n\t\t\t\t\t\tsingle(locale: en)\n\t\t\t\t\t\ttypeOfList(locale: en)\n\t\t\t\t\t\tyourBoards(locale: en)\n\t\t\t\t\t\tloginButton(locale: en)\n\t\t\t\t\t\tloginHeadline(locale: en)\n\t\t\t\t\t\temailPlaceholder(locale: en)\n\t\t\t\t\t\tforgotPassword(locale: en)\n\t\t\t\t\t\tpasswordPlaceholder(locale: en)\n\t\t\t\t\t\tcreateAccount(locale: en)\n\t\t\t\t\t\tregisterTerms(locale: en)\n\t\t\t\t\t\tsignupButton(locale: en)\n\t\t\t\t\t\tsignupHeadline(locale: en)\n\t\t\t\t\t\tfirstnamePlaceholder(locale: en)\n\t\t\t\t\t\tlastnamePlaceholder(locale: en)\n\t\t\t\t\t\tcreateAccount(locale: en)\n\t\t\t\t\t\talreadyHaveAccount(locale: en)\n\t\t\t\t\t\tpasswordError(locale: en)\n\t\t\t\t\t\temailError(locale: en)\n\t\t\t\t\t\tlastnameError(locale: en)\n\t\t\t\t\t\tfirstnameError(locale: en)\n\t\t\t\t\t\ttermsOfService(locale: en)\n\t\t\t\t\t\tand(locale: en)\n\t\t\t\t\t\tprivacyPolicy(locale: en)\n\t\t\t\t\t\tlistnamePlaceholder(locale: en)\n\t\t\t\t\t\tinformation(locale: en)\n\t\t\t\t\t\tday(locale: en)\n\t\t\t\t\t\ttime(locale: en)\n\t\t\t\t\t\tcheckedBy(locale: en)\n\t\t\t\t\t\temail(locale: en)\n\t\t\t\t\t\tsave(locale: en)\n\t\t\t\t\t\tadd(locale: en)\n\t\t\t\t\t\taddNewItem(locale: en)\n\t\t\t\t\t}\n\t\t\t\t}"})})).data.data.string}catch(t){return t}})();gt.set(t)}catch(t){return t.response}}function UN(t,e,n){let r,{$$slots:i={},$$scope:o}=e;var a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};const{session:u}=Lk();return s(t,u,(t=>n(3,r=t))),L((()=>a(void 0,void 0,void 0,(function*(){Sn.auth().onIdTokenChanged((t=>a(void 0,void 0,void 0,(function*(){try{if(!t||!t.emailVerified)return sC.set("token",!1),l(u,r.user=!1,r),dt.set(null),vt.set(null),void mt.set(null);const e=yield t.getIdToken();dt.set(e),vt.set(t.uid),mt.set(t.email),l(u,r.user=e,r),sC.set("token",e),window.timeoutId=setTimeout((()=>Sn.auth().currentUser?Sn.auth().currentUser.getIdToken(!0):null),33e5)}catch(t){sC.set("token",!1),l(u,r.user=!1,r)}}))))})))),t.$$set=t=>{"$$scope"in t&&n(1,o=t.$$scope)},[u,o,i]}class jN extends ht{constructor(t){super(),ct(this,t,UN,MN,a,{})}}function VN(t){let e,n,r=t[1].stack+"";return{c(){e=g("pre"),n=m(r)},l(t){e=T(t,"PRE",{});var i=I(e);n=S(i,r),i.forEach(d)},m(t,r){p(t,e,r),f(e,n)},p(t,e){2&e&&r!==(r=t[1].stack+"")&&N(n,r)},d(t){t&&d(e)}}}function qN(e){let n,r,i,o,a,s,u,c,h,l=e[1].message+"";document.title=n=e[0];let v=e[2]&&e[1].stack&&VN(e);return{c(){r=b(),i=g("h1"),o=m(e[0]),a=b(),s=g("p"),u=m(l),c=b(),v&&v.c(),h=_(),this.h()},l(t){P('[data-svelte="svelte-1moakz"]',document.head).forEach(d),r=C(t),i=T(t,"H1",{class:!0});var n=I(i);o=S(n,e[0]),n.forEach(d),a=C(t),s=T(t,"P",{class:!0});var f=I(s);u=S(f,l),f.forEach(d),c=C(t),v&&v.l(t),h=_(),this.h()},h(){E(i,"class","svelte-1nw0i73"),E(s,"class","svelte-1nw0i73")},m(t,e){p(t,r,e),p(t,i,e),f(i,o),p(t,a,e),p(t,s,e),f(s,u),p(t,c,e),v&&v.m(t,e),p(t,h,e)},p(t,[e]){1&e&&n!==(n=t[0])&&(document.title=n),1&e&&N(o,t[0]),2&e&&l!==(l=t[1].message+"")&&N(u,l),t[2]&&t[1].stack?v?v.p(t,e):(v=VN(t),v.c(),v.m(h.parentNode,h)):v&&(v.d(1),v=null)},i:t,o:t,d(t){t&&d(r),t&&d(i),t&&d(a),t&&d(s),t&&d(c),v&&v.d(t),t&&d(h)}}}function BN(t,e,n){let{status:r}=e,{error:i}=e;return t.$$set=t=>{"status"in t&&n(0,r=t.status),"error"in t&&n(1,i=t.error)},[r,i,false]}class WN extends ht{constructor(t){super(),ct(this,t,BN,qN,a,{status:0,error:1})}}function HN(t){let n,r,i;const o=[t[4].props];var a=t[4].component;function s(t){let n={};for(let t=0;t<o.length;t+=1)n=e(n,o[t]);return{props:n}}return a&&(n=new a(s())),{c(){n&&it(n.$$.fragment),r=_()},l(t){n&&ot(n.$$.fragment,t),r=_()},m(t,e){n&&at(n,t,e),p(t,r,e),i=!0},p(t,e){const i=16&e?nt(o,[rt(t[4].props)]):{};if(a!==(a=t[4].component)){if(n){J();const t=n;et(t.$$.fragment,1,0,(()=>{st(t,1)})),Z()}a?(n=new a(s()),it(n.$$.fragment),tt(n.$$.fragment,1),at(n,r.parentNode,r)):n=null}else a&&n.$set(i)},i(t){i||(n&&tt(n.$$.fragment,t),i=!0)},o(t){n&&et(n.$$.fragment,t),i=!1},d(t){t&&d(r),n&&st(n,t)}}}function KN(t){let e,n;return e=new WN({props:{error:t[0],status:t[1]}}),{c(){it(e.$$.fragment)},l(t){ot(e.$$.fragment,t)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.error=t[0]),2&n&&(r.status=t[1]),e.$set(r)},i(t){n||(tt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){st(e,t)}}}function GN(t){let e,n,r,i;const o=[KN,HN],a=[];function s(t,e){return t[0]?0:1}return e=s(t),n=a[e]=o[e](t),{c(){n.c(),r=_()},l(t){n.l(t),r=_()},m(t,n){a[e].m(t,n),p(t,r,n),i=!0},p(t,i){let u=e;e=s(t),e===u?a[e].p(t,i):(J(),et(a[u],1,1,(()=>{a[u]=null})),Z(),n=a[e],n?n.p(t,i):(n=a[e]=o[e](t),n.c()),tt(n,1),n.m(r.parentNode,r))},i(t){i||(tt(n),i=!0)},o(t){et(n),i=!1},d(t){a[e].d(t),t&&d(r)}}}function zN(t){let n,r;const i=[{segment:t[2][0]},t[3].props];let o={$$slots:{default:[GN]},$$scope:{ctx:t}};for(let t=0;t<i.length;t+=1)o=e(o,i[t]);return n=new jN({props:o}),{c(){it(n.$$.fragment)},l(t){ot(n.$$.fragment,t)},m(t,e){at(n,t,e),r=!0},p(t,[e]){const r=12&e?nt(i,[4&e&&{segment:t[2][0]},8&e&&rt(t[3].props)]):{};147&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){r||(tt(n.$$.fragment,t),r=!0)},o(t){et(n.$$.fragment,t),r=!1},d(t){st(n,t)}}}function $N(t,e,n){let{stores:r}=e,{error:i}=e,{status:o}=e,{segments:a}=e,{level0:s}=e,{level1:u=null}=e,{notify:c}=e;var h,l;return M(c),h=pt,l=r,D().$$.context.set(h,l),t.$$set=t=>{"stores"in t&&n(5,r=t.stores),"error"in t&&n(0,i=t.error),"status"in t&&n(1,o=t.status),"segments"in t&&n(2,a=t.segments),"level0"in t&&n(3,s=t.level0),"level1"in t&&n(4,u=t.level1),"notify"in t&&n(6,c=t.notify)},[i,o,a,s,u,r,c]}class QN extends ht{constructor(t){super(),ct(this,t,$N,zN,a,{stores:5,error:0,status:1,segments:2,level0:3,level1:4,notify:6})}}const YN=[/^\/blog\.json$/,/^\/blog\/([^\/]+?)\.json$/],XN=[{js:()=>Promise.all([import("./index.87e124bb.js"),__inject_styles(["client-0153459a.css","Spinner-08a9287b.css","index-1d91da45.css"])]).then((function(t){return t[0]}))},{js:()=>Promise.all([import("./index.587a8f55.js"),__inject_styles(["client-0153459a.css"])]).then((function(t){return t[0]}))},{js:()=>Promise.all([import("./index.8a7c9b39.js"),__inject_styles(["client-0153459a.css","index-a948c0f3.css"])]).then((function(t){return t[0]}))},{js:()=>Promise.all([import("./index.e579f8a1.js"),__inject_styles(["client-0153459a.css","randomColor-ee571a9e.css","index-5f80fcf3.css"])]).then((function(t){return t[0]}))},{js:()=>Promise.all([import("./index.d9d96ba3.js"),__inject_styles(["client-0153459a.css","Spinner-08a9287b.css","index-3722f625.css"])]).then((function(t){return t[0]}))},{js:()=>Promise.all([import("./index.453571d8.js"),__inject_styles(["client-0153459a.css","index-002d637e.css"])]).then((function(t){return t[0]}))},{js:()=>Promise.all([import("./index.3c0da758.js"),__inject_styles(["client-0153459a.css","randomColor-ee571a9e.css"])]).then((function(t){return t[0]}))},{js:()=>Promise.all([import("./about.e43d6de2.js"),__inject_styles(["client-0153459a.css"])]).then((function(t){return t[0]}))},{js:()=>Promise.all([import("./index.3edcb8a6.js"),__inject_styles(["client-0153459a.css","index-feeec1db.css"])]).then((function(t){return t[0]}))},{js:()=>Promise.all([import("./[slug].e8f55c69.js"),__inject_styles(["client-0153459a.css","[slug]-0ffc3639.css"])]).then((function(t){return t[0]}))}],JN=(ZN=decodeURIComponent,[{pattern:/^\/$/,parts:[{i:0}]},{pattern:/^\/forgotPassword\/?$/,parts:[{i:1}]},{pattern:/^\/dashboard\/?$/,parts:[{i:2}]},{pattern:/^\/multiple\/?$/,parts:[{i:3}]},{pattern:/^\/register\/?$/,parts:[{i:4}]},{pattern:/^\/logger\/?$/,parts:[{i:5}]},{pattern:/^\/single\/?$/,parts:[{i:6}]},{pattern:/^\/about\/?$/,parts:[{i:7}]},{pattern:/^\/blog\/?$/,parts:[{i:8}]},{pattern:/^\/blog\/([^\/]+?)\/?$/,parts:[null,{i:9,params:t=>({slug:ZN(t[1])})}]}]);var ZN;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function tk(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function ek(t){for(;t&&"A"!==t.nodeName.toUpperCase();)t=t.parentNode;return t}let nk,rk=1;const ik="undefined"!=typeof history?history:{pushState:()=>{},replaceState:()=>{},scrollRestoration:"auto"},ok={};let ak,sk;function uk(t){const e=Object.create(null);return t.length>0&&t.slice(1).split("&").forEach((t=>{const[,n,r=""]=/([^=]*)(?:=(.*))?/.exec(decodeURIComponent(t.replace(/\+/g," ")));"string"==typeof e[n]&&(e[n]=[e[n]]),"object"==typeof e[n]?e[n].push(r):e[n]=r})),e}function ck(t){if(t.origin!==location.origin)return null;if(!t.pathname.startsWith(ak))return null;let e=t.pathname.slice(ak.length);if(""===e&&(e="/"),!YN.some((t=>t.test(e))))for(let n=0;n<JN.length;n+=1){const r=JN[n],i=r.pattern.exec(e);if(i){const n=uk(t.search),o=r.parts[r.parts.length-1],a=o.params?o.params(i):{},s={host:location.host,path:e,query:n,params:a};return{href:t.href,route:r,match:i,page:s}}}}function hk(t){if(1!==function(t){return null===t.which?t.button:t.which}(t))return;if(t.metaKey||t.ctrlKey||t.shiftKey||t.altKey)return;if(t.defaultPrevented)return;const e=ek(t.target);if(!e)return;if(!e.href)return;const n="object"==typeof e.href&&"SVGAnimatedString"===e.href.constructor.name,r=String(n?e.href.baseVal:e.href);if(r===location.href)return void(location.hash||t.preventDefault());if(e.hasAttribute("download")||"external"===e.getAttribute("rel"))return;if(n?e.target.baseVal:e.target)return;const i=new URL(r);if(i.pathname===location.pathname&&i.search===location.search)return;const o=ck(i);if(o){pk(o,null,e.hasAttribute("sapper:noscroll"),i.hash),t.preventDefault(),ik.pushState({id:nk},"",i.href)}}function lk(){return{x:pageXOffset,y:pageYOffset}}function fk(t){if(ok[nk]=lk(),t.state){const e=ck(new URL(location.href));e?pk(e,t.state.id):location.href=location.href}else!function(t){rk=t}(rk+1),function(t){nk=t}(rk),ik.replaceState({id:nk},"",location.href)}function pk(t,e,n,r){return tk(this,void 0,void 0,(function*(){const i=!!e;if(i)nk=e;else{const t=lk();ok[nk]=t,nk=e=++rk,ok[nk]=n?t:{x:0,y:0}}if(yield sk(t),document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),!n){let t,n=ok[e];r&&(t=document.getElementById(r.slice(1)),t&&(n={x:0,y:t.getBoundingClientRect().top+scrollY})),ok[nk]=n,i||t?scrollTo(n.x,n.y):scrollTo(0,0)}}))}function dk(t){let e=t.baseURI;if(!e){const n=t.getElementsByTagName("base");e=n.length?n[0].href:t.URL}return e}let vk,gk=null;function yk(t){const e=ek(t.target);e&&"prefetch"===e.rel&&function(t){const e=ck(new URL(t,dk(document)));if(e)gk&&t===gk.href||(gk={href:t,promise:xk(e)}),gk.promise}(e.href)}function mk(t){clearTimeout(vk),vk=setTimeout((()=>{yk(t)}),20)}function bk(t,e={noscroll:!1,replaceState:!1}){const n=ck(new URL(t,dk(document)));return n?(ik[e.replaceState?"replaceState":"pushState"]({id:nk},"",t),pk(n,null,e.noscroll)):(location.href=t,new Promise((()=>{})))}const _k="undefined"!=typeof __SAPPER__&&__SAPPER__;let wk,Ek,Ik,Tk=!1,Sk=[],Ck="{}";const Nk={page:function(t){const e=ft(t);let n=!0;return{notify:function(){n=!0,e.update((t=>t))},set:function(t){n=!1,e.set(t)},subscribe:function(t){let r;return e.subscribe((e=>{(void 0===r||n&&e!==r)&&t(r=e)}))}}}({}),preloading:ft(null),session:ft(_k&&_k.session)};let kk,Ak,Pk;function Ok(t,e){const{error:n}=t;return Object.assign({error:n},e)}function Rk(t){return tk(this,void 0,void 0,(function*(){wk&&Nk.preloading.set(!0);const e=function(t){return gk&&gk.href===t.href?gk.promise:xk(t)}(t),n=Ek={},r=yield e,{redirect:i}=r;if(n===Ek)if(i)yield bk(i.location,{replaceState:!0});else{const{props:e,branch:n}=r;yield Dk(n,e,Ok(e,t.page))}}))}function Dk(t,e,n){return tk(this,void 0,void 0,(function*(){Nk.page.set(n),Nk.preloading.set(!1),wk?wk.$set(e):(e.stores={page:{subscribe:Nk.page.subscribe},preloading:{subscribe:Nk.preloading.subscribe},session:Nk.session},e.level0={props:yield Ik},e.notify=Nk.page.notify,wk=new QN({target:Pk,props:e,hydrate:!0})),Sk=t,Ck=JSON.stringify(n.query),Tk=!0,Ak=!1}))}function xk(t){return tk(this,void 0,void 0,(function*(){const{route:e,page:n}=t,r=n.path.split("/").filter(Boolean);let i=null;const o={error:null,status:200,segments:[r[0]]},a={fetch:(t,e)=>fetch(t,e),redirect:(t,e)=>{if(i&&(i.statusCode!==t||i.location!==e))throw new Error("Conflicting redirects");i={statusCode:t,location:e}},error:(t,e)=>{o.error="string"==typeof e?new Error(e):e,o.status=t}};if(!Ik){const t=FN||(()=>({}));Ik=_k.preloaded[0]||t.call(a,{host:n.host,path:n.path,query:n.query,params:{}},kk)}let s,u=1;try{const i=JSON.stringify(n.query),c=e.pattern.exec(n.path);let h=!1;s=yield Promise.all(e.parts.map(((e,s)=>tk(this,void 0,void 0,(function*(){const l=r[s];if(function(t,e,n,r){if(r!==Ck)return!0;const i=Sk[t];return!!i&&(e!==i.segment||!(!i.match||JSON.stringify(i.match.slice(1,t+2))===JSON.stringify(n.slice(1,t+2)))||void 0)}(s,l,c,i)&&(h=!0),o.segments[u]=r[s+1],!e)return{segment:l};const f=u++;if(!Ak&&!h&&Sk[s]&&Sk[s].part===e.i)return Sk[s];h=!1;const{default:p,preload:d}=yield XN[e.i].js();let v;return v=Tk||!_k.preloaded[s+1]?d?yield d.call(a,{host:n.host,path:n.path,query:n.query,params:e.params?e.params(t.match):{}},kk):{}:_k.preloaded[s+1],o[`level${f}`]={component:p,props:v,segment:l,match:c,part:e.i}})))))}catch(t){o.error=t,o.status=500,s=[]}return{redirect:i,props:o,branch:s}}))}Nk.session.subscribe((t=>tk(void 0,void 0,void 0,(function*(){if(kk=t,!Tk)return;Ak=!0;const e=ck(new URL(location.href)),n=Ek={},{redirect:r,props:i,branch:o}=yield xk(e);n===Ek&&(r?yield bk(r.location,{replaceState:!0}):yield Dk(o,i,Ok(i,e.page)))}))));const Lk=()=>{return t=pt,D().$$.context.get(t);var t};var Mk,Fk,Uk;Sn.initializeApp({apiKey:"AIzaSyC2cPPtO7Tn3NiM75YRLbPZJVTSVuLXFV8",authDomain:"medz-b5241.firebaseapp.com",databaseURL:"https://medz-b5241.firebaseio.com",projectId:"medz-b5241",storageBucket:"medz-b5241.appspot.com",messagingSenderId:"27613484189",appId:"1:427613484189:web:73287cbc764fc8cd"}),Mk={target:document.querySelector("#sapper")},Fk=Mk.target,Pk=Fk,Uk=_k.baseUrl,ak=Uk,sk=Rk,"scrollRestoration"in ik&&(ik.scrollRestoration="manual"),addEventListener("beforeunload",(()=>{ik.scrollRestoration="auto"})),addEventListener("load",(()=>{ik.scrollRestoration="manual"})),addEventListener("click",hk),addEventListener("popstate",fk),addEventListener("touchstart",yk),addEventListener("mousemove",mk),_k.error?Promise.resolve().then((()=>function(){const{host:t,pathname:e,search:n}=location,{session:r,preloaded:i,status:o,error:a}=_k;Ik||(Ik=i&&i[0]);const s={error:a,status:o,session:r,level0:{props:Ik},level1:{props:{status:o,error:a},component:WN},segments:i},u=uk(n);Dk([],s,{host:t,path:e,query:u,params:{},error:a})}())):Promise.resolve().then((()=>{const{hash:t,href:e}=location;ik.replaceState({id:rk},"",e);const n=ck(new URL(location.href));if(n)return pk(n,rk,!0,t)}));export{EN as $,Sn as A,bk as B,P as C,t as D,y as E,L as F,ie as G,h as H,A as I,U as J,vt as K,pN as L,_ as M,v as N,dt as O,_N as P,bN as Q,x as R,ht as S,mN as T,yt as U,F as V,V as W,j_ as X,U_ as Y,fN as Z,wN as _,I as a,IN as a0,mt as a1,M as a2,hN as a3,dN as a4,yN as a5,vN as a6,gN as a7,S as b,T as c,d,g as e,E as f,p as g,f as h,ct as i,N as j,it as k,ot as l,at as m,tt as n,et as o,st as p,b as q,C as r,a as s,m as t,k as u,w as v,J as w,Z as x,i as y,gt as z};

import __inject_styles from './inject_styles.5607aec6.js';