function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function r(){return Object.create(null)}function i(t){t.forEach(n)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}function u(t,n,r,i){return t[1]&&i?e(r.ctx.slice(),t[1](i(n))):r.ctx}function c(t,e,n,r,i,o,s){const a=function(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}(e,r,i,o);if(a){const i=u(e,n,r,s);t.p(i,a)}}function h(t){return null==t?"":t}function l(t,e,n=e){return t.set(n),e}function f(t,e){t.appendChild(e)}function p(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function v(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function y(t){return document.createElement(t)}function g(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function m(t){return document.createTextNode(t)}function b(){return m(" ")}function _(){return m("")}function w(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function E(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function I(t){return Array.from(t.childNodes)}function T(t,e,n,r){for(let r=0;r<t.length;r+=1){const i=t[r];if(i.nodeName===e){let e=0;const o=[];for(;e<i.attributes.length;){const t=i.attributes[e++];n[t.name]||o.push(t.name)}for(let t=0;t<o.length;t++)i.removeAttribute(o[t]);return t.splice(r,1)[0]}}return r?g(e):y(e)}function S(t,e){for(let n=0;n<t.length;n+=1){const r=t[n];if(3===r.nodeType)return r.data=""+e,t.splice(n,1)[0]}return m(e)}function C(t){return S(t," ")}function N(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function A(t,e){t.value=null==e?"":e}function k(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function P(t,e=document.body){return Array.from(e.querySelectorAll(t))}let O;function R(t){O=t}function D(){if(!O)throw new Error("Function called outside component initialization");return O}function x(t){D().$$.on_mount.push(t)}function L(){const t=D();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const i=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);r.slice().forEach((e=>{e.call(t,i)}))}}}const M=[],F=[],U=[],j=[],V=Promise.resolve();let q=!1;function B(t){U.push(t)}let W=!1;const H=new Set;function K(){if(!W){W=!0;do{for(let t=0;t<M.length;t+=1){const e=M[t];R(e),G(e.$$)}for(R(null),M.length=0;F.length;)F.pop()();for(let t=0;t<U.length;t+=1){const e=U[t];H.has(e)||(H.add(e),e())}U.length=0}while(M.length);for(;j.length;)j.pop()();q=!1,W=!1,H.clear()}}function G(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(B)}}const z=new Set;let Q;function $(){Q={r:0,c:[],p:Q}}function Y(){Q.r||i(Q.c),Q=Q.p}function X(t,e){t&&t.i&&(z.delete(t),t.i(e))}function J(t,e,n,r){if(t&&t.o){if(z.has(t))return;z.add(t),Q.c.push((()=>{z.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function Z(t,e){const n={},r={},i={$$scope:1};let o=t.length;for(;o--;){const s=t[o],a=e[o];if(a){for(const t in s)t in a||(r[t]=1);for(const t in a)i[t]||(n[t]=a[t],i[t]=1);t[o]=a}else for(const t in s)i[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}function tt(t){return"object"==typeof t&&null!==t?t:{}}function et(t){t&&t.c()}function nt(t,e){t&&t.l(e)}function rt(t,e,r){const{fragment:s,on_mount:a,on_destroy:u,after_update:c}=t.$$;s&&s.m(e,r),B((()=>{const e=a.map(n).filter(o);u?u.push(...e):i(e),t.$$.on_mount=[]})),c.forEach(B)}function it(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ot(t,e){-1===t.$$.dirty[0]&&(M.push(t),q||(q=!0,V.then(K)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function st(e,n,o,s,a,u,c=[-1]){const h=O;R(e);const l=n.props||{},f=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:a,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:r(),dirty:c,skip_bound:!1};let p=!1;if(f.ctx=o?o(e,l,((t,n,...r)=>{const i=r.length?r[0]:n;return f.ctx&&a(f.ctx[t],f.ctx[t]=i)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](i),p&&ot(e,t)),n})):[],f.update(),p=!0,i(f.before_update),f.fragment=!!s&&s(f.ctx),n.target){if(n.hydrate){const t=I(n.target);f.fragment&&f.fragment.l(t),t.forEach(d)}else f.fragment&&f.fragment.c();n.intro&&X(e.$$.fragment),rt(e,n.target,n.anchor),K()}R(h)}class at{$destroy(){it(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ut=[];function ct(e,n=t){let r;const i=[];function o(t){if(s(e,t)&&(e=t,r)){const t=!ut.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),ut.push(n,e)}if(t){for(let t=0;t<ut.length;t+=2)ut[t][0](ut[t+1]);ut.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(s,a=t){const u=[s,a];return i.push(u),1===i.length&&(r=n(o)||t),s(e),()=>{const t=i.indexOf(u);-1!==t&&i.splice(t,1),0===i.length&&(r(),r=null)}}}}const ht={};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lt=function(){return(lt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ft(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var pt=function(t,e){return(pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var dt=!1,vt="${JSCORE_VERSION}",yt=function(t,e){if(!t)throw gt(e)},gt=function(t){return new Error("Firebase Database ("+vt+") INTERNAL ASSERT FAILED: "+t)},mt=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},bt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mt(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var h=s<<4&240|a>>2;if(r.push(h),64!==u){var l=a<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},_t=function(t){try{return bt.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function wt(t){return Et(void 0,t)}function Et(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=Et(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var It=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function St(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function Ct(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function Nt(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function At(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function kt(){return!0===dt}function Pt(){return"indexedDB"in self&&null!=indexedDB}function Ot(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}function Rt(){return!(!navigator||!navigator.cookieEnabled)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,xt.prototype.create),o}return function(t,e){function n(){this.constructor=t}pt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error),xt=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?Lt(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new Dt(i,a,r);return u},t}();function Lt(t,e){return t.replace(Mt,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var Mt=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(t){return JSON.parse(t)}function Ut(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=Ft(_t(o[0])||""),n=Ft(_t(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Vt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function qt(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function Bt(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wt(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ht=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782);i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function Kt(t,e){var n=new Gt(t,e);return n.subscribe.bind(n)}var Gt=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=zt),void 0===r.error&&(r.error=zt),void 0===r.complete&&(r.complete=zt);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function zt(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function $t(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}function Yt(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error($t(t,e,r)+"must be a valid function.")}function Xt(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error($t(t,e,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function Zt(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var te=function(){return(te=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ee(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function ne(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function re(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function ie(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(re(arguments[e]));return t}var oe=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),se=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new It;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=te({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService("[DEFAULT]")}catch(t){}try{for(var r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=re(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return ee(this,void 0,void 0,(function(){var t;return ne(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(ie(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae,ue=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new se(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function ce(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he,le=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(he||(he={}));var fe,pe={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},de=he.INFO,ve=((ae={})[he.DEBUG]="log",ae[he.VERBOSE]="log",ae[he.INFO]="info",ae[he.WARN]="warn",ae[he.ERROR]="error",ae),ye=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=ve[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,ce(["["+i+"]  "+t.name+":"],n))}},ge=function(){function t(t){this.name=t,this._logLevel=de,this._logHandler=ye,this._userLogHandler=null,le.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in he))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?pe[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ce([this,he.DEBUG],t)),this._logHandler.apply(this,ce([this,he.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ce([this,he.VERBOSE],t)),this._logHandler.apply(this,ce([this,he.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ce([this,he.INFO],t)),this._logHandler.apply(this,ce([this,he.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ce([this,he.WARN],t)),this._logHandler.apply(this,ce([this,he.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ce([this,he.ERROR],t)),this._logHandler.apply(this,ce([this,he.ERROR],t))},t}();function me(t){le.forEach((function(e){e.setLogLevel(t)}))}var be,_e=((fe={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",fe["bad-app-name"]="Illegal App name: '{$appName}",fe["duplicate-app"]="Firebase App named '{$appName}' already exists",fe["app-deleted"]="Firebase App named '{$appName}' already deleted",fe["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",fe["invalid-log-argument"]="First argument to `onLog` must be null or a function.",fe),we=new xt("app","Firebase",_e),Ee=((be={})["@firebase/app"]="fire-core",be["@firebase/analytics"]="fire-analytics",be["@firebase/auth"]="fire-auth",be["@firebase/database"]="fire-rtdb",be["@firebase/functions"]="fire-fn",be["@firebase/installations"]="fire-iid",be["@firebase/messaging"]="fire-fcm",be["@firebase/performance"]="fire-perf",be["@firebase/remote-config"]="fire-rc",be["@firebase/storage"]="fire-gcs",be["@firebase/firestore"]="fire-fst",be["fire-js"]="fire-js",be["firebase-wrapper"]="fire-js-all",be),Ie=new ge("@firebase/app"),Te=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=wt(t),this.container=new ue(e.name),this._addComponent(new oe("app",(function(){return o}),"PUBLIC"));try{for(var s=ft(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){Ie.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw we.create("app-deleted",{appName:this.name_})},t}();Te.prototype.name&&Te.prototype.options||Te.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Se(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw we.create("bad-app-name",{appName:String(s)});if(Vt(e,s))throw we.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=Ee[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Ie.warn(u.join(" "))}o(new oe(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:me,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw we.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=pe[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:he[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=le;r<i.length;r++)n(i[r])}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!Vt(e,t=t||"[DEFAULT]"))throw we.create("no-app",{appName:t});return e[t]}function o(o){var s,a,u=o.name;if(n.has(u))return Ie.debug("There were multiple attempts to register component "+u+"."),"PUBLIC"===o.type?r[u]:null;if(n.set(u,o),"PUBLIC"===o.type){var c=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[u])throw we.create("invalid-app-argument",{appName:u});return t[u]()};void 0!==o.serviceProps&&Et(c,o.serviceProps),r[u]=c,t.prototype[u]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,u);return n.apply(this,o.multipleInstances?t:[])}}try{for(var h=ft(Object.keys(e)),l=h.next();!l.done;l=h.next()){var f=l.value;e[f]._addComponent(o)}}catch(t){s={error:t}}finally{try{l&&!l.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return"PUBLIC"===o.type?r[u]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce=function t(){var e=Se(Te);return e.INTERNAL=lt(lt({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Et(e,t)},createSubscribe:Kt,ErrorFactory:xt,deepExtend:Et}),e}(),Ne=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Ae=self.firebase.SDK_VERSION;Ae&&Ae.indexOf("LITE")>=0&&Ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ke=Ce.initializeApp;Ce.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ct()&&Ie.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),ke.apply(void 0,t)};var Pe=Ce;!function(t,e){t.INTERNAL.registerComponent(new oe("platform-logger",(function(t){return new Ne(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.13",e),t.registerVersion("fire-js","")}(Pe),function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.v),reject:t(this.g)}},e.prototype.v=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.m(t):this.h(t)}},e.prototype.m=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Pa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Pa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Pa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),s=r.next();!s.done;s=r.next())o(s.value).Pa(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){function i(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,o(r.value).Pa(i(s.length-1),e),r=n.next()}while(!r.done)}))},e}));var o=o||{},s=this||self,a=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&a.test(t)?t:""}function h(){}function l(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==l(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),y=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function m(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:m).apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var w=Date.now;function E(t,e){function n(){}n.prototype=e.prototype,t.$a=e.prototype,t.prototype=new n,t.prototype.constructor=t}function I(t){return t}function T(t,e,n){this.code=N+t,this.message=e||A[t]||"",this.a=n||null}function S(t){var e=t&&t.code;return e?new T(e.substring(N.length),t.message,t.serverResponse):null}E(T,Error),T.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},T.prototype.toJSON=function(){return this.w()};var C,N="auth/",A={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},k={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function P(t){for(var e in k)if(k[e].id===t)return{firebaseEndpoint:(t=k[e]).Sa,secureTokenEndpoint:t.Ya,identityPlatformEndpoint:t.Va};return null}function O(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function R(t){if(Error.captureStackTrace)Error.captureStackTrace(this,R);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function D(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");R.call(this,n+t[r])}function x(t,e){throw new D("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function L(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function M(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function F(){this.b=this.a=null}C=P("__EID__")?"__EID__":void 0,E(R,Error),R.prototype.name="CustomError",E(D,R),D.prototype.name="AssertionError",L.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var U=new L((function(){return new V}),(function(t){t.reset()}));function j(){var t=me,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function V(){this.next=this.b=this.a=null}F.prototype.add=function(t,e){var n=U.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},V.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},V.prototype.reset=function(){this.next=this.b=this.a=null};var q=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},B=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var W=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},H=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},K=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function G(t,e){return 0<=q(t,e)}function z(t,e){var n;return(n=0<=(e=q(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Q(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function $(t){return Array.prototype.concat.apply([],arguments)}function Y(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var X,J=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},Z=/&/g,tt=/</g,et=/>/g,nt=/"/g,rt=/'/g,it=/\x00/g,ot=/[\x00&<>"']/;function st(t,e){return-1!=t.indexOf(e)}function at(t,e){return t<e?-1:t>e?1:0}t:{var ut=s.navigator;if(ut){var ct=ut.userAgent;if(ct){X=ct;break t}}X=""}function ht(t){return st(X,t)}function lt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ft(t){for(var e in t)return!1;return!0}function pt(t){var e,n={};for(e in t)n[e]=t[e];return n}var dt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<dt.length;o++)n=dt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function yt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(d(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;x("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function gt(t,e){this.a=t===wt&&e||"",this.b=_t}function mt(t){return t instanceof gt&&t.constructor===gt&&t.b===_t?t.a:(x("expected object of type Const, got '"+t+"'"),"type_error:Const")}gt.prototype.sa=!0,gt.prototype.ra=function(){return this.a},gt.prototype.toString=function(){return"Const{"+this.a+"}"};var bt,_t={},wt={};function Et(){if(void 0===bt){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:I,createScript:I,createScriptURL:I})}catch(t){s.console&&s.console.error(t.message)}bt=t}else bt=t}return bt}function It(t,e){this.a=e===At?t:""}function Tt(t){return t instanceof It&&t.constructor===It?t.a:(x("expected object of type TrustedResourceUrl, got '"+t+"' of type "+l(t)),"type_error:TrustedResourceUrl")}function St(t,e){var n=mt(t);if(!Nt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=Et();return new It(t=e?e.createScriptURL(t):t,At)}(t=n.replace(Ct,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof gt?mt(t):encodeURIComponent(String(t))})))}It.prototype.sa=!0,It.prototype.ra=function(){return this.a.toString()},It.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ct=/%{(\w+)}/g,Nt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,At={};function kt(t,e){this.a=e===Mt?t:""}function Pt(t){return t instanceof kt&&t.constructor===kt?t.a:(x("expected object of type SafeUrl, got '"+t+"' of type "+l(t)),"type_error:SafeUrl")}kt.prototype.sa=!0,kt.prototype.ra=function(){return this.a.toString()},kt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ot=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Rt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Dt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function xt(t){if(t instanceof kt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Dt.test(t))t=new kt(t,Mt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Rt);t=e&&Ot.test(e[1])?new kt(t,Mt):null}return t}function Lt(t){return t instanceof kt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Dt.test(t)||(t="about:invalid#zClosurez"),new kt(t,Mt))}var Mt={},Ft=new kt("about:invalid#zClosurez",Mt);function Ut(t,e,n){this.a=n===jt?t:""}Ut.prototype.sa=!0,Ut.prototype.ra=function(){return this.a.toString()},Ut.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var jt={};function Vt(t,e,n,r){return t=t instanceof kt?t:Lt(t),e=e||s,n=n instanceof gt?mt(n):n||"",e.open(Pt(t),n,r,void 0)}function qt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Bt(t){return ot.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(Z,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(tt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(et,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(nt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(rt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(it,"&#0;"))),t}function Wt(t){return Wt[" "](t),t}Wt[" "]=h;var Ht,Kt,Gt=ht("Opera"),zt=ht("Trident")||ht("MSIE"),Qt=ht("Edge"),$t=Qt||zt,Yt=ht("Gecko")&&!(st(X.toLowerCase(),"webkit")&&!ht("Edge"))&&!(ht("Trident")||ht("MSIE"))&&!ht("Edge"),Xt=st(X.toLowerCase(),"webkit")&&!ht("Edge");function Jt(){var t=s.document;return t?t.documentMode:void 0}t:{var Zt="",te=(Kt=X,Yt?/rv:([^\);]+)(\)|;)/.exec(Kt):Qt?/Edge\/([\d\.]+)/.exec(Kt):zt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Kt):Xt?/WebKit\/(\S+)/.exec(Kt):Gt?/(?:Version)[ \/]?(\S+)/.exec(Kt):void 0);if(te&&(Zt=te?te[1]:""),zt){var ee=Jt();if(null!=ee&&ee>parseFloat(Zt)){Ht=String(ee);break t}}Ht=Zt}var ne,re={};function ie(t){return function(t,e){var n=re;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=J(String(Ht)).split("."),r=J(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=at(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||at(0==s[2].length,0==a[2].length)||at(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(s.document&&zt){var oe=Jt();ne=oe||(parseInt(Ht,10)||void 0)}else ne=void 0;var se=ne;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Kt){}var ae=!zt||9<=Number(se);function ue(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ce(t,e){lt(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:fe.hasOwnProperty(n)?t.setAttribute(fe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var he,le,fe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function pe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||d(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(d(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){s="function"==typeof o.item;break t}}s=!1}B(s?Y(o):o,r)}}}function de(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ve(t){s.setTimeout((function(){throw t}),0)}function ye(t,e){le||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);le=function(){t.then(be)}}else le=function(){var t=be;!p(s.setImmediate)||s.Window&&s.Window.prototype&&!ht("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(he||(he=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ht("Presto")&&(t=function(){var t=de(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ht("Trident")&&!ht("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Fb;n.Fb=null,t()}},function(t){r.next={Fb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),he(t)):s.setImmediate(t)}}(),ge||(le(),ge=!0),me.add(t,e)}var ge=!1,me=new F;function be(){for(var t;t=j();){try{t.a.call(t.b)}catch(t){ve(t)}M(U,t)}ge=!1}function _e(t,e){if(this.a=we,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,(function(t){Le(n,Ee,t)}),(function(t){if(!(t instanceof Be))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Le(n,Ie,t)}))}catch(t){Le(this,Ie,t)}}var we=0,Ee=2,Ie=3;function Te(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Te.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Se=new L((function(){return new Te}),(function(t){t.reset()}));function Ce(t,e,n){var r=Se.get();return r.g=t,r.b=e,r.f=n,r}function Ne(t){if(t instanceof _e)return t;var e=new _e(h);return Le(e,Ee,t),e}function Ae(t){return new _e((function(e,n){n(t)}))}function ke(t,e,n){Me(t,e,n,null)||ye(_(e,t))}function Oe(t){return new _e((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Ob:!0,value:o}:{Ob:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)ke(t[o],_(i,o,!0),_(i,o,!1));else e(r)}))}function Re(t,e){if(t.a==we)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==we&&1==r?Re(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ue(n),je(n,i,Ie,e)))}t.c=null}else Le(t,Ie,e)}function De(t,e){t.b||t.a!=Ee&&t.a!=Ie||Fe(t),t.f?t.f.next=e:t.b=e,t.f=e}function xe(t,e,n,r){var i=Ce(null,null,null);return i.a=new _e((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Be?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,De(t,i),i.a}function Le(t,e,n){t.a==we&&(t===n&&(e=Ie,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Me(n,t.Zc,t.$c,t)||(t.i=n,t.a=e,t.c=null,Fe(t),e!=Ie||n instanceof Be||function(t,e){t.g=!0,ye((function(){t.g&&qe.call(null,e)}))}(t,n)))}function Me(t,e,n,r){if(t instanceof _e)return De(t,Ce(e||h,n||null,r)),!0;if(O(t))return t.then(e,n,r),!0;if(d(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}function s(t){a||(a=!0,n.call(i,t))}var a=!1;try{e.call(t,s,o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Fe(t){t.h||(t.h=!0,ye(t.fc,t))}function Ue(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function je(t,e,n,r){if(n==Ie&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ve(e,n,r);else try{e.c?e.g.call(e.f):Ve(e,n,r)}catch(t){qe.call(null,t)}M(Se,e)}function Ve(t,e,n){e==Ee?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}_e.prototype.then=function(t,e,n){return xe(this,p(t)?t:null,p(e)?e:null,n)},_e.prototype.$goog_Thenable=!0,(t=_e.prototype).na=function(t,e){return(t=Ce(t,t,e)).c=!0,De(this,t),this},t.o=function(t,e){return xe(this,null,t,e)},t.cancel=function(t){if(this.a==we){var e=new Be(t);ye((function(){Re(this,e)}),this)}},t.Zc=function(t){this.a=we,Le(this,Ee,t)},t.$c=function(t){this.a=we,Le(this,Ie,t)},t.fc=function(){for(var t;t=Ue(this);)je(this,t,this.a,this.i);this.h=!1};var qe=ve;function Be(t){R.call(this,t)}function We(){this.xa=this.xa,this.oa=this.oa}E(Be,R),Be.prototype.name="cancel";function He(t){if(!t.xa&&(t.xa=!0,t.Da(),0))(function(t){Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++y)})(t)}We.prototype.xa=!1,We.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var Ke=Object.freeze||function(t){return t},Ge=!zt||9<=Number(se),ze=zt&&!ie("9"),Qe=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",h,e),s.removeEventListener("test",h,e)}catch(t){}return t}();function $e(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ye(t,e){if($e.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Yt){t:{try{Wt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Xe[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}$e.prototype.preventDefault=function(){this.defaultPrevented=!0},E(Ye,$e);var Xe=Ke({2:"touch",3:"pen",4:"mouse"});Ye.prototype.preventDefault=function(){Ye.$a.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ze)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Ye.prototype.g=function(){return this.a};var Je="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function tn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ua=i,this.key=++Ze,this.va=this.Oa=!1}function en(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Ua=null}function nn(t){this.src=t,this.a={},this.b=0}function rn(t,e){var n=e.type;n in t.a&&z(t.a[n],e)&&(en(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function on(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Ua==r)return i}return-1}nn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=on(t,e,r,i);return-1<s?(e=t[s],n||(e.Oa=!1)):((e=new tn(e,this.src,o,!!r,i)).Oa=n,t.push(e)),e};var sn="closure_lm_"+(1e6*Math.random()|0),an={};function un(t,e,n,r,i){if(r&&r.once)hn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=bn(n),t&&t[Je]?wn(t,e,n,d(r)?!!r.capture:!!r,i):cn(t,e,n,!1,r,i)}function cn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=d(i)?!!i.capture:!!i,a=gn(t);if(a||(t[sn]=a=new nn(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=yn,e=Ge?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Qe||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else n=bn(n),t&&t[Je]?En(t,e,n,d(r)?!!r.capture:!!r,i):cn(t,e,n,!0,r,i)}function ln(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=bn(n),t&&t[Je]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=on(o=t.a[e],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=gn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=on(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[Je])rn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=gn(e))?(rn(n,t),0==n.b&&(n.src=null,e[sn]=null)):en(t)}}}function pn(t){return t in an?an[t]:an[t]="on"+t}function dn(t,e,n,r){var i=!0;if((t=gn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=vn(o,r),i=i&&!1!==o)}return i}function vn(t,e){var n=t.listener,r=t.Ua||t.src;return t.Oa&&fn(t),n.call(r,e)}function yn(t,e){if(t.va)return!0;if(!Ge){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ye(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=dn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=dn(r[i],t,!1,e),n=n&&o}return n}return vn(t,new Ye(e,this))}function gn(t){return(t=t[sn])instanceof nn?t:null}var mn="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(t){return p(t)?t:(t[mn]||(t[mn]=function(e){return t.handleEvent(e)}),t[mn])}function _n(){We.call(this),this.v=new nn(this),this.$b=this,this.fb=null}function wn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function En(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function In(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Ua||s.src;s.Oa&&rn(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function Tn(t,e,n){if(p(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function Sn(t){var e=null;return new _e((function(n,r){-1==(e=Tn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw s.clearTimeout(e),t}))}function Cn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Nn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.V||"function"!=typeof t.V){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function An(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof An)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function kn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Pn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Pn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Pn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}E(_n,We),_n.prototype[Je]=!0,_n.prototype.addEventListener=function(t,e,n,r){un(this,t,e,n,r)},_n.prototype.removeEventListener=function(t,e,n,r){ln(this,t,e,n,r)},_n.prototype.dispatchEvent=function(t){var e,n=this.fb;if(n)for(e=[];n;n=n.fb)e.push(n);n=this.$b;var r=t.type||t;if("string"==typeof t)t=new $e(t,n);else if(t instanceof $e)t.target=t.target||n;else{var i=t;vt(t=new $e(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=In(s,r,!0,t)&&i}if(i=In(s=t.b=n,r,!0,t)&&i,i=In(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=In(s=t.b=e[o],r,!1,t)&&i;return i},_n.prototype.Da=function(){if(_n.$a.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)en(n[r]);delete e.a[t],e.b--}}this.fb=null},(t=An.prototype).V=function(){kn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return kn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Pn(this.b,t)?this.b[t]:e},t.set=function(t,e){Pn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var On=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rn(t,e){var n;this.a=this.l=this.f="",this.g=null,this.h=this.c="",this.i=!1,t instanceof Rn?(this.i=void 0!==e?e:t.i,Dn(this,t.f),this.l=t.l,this.a=t.a,xn(this,t.g),this.c=t.c,Ln(this,tr(t.b)),this.h=t.h):t&&(n=String(t).match(On))?(this.i=!!e,Dn(this,n[1]||"",!0),this.l=Vn(n[2]||""),this.a=Vn(n[3]||"",!0),xn(this,n[4]),this.c=Vn(n[5]||"",!0),Ln(this,n[6]||"",!0),this.h=Vn(n[7]||"")):(this.i=!!e,this.b=new Qn(null,this.i))}function Dn(t,e,n){t.f=n?Vn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function xn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Ln(t,e,n){e instanceof Qn?(t.b=e,function(t,e){e&&!t.f&&($n(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Xn(this,e),Zn(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=qn(e,Gn)),t.b=new Qn(e,t.i))}function Mn(t,e,n){t.b.set(e,n)}function Fn(t,e){return t.b.get(e)}function Un(t){return t instanceof Rn?new Rn(t):new Rn(t,void 0)}function jn(t,e,n,r){var i=new Rn(null,void 0);return t&&Dn(i,t),e&&(i.a=e),n&&xn(i,n),r&&(i.c=r),i}function Vn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Bn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Bn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Rn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(qn(e,Wn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(qn(e,Wn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.c)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(qn(n,"/"==n.charAt(0)?Kn:Hn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",qn(n,zn)),t.join("")},Rn.prototype.resolve=function(t){var e=new Rn(this),n=!!t.f;n?Dn(e,t.f):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.c;if(n)xn(e,t.g);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.a&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(st(i,"./")||st(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.b.toString(),n?Ln(e,tr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Wn=/[#\/\?@]/g,Hn=/[#\?:]/g,Kn=/[#\?]/g,Gn=/[#\?@]/g,zn=/#/g;function Qn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function $n(t){t.a||(t.a=new An,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Yn(t){var e=Nn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Qn(null,void 0);t=Cn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Zn(n,i,o):n.add(i,o)}return n}function Xn(t,e){$n(t),e=er(t,e),Pn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Pn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&kn(t)))}function Jn(t,e){return $n(t),e=er(t,e),Pn(t.a.b,e)}function Zn(t,e,n){Xn(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),Y(n)),t.b+=n.length)}function tr(t){var e=new Qn;return e.c=t.c,t.a&&(e.a=new An(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return ir(new rr,t,e),e.join("")}function rr(){}function ir(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ir(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),ar(r,n),n.push(":"),ir(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":ar(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Qn.prototype).add=function(t,e){$n(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){$n(this),this.a.forEach((function(n,r){B(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){$n(this);for(var t=this.a.V(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){$n(this);var e=[];if("string"==typeof t)Jn(this,t)&&(e=$(e,this.a.get(er(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=$(e,t[n])}return e},t.set=function(t,e){return $n(this),this.c=null,Jn(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var or={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},sr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ar(t,e){e.push('"',t.replace(sr,(function(t){var e=or[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),or[t]=e),e})),'"')}function ur(){var t=Ar();return zt&&!!se&&11==se||/Edge\/\d+/.test(t)}function cr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function hr(t,e){e=e||s.window;var n="about:blank";t&&(n=Pt(xt(t)||Ft)),e.location.href=n}function lr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<lr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function fr(t){return!!((t=(t||Ar()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function pr(t){t=t||s.window;try{t.close()}catch(t){}}function dr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Ar().toLowerCase(),r&&(e.target=r,st(n,"crios/")&&(e.target="_blank")),Sr(Ar())==Ir&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof kt?n:xt(void 0!==n.href?n.href:String(n))||Ft,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ht("iPhone")&&!ht("iPod")&&!ht("iPad")||ht("iPad")||ht("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(yt(s=de(document,"A"),"HTMLAnchorElement"),e=e instanceof kt?e:Lt(e),s.href=Pt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Vt("",r,n,s),t=Pt(e),s&&($t&&st(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Bt(t)+'">',t=new Ut(t=(r=Et())?r.createHTML(t):t,null,jt),r=s.document)&&(r.write(function(t){return t instanceof Ut&&t.constructor===Ut?t.a:(x("expected object of type SafeHtml, got '"+t+"' of type "+l(t)),"type_error:SafeHtml")}(t)),r.close())):(s=Vt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var vr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yr=/^[^@]+@[^@]+$/;function gr(){var t=null;return new _e((function(e){"complete"==s.document.readyState?e():(t=function(){e()},hn(window,"load",t))})).o((function(e){throw ln(window,"load",t),e}))}function mr(t){return t=t||Ar(),!("file:"!==Dr()&&"ionic:"!==Dr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function br(){var t=s.window;try{return!(!t||t==t.top)}catch(t){return!1}}function _r(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function wr(){return Pe.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Pe.INTERNAL.hasOwnProperty("node")?"Node":_r()?"Worker":"Browser"}function Er(){var t=wr();return"ReactNative"===t||"Node"===t}var Ir="Firefox",Tr="Chrome";function Sr(t){var e=t.toLowerCase();return st(e,"opera/")||st(e,"opr/")||st(e,"opios/")?"Opera":st(e,"iemobile")?"IEMobile":st(e,"msie")||st(e,"trident/")?"IE":st(e,"edge/")?"Edge":st(e,"firefox/")?Ir:st(e,"silk/")?"Silk":st(e,"blackberry")?"Blackberry":st(e,"webos")?"Webos":!st(e,"safari/")||st(e,"chrome/")||st(e,"crios/")||st(e,"android")?!st(e,"chrome/")&&!st(e,"crios/")||st(e,"edge/")?st(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Tr:"Safari"}var Cr={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};function Nr(t,e){e=e||[];var n,r=[],i={};for(n in Cr)i[Cr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=wr())?r=Sr(i=Ar()):"Worker"===r&&(r=Sr(i=Ar())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Ar(){return s.navigator&&s.navigator.userAgent||""}function kr(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Pr(){try{var t=s.localStorage,e=Ur();if(t)return t.setItem(e,"1"),t.removeItem(e),!ur()||!!s.indexedDB}catch(t){return _r()&&!!s.indexedDB}return!1}function Or(){return(Rr()||"chrome-extension:"===Dr()||mr())&&!Er()&&Pr()&&!_r()}function Rr(){return"http:"===Dr()||"https:"===Dr()}function Dr(){return s.location&&s.location.protocol||null}function xr(t){return!fr(t=t||Ar())&&Sr(t)!=Ir}function Lr(t){return void 0===t?null:nr(t)}function Mr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Fr(t){if(null!==t)return JSON.parse(t)}function Ur(t){return t||Math.floor(1e9*Math.random()).toString()}function jr(t){return"Safari"!=Sr(t=t||Ar())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Vr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function qr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Ar(),e=wr(),this.b=fr(t)||"ReactNative"===e}function Br(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Wr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Hr(){return!(!kr("fireauth.oauthhelper",s)&&!kr("fireauth.iframe",s))}qr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Rr()&&"chrome-extension:"!==Dr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Kr,Gr={};function zr(t){Gr[t]||(Gr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Qr={};Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:2}),Kr=2==Qr.abcd}catch(Kt){Kr=!1}function $r(t,e,n){Kr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Yr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&$r(t,n,e[n])}function Xr(t){var e={};return Yr(e,t),e}function Jr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)$r(e,n,Jr(t[n]));return e}function Zr(t){var e=t&&(t[ii]?"phone":null);if(!(e&&t&&t[ri]))throw new T("internal-error","Internal assert: invalid MultiFactorInfo object");$r(this,"uid",t[ri]),$r(this,"displayName",t[ei]||null);var n=null;t[ni]&&(n=new Date(t[ni]).toUTCString()),$r(this,"enrollmentTime",n),$r(this,"factorId",e)}function ti(t){try{var e=new oi(t)}catch(t){e=null}return e}Zr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ei="displayName",ni="enrolledAt",ri="mfaEnrollmentId",ii="phoneInfo";function oi(t){Zr.call(this,t),$r(this,"phoneNumber",t[ii])}function si(t){var e={},n=t[hi],r=t[fi],i=t[pi];if(t=ti(t[li]),!i||i!=ui&&i!=ci&&!n||i==ci&&!r||i==ai&&!t)throw Error("Invalid checkActionCode response!");i==ci?(e[vi]=n||null,e[gi]=n||null,e[di]=r):(e[vi]=r||null,e[gi]=r||null,e[di]=n||null),e[yi]=t||null,$r(this,bi,i),$r(this,mi,Jr(e))}E(oi,Zr),oi.prototype.w=function(){var t=oi.$a.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ai="REVERT_SECOND_FACTOR_ADDITION",ui="EMAIL_SIGNIN",ci="VERIFY_AND_CHANGE_EMAIL",hi="email",li="mfaInfo",fi="newEmail",pi="requestType",di="email",vi="fromEmail",yi="multiFactorInfo",gi="previousEmail",mi="data",bi="operation";function _i(t){var e=Fn(t=Un(t),wi)||null,n=Fn(t,Ei)||null,r=Fn(t,Si)||null;if(r=r&&Ni[r]||null,!e||!n||!r)throw new T("argument-error",wi+", "+Ei+"and "+Si+" are required in a valid action code URL.");Yr(this,{apiKey:e,operation:r,code:n,continueUrl:Fn(t,Ii)||null,languageCode:Fn(t,Ti)||null,tenantId:Fn(t,Ci)||null})}var wi="apiKey",Ei="oobCode",Ii="continueUrl",Ti="languageCode",Si="mode",Ci="tenantId",Ni={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ai,signIn:ui,verifyAndChangeEmail:ci,verifyEmail:"VERIFY_EMAIL"};function Ai(t){try{return new _i(t)}catch(t){return null}}function ki(t){var e=t[xi];if(void 0===e)throw new T("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new T("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Pi];if(n&&"object"==typeof n){e=n[Fi];var r=n[Li];if(n=n[Mi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new T("argument-error",Li+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new T("argument-error",Mi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new T("argument-error",Fi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new T("missing-android-pkg-name")}}else if(void 0!==n)throw new T("argument-error",Pi+" property must be a non null object when specified.");if(this.f=null,(e=t[Di])&&"object"==typeof e){if("string"==typeof(e=e[Ui])&&e.length)this.f=e;else if(void 0!==e)throw new T("argument-error",Ui+" property must be a non empty string when specified.")}else if(void 0!==e)throw new T("argument-error",Di+" property must be a non null object when specified.");if(void 0!==(e=t[Ri])&&"boolean"!=typeof e)throw new T("argument-error",Ri+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Oi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new T("argument-error",Oi+" property must be a non empty string when specified.");this.i=t||null}var Pi="android",Oi="dynamicLinkDomain",Ri="handleCodeInApp",Di="iOS",xi="url",Li="installApp",Mi="minimumVersion",Fi="packageName",Ui="bundleId";function ji(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Vi=null;function qi(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Vi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Vi){Vi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Vi[o]&&(Vi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e+=String.fromCharCode(t)})),e}function Bi(t){var e=Hi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Wi(t){try{return new Bi(t)}catch(t){return null}}function Hi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(qi(t))}catch(t){}return null}Bi.prototype.S=function(){return this.f},Bi.prototype.i=function(){return this.b},Bi.prototype.toString=function(){return this.g};var Ki="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Gi=["client_id","response_type","scope","redirect_uri","state"],zi={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:Gi},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:Gi},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:Gi},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:Ki},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}};function Qi(t){for(var e in zi)if(zi[e].fa==t)return zi[e];return null}function $i(t){var e={};e["facebook.com"]=to,e["google.com"]=no,e["github.com"]=eo,e["twitter.com"]=ro;var n=t&&t[Xi];try{if(n)return e[n]?new e[n](t):new Zi(t);if(void 0!==t[Yi])return new Ji(t)}catch(t){}return null}var Yi="idToken",Xi="providerId";function Ji(t){var e=t[Xi];if(!e&&t[Yi]){var n=Wi(t[Yi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),$r(this,"providerId",e),$r(this,"isNewUser",n)}function Zi(t){Ji.call(this,t),$r(this,"profile",Jr((t=Fr(t.rawUserInfo||"{}"))||{}))}function to(t){if(Zi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if(Zi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",this.profile&&this.profile.login||null)}function no(t){if(Zi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(Zi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",t.screenName||null)}function io(t){var e=Un(t),n=Fn(e,"link"),r=Fn(Un(n),"link");return e=Fn(e,"deep_link_id"),Fn(Un(e),"link")||e||r||n||t}function oo(t,e){if(!t&&!e)throw new T("internal-error","Internal assert: no raw session string available");if(t&&e)throw new T("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?so:ao}E(Zi,Ji),E(to,Zi),E(eo,Zi),E(no,Zi),E(ro,Zi);var so="enroll",ao="signin";function uo(){}function co(t,e){return t.then((function(t){if(t[Js]){var n=Wi(t[Js]);if(!n||e!=n.h)throw new T("user-mismatch");return t}throw new T("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==N+"user-not-found"?new T("user-mismatch"):t}))}function ho(t,e){if(!e)throw new T("internal-error","failed to construct a credential");this.a=e,$r(this,"providerId",t),$r(this,"signInMethod",t)}function lo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function fo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new ho(t.providerId,t.pendingToken)}catch(t){}return null}function po(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&$r(this,"idToken",e.idToken),e.accessToken&&$r(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&$r(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new T("internal-error","failed to construct a credential");$r(this,"accessToken",e.oauthToken),$r(this,"secret",e.oauthTokenSecret)}$r(this,"providerId",t),$r(this,"signInMethod",n)}function vo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Yn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function yo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new po(t.providerId,e,t.signInMethod)}catch(t){}}return null}function go(t,e){this.Pc=e||[],Yr(this,{providerId:t,isOAuthProvider:!0}),this.Hb={},this.ob=(Qi(t)||{}).Ja||null,this.nb=null}function mo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new T("argument-error",'SAML provider IDs must be prefixed with "saml."');go.call(this,t,[])}function bo(t){go.call(this,t,Gi),this.a=[]}function _o(){bo.call(this,"facebook.com")}function wo(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new _o).credential({accessToken:e})}function Eo(){bo.call(this,"github.com")}function Io(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new Eo).credential({accessToken:e})}function To(){bo.call(this,"google.com"),this.Ca("profile")}function So(t,e){var n=t;return d(t)&&(n=t.idToken,e=t.accessToken),(new To).credential({idToken:n,accessToken:e})}function Co(){go.call(this,"twitter.com",Ki)}function No(t,e){var n=t;if(d(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new T("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new po("twitter.com",n,"twitter.com")}function Ao(t,e,n){this.a=t,this.f=e,$r(this,"providerId","password"),$r(this,"signInMethod",n===Po.EMAIL_LINK_SIGN_IN_METHOD?Po.EMAIL_LINK_SIGN_IN_METHOD:Po.EMAIL_PASSWORD_SIGN_IN_METHOD)}function ko(t){return t&&t.email&&t.password?new Ao(t.email,t.password,t.signInMethod):null}function Po(){Yr(this,{providerId:"password",isOAuthProvider:!1})}function Oo(t,e){if(!(e=Ro(e)))throw new T("argument-error","Invalid email link!");return new Ao(t,e.code,Po.EMAIL_LINK_SIGN_IN_METHOD)}function Ro(t){return(t=Ai(t=io(t)))&&t.operation===ui?t:null}function Do(t){if(!(t.cb&&t.bb||t.La&&t.ea))throw new T("internal-error");this.a=t,$r(this,"providerId","phone"),this.fa="phone",$r(this,"signInMethod","phone")}function xo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return B(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Do(e)}return null}function Lo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.cb,code:t.a.bb}}function Mo(t){try{this.a=t||Pe.auth()}catch(t){throw new T("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Yr(this,{providerId:"phone",isOAuthProvider:!1})}function Fo(t,e){if(!t)throw new T("missing-verification-id");if(!e)throw new T("missing-verification-code");return new Do({cb:t,bb:e})}function Uo(t){if(t.temporaryProof&&t.phoneNumber)return new Do({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return So(o,n);case"facebook.com":return wo(n);case"github.com":return Io(n);case"twitter.com":return No(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new ho(e,s):new po(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new bo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function jo(t){if(!t.isOAuthProvider)throw new T("invalid-oauth-provider")}function Vo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new T("invalid-auth-event");if(this.g&&this.a)throw new T("invalid-auth-event");if(this.g&&!this.f)throw new T("invalid-auth-event")}function qo(t){return(t=t||{}).type?new Vo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&S(t.error),t.postBody,t.tenantId):null}function Bo(){this.b=null,this.a=[]}oo.prototype.Ha=function(){return this.a?Ne(this.a):Ne(this.b)},oo.prototype.w=function(){return this.type==so?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},uo.prototype.ja=function(){},uo.prototype.b=function(){},uo.prototype.c=function(){},uo.prototype.w=function(){},ho.prototype.ja=function(t){return _a(t,lo(this))},ho.prototype.b=function(t,e){var n=lo(this);return n.idToken=e,wa(t,n)},ho.prototype.c=function(t,e){return co(Ea(t,lo(this)),e)},ho.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},po.prototype.ja=function(t){return _a(t,vo(this))},po.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,wa(t,n)},po.prototype.c=function(t,e){return co(Ea(t,vo(this)),e)},po.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},go.prototype.Ka=function(t){return this.Hb=pt(t),this},E(mo,go),E(bo,go),bo.prototype.Ca=function(t){return G(this.a,t)||this.a.push(t),this},bo.prototype.Pb=function(){return Y(this.a)},bo.prototype.credential=function(t,e){var n;if(!(n=d(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new T("argument-error","credential failed: must provide the ID token and/or the access token.");return new po(this.providerId,n,this.providerId)},E(_o,bo),$r(_o,"PROVIDER_ID","facebook.com"),$r(_o,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),E(Eo,bo),$r(Eo,"PROVIDER_ID","github.com"),$r(Eo,"GITHUB_SIGN_IN_METHOD","github.com"),E(To,bo),$r(To,"PROVIDER_ID","google.com"),$r(To,"GOOGLE_SIGN_IN_METHOD","google.com"),E(Co,go),$r(Co,"PROVIDER_ID","twitter.com"),$r(Co,"TWITTER_SIGN_IN_METHOD","twitter.com"),Ao.prototype.ja=function(t){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Pa,{email:this.a,oobCode:this.f}):ru(t,Ja,{email:this.a,password:this.f})},Ao.prototype.b=function(t,e){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Oa,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Ha,{idToken:e,email:this.a,password:this.f})},Ao.prototype.c=function(t,e){return co(this.ja(t),e)},Ao.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Yr(Po,{PROVIDER_ID:"password"}),Yr(Po,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Yr(Po,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Do.prototype.ja=function(t){return t.eb(Lo(this))},Do.prototype.b=function(t,e){var n=Lo(this);return n.idToken=e,ru(t,tu,n)},Do.prototype.c=function(t,e){var n=Lo(this);return n.operation="REAUTH",co(t=ru(t,eu,n),e)},Do.prototype.w=function(){var t={providerId:"phone"};return this.a.cb&&(t.verificationId=this.a.cb),this.a.bb&&(t.verificationCode=this.a.bb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Mo.prototype.eb=function(t,e){var n=this.a.a;return Ne(e.verify()).then((function(r){if("string"!=typeof r)throw new T("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=d(t)?t.session:null,o=d(t)?t.phoneNumber:t;return(i&&i.type==so?i.Ha().then((function(t){return function(t,e){return ru(t,Ga,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==ao?i.Ha().then((function(e){return function(t,e){return ru(t,za,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,Ba,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new T("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Yr(Mo,{PROVIDER_ID:"phone"}),Yr(Mo,{PHONE_SIGN_IN_METHOD:"phone"}),Vo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Vo.prototype.S=function(){return this.h},Vo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Wo,Ho=null;function Ko(t){var e="unauthorized-domain",n=void 0,r=Un(t);t=r.a,"chrome-extension"==(r=r.f)?n=qt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=qt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",T.call(this,e,n)}function Go(t,e,n){T.call(this,t,n),(t=e||{}).Ib&&$r(this,"email",t.Ib),t.ea&&$r(this,"phoneNumber",t.ea),t.credential&&$r(this,"credential",t.credential),t.Yb&&$r(this,"tenantId",t.Yb)}function zo(t){if(t.code){var e=t.code||"";0==e.indexOf(N)&&(e=e.substring(N.length));var n={credential:Uo(t),Yb:t.tenantId};if(t.email)n.Ib=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new T(e,t.message||void 0);return new Go(e,n,t.message)}return null}function Qo(){}function $o(t){return t.c||(t.c=t.b())}function Yo(){}function Xo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Jo(){}function Zo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.pc,this),this.a.onerror=b(this.Rb,this),this.a.onprogress=b(this.qc,this),this.a.ontimeout=b(this.uc,this)}function ts(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function es(t,e,n){this.reset(t,e,n,void 0,void 0)}function ns(t){this.f=t,this.b=this.c=this.a=null}function rs(t,e){this.name=t,this.value=e}E(Ko,T),E(Go,T),Go.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&vt(t,e),t},Go.prototype.toJSON=function(){return this.w()},Qo.prototype.c=null,E(Yo,Qo),Yo.prototype.a=function(){var t=Xo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Yo.prototype.b=function(){var t={};return Xo(this)&&(t[0]=!0,t[1]=!0),t},Wo=new Yo,E(Jo,Qo),Jo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Zo;throw Error("Unsupported browser")},Jo.prototype.b=function(){return{}},(t=Zo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ts(this,4)},t.Rb=function(){this.status=500,this.response=this.responseText="",ts(this,4)},t.uc=function(){this.Rb()},t.qc=function(){this.status=200,ts(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},es.prototype.a=null,es.prototype.reset=function(t,e,n,r,i){delete this.a},rs.prototype.toString=function(){return this.name};var is=new rs("SEVERE",1e3),os=new rs("WARNING",900),ss=new rs("CONFIG",700),as=new rs("FINE",500);function us(t){return t.c?t.c:t.a?us(t.a):(x("Root logger has no level set."),null)}ns.prototype.log=function(t,e,n){if(t.value>=us(this).value)for(p(e)&&(e=e()),t=new es(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var cs={},hs=null;function ls(t){var e;if(hs||(hs=new ns(""),cs[""]=hs,hs.c=ss),!(e=cs[t])){e=new ns(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ls(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,cs[t]=e}return e}function fs(t,e){t&&t.log(as,e,void 0)}function ps(t){this.f=t}function ds(t){_n.call(this),this.u=t,this.h=void 0,this.readyState=vs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ls("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}E(ps,Qo),ps.prototype.a=function(){return new ds(this.f)},ps.prototype.b=function(t){return function(){return t}}({}),E(ds,_n);var vs=0;function ys(t){t.c.read().then(t.oc.bind(t)).catch(t.Ta.bind(t))}function gs(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ms(t)}function ms(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function bs(t){_n.call(this),this.headers=new An,this.O=t||null,this.c=!1,this.A=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.G=!1,this.g=0,this.s=null,this.m=_s,this.u=this.R=!1}(t=ds.prototype).open=function(t,e){if(this.readyState!=vs)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ms(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.tc.bind(this),this.Ta.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,gs(this)),this.readyState=vs},t.tc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ms(this)),this.a&&(this.readyState=3,ms(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ys(this)):t.text().then(this.sc.bind(this),this.Ta.bind(this)))))},t.oc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?gs(this):ms(this),3==this.readyState&&ys(this)}},t.sc=function(t){this.a&&(this.response=this.responseText=t,gs(this))},t.rc=function(t){this.a&&(this.response=t,gs(this))},t.Ta=function(t){var e=this.i;e&&e.log(os,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&gs(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(os,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(os,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ds.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),E(bs,_n);var _s="";bs.prototype.b=ls("goog.net.XhrIo");var ws=/^https?$/i,Es=["POST","PUT"];function Is(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.G=!1,t.c=!0,t.a=t.O?t.O.a():Wo.a(),t.A=t.O?$o(t.O):$o(Wo),t.a.onreadystatechange=b(t.Ub,t);try{fs(t.b,Rs(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return fs(t.b,Rs(t,"Error opening Xhr: "+e.message)),void Ss(t,e)}e=r||"";var o=new An(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)B(t,e,void 0);else for(var n=Nn(t),r=Cn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ts,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!G(Es,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{ks(t),0<t.g&&(t.u=function(t){return zt&&ie(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),fs(t.b,Rs(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=b(t.Ma,t)):t.s=Tn(t.Ma,t.g,t)),fs(t.b,Rs(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){fs(t.b,Rs(t,"Send error: "+e.message)),Ss(t,e)}}function Ts(t){return"content-type"==t.toLowerCase()}function Ss(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Cs(t),As(t)}function Cs(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ns(t){if(t.c&&void 0!==o)if(t.A[1]&&4==Ps(t)&&2==Os(t))fs(t.b,Rs(t,"Local request error detected and ignored"));else if(t.i&&4==Ps(t))Tn(t.Ub,0,t);else if(t.dispatchEvent("readystatechange"),4==Ps(t)){fs(t.b,Rs(t,"Request complete")),t.c=!1;try{var e,n=Os(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.l).match(On)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!ws.test(a?a.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ps(t)?t.a.statusText:""}catch(e){fs(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Os(t)+"]",Cs(t)}}finally{As(t)}}}function As(t,e){if(t.a){ks(t);var n=t.a,r=t.A[0]?h:null;t.a=null,t.A=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(is,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function ks(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function Ps(t){return t.a?t.a.readyState:0}function Os(t){try{return 2<Ps(t)?t.a.status:-1}catch(t){return-1}}function Rs(t,e){return e+" ["+t.P+" "+t.l+" "+Os(t)+"]"}function Ds(t){var e=Hs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.i=!1,this.h=0,this.b=null,this.l=0}function xs(t,e,n){t.a=!0,t.c=n,t.f=!e,Us(t)}function Ls(t){if(t.a){if(!t.m)throw new js(t);t.m=!1}}function Ms(t,e,n,r){t.g.push([e,n,r]),t.a&&Us(t)}function Fs(t){return K(t.g,(function(t){return p(t[1])}))}function Us(t){if(t.h&&t.a&&Fs(t)){var e=t.h,n=Bs[e];n&&(s.clearTimeout(n.a),delete Bs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(O(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Fs(t)||(n=!0)}}t.c=e,r&&(u=b(t.v,t,!0),r=b(t.v,t,!1),e instanceof Ds?(Ms(e,u,r),e.A=!0):e.then(u,r)),n&&(e=new qs(e),Bs[e.a]=e,t.h=e.a)}function js(){R.call(this)}function Vs(){R.call(this)}function qs(t){this.a=s.setTimeout(b(this.c,this),0),this.b=t}(t=bs.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",fs(this.b,Rs(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(fs(this.b,Rs(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),As(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),As(this,!0)),bs.$a.Da.call(this)},t.Ub=function(){this.xa||(this.N||this.i||this.f?Ns(this):this.Ic())},t.Ic=function(){Ns(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case _s:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(is,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return fs(this.b,"Can not get response: "+t.message),null}},Ds.prototype.cancel=function(t){if(this.a)this.c instanceof Ds&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.m=!0,this.a||(t=new Vs(this),Ls(this),xs(this,!1,t))}},Ds.prototype.v=function(t,e){this.i=!1,xs(this,t,e)},Ds.prototype.then=function(t,e,n){var r,i,o=new _e((function(t,e){r=t,i=e}));return Ms(this,r,(function(t){t instanceof Vs?o.cancel():i(t)})),o.then(t,e,n)},Ds.prototype.$goog_Thenable=!0,E(js,R),js.prototype.message="Deferred has already fired",js.prototype.name="AlreadyCalledError",E(Vs,R),Vs.prototype.message="Deferred was canceled",Vs.prototype.name="CanceledError",qs.prototype.c=function(){throw delete Bs[this.a],this.b};var Bs={};function Ws(t){var e,n=document,r=Tt(t).toString(),i=de(document,"SCRIPT"),o={Vb:i,Ma:void 0},a=new Ds(o);return e=window.setTimeout((function(){Ks(i,!0);var t=new Qs(zs,"Timeout reached for loading script "+r);Ls(a),xs(a,!1,t)}),5e3),o.Ma=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ks(i,!1,e),Ls(a),xs(a,!0,null))},i.onerror=function(){Ks(i,!0,e);var t=new Qs(Gs,"Error while loading script "+r);Ls(a),xs(a,!1,t)},vt(o={},{type:"text/javascript",charset:"UTF-8"}),ce(i,o),function(t,e){yt(t,"HTMLScriptElement"),t.src=Tt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=c(e.document):(null===u&&(u=c(s.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Hs(){if(this&&this.Vb){var t=this.Vb;t&&"SCRIPT"==t.tagName&&Ks(t,!0,this.Ma)}}function Ks(t,e,n){null!=n&&s.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Gs=0,zs=1;function Qs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),R.call(this,n),this.code=t}function $s(t){this.f=t}function Ys(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.v=t.secureTokenTimeout||Zs,this.g=pt(t.secureTokenHeaders||ta),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.m=t.firebaseTimeout||ea,this.a=pt(t.firebaseHeaders||na),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==wr(),!(n=s.XMLHttpRequest||n&&Pe.INTERNAL.node&&Pe.INTERNAL.node.XMLHttpRequest)&&!_r())throw new T("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,_r()?this.f=new ps(self):Er()?this.f=new $s(n):this.f=new Jo,this.b=null}E(Qs,R),E($s,Qo),$s.prototype.a=function(){return new this.f},$s.prototype.b=function(){return{}};var Xs,Js="idToken",Zs=new qr(3e4,6e4),ta={"Content-Type":"application/x-www-form-urlencoded"},ea=new qr(3e4,6e4),na={"Content-Type":"application/json"};function ra(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ia(t,e){e&&(t.l=oa("https://securetoken.googleapis.com/v1/token",e),t.h=oa("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=oa("https://identitytoolkit.googleapis.com/v2/",e))}function oa(t,e){return t=Un(t),e=Un(e.url),t.c=t.a+t.c,Dn(t,e.f),t.a=e.a,xn(t,e.g),t.toString()}function sa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function aa(t,e,n,r,i,o,a){(function(){var t=Ar();return!((t=Sr(t)!=Tr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||zt&&se&&!(9<se))})()||_r()?t=b(t.u,t):(Xs||(Xs=new _e((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{s[ca]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ms(t,null,e,void 0)}(Ws(St(ua,{onload:ca})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=b(t.s,t)),t(e,n,r,i,o,a)}Ys.prototype.S=function(){return this.b},Ys.prototype.u=function(t,e,n,r,i,o){if(_r()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new T("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new bs(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}wn(a,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return fs(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),En(a,"ready",(function(){u&&clearTimeout(u),He(this)})),En(a,"timeout",(function(){u&&clearTimeout(u),He(this),e&&e(null)})),Is(a,t,n,r,i)};var ua=new gt(wt,"https://apis.google.com/js/client.js?onload=%{onload}"),ca="__fcb"+Math.floor(1e6*Math.random()).toString();function ha(t,e,n,r,i,o,s){var a=Un(e+n);Mn(a,"key",t.c),s&&Mn(a,"cb",w().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Mn(a,c,i[c]);return new _e((function(e,n){aa(t,a.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new T("network-request-failed"))}),r,u?void 0:nr(Mr(i)),t.a,t.m.get())}))}function la(t){if("string"!=typeof(t=t.email)||!yr.test(t))throw new T("invalid-email")}function fa(t){"email"in t&&la(t)}function pa(t){if(!t[Js]){if(t.mfaPendingCredential)throw new T("multi-factor-auth-required",null,pt(t));throw new T("internal-error")}}function da(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new T("internal-error")}else{if(!t.sessionInfo)throw new T("missing-verification-id");if(!t.code)throw new T("missing-verification-code")}}Ys.prototype.s=function(t,e,n,r,i){var o=this;Xs.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ys.prototype.yb=function(){return ru(this,Ka,{})},Ys.prototype.Ab=function(t,e){return ru(this,Wa,{idToken:t,email:e})},Ys.prototype.Bb=function(t,e){return ru(this,Ha,{idToken:t,password:e})};var va={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ya(t){if(!t.phoneVerificationInfo)throw new T("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new T("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new T("missing-verification-code")}function ga(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new T("internal-error")}function ma(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Jn(t=new Qn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ba(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=zo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=zo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=zo(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;pa(t)}function _a(t,e){return e.returnIdpCredential=!0,ru(t,Qa,e)}function wa(t,e){return e.returnIdpCredential=!0,ru(t,Ya,e)}function Ea(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,$a,e)}function Ia(t){if(!t.oobCode)throw new T("invalid-action-code")}(t=Ys.prototype).Cb=function(t,e){var n={idToken:t},r=[];return lt(va,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Wa,n)},t.ub=function(t,e){return vt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,Ua,t)},t.vb=function(t,e){return vt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,La,t)},t.tb=function(t,e){return vt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ma,t)},t.Db=function(t,e,n){return vt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Fa,t)},t.eb=function(t){return ru(this,Za,t)},t.mb=function(t,e){return ru(this,qa,{oobCode:t,newPassword:e})},t.Qa=function(t){return ru(this,Sa,{oobCode:t})},t.ib=function(t){return ru(this,Ta,{oobCode:t})};var Ta={endpoint:"setAccountInfo",B:Ia,Z:"email",C:!0},Sa={endpoint:"resetPassword",B:Ia,F:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new T("internal-error")},C:!0},Ca={endpoint:"signupNewUser",B:function(t){if(la(t),!t.password)throw new T("weak-password")},F:pa,U:!0,C:!0},Na={endpoint:"createAuthUri",C:!0},Aa={endpoint:"deleteAccount",M:["idToken"]},ka={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(t){if(!Array.isArray(t.deleteProvider))throw new T("internal-error")}},Pa={endpoint:"emailLinkSignin",M:["email","oobCode"],B:la,F:pa,U:!0,C:!0},Oa={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:la,F:pa,U:!0},Ra={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:ya,F:pa,C:!0,Na:!0},Da={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:ya,F:pa,C:!0,Na:!0},xa={endpoint:"getAccountInfo"},La={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new T("internal-error");la(t)},Z:"email",C:!0},Ma={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",C:!0},Fa={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",C:!0},Ua={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new T("internal-error");la(t)},Z:"email",C:!0},ja={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},Va={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(t){if(!t.recaptchaSiteKey)throw new T("internal-error")}},qa={endpoint:"resetPassword",B:Ia,Z:"email",C:!0},Ba={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},Wa={endpoint:"setAccountInfo",M:["idToken"],B:fa,U:!0},Ha={endpoint:"setAccountInfo",M:["idToken"],B:function(t){if(fa(t),!t.password)throw new T("weak-password")},F:pa,U:!0},Ka={endpoint:"signupNewUser",F:pa,U:!0,C:!0},Ga={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(t){if(!t.phoneEnrollmentInfo)throw new T("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new T("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new T("missing-app-credential")},F:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new T("internal-error")},C:!0,Na:!0},za={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new T("missing-app-credential")},F:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new T("internal-error")},C:!0,Na:!0},Qa={endpoint:"verifyAssertion",B:ga,Xa:ma,F:ba,U:!0,C:!0},$a={endpoint:"verifyAssertion",B:ga,Xa:ma,F:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new T("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);pa(t)},U:!0,C:!0},Ya={endpoint:"verifyAssertion",B:function(t){if(ga(t),!t.idToken)throw new T("internal-error")},Xa:ma,F:ba,U:!0},Xa={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new T("invalid-custom-token")},F:pa,U:!0,C:!0},Ja={endpoint:"verifyPassword",B:function(t){if(la(t),!t.password)throw new T("wrong-password")},F:pa,U:!0,C:!0},Za={endpoint:"verifyPhoneNumber",B:da,F:pa,C:!0},tu={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new T("internal-error");da(t)},F:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",zo(t);pa(t)}},eu={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:da,F:pa,C:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(t){if(!!t[Js]^!!t.refreshToken)throw new T("internal-error")},C:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.M))return Ae(new T("internal-error"));var r,i=!!e.Na,o=e.Tb||"POST";return Ne(n).then(e.B).then((function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ha(t,i?t.i:t.h,e.endpoint,o,n,e.Gb,e.kb||!1)})).then((function(t){return r=t,e.Xa?e.Xa(n,r):r})).then(e.F).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new T("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new T(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",vt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new T(r[i],e);return!e&&t&&(e=Lr(t)),new T("internal-error",e)}function su(t){this.b=t,this.a=null,this.qb=function(t){return(hu||(hu=new _e((function(t,e){function n(){Vr(),kr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Vr(),e(Error("Network Error"))},timeout:uu.get()})}if(kr("gapi.iframes.Iframe"))t();else if(kr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){kr("gapi.load")?n():e(Error("Network Error"))},Ne(Ws(r=St(au,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw hu=null,t})))).then((function(){return new _e((function(e,n){kr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var au=new gt(wt,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new qr(3e4,6e4),cu=new qr(5e3,15e3),hu=null;function lu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=jn((t=Un(this.g.url)).f,t.a,t.g,"/emulator/auth/iframe"):t=jn("https",this.l,null,"/__/auth/iframe"),this.a=t,Mn(this.a,"apiKey",this.h),Mn(this.a,"appName",this.i),this.b=null,this.c=[]}function fu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.v=r,this.m=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function pu(t){try{return Pe.app(t).auth().Ga()}catch(t){return[]}}function du(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.A=null,this.h=[],this.v=this.a=null}function vu(t){var e=cr();return function(t){return ru(t,ja,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Un(e),r=n.f;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Un(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:vr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Ko(cr())}))}function yu(t){return t.v||(t.v=gr().then((function(){if(!t.u){var e=t.c,n=t.i,r=pu(t.b),i=new lu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Y(r||[]),t.u=i.toString()}t.m=new su(t.u),function(t){if(!t.m)throw Error("IfcHandler must be initialized!");!function(t,e){t.qb.then((function(){t.a.register("authEvent",e,kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.m,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=qo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ne(n)}return n.status="ERROR",Ne(n)}))}(t)}))),t.v}function gu(t){return t.l||(t.A=t.c?Nr(t.c,pu(t.b)):null,t.l=new Ys(t.g,P(t.i),t.A),t.f&&ia(t.l,t.f)),t.l}function mu(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new fu(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=pt(u||null),t.f=c,t.xb(h).toString()}function bu(t){if(this.a=t||Pe.INTERNAL.reactNative&&Pe.INTERNAL.reactNative.AsyncStorage,!this.a)throw new T("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function _u(t){this.b=t,this.a={},this.f=b(this.c,this)}lu.prototype.toString=function(){return this.f?Mn(this.a,"v",this.f):Xn(this.a.b,"v"),this.b?Mn(this.a,"eid",this.b):Xn(this.a.b,"eid"),this.c.length?Mn(this.a,"fw",this.c.join(",")):Xn(this.a.b,"fw"),this.a.toString()},fu.prototype.xb=function(t){return this.h=t,this},fu.prototype.toString=function(){if(this.m){var t=Un(this.m.url);t=jn(t.f,t.a,t.g,"/emulator/auth/handler")}else t=jn("https",this.u,null,"/__/auth/handler");if(Mn(t,"apiKey",this.s),Mn(t,"appName",this.c),Mn(t,"authType",this.v),this.a.isOAuthProvider){var e=this.a;try{var n=Pe.app(this.c).auth().ka()}catch(t){n=null}for(var r in e.nb=n,Mn(t,"providerId",this.a.providerId),e=Mr((n=this.a).Hb))e[r]=e[r].toString();r=n.Pc,e=pt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.ob&&n.nb&&!e[n.ob]&&(e[n.ob]=n.nb),ft(e)||Mn(t,"customParameters",Lr(e))}if("function"==typeof this.a.Pb&&((n=this.a.Pb()).length&&Mn(t,"scopes",n.join(","))),this.l?Mn(t,"redirectUrl",this.l):Xn(t.b,"redirectUrl"),this.g?Mn(t,"eventId",this.g):Xn(t.b,"eventId"),this.i?Mn(t,"v",this.i):Xn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Fn(t,s)&&Mn(t,s,this.b[s]);return this.h?Mn(t,"tid",this.h):Xn(t.b,"tid"),this.f?Mn(t,"eid",this.f):Xn(t.b,"eid"),(s=pu(this.c)).length&&Mn(t,"fw",s.join(",")),t.toString()},(t=du.prototype).Nb=function(t,e,n){var r=new T("popup-closed-by-user"),i=new T("web-storage-unsupported"),o=this,s=!1;return this.la().then((function(){(function(t){var e={type:"webStorageSupport"};return yu(t).then((function(){return function(t,e){return t.qb.then((function(){return new _e((function(n){t.a.send(e.type,e,n,kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.m,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&pr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new _e((function(e){return function n(){Sn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return Sn(n).then((function(){e(r)}))}))},t.Wb=function(){var t=Ar();return!xr(t)&&!jr(t)},t.Sb=function(){return!1},t.Lb=function(t,e,n,r,i,o,s,a){if(!t)return Ae(new T("popup-blocked"));if(s&&!xr())return this.la().o((function(e){pr(t),i(e)})),r(),Ne();this.a||(this.a=vu(gu(this)));var u=this;return this.a.then((function(){var e=u.la().o((function(e){throw pr(t),i(e),e}));return r(),e})).then((function(){(jo(n),s)||hr(mu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Mb=function(t,e,n,r){this.a||(this.a=vu(gu(this)));var i=this;return this.a.then((function(){jo(e),hr(mu(i.s,i.g,i.b,t,e,cr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.la=function(){var t=this;return yu(this).then((function(){return t.m.qb})).o((function(){throw t.a=null,new T("network-request-failed")}))},t.Zb=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ra=function(t){Q(this.h,(function(e){return e==t}))},(t=bu.prototype).get=function(t){return Ne(this.a.getItem(t)).then((function(t){return t&&Fr(t)}))},t.set=function(t,e){return Ne(this.a.setItem(t,Lr(e)))},t.T=function(t){return Ne(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var wu,Eu=[];function Iu(t,e,n){ft(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Tu(t){this.a=t}function Su(t){this.c=t,this.b=!1,this.a=[]}function Cu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Ae(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new _e((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return Nu(t,c),e})).o((function(e){throw Nu(t,c),e}))}function Nu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Q(t.a,(function(t){return t==e}))}}function Au(){if(!Ru())throw new T("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.v=s.indexedDB,this.type="indexedDB",this.g=this.m=this.f=this.l=null,this.s=!1,this.h=null;var t=this;_r()&&self?(this.m=function(){var t=_r()?self:null;if(B(Eu,(function(n){n.b==t&&(e=n)})),!e){var e=new _u(t);Eu.push(e)}return e}(),Iu(this.m,"keyChanged",(function(e,n){return Fu(t).then((function(e){return 0<e.length&&B(t.a,(function(t){t(e)})),{keyProcessed:G(e,n.key)}}))})),Iu(this.m,"ping",(function(){return Ne(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?Ne().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ne(null)}().then((function(e){(t.h=e)&&(t.g=new Su(new Tu(e)),Cu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&G(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function ku(t){return new _e((function(e,n){var r=t.v.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new _e((function(e,n){var r=t.v.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return ku(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Pu(t){return t.i||(t.i=ku(t)),t.i}function Ou(t,e){var n=0;return new _e((function r(i,o){Pu(t).then(e).then(i).o((function(e){if(!(3<++n))return Pu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Ru(){try{return!!s.indexedDB}catch(t){return!1}}function Du(t){return t.objectStore("firebaseLocalStorage")}function xu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Lu(t){return new _e((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Mu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Cu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ne()}function Fu(t){return Pu(t).then((function(t){var e=Du(xu(t,!1));return e.getAll?Lu(e.getAll()):new _e((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=lr(t.c,n),t.c=n}return r}))}function Uu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function ju(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ne().then((function(){if(Ru()){var t=Ur(),r="__sak"+t;return wu||(wu=new Au),(n=wu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.T(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){B(e.a,(function(e){e(t)}))})),t}))}function Vu(){this.a={},this.type="inMemory"}function qu(){if(!function(){var t="Node"==wr();if(!(t=Bu()||t&&Pe.INTERNAL.node&&Pe.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==wr())throw new T("internal-error","The LocalStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Bu()||Pe.INTERNAL.node.localStorage,this.type="localStorage"}function Bu(){try{var t=s.localStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Wu(){this.type="nullStorage"}function Hu(){if(!function(){var t="Node"==wr();if(!(t=Ku()||t&&Pe.INTERNAL.node&&Pe.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==wr())throw new T("internal-error","The SessionStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Ku()||Pe.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Ku(){try{var t=s.sessionStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Gu(){var t={};t.Browser=$u,t.Node=Yu,t.ReactNative=Xu,t.Worker=Ju,this.a=t[wr()]}_u.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];B(r,(function(e){i.push(Ne().then((function(){return e(t.origin,t.data.data)})))})),Oe(i).then((function(r){var i=[];B(r,(function(t){i.push({fulfilled:t.Ob,value:t.value,reason:t.reason?t.reason.message:void 0})})),B(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Tu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Su.prototype.close=function(){for(;0<this.a.length;)Nu(this,this.a[0]);this.b=!0},(t=Au.prototype).set=function(t,e){var n=this,r=!1;return Ou(this,(function(e){return Lu((e=Du(xu(e,!0))).get(t))})).then((function(i){return Ou(n,(function(o){if(o=Du(xu(o,!0)),i)return i.value=e,Lu(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Lu(o.add(s))}))})).then((function(){return n.c[t]=e,Mu(n,t)})).na((function(){r&&n.b--}))},t.get=function(t){return Ou(this,(function(e){return Lu(Du(xu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.T=function(t){var e=this,n=!1;return Ou(this,(function(r){return n=!0,e.b++,Lu(Du(xu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Mu(e,t)})).na((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Fu(t).then((function(e){0<e.length&&B(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Uu(t),e()}(this),this.a.push(t)},t.ia=function(t){Q(this.a,(function(e){return e==t})),0==this.a.length&&Uu(this)},(t=ju.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.T=function(t){return this.b.then((function(e){return e.T(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){Q(this.a,(function(e){return e==t}))},(t=Vu.prototype).get=function(t){return Ne(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ne()},t.T=function(t){return delete this.a[t],Ne()},t.ca=function(){},t.ia=function(){},(t=qu.prototype).get=function(t){var e=this;return Ne().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ne().then((function(){var r=Lr(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return Ne().then((function(){e.a.removeItem(t)}))},t.ca=function(t){s.window&&un(s.window,"storage",t)},t.ia=function(t){s.window&&ln(s.window,"storage",t)},(t=Wu.prototype).get=function(){return Ne(null)},t.set=function(){return Ne()},t.T=function(){return Ne()},t.ca=function(){},t.ia=function(){},(t=Hu.prototype).get=function(t){var e=this;return Ne().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ne().then((function(){var r=Lr(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return Ne().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var zu,Qu,$u={D:qu,ab:Hu},Yu={D:qu,ab:Hu},Xu={D:bu,ab:Wu},Ju={D:qu,ab:Wu},Zu={qd:"local",NONE:"none",sd:"session"};function tc(){var t=!(jr(Ar())||!br()),e=xr(),n=Pr();this.v=t,this.h=e,this.l=n,this.a={},zu||(zu=new Gu),t=zu;try{this.g=!ur()&&Hr()||!s.indexedDB?new t.a.D:new ju(_r()?new Vu:new t.a.D)}catch(t){this.g=new Vu,this.h=!0}try{this.i=new t.a.ab}catch(t){this.i=new Vu}this.m=new Vu,this.f=b(this.Xb,this),this.b={}}function ec(){return Qu||(Qu=new tc),Qu}function nc(t,e){switch(e){case"session":return t.i;case"none":return t.m;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.D&&(t.b[n]=null),nc(t,e.D).T(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function sc(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.D).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.D);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.D&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),ft(this.a)&&(nc(this,"local").ca(this.f),this.h||(ur()||!Hr())&&s.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ye({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Xb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&(Q(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),ft(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Xb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.lb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.v)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.lb(e))},zt&&se&&10==se&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else B(t,b(this.lb,this))},t.lb=function(t){this.a[t]&&B(this.a[t],(function(t){t()}))};var ac,uc={name:"authEvent",D:"local"};function cc(){this.a=ec()}function hc(t,e){this.b=lc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===ac&&(ac=s.Int32Array?new Int32Array(mc):mc),this.reset()}E(hc,(function(){this.b=-1}));for(var lc=64,fc=lc-1,pc=[],dc=0;dc<fc;dc++)pc[dc]=0;var vc=$(128,pc);function yc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|ac[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function gc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(yc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(yc(t),i=0)}}t.c=i,t.g+=n}hc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):Y(this.h)};var mc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bc(){hc.call(this,8,_c)}E(bc,hc);var _c=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function wc(t,e,n,r,i,o){this.m=t,this.i=e,this.l=n,this.v=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.A=new cc,this.g=new sc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ec(t){return new T("invalid-cordova-configuration",t)}function Ic(t){var e=new bc;gc(e,t),t=[];var n=8*e.g;56>e.c?gc(e,vc,56-e.c):gc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(yc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return H(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Tc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Sc(t){return t.f||(t.f=t.la().then((function(){return new _e((function(e){t.Ea((function n(r){return e(r),t.Ra(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Cc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=io(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Fr(Fn(o=Un(i),"firebaseError")||null))?S(o):null)?new Vo(r.c,r.b,null,null,o,null,r.S()):new Vo(r.c,r.b,i,r.f,null,null,r.S())),i=o||n}Tc(t,i)}))}var n=new Vo("unknown",null,null,null,new T("no-auth-event")),r=!1,i=Sn(500).then((function(){return Cc(t).then((function(){r||Tc(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(kr("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Ho||(Ho=new Bo),function(t){var e=Ho;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=kr("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Cc(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return qo(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function Nc(t){this.a=t,this.b=ec()}(t=wc.prototype).la=function(){return this.Ia?this.Ia:this.Ia=(mr(void 0)?gr().then((function(){return new _e((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Ae(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof kr("universalLinks.subscribe",s))throw Ec("cordova-universal-links-plugin-fix is not installed");if(void 0===kr("BuildInfo.packageName",s))throw Ec("cordova-plugin-buildinfo is not installed");if("function"!=typeof kr("cordova.plugins.browsertab.openUrl",s))throw Ec("cordova-plugin-browsertab is not installed");if("function"!=typeof kr("cordova.InAppBrowser.open",s))throw Ec("cordova-plugin-inappbrowser is not installed")}),(function(){throw new T("cordova-not-ready")}))},t.Nb=function(t,e){return e(new T("operation-not-supported-in-this-environment")),Ne()},t.Lb=function(){return Ae(new T("operation-not-supported-in-this-environment"))},t.Zb=function(){return!1},t.Wb=function(){return!0},t.Sb=function(){return!0},t.Mb=function(t,e,n,r){if(this.c)return Ae(new T("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,h=null;return this.c=Ne().then((function(){return jo(e),Sc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Vo(e,r,null,o,new T("no-auth-event"),null,i),u=kr("BuildInfo.packageName",s);if("string"!=typeof u)throw new T("invalid-cordova-configuration");var c=kr("BuildInfo.displayName",s),h={};if(Ar().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!Ar().toLowerCase().match(/android/))return Ae(new T("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=Ic(o),h.sessionId=o;var l=mu(t.m,t.i,t.l,e,n,null,r,t.v,h,t.u,i,t.s);return t.la().then((function(){var e=t.h;return t.A.a.set(uc,a.w(),e)})).then((function(){var e=kr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new T("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=kr("cordova.plugins.browsertab.openUrl",s)))throw new T("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=kr("cordova.InAppBrowser.open",s)))throw new T("invalid-cordova-configuration");e=Ar(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new _e((function(t,e){u=function(){var e=kr("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=Sn(2e3).then((function(){e(new T("redirect-cancelled-by-user"))})))},h=function(){Br()&&c()},o.addEventListener("resume",c,!1),Ar().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Cc(i).then((function(){throw t}))}))})).na((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),a&&a.cancel(),u&&i.Ra(u),i.c=null}))},t.Ea=function(t){this.b.push(t),Sc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Vo("unknown",null,null,null,new T("no-auth-event")),t(e))}))},t.Ra=function(t){Q(this.b,(function(e){return e==t}))};var Ac={name:"pendingRedirect",D:"session"};function kc(t){return ic(t.b,Ac,t.a)}function Pc(t,e,n,r){this.i={},this.u=0,this.O=t,this.m=e,this.v=n,this.G=r,this.h=[],this.f=!1,this.l=b(this.s,this),this.b=new Kc,this.A=new Yc,this.g=new Nc(Wc(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=Oc(this.O,this.m,this.v,C,this.G)}function Oc(t,e,n,r,i){var o=Pe.SDK_VERSION||null;return mr()?new wc(t,e,n,o,r,i):new du(t,e,n,o,r,i)}function Rc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.la().o((function(n){throw t.a==e&&t.reset(),n}))}function Dc(t){t.a.Wb()&&Rc(t).o((function(e){var n=new Vo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)})),t.a.Sb()||Gc(t.b)}function xc(t,e){G(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Ac,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?kc(t.g).then((function(){Rc(t).o((function(e){var n=new Vo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)}))})):Dc(t)})).o((function(){Dc(t)}))}function Lc(t,e){Q(t.h,(function(t){return t==e}))}Pc.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=Oc(this.O,this.m,this.v,null,this.G),this.i={}},Pc.prototype.s=function(t){if(!t)throw new T("invalid-auth-event");if(6e5<=w()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Eb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=w())),e=!0;break}}return Gc(this.b),e};var Mc=new qr(2e3,1e4),Fc=new qr(3e4,6e4);function Uc(t,e,n,r,i,o,s){return t.a.Lb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function jc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Vc(t,e,n,r,i){var o;return function(t){return t.b.set(Ac,"pending",t.a)}(t.g).then((function(){return t.a.Mb(e,n,r,i).o((function(e){if(jc(e))throw new T("operation-not-supported-in-this-environment");return o=e,kc(t.g).then((function(){throw o}))})).then((function(){return t.a.Zb()?new _e((function(){})):kc(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function qc(t,e,n,r,i){return t.a.Nb(r,(function(t){e.ma(n,null,t,i)}),Mc.get())}Pc.prototype.qa=function(){return this.b.qa()};var Bc={};function Wc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Hc(t,e,n,r){var i=Wc(e,n,r);return Bc[i]||(Bc[i]=new Pc(t,e,n,r)),Bc[i]}function Kc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Gc(t){t.g||(t.g=!0,$c(t,!1,null,null))}function zc(t){t.g&&!t.i&&$c(t,!1,null,null)}function Qc(t,e){if(t.b=function(){return Ne(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function $c(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ae(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Qc(t,n):Qc(t,{user:null}),t.f=[],t.c=[]}function Yc(){}function Xc(){this.hb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(t){this.hb=t},enumerable:!1})}function Jc(t,e){this.a=e,$r(this,"verificationId",t)}function Zc(t,e,n,r){return new Mo(t).eb(e,n).then((function(t){return new Jc(t,r)}))}function th(t){var e=Hi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new T("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Yr(this,{token:t,expirationTime:Wr(1e3*e.exp),authTime:Wr(1e3*e.auth_time),issuedAtTime:Wr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function eh(t,e,n){var r=e&&e[rh];if(!r)throw new T("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=pt(e),this.g=n,this.c=new oo(null,r),this.b=[];var i=this;B(e[nh]||[],(function(t){(t=ti(t))&&i.b.push(t)})),$r(this,"auth",this.a),$r(this,"session",this.c),$r(this,"hints",this.b)}Kc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Kc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?($c(this,!0,null,t.a),Ne()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.S(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){$c(t,a,e,null)})).o((function(e){$c(t,a,null,e)}))}(this,t,e):Ae(new T("invalid-auth-event")):($c(this,!1,null,null),Ne())}else Ae(new T("invalid-auth-event"))},Kc.prototype.qa=function(){var t=this;return new _e((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new T("timeout");t.a&&t.a.cancel(),t.a=Sn(Fc.get()).then((function(){t.b||(t.g=!0,$c(t,!0,null,e))}))}(t))}))},Yc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ma(t.c,null,t.a,t.b),Ne()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.S(),t.i).then((function(t){e.ma(r,t,null,n)})).o((function(t){e.ma(r,null,t,n)}))}(t,e):Ae(new T("invalid-auth-event"))}else Ae(new T("invalid-auth-event"))},Jc.prototype.confirm=function(t){return t=Fo(this.verificationId,t),this.a(t)};var nh="mfaInfo",rh="mfaPendingCredential";function ih(t,e,n,r){T.call(this,"multi-factor-auth-required",r,e),this.b=new eh(t,e,n),$r(this,"resolver",this.b)}function oh(t,e,n){if(t&&d(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new ih(e,t.serverResponse,n,t.message)}catch(t){}return null}function sh(){}function ah(t){$r(this,"factorId",t.fa),this.a=t}function uh(t){if(ah.call(this,t),this.a.fa!=Mo.PROVIDER_ID)throw new T("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ch(t,e){for(var n in $e.call(this,t),e)this[n]=e[n]}function hh(t,e){this.a=t,this.b=[],this.c=b(this.xc,this),un(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&B(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ri]=t.uid),t.displayName&&(r[ei]=t.displayName),t.enrollmentTime&&(r[ni]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ii]=t.phoneNumber);try{e=new oi(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),lh(this,n)}function lh(t,e){t.b=e,$r(t,"enrolledFactors",e)}function fh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ph(t,e){t.stop(),t.b=Sn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=s.document,e=null;return Br()||!t?Ne():new _e((function(n){e=function(){Br()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){ph(t,!0)})).o((function(e){t.i(e)&&ph(t,!1)}))}function dh(t){this.c=t,this.b=this.a=null}function vh(t){return t.b&&1e3*t.b.c||0}function yh(t,e){var n=e.refreshToken;t.b=Wi(e[Js]||""),t.a=n}function gh(t,e){return function(t,e){return new _e((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?aa(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new T("internal-error")):r(new T("network-request-failed"))}),"POST",Yn(e).toString(),t.g,t.v.get()):r(new T("internal-error"))}))}(t.c,e).then((function(e){return t.b=Wi(e.access_token),t.a=e.refresh_token,{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function mh(t,e){this.a=t||null,this.b=e||null,Yr(this,{lastSignInTime:Wr(e||null),creationTime:Wr(t||null)})}function bh(t,e,n,r,i,o){Yr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function _h(t,e,n){this.G=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=Pe.SDK_VERSION?Nr(Pe.SDK_VERSION):null;this.a=new Ys(this.l,P(C),r),t.emulatorConfig&&ia(this.a,t.emulatorConfig),this.b=new dh(this.a),Ah(this,e[Js]),yh(this.b,e),$r(this,"refreshToken",this.b.a),Oh(this,n||{}),_n.call(this),this.P=!1,this.s&&Or()&&(this.i=Hc(this.s,this.l,this.m)),this.R=[],this.f=null,this.u=function(t){return new fh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=vh(t.b)-w()-3e5;return 0<e?e:0}))}(this),this.$=b(this.gb,this);var i=this;this.pa=null,this.Ba=function(t){i.wa(t.h)},this.ba=null,this.za=function(t){ia(i.a,t.c)},this.W=null,this.X=[],this.Aa=function(t){Ih(i,t.f)},this.aa=null,this.N=new hh(this,n),$r(this,"multiFactor",this.N)}function wh(t,e){t.ba&&ln(t.ba,"languageCodeChanged",t.Ba),(t.ba=e)&&un(e,"languageCodeChanged",t.Ba)}function Eh(t,e){t.W&&ln(t.W,"emulatorConfigChanged",t.za),(t.W=e)&&un(e,"emulatorConfigChanged",t.za)}function Ih(t,e){t.X=e,sa(t.a,Pe.SDK_VERSION?Nr(Pe.SDK_VERSION,t.X):null)}function Th(t,e){t.aa&&ln(t.aa,"frameworkChanged",t.Aa),(t.aa=e)&&un(e,"frameworkChanged",t.Aa)}function Sh(t){try{return Pe.app(t.m).auth()}catch(e){throw new T("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Ch(t){t.A||t.u.b||(t.u.start(),ln(t,"tokenChanged",t.$),un(t,"tokenChanged",t.$))}function Nh(t){ln(t,"tokenChanged",t.$),t.u.stop()}function Ah(t,e){t.ya=e,$r(t,"_lat",e)}function kh(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Oe(e).then((function(){return t}))}function Ph(t){t.i&&!t.P&&(t.P=!0,xc(t.i,t))}function Oh(t,e){Yr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new mh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Rh(){}function Dh(t){return Ne().then((function(){if(t.A)throw new T("app-deleted")}))}function xh(t){return H(t.providerData,(function(t){return t.providerId}))}function Lh(t,e){e&&(Mh(t,e.providerId),t.providerData.push(e))}function Mh(t,e){Q(t.providerData,(function(t){return t.providerId==e}))}function Fh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&$r(t,e,n)}function Uh(t,e){t!=e&&(Yr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?$r(t,"metadata",function(t){return new mh(t.a,t.b)}(e.metadata)):$r(t,"metadata",new mh),B(e.providerData,(function(e){Lh(t,e)})),function(t,e){t.b=e.b,t.a=e.a}(t.b,e.b),$r(t,"refreshToken",t.b.a),lh(t.N,e.N.b))}function jh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,xa,{idToken:e}).then(b(t.Jc,t))}(t,e).then((function(){return n||Fh(t,"isAnonymous",!1),e}))}))}function Vh(t,e){e[Js]&&t.ya!=e[Js]&&(yh(t.b,e),t.dispatchEvent(new ch("tokenChanged")),Ah(t,e[Js]),Fh(t,"refreshToken",t.b.a))}function qh(t,e){return jh(t).then((function(){if(G(xh(t),e))return kh(t).then((function(){throw new T("provider-already-linked")}))}))}function Bh(t,e,n){return Xr({user:t,credential:Uo(e),additionalUserInfo:e=$i(e),operationType:n})}function Wh(t,e){return Vh(t,e),t.reload().then((function(){return t}))}function Hh(t,e,n,r,i){if(!Or())return Ae(new T("operation-not-supported-in-this-environment"));if(t.f&&!i)return Ae(t.f);var o=Qi(n.providerId),s=Ur(t.uid+":::"),a=null;(!xr()||br())&&t.s&&n.isOAuthProvider&&(a=mu(t.s,t.l,t.m,e,n,null,s,Pe.SDK_VERSION||null,null,null,t.tenantId));var u=dr(a,o&&o.ua,o&&o.ta);return r=r().then((function(){if(Gh(t),!i)return t.I().then((function(){}))})).then((function(){return Uc(t.i,u,e,n,s,!!a,t.tenantId)})).then((function(){return new _e((function(n,r){t.ma(e,null,new T("cancelled-popup-request"),t.h||null),t.g=n,t.O=r,t.h=s,t.c=qc(t.i,t,e,u,s)}))})).then((function(t){return u&&pr(u),t?Xr(t):null})).o((function(t){throw u&&pr(u),t})),zh(t,r,i)}function Kh(t,e,n,r,i){if(!Or())return Ae(new T("operation-not-supported-in-this-environment"));if(t.f&&!i)return Ae(t.f);var o=null,s=Ur(t.uid+":::");return r=r().then((function(){if(Gh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,kh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Yh,t.w(),e.a)),e})).then((function(){return Vc(t.i,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return Xh(t.ha);throw o})).then((function(){if(o)throw o})),zh(t,r,i)}function Gh(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new T("internal-error");throw new T("auth-domain-config-required")}}function zh(t,e,n){var r=function(t,e,n){return t.f&&!n?(e.cancel(),Ae(t.f)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.f||t.dispatchEvent(new ch("userInvalidated")),t.f=e),e}))}(t,e,n);return t.G.push(r),r.na((function(){z(t.G,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oh(e.w(),Sh(t),b(t.ic,t))),n||e}))}function Qh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Js]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new _h(e,n,t);return t.providerData&&B(t.providerData,(function(t){t&&Lh(r,Xr(t))})),t.redirectEventId&&(r.ga=t.redirectEventId),r}function $h(t){this.a=t,this.b=ec()}eh.prototype.Qc=function(t){var e=this;return t.rb(this.a.a,this.c).then((function(t){var n=pt(e.f);return delete n[nh],delete n[rh],vt(n,t),e.g(n)}))},E(ih,T),sh.prototype.rb=function(t,e,n){return e.type==so?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),vt(n,{phoneVerificationInfo:Lo(t.a)}),ru(e,Ra,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return vt(n={mfaPendingCredential:n},{phoneVerificationInfo:Lo(t.a)}),ru(e,Da,n)}))}(this,t,e)},E(ah,sh),E(uh,ah),E(ch,$e),(t=hh.prototype).xc=function(t){lh(this,function(t){var e=[];return B(t.mfaInfo||[],(function(t){(t=ti(t))&&e.push(t)})),e}(t.gd))},t.Qb=function(){return this.a.I().then((function(t){return new oo(t,null)}))},t.ec=function(t,e){var n=this,r=this.a.a;return this.Qb().then((function(n){return t.rb(r,n,e)})).then((function(t){return Vh(n.a,t),n.a.reload()}))},t.ad=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=W(e.b,(function(t){return t.uid!=n}));return lh(e,r),Vh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:H(this.b,(function(t){return t.w()}))}}},fh.prototype.start=function(){this.a=this.c,ph(this,!0)},fh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dh.prototype.w=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:vh(this)}},dh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ae(new T("user-token-expired")):t||!this.b||w()>vh(this)-3e4?this.a?gh(this,{grant_type:"refresh_token",refresh_token:this.a}):Ne(null):Ne({accessToken:this.b.toString(),refreshToken:this.a})},mh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},E(_h,_n),_h.prototype.wa=function(t){this.pa=t,ra(this.a,t)},_h.prototype.ka=function(){return this.pa},_h.prototype.Ga=function(){return Y(this.X)},_h.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},$r(_h.prototype,"providerId","firebase"),(t=_h.prototype).reload=function(){var t=this;return zh(this,Dh(this).then((function(){return jh(t).then((function(){return kh(t)})).then(Rh)})))},t.nc=function(t){return this.I(t).then((function(t){return new th(t)}))},t.I=function(t){var e=this;return zh(this,Dh(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new T("internal-error");return t.accessToken!=e.ya&&(Ah(e,t.accessToken),e.dispatchEvent(new ch("tokenChanged"))),Fh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Jc=function(t){if(!(t=t.users)||!t.length)throw new T("internal-error");Oh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?H(t,(function(t){return new bh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Lh(this,e[n]);Fh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ch("userReloaded",{gd:t}))},t.Kc=function(t){return zr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.sb(t)},t.sb=function(t){var e=this,n=null;return zh(this,t.c(this.a,this.uid).then((function(t){return Vh(e,t),n=Bh(e,t,"reauthenticate"),e.f=null,e.reload()})).then((function(){return n})),!0)},t.Bc=function(t){return zr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return zh(this,qh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Bh(e,t,"link"),Wh(e,t)})).then((function(){return n})))},t.Cc=function(t,e){var n=this;return zh(this,qh(this,"phone").then((function(){return Zc(Sh(n),t,e,b(n.pb,n))})))},t.Lc=function(t,e){var n=this;return zh(this,Ne().then((function(){return Zc(Sh(n),t,e,b(n.sb,n))})),!0)},t.Ab=function(t){var e=this;return zh(this,this.I().then((function(n){return e.a.Ab(n,t)})).then((function(t){return Vh(e,t),e.reload()})))},t.dd=function(t){var e=this;return zh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Vh(e,t),e.reload()})))},t.Bb=function(t){var e=this;return zh(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return Vh(e,t),e.reload()})))},t.Cb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Dh(this);var e=this;return zh(this,this.I().then((function(n){return e.a.Cb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Vh(e,t),Fh(e,"displayName",t.displayName||null),Fh(e,"photoURL",t.photoUrl||null),B(e.providerData,(function(t){"password"===t.providerId&&($r(t,"displayName",e.displayName),$r(t,"photoURL",e.photoURL))})),kh(e)})).then(Rh))},t.bd=function(t){var e=this;return zh(this,jh(this).then((function(n){return G(xh(e),t)?function(t,e,n){return ru(t,ka,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return B(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),B(xh(e),(function(t){n[t]||Mh(e,t)})),n[Mo.PROVIDER_ID]||$r(e,"phoneNumber",null),kh(e)})):kh(e).then((function(){throw new T("no-such-provider")}))})))},t.delete=function(){var t=this;return zh(this,this.I().then((function(e){return ru(t.a,Aa,{idToken:e})})).then((function(){t.dispatchEvent(new ch("userDeleted"))}))).then((function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");wh(t,null),Eh(t,null),Th(t,null),t.G=[],t.A=!0,Nh(t),$r(t,"refreshToken",null),t.i&&Lc(t.i,t)}))},t.Eb=function(t,e){return!!("linkViaPopup"==t&&(this.h||null)==e&&this.g||"reauthViaPopup"==t&&(this.h||null)==e&&this.g||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.ma=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.h||null)||(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.h||null)?b(this.Jb,this):"reauthViaPopup"==t&&e==(this.h||null)?b(this.Kb,this):"linkViaRedirect"==t&&(this.ga||null)==e?b(this.Jb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?b(this.Kb,this):null},t.Dc=function(t){var e=this;return Hh(this,"linkViaPopup",t,(function(){return qh(e,t.providerId).then((function(){return kh(e)}))}),!1)},t.Mc=function(t){return Hh(this,"reauthViaPopup",t,(function(){return Ne()}),!0)},t.Ec=function(t){var e=this;return Kh(this,"linkViaRedirect",t,(function(){return qh(e,t.providerId)}),!1)},t.Nc=function(t){return Kh(this,"reauthViaRedirect",t,(function(){return Ne()}),!0)},t.Jb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return zh(this,this.I().then((function(n){return wa(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Bh(i,t,"link"),Wh(i,t)})).then((function(){return o})))},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return zh(this,Ne().then((function(){return co(Ea(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Bh(i,t,"reauthenticate"),Vh(i,t),i.f=null,i.reload()})).then((function(){return o})),!0)},t.tb=function(t){var e=this,n=null;return zh(this,this.I().then((function(e){return n=e,void 0===t||ft(t)?{}:ji(new ki(t))})).then((function(t){return e.a.tb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Db=function(t,e){var n=this,r=null;return zh(this,this.I().then((function(t){return r=t,void 0===e||ft(e)?{}:ji(new ki(e))})).then((function(e){return n.a.Db(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.ic=function(t){var e=null,n=this;return zh(this,t=co(Ne(t),n.uid).then((function(t){return e=Bh(n,t,"reauthenticate"),Vh(n,t),n.f=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&vt(t,this.metadata.w()),B(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),vt(t,this.N.w()),t};var Yh={name:"redirectUser",D:"session"};function Xh(t){return ic(t.b,Yh,t.a)}function Jh(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=el("local"),n=el("session"),r=el("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.D);return t.get(e,n).then((function(o){var a=null;try{a=Fr(s.localStorage.getItem(r))}catch(t){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(tl,t.a).then((function(t){return t?el(t):e}))}))}))})).then((function(e){return t.c=e,Zh(t,e.D)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(el("local"),this.a,b(this.g,this))}function Zh(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,el(Zu[n]),t.a));return r.push(ic(t.b,tl,t.a)),function(t){return new _e((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)ke(t[a],_(o,a),s);else e(i)}))}(r)}Jh.prototype.g=function(){var t=this,e=el("local");ol(this,(function(){return Ne().then((function(){return t.c&&"local"!=t.c.D?t.b.get(e,t.a):null})).then((function(n){if(n)return Zh(t,"local").then((function(){t.c=e}))}))}))};var tl={name:"persistence",D:"session"};function el(t){return{name:"authUser",D:t}}function nl(t,e){return ol(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function rl(t){return ol(t,(function(){return ic(t.b,t.c,t.a)}))}function il(t,e,n){return ol(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Qh(t||{})}))}))}function ol(t,e){return t.f=t.f.then(e,e),t.f}function sl(t){if(this.m=!1,$r(this,"settings",new Xc),$r(this,"app",t),!vl(this).options||!vl(this).options.apiKey)throw new T("invalid-api-key");t=Pe.SDK_VERSION?Nr(Pe.SDK_VERSION):null,this.a=new Ys(vl(this).options&&vl(this).options.apiKey,P(C),t),this.R=[],this.u=[],this.P=[],this.ac=Pe.INTERNAL.createSubscribe(b(this.yc,this)),this.X=void 0,this.bc=Pe.INTERNAL.createSubscribe(b(this.zc,this)),pl(this,null),this.l=new Jh(vl(this).options.apiKey+":"+vl(this).name),this.G=new $h(vl(this).options.apiKey+":"+vl(this).name),this.$=bl(this,function(t){var e=vl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Yh,t.a).then((function(t){return t&&e&&(t.authDomain=e),Qh(t||{})}))}(t.G,vl(t).options.authDomain).then((function(e){return(t.s=e)&&(e.ha=t.G),Xh(t.G)}));return bl(t,e)}(t).then((function(){return il(t.l,e,t.f)})).then((function(e){return e?(e.ha=t.G,t.s&&(t.s.ga||null)==(e.ga||null)?e:e.reload().then((function(){return nl(t.l,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:rl(t.l)}))):null})).then((function(e){pl(t,e||null)}));return bl(t,n)}(this)),this.i=bl(this,function(t){return t.$.then((function(){return ll(t)})).o((function(){})).then((function(){if(!t.m)return t.pa()})).o((function(){})).then((function(){if(!t.m){t.ba=!0;var e=t.l;e.b.addListener(el("local"),e.a,t.pa)}}))}(this)),this.ba=!1,this.pa=b(this.Yc,this),this.Ba=b(this.da,this),this.ya=b(this.kc,this),this.za=b(this.vc,this),this.Aa=b(this.wc,this),this.b=null,function(t){var e=vl(t).options.authDomain,n=vl(t).options.apiKey;e&&Or()&&(t.gb=t.$.then((function(){if(!t.m){if(t.b=Hc(e,n,vl(t).name,t.f),xc(t.b,t),yl(t)&&Ph(yl(t)),t.s){Ph(t.s);var r=t.s;r.wa(t.ka()),wh(r,t),Ih(r=t.s,t.N),Th(r,t),ia((r=t.s).a,t.f),Eh(r,t),t.s=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.Fc,this),this.A=0,_n.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ka()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.xb(t)},enumerable:!1}),t.W=null}(this),this.N=[],this.f=null}function al(t){$e.call(this,"languageCodeChanged"),this.h=t}function ul(t){$e.call(this,"emulatorConfigChanged"),this.c=t}function cl(t){$e.call(this,"frameworkChanged"),this.f=t}function hl(t){return t.gb||Ae(new T("auth-domain-config-required"))}function ll(t){if(!Or())return Ae(new T("operation-not-supported-in-this-environment"));var e=hl(t).then((function(){return t.b.qa()})).then((function(t){return t?Xr(t):null}));return bl(t,e)}function fl(t,e){var n={};return n.apiKey=vl(t).options.apiKey,n.authDomain=vl(t).options.authDomain,n.appName=vl(t).name,t.f&&(n.emulatorConfig=t.f),t.$.then((function(){return function(t,e,n,r){var i=new _h(t,e);return n&&(i.ha=n),r&&Ih(i,r),i.reload().then((function(){return i}))}(n,e,t.G,t.Ga())})).then((function(e){return yl(t)&&e.uid==yl(t).uid?(Uh(yl(t),e),t.da(e)):(pl(t,e),Ph(e),t.da(e))})).then((function(){ml(t)}))}function pl(t,e){yl(t)&&(function(t,e){Q(t.R,(function(t){return t==e}))}(yl(t),t.Ba),ln(yl(t),"tokenChanged",t.ya),ln(yl(t),"userDeleted",t.za),ln(yl(t),"userInvalidated",t.Aa),Nh(yl(t))),e&&(e.R.push(t.Ba),un(e,"tokenChanged",t.ya),un(e,"userDeleted",t.za),un(e,"userInvalidated",t.Aa),0<t.A&&Ch(e)),$r(t,"currentUser",e),e&&(e.wa(t.ka()),wh(e,t),Ih(e,t.N),Th(e,t),ia(e.a,t.f),Eh(e,t))}function dl(t,e){var n=null,r=null;return bl(t,e.then((function(e){return n=Uo(e),r=$i(e),fl(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oh(e.w(),t,b(t.jc,t))),n||e})).then((function(){return Xr({user:yl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function vl(t){return t.app}function yl(t){return t.currentUser}function gl(t){return yl(t)&&yl(t)._lat||null}function ml(t){if(t.ba){for(var e=0;e<t.u.length;e++)t.u[e]&&t.u[e](gl(t));if(t.X!==t.getUid()&&t.P.length)for(t.X=t.getUid(),e=0;e<t.P.length;e++)t.P[e]&&t.P[e](gl(t))}}function bl(t,e){return t.R.push(e),e.na((function(){z(t.R,e)})),e}function _l(){}function wl(){this.a={},this.b=1e12}Jh.prototype.wb=function(t){var e=null,n=this;return function(t){var e=new T("invalid-persistence-type"),n=new T("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(wr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Ru()&&"none"!==t)throw n;break;default:if(!Pr()&&"none"!==t)throw n}}(t),ol(this,(function(){return t!=n.c.D?n.b.get(n.c,n.a).then((function(r){return e=r,Zh(n,t)})).then((function(){if(n.c=el(t),e)return n.b.set(n.c,e,n.a)})):Ne()}))},E(sl,_n),E(al,$e),E(ul,$e),E(cl,$e),(t=sl.prototype).wb=function(t){return bl(this,t=this.l.wb(t))},t.wa=function(t){this.aa===t||this.m||(this.aa=t,ra(this.a,this.aa),this.dispatchEvent(new al(this.ka())))},t.ka=function(){return this.aa},t.ed=function(){var t=s.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.fd=function(t,e){if(!this.f){if(!/^https?:\/\//.test(t))throw new T("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");!function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&gr().then((function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)}))}(!!e&&!!e.disableWarnings),this.f={url:t},this.settings.hb=!0,ia(this.a,this.f),this.dispatchEvent(new ul(this.f))}},t.Fc=function(t){this.N.push(t),sa(this.a,Pe.SDK_VERSION?Nr(Pe.SDK_VERSION,this.N):null),this.dispatchEvent(new cl(this.N))},t.Ga=function(){return Y(this.N)},t.xb=function(t){this.W===t||this.m||(this.W=t,this.a.b=this.W)},t.S=function(){return this.W},t.toJSON=function(){return{apiKey:vl(this).options.apiKey,authDomain:vl(this).options.authDomain,appName:vl(this).name,currentUser:yl(this)&&yl(this).w()}},t.Eb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.h==e&&!!this.g;default:return!1}},t.ma=function(t,e,n,r){"signInViaPopup"==t&&this.h==r&&(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.h==e&&this.g?b(this.hc,this):null},t.hc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return dl(i,_a(i.a,o))}))},t.Wc=function(t){if(!Or())return Ae(new T("operation-not-supported-in-this-environment"));var e=this,n=Qi(t.providerId),r=Ur(),i=null;(!xr()||br())&&vl(this).options.authDomain&&t.isOAuthProvider&&(i=mu(vl(this).options.authDomain,vl(this).options.apiKey,vl(this).name,"signInViaPopup",t,null,r,Pe.SDK_VERSION||null,null,null,this.S(),this.f));var o=dr(i,n&&n.ua,n&&n.ta);return bl(this,n=hl(this).then((function(n){return Uc(n,o,"signInViaPopup",t,r,!!i,e.S())})).then((function(){return new _e((function(t,n){e.ma("signInViaPopup",null,new T("cancelled-popup-request"),e.h),e.g=t,e.O=n,e.h=r,e.c=qc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&pr(o),t?Xr(t):null})).o((function(t){throw o&&pr(o),t})))},t.Xc=function(t){if(!Or())return Ae(new T("operation-not-supported-in-this-environment"));var e=this;return bl(this,hl(this).then((function(){return function(t){return ol(t,(function(){return t.b.set(tl,t.c.D,t.a)}))}(e.l)})).then((function(){return Vc(e.b,"signInViaRedirect",t,void 0,e.S())})))},t.qa=function(){var t=this;return ll(this).then((function(e){return t.b&&zc(t.b.b),e})).o((function(e){throw t.b&&zc(t.b.b),e}))},t.cd=function(t){if(!t)return Ae(new T("null-user"));if(this.W!=t.tenantId)return Ae(new T("tenant-id-mismatch"));var e=this,n={};n.apiKey=vl(this).options.apiKey,n.authDomain=vl(this).options.authDomain,n.appName=vl(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Js]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new _h(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Ih(e,r),Uh(e,t),e}(t,n,e.G,e.Ga());return bl(this,this.i.then((function(){if(vl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return yl(e)&&t.uid==yl(e).uid?(Uh(yl(e),t),e.da(t)):(pl(e,r),Ph(r),e.da(r))})).then((function(){ml(e)})))},t.zb=function(){var t=this;return bl(this,this.i.then((function(){return t.b&&zc(t.b.b),yl(t)?(pl(t,null),rl(t.l).then((function(){ml(t)}))):Ne()})))},t.Yc=function(){var t=this;return il(this.l,vl(this).options.authDomain).then((function(e){if(!t.m){var n;if(n=yl(t)&&e){n=yl(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Uh(yl(t),e),yl(t).I();(yl(t)||e)&&(pl(t,e),e&&(Ph(e),e.ha=t.G),t.b&&xc(t.b,t),ml(t))}}))},t.da=function(t){return nl(this.l,t)},t.kc=function(){ml(this),this.da(yl(this))},t.vc=function(){this.zb()},t.wc=function(){this.zb()},t.jc=function(t){var e=this;return this.i.then((function(){return dl(e,Ne(t))}))},t.yc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(yl(e))}))},t.zc=function(t){var e=this;!function(t,e){t.P.push(e),bl(t,t.i.then((function(){!t.m&&G(t.P,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(gl(t)))})))}(this,(function(){t.next(yl(e))}))},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(yl(r)):"function"==typeof t.next&&t.next(yl(r))})),this.ac(t,e,n)},t.Gc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(yl(r)):"function"==typeof t.next&&t.next(yl(r))})),this.bc(t,e,n)},t.mc=function(t){var e=this;return bl(this,this.i.then((function(){return yl(e)?yl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Sc=function(t){var e=this;return this.i.then((function(){return dl(e,ru(e.a,Xa,{token:t}))})).then((function(t){var n=t.user;return Fh(n,"isAnonymous",!1),e.da(n),t}))},t.Tc=function(t,e){var n=this;return this.i.then((function(){return dl(n,ru(n.a,Ja,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.i.then((function(){return dl(n,ru(n.a,Ca,{email:t,password:e}))}))},t.Za=function(t){var e=this;return this.i.then((function(){return dl(e,t.ja(e.a))}))},t.Rc=function(t){return zr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Za(t)},t.yb=function(){var t=this;return this.i.then((function(){var e=yl(t);if(e&&e.isAnonymous){var n=Xr({providerId:null,isNewUser:!1});return Xr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return dl(t,t.a.yb()).then((function(e){var n=e.user;return Fh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return yl(this)&&yl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.A++,0<this.A&&yl(this)&&Ch(yl(this))},t.Oc=function(t){var e=this;B(this.u,(function(n){n==t&&e.A--})),0>this.A&&(this.A=0),0==this.A&&yl(this)&&Nh(yl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.u.push(t),bl(this,this.i.then((function(){e.m||G(e.u,t)&&t(gl(e))})))},t.removeAuthTokenListener=function(t){Q(this.u,(function(e){return e==t}))},t.delete=function(){this.m=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.l&&(t=this.l).b.removeListener(el("local"),t.a,this.pa),this.b&&(Lc(this.b,this),zc(this.b.b)),Promise.resolve()},t.gc=function(t){return bl(this,function(t,e){return ru(t,Na,{identifier:e,continueUri:Rr()?cr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Ac=function(t){return!!Ro(t)},t.vb=function(t,e){var n=this;return bl(this,Ne().then((function(){var t=new ki(e);if(!t.c)throw new T("argument-error",Ri+" must be true when sending sign in link to email");return ji(t)})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.hd=function(t){return this.Qa(t).then((function(t){return t.data.email}))},t.mb=function(t,e){return bl(this,this.a.mb(t,e).then((function(){})))},t.Qa=function(t){return bl(this,this.a.Qa(t).then((function(t){return new si(t)})))},t.ib=function(t){return bl(this,this.a.ib(t).then((function(){})))},t.ub=function(t,e){var n=this;return bl(this,Ne().then((function(){return void 0===e||ft(e)?{}:ji(new ki(e))})).then((function(e){return n.a.ub(t,e)})).then((function(){})))},t.Vc=function(t,e){return bl(this,Zc(this,t,e,b(this.Za,this)))},t.Uc=function(t,e){var n=this;return bl(this,Ne().then((function(){var r=e||cr(),i=Oo(t,r);if(!(r=Ro(r)))throw new T("argument-error","Invalid email link!");if(r.tenantId!==n.S())throw new T("tenant-id-mismatch");return n.Za(i)})))},_l.prototype.render=function(){},_l.prototype.reset=function(){},_l.prototype.getResponse=function(){},_l.prototype.execute=function(){};var El=null;function Il(t,e){return(e=Tl(e))&&t.a[e]||null}function Tl(t){return(t=void 0===t?1e12:t)?t.toString():null}function Sl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ue(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function Cl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Nl(){}function Al(){}wl.prototype.render=function(t,e){return this.a[this.b.toString()]=new Sl(t,e),this.b++},wl.prototype.reset=function(t){var e=Il(this,t);t=Tl(t),e&&t&&(e.delete(),delete this.a[t])},wl.prototype.getResponse=function(t){return(t=Il(this,t))?t.getResponse():null},wl.prototype.execute=function(t){(t=Il(this,t))&&t.execute()},Sl.prototype.getResponse=function(){return Cl(this),this.b},Sl.prototype.execute=function(){Cl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},Sl.prototype.delete=function(){Cl(this),this.g=!0,clearTimeout(this.a),this.a=null,ln(this.f,"click",this.i)},$r(Nl,"FACTOR_ID","phone"),Al.prototype.g=function(){return El||(El=new wl),Ne(El)},Al.prototype.c=function(){};var kl=null;function Pl(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ol=new gt(wt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Rl=new qr(3e4,6e4);Pl.prototype.g=function(t){var e=this;return new _e((function(n,r){var i=setTimeout((function(){r(new T("network-request-failed"))}),Rl.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new T("internal-error"));delete s[e.a]},Ne(Ws(St(Ol,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new T("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Pl.prototype.c=function(){this.b--};var Dl=null;function xl(t,e,n,r,i,o,a){if($r(this,"type","recaptcha"),this.c=this.f=null,this.A=!1,this.m=e,this.g=null,a?(kl||(kl=new Al),a=kl):(Dl||(Dl=new Pl),a=Dl),this.v=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Fl])throw new T("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ul],!s.document)throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ue(e)||!this.i&&ue(e).hasChildNodes())throw new T("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ys(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Ll];this.a[Ll]=function(t){if(jl(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=kr(c,s);"function"==typeof e&&e(t)}};var h=this.a[Ml];this.a[Ml]=function(){if(jl(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=kr(h,s);"function"==typeof t&&t()}}}var Ll="callback",Ml="expired-callback",Fl="sitekey",Ul="size";function jl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Vl(t,e){return t.h.push(e),e.na((function(){z(t.h,e)})),e}function ql(t){if(t.A)throw new T("internal-error","RecaptchaVerifier instance has been destroyed.")}function Bl(t,e,n){var r=!1;try{this.b=n||Pe.app()}catch(t){throw new T("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new T("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Pe.SDK_VERSION?Nr(Pe.SDK_VERSION,o):null,xl.call(this,n,t,e,(function(){try{var t=i.b.auth().ka()}catch(e){t=null}return t}),o,P(C),r)}function Wl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new T("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],0>i||i>=Hl.length)throw new T("internal-error","Argument validator received an unsupported number of arguments.");n=Hl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new T("argument-error",t+" failed: "+r)}(t=xl.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Vl(this,Ne().then((function(){if(Rr()&&!_r())return gr();throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.v.g(t.u())})).then((function(e){return t.g=e,ru(t.s,Va,{})})).then((function(e){t.a[Fl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){ql(this);var t=this;return Vl(this,this.Ia().then((function(){if(null===t.c){var e=t.m;if(!t.i){var n=ue(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ae&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Bt(s.name),'"'),s.type){o.push(' type="',Bt(s.type),'"');var a={};vt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=de(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ce(o,s)),2<r.length&&pe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){ql(this);var t=this;return Vl(this,this.render().then((function(e){return new _e((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Q(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){ql(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){ql(this),this.A=!0,this.v.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ue(this.m);for(var e;e=t.firstChild;)t.removeChild(e)}},E(Bl,xl);var Hl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Kl(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Gl(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function zl(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:d}}function Ql(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function $l(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Yl(t){return{name:t?t+"Credential":"credential",J:t?"a valid "+t+" credential":"a valid credential",optional:!1,K:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ja||!n)}}}function Xl(t,e){return d(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Jl(t){return d(t)&&"string"==typeof t.uid}function Zl(t,e,n,r){return{name:n||"",J:t.J+" or "+e.J,optional:!!r,K:function(n){return t.K(n)||e.K(n)}}}function tf(t,e){for(var n in e){var r=e[n].name;t[r]=rf(r,t[n],e[n].j)}}function ef(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:_((function(t){return this[t]}),n),set:_((function(t,e,n,r){Wl(t,[n],[r],!0),this[e]=r}),r,n,e[n].jb),enumerable:!0})}}function nf(t,e,n,r){t[e]=rf(e,n,r)}function rf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Wl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}tf(sl.prototype,{ib:{name:"applyActionCode",j:[Kl("code")]},Qa:{name:"checkActionCode",j:[Kl("code")]},mb:{name:"confirmPasswordReset",j:[Kl("code"),Kl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Kl("email"),Kl("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[Kl("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[Kl("emailLink")]},Gc:{name:"onAuthStateChanged",j:[Zl(zl(),Ql(),"nextOrObserver"),Ql("opt_error",!0),Ql("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[Zl(zl(),Ql(),"nextOrObserver"),Ql("opt_error",!0),Ql("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[Kl("email"),Zl(zl("opt_actionCodeSettings",!0),$l(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[Kl("email"),zl("actionCodeSettings")]},wb:{name:"setPersistence",j:[Kl("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[Yl()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[Yl()]},Sc:{name:"signInWithCustomToken",j:[Kl("token")]},Tc:{name:"signInWithEmailAndPassword",j:[Kl("email"),Kl("password")]},Uc:{name:"signInWithEmailLink",j:[Kl("email"),Kl("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[Kl("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Wc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Xc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},cd:{name:"updateCurrentUser",j:[Zl({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof _h)}},$l(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Kl(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[Kl("url"),zl("options",!0)]},hd:{name:"verifyPasswordResetCode",j:[Kl("code")]}}),ef(sl.prototype,{lc:{name:"languageCode",jb:Zl(Kl(),$l(),"languageCode")},ti:{name:"tenantId",jb:Zl(Kl(),$l(),"tenantId")}}),sl.Persistence=Zu,sl.Persistence.LOCAL="local",sl.Persistence.SESSION="session",sl.Persistence.NONE="none",tf(_h.prototype,{delete:{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[Gl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Gl("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[Yl()]},pb:{name:"linkWithCredential",j:[Yl()]},Cc:{name:"linkWithPhoneNumber",j:[Kl("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Dc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ec:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Yl()]},sb:{name:"reauthenticateWithCredential",j:[Yl()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[Kl("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Mc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Nc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[Zl(zl("opt_actionCodeSettings",!0),$l(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Kl(null,!0)]},bd:{name:"unlink",j:[Kl("provider")]},Ab:{name:"updateEmail",j:[Kl("email")]},Bb:{name:"updatePassword",j:[Kl("password")]},dd:{name:"updatePhoneNumber",j:[Yl("phone")]},Cb:{name:"updateProfile",j:[zl("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[Kl("email"),Zl(zl("opt_actionCodeSettings",!0),$l(null,!0),"opt_actionCodeSettings",!0)]}}),tf(wl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),tf(_l.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),tf(_e.prototype,{na:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),ef(Xc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:Gl("appVerificationDisabledForTesting")}}),tf(Jc.prototype,{confirm:{name:"confirm",j:[Kl("verificationCode")]}}),nf(uo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[yo,ko,xo,fo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Zl(Kl(),zl(),"json")]),nf(Po,"credential",(function(t,e){return new Ao(t,e)}),[Kl("email"),Kl("password")]),tf(Ao.prototype,{w:{name:"toJSON",j:[Kl(null,!0)]}}),tf(_o.prototype,{Ca:{name:"addScope",j:[Kl("scope")]},Ka:{name:"setCustomParameters",j:[zl("customOAuthParameters")]}}),nf(_o,"credential",wo,[Zl(Kl(),zl(),"token")]),nf(Po,"credentialWithLink",Oo,[Kl("email"),Kl("emailLink")]),tf(Eo.prototype,{Ca:{name:"addScope",j:[Kl("scope")]},Ka:{name:"setCustomParameters",j:[zl("customOAuthParameters")]}}),nf(Eo,"credential",Io,[Zl(Kl(),zl(),"token")]),tf(To.prototype,{Ca:{name:"addScope",j:[Kl("scope")]},Ka:{name:"setCustomParameters",j:[zl("customOAuthParameters")]}}),nf(To,"credential",So,[Zl(Kl(),Zl(zl(),$l()),"idToken"),Zl(Kl(),$l(),"accessToken",!0)]),tf(Co.prototype,{Ka:{name:"setCustomParameters",j:[zl("customOAuthParameters")]}}),nf(Co,"credential",No,[Zl(Kl(),zl(),"token"),Kl("secret",!0)]),tf(bo.prototype,{Ca:{name:"addScope",j:[Kl("scope")]},credential:{name:"credential",j:[Zl(Kl(),Zl(zl(),$l()),"optionsOrIdToken"),Zl(Kl(),$l(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[zl("customOAuthParameters")]}}),tf(po.prototype,{w:{name:"toJSON",j:[Kl(null,!0)]}}),tf(ho.prototype,{w:{name:"toJSON",j:[Kl(null,!0)]}}),nf(Mo,"credential",Fo,[Kl("verificationId"),Kl("verificationCode")]),tf(Mo.prototype,{eb:{name:"verifyPhoneNumber",j:[Zl(Kl(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Xl(t.session,so)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Xl(t.session,ao)&&Jl(t.multiFactorHint):t.session&&t.multiFactorUid?Xl(t.session,ao)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),tf(Do.prototype,{w:{name:"toJSON",j:[Kl(null,!0)]}}),tf(T.prototype,{toJSON:{name:"toJSON",j:[Kl(null,!0)]}}),tf(Go.prototype,{toJSON:{name:"toJSON",j:[Kl(null,!0)]}}),tf(Ko.prototype,{toJSON:{name:"toJSON",j:[Kl(null,!0)]}}),tf(ih.prototype,{toJSON:{name:"toJSON",j:[Kl(null,!0)]}}),tf(eh.prototype,{Qc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}}]}}),tf(hh.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}},Kl("displayName",!0)]},ad:{name:"unenroll",j:[Zl({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Jl},Kl(),"multiFactorInfoIdentifier")]}}),tf(Bl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),nf(_i,"parseLink",Ai,[Kl("link")]),nf(Nl,"assertion",(function(t){return new uh(t)}),[Yl("phone")]),function(){if(void 0===Pe||!Pe.INTERNAL||!Pe.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ui,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ai,VERIFY_AND_CHANGE_EMAIL:ci,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:sl,AuthCredential:uo,Error:T};nf(t,"EmailAuthProvider",Po,[]),nf(t,"FacebookAuthProvider",_o,[]),nf(t,"GithubAuthProvider",Eo,[]),nf(t,"GoogleAuthProvider",To,[]),nf(t,"TwitterAuthProvider",Co,[]),nf(t,"OAuthProvider",bo,[Kl("providerId")]),nf(t,"SAMLAuthProvider",mo,[Kl("providerId")]),nf(t,"PhoneAuthProvider",Mo,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof sl)}}]),nf(t,"RecaptchaVerifier",Bl,[Zl(Kl(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),zl("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof Pe.app.App)}}]),nf(t,"ActionCodeURL",_i,[]),nf(t,"PhoneMultiFactorGenerator",Nl,[]),Pe.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new sl(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Pe.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:b((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:b(t.mc,t),addAuthTokenListener:b(t.cc,t),removeAuthTokenListener:b(t.Oc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Pe.registerVersion("@firebase/auth","0.16.0"),Pe.INTERNAL.extendNamespace({User:_h})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Oe=function(t,e){return(Oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Re(t,e){function n(){this.constructor=t}Oe(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var De=function(){return(De=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function xe(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function Le(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function Me(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fe(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Ue(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Fe(arguments[e]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Ut(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Ft(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),Ve=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Vt(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),qe=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new je(e)}}catch(t){}return new Ve},Be=qe("localStorage"),We=qe("sessionStorage"),He=new ge("@firebase/database"),Ke=function(){var t=1;return function(){return t++}}(),Ge=function(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,yt(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new Ht;n.update(e);var r=n.digest();return bt.encodeByteArray(r)},ze=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=ze.apply(null,i):n+="object"==typeof i?Ut(i):i,n+=" "}return n},Qe=null,$e=!0,Ye=function(t,e){yt(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(He.logLevel=he.VERBOSE,Qe=He.log.bind(He),e&&We.set("logging_enabled",!0)):"function"==typeof t?Qe=t:(Qe=null,We.remove("logging_enabled"))},Xe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===$e&&($e=!1,null===Qe&&!0===We.get("logging_enabled")&&Ye(!0)),Qe){var n=ze.apply(null,t);Qe(n)}},Je=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Xe.apply(void 0,Ue([t],e))}},Ze=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+ze.apply(void 0,Ue(t));He.error(n)},tn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+ze.apply(void 0,Ue(t));throw He.error(n),new Error(n)},en=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+ze.apply(void 0,Ue(t));He.warn(n)},nn=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},rn="[MIN_NAME]",on="[MAX_NAME]",sn=function(t,e){if(t===e)return 0;if(t===rn||e===on)return-1;if(e===rn||t===on)return 1;var n=dn(t),r=dn(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},an=function(t,e){return t===e?0:t<e?-1:1},un=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ut(e))},cn=function(t){if("object"!=typeof t||null===t)return Ut(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Ut(e[i]),r+=":",r+=cn(t[e[i]]);return r+="}"},hn=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var fn=function(t){yt(!nn(t),"Invalid JSON number");var e,n,r,i,o,s=1023;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),s))+s,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(o=0;o<64;o+=8){var h=parseInt(u.substr(o,8),2).toString(16);1===h.length&&(h="0"+h),c+=h}return c.toLowerCase()},pn=new RegExp("^-?(0*)\\d{1,10}$"),dn=function(t){if(pn.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},vn=function(t){try{t()}catch(t){setTimeout((function(){var e=t.stack||"";throw en("Exception was thrown by user callback.",e),t}),Math.floor(0))}},yn=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},gn=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=sn(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),mn=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Jt(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Jt(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Jt(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),bn=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=Be.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Be.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(yt("string"==typeof t,"typeof type must == string"),yt("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return ln(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}();var _n,wn,En,In,Tn,Sn=function(t,e){var n=Cn(t),r=n.namespace;"firebase.com"===n.domain&&tn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||tn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&en("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new bn(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new gn(n.pathString)}},Cn=function(t){var e="",n="",r="",i="",o="",s=!0,a="https",u=443;if("string"==typeof t){var c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));var h=t.indexOf("/");-1===h&&(h=t.length);var l=t.indexOf("?");-1===l&&(l=t.length),e=t.substring(0,Math.min(h,l)),h<l&&(i=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(h,l)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Me(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var a=s.split("=");2===a.length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):en("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,l)));(c=e.indexOf(":"))>=0?(s="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=e.length;var p=e.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var d=e.indexOf(".");r=e.substring(0,d).toLowerCase(),n=e.substring(d+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},Nn=/[\[\].#$\/\u0000-\u001F\u007F]/,An=/[\[\].#$\u0000-\u001F\u007F]/,kn=function(t){return"string"==typeof t&&0!==t.length&&!Nn.test(t)},Pn=function(t){return"string"==typeof t&&0!==t.length&&!An.test(t)},On=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!nn(t)||t&&"object"==typeof t&&Vt(t,".sv")},Rn=function(t,e,n,r,i){i&&void 0===n||Dn($t(t,e,i),n,r)},Dn=function(t,e,n){var r=n instanceof gn?new mn(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(nn(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>10485760/3&&Jt(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(ln(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!kn(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),Dn(t,n,r),r.pop()})),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},xn=function(t,e,n,r,i){if(!i||void 0!==n){var o=$t(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];ln(n,(function(t,e){var n=new gn(t);if(Dn(o,e,r.child(n)),".priority"===n.getBack()&&!On(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!kn(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(gn.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},Ln=function(t,e,n,r){if(!r||void 0!==n){if(nn(n))throw new Error($t(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!On(n))throw new Error($t(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Mn=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error($t(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Fn=function(t,e,n,r){if(!(r&&void 0===n||kn(n)))throw new Error($t(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Un=function(t,e,n,r){if(!(r&&void 0===n||Pn(n)))throw new Error($t(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},jn=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Un(t,e,n,r)},Vn=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},qn=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!kn(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Pn(t)}(r))throw new Error($t(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Bn=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error($t(t,e,r)+"must be a boolean.")},Wn=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Qt("OnDisconnect.cancel",0,1,arguments.length),Yt("OnDisconnect.cancel",1,t,!0);var e=new It;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Qt("OnDisconnect.remove",0,1,arguments.length),Vn("OnDisconnect.remove",this.path_),Yt("OnDisconnect.remove",1,t,!0);var e=new It;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Qt("OnDisconnect.set",1,2,arguments.length),Vn("OnDisconnect.set",this.path_),Rn("OnDisconnect.set",1,t,this.path_,!1),Yt("OnDisconnect.set",2,e,!0);var n=new It;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Qt("OnDisconnect.setWithPriority",2,3,arguments.length),Vn("OnDisconnect.setWithPriority",this.path_),Rn("OnDisconnect.setWithPriority",1,t,this.path_,!1),Ln("OnDisconnect.setWithPriority",2,e,!1),Yt("OnDisconnect.setWithPriority",3,n,!0);var r=new It;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Qt("OnDisconnect.update",1,2,arguments.length),Vn("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,en("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xn("OnDisconnect.update",1,t,this.path_,!1),Yt("OnDisconnect.update",2,e,!0);var i=new It;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),Hn=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Qt("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Kn=(_n="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",wn=0,En=[],function(t){var e,n=t===wn;wn=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=_n.charAt(t%64),t=Math.floor(t/64);yt(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===En[e];e--)En[e]=0;En[e]++}else for(e=0;e<12;e++)En[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=_n.charAt(En[e]);return yt(20===i.length,"nextPushId: Length should be 20."),i}),Gn=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),zn=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Gn(rn,t),r=new Gn(rn,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Gn.MIN},t}(),Qn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Re(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return In},set:function(t){In=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return sn(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw gt("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Gn.MIN},e.prototype.maxPost=function(){return new Gn(on,In)},e.prototype.makePost=function(t,e){return yt("string"==typeof t,"KeyIndex indexValue must always be a string."),new Gn(t,In)},e.prototype.toString=function(){return".key"},e}(zn),$n=new Qn;var Yn,Xn,Jn,Zn=function(t){return"number"==typeof t?"number:"+fn(t):"string:"+t},tr=function(t){if(t.isLeafNode()){var e=t.val();yt("string"==typeof e||"number"==typeof e||"object"==typeof e&&Vt(e,".sv"),"Priority must be a string or number.")}else yt(t===Tn||t.isEmpty(),"priority of unexpected type.");yt(t===Tn||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},er=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,yt(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),tr(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Yn},set:function(t){Yn=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(yt(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Zn(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?fn(this.value_):this.value_,this.lazyHash_=Ge(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(yt(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return yt(i>=0,"Unknown leaf type: "+n),yt(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var nr,rr,ir=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Re(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?sn(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Gn.MIN},e.prototype.maxPost=function(){return new Gn(on,new er("[PRIORITY-POST]",Jn))},e.prototype.makePost=function(t,e){var n=Xn(t);return new Gn(e,new er("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(zn)),or=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),sr=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:ur.EMPTY_NODE,this.right=null!=o?o:ur.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return ur.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return ur.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),ar=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new sr(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),ur=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,sr.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,sr.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new or(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new or(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new or(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new or(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new ar,t}(),cr=Math.log(2),hr=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/cr,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),lr=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new sr(s,o.node,sr.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),h=i(u+1,r);return o=t[u],s=n?n(o):o,new sr(s,o.node,sr.BLACK,c,h)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),h=t[o],l=n?n(h):h;u(new sr(l,h.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var h=e.nextBitIsOne(),l=Math.pow(2,e.count-(c+1));h?a(l,sr.BLACK):(a(l,sr.BLACK),a(l,sr.RED))}return o}(new hr(t.length));return new ur(r||e,o)},fr={},pr=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return yt(fr&&ir,"ChildrenNode.ts has not been loaded"),nr=nr||new t({".priority":fr},{".priority":ir})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=qt(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof ur?e:null},t.prototype.hasIndex=function(t){return Vt(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){yt(e!==$n,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,s=n.getIterator(Gn.Wrap),a=s.getNext();a;)o=o||e.isDefinedOn(a.node),i.push(a),a=s.getNext();r=o?lr(i,e.getCompare()):fr;var u=e.toString(),c=De({},this.indexSet_);c[u]=e;var h=De({},this.indexes_);return h[u]=r,new t(h,c)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Wt(this.indexes_,(function(t,i){var o=qt(r.indexSet_,i);if(yt(o,"Missing index implementation for "+i),t===fr){if(o.isDefinedOn(e.node)){for(var s=[],a=n.getIterator(Gn.Wrap),u=a.getNext();u;)u.name!==e.name&&s.push(u),u=a.getNext();return s.push(e),lr(s,o.getCompare())}return fr}var c=n.get(e.name),h=t;return c&&(h=h.remove(new Gn(e.name,c))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Wt(this.indexes_,(function(t){if(t===fr)return t;var r=n.get(e.name);return r?t.remove(new Gn(e.name,r)):t})),this.indexSet_)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function dr(t,e){return sn(t.name,e.name)}function vr(t,e){return sn(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yr=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&tr(this.priorityNode_),this.children_.isEmpty()&&yt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return rr||(rr=new t(new ur(vr),null,pr.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||rr},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?rr:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(yt(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Gn(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?rr:this.priorityNode_;return new t(i,s,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;yt(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(ir,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Zn(this.getPriority().val())+":"),this.forEachChild(ir,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":Ge(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Gn(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Gn(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Gn(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Gn.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Gn.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===gr?-1:0},t.prototype.withIndex=function(e){if(e===$n||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===$n||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(ir),r=e.getIterator(ir),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===$n?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),gr=new(function(t){function e(){return t.call(this,new ur(vr),yr.EMPTY_NODE,pr.Default)||this}return Re(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return yr.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(yr));Object.defineProperties(Gn,{MIN:{value:new Gn(rn,yr.EMPTY_NODE)},MAX:{value:new Gn(on,gr)}}),Qn.__EMPTY_NODE=yr.EMPTY_NODE,er.__childrenNodeConstructor=yr,Tn=gr,function(t){Jn=t}(gr);function mr(t,e){if(void 0===e&&(e=null),null===t)return yr.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),yt(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new er(t,mr(e));if(t instanceof Array){var n=yr.EMPTY_NODE;return ln(t,(function(e,r){if(Vt(t,e)&&"."!==e.substring(0,1)){var i=mr(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(mr(e))}var r=[],i=!1;if(ln(t,(function(t,e){if("."!==t.substring(0,1)){var n=mr(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Gn(t,n)))}})),0===r.length)return yr.EMPTY_NODE;var o=lr(r,dr,(function(t){return t.name}),vr);if(i){var s=lr(r,ir.getCompare());return new yr(o,mr(e),new pr({".priority":s},{".priority":ir}))}return new yr(o,mr(e),pr.Default)}!function(t){Xn=t}(mr);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var br,_r=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Re(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?sn(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Gn.MIN},e.prototype.maxPost=function(){return Gn.MAX},e.prototype.makePost=function(t,e){var n=mr(t);return new Gn(e,n)},e.prototype.toString=function(){return".value"},e}(zn)),wr=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,yt(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return Re(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?sn(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=mr(t),r=yr.EMPTY_NODE.updateChild(this.indexPath_,n);return new Gn(e,r)},e.prototype.maxPost=function(){var t=yr.EMPTY_NODE.updateChild(this.indexPath_,gr);return new Gn(on,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(zn),Er=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Qt("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Qt("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Qt("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Qt("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Qt("DataSnapshot.child",0,1,arguments.length),e=String(e),Un("DataSnapshot.child",1,e,!1);var n=new gn(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,ir)},t.prototype.hasChild=function(t){Qt("DataSnapshot.hasChild",1,1,arguments.length),Un("DataSnapshot.hasChild",1,t,!1);var e=new gn(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Qt("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Qt("DataSnapshot.forEach",1,1,arguments.length),Yt("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),ir))}))},t.prototype.hasChildren=function(){return Qt("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Qt("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Qt("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Ir=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Ut(this.snapshot.exportVal())},t}(),Tr=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Sr=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Ir("value",this,new Er(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){yt(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Tr(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Cr=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Vt(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Tr(this,t,e):null},t.prototype.createEvent=function(t,e){yt(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Ir(t.type,this,new Er(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){yt(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Nr=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return yt(br,"Reference.ts has not been loaded"),br},set:function(t){br=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===$n){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==rn)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==on)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===ir){if(null!=e&&!On(e)||null!=n&&!On(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(yt(t.getIndex()instanceof wr||t.getIndex()===_r,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Qt("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Qt("Query.on",2,4,arguments.length),Mn("Query.on",1,e,!1),Yt("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var s={};s[e]=n,this.onChildEvent(s,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Sr(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Cr(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Qt("Query.off",0,3,arguments.length),Mn("Query.off",1,t,!0),Yt("Query.off",2,e,!0),Xt("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new Sr(o,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Cr(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var o=this;Qt("Query.once",1,4,arguments.length),Mn("Query.once",1,e,!1),Yt("Query.once",2,n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,i),a=!0,u=new It;u.promise.catch((function(){}));var c=function(t){a&&(a=!1,o.off(e,c),n&&n.bind(s.context)(t),u.resolve(t))};return this.on(e,c,(function(t){o.off(e,c),s.cancel&&s.cancel.bind(s.context)(t),u.reject(t)})),u.promise},t.prototype.limitToFirst=function(e){if(Qt("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Qt("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Qt("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Un("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new gn(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new wr(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Qt("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy($n);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Qt("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(ir);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Qt("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(_r);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Qt("Query.startAt",0,2,arguments.length),Rn("Query.startAt",1,e,this.path,!0),Fn("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Qt("Query.endAt",0,2,arguments.length),Rn("Query.endAt",1,e,this.path,!0),Fn("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Qt("Query.equalTo",1,2,arguments.length),Rn("Query.equalTo",1,t,this.path,!1),Fn("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Qt("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Qt("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=cn(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Qt("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Yt(t,3,r.cancel,!0),r.context=n,Xt(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error($t(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Ar=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),kr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),Pr=function(t,e,n){return t&&"object"==typeof t?(yt(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Or(t[".sv"],e,n):"object"==typeof t[".sv"]?Rr(t[".sv"],e):void yt(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Or=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:yt(!1,"Unexpected server value: "+t)}},Rr=function(t,e,n){t.hasOwnProperty("increment")||yt(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&yt(!1,"Unexpected increment value: "+r);var i=e.node();if(yt(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},Dr=function(t,e,n,r){return Lr(e,new kr(n,t),r)},xr=function(t,e,n){return Lr(t,new Ar(e),n)};function Lr(t,e,n){var r,i=t.getPriority().val(),o=Pr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=Pr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new er(a,mr(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new er(o))),u.forEachChild(ir,(function(t,i){var o=Lr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mr,Fr=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(ir,(function(t,e){n.remember(new gn(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();if(t=t.popFront(),this.children.has(r))this.children.get(r).forget(t)&&this.children.delete(r);return 0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new gn(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Mr||(Mr={}));var Ur,jr,Vr=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,yt(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),qr=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Mr.ACK_USER_WRITE,this.source=Vr.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return yt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new gn(e));return new t(gn.Empty,n,this.revert)}return yt(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),Br=function(){function t(t,e){void 0===e&&(Ur||(Ur=new ur(an)),e=Ur),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return ln(e,(function(t,e){n=n.set(new gn(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:gn.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new gn(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r=e.getFront(),i=(this.children.get(r)||t.Empty).setTree(e.popFront(),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(gn.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,gn.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,gn.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(gn.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),Wr=function(){function t(t,e){this.source=t,this.path=e,this.type=Mr.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,gn.Empty):new t(this.source,this.path.popFront())},t}(),Hr=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Mr.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,gn.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),Kr=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Mr.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new gn(e));return n.isEmpty()?null:n.value?new Hr(this.source,gn.Empty,n.value):new t(this.source,gn.Empty,n)}return yt(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Gr=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),zr=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new Gr(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new Gr(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new Gr(yr.EMPTY_NODE,!1,!1),new Gr(yr.EMPTY_NODE,!1,!1)),t}(),Qr=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),$r=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){yt(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Qr.childRemovedChange(e,s)):yt(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(Qr.childAddedChange(e,n)):o.trackChildChange(Qr.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(ir,(function(t,r){e.hasChild(t)||n.trackChildChange(Qr.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(ir,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(Qr.childChangedChange(e,r,i))}else n.trackChildChange(Qr.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?yr.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Yr=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;yt(e===Qr.CHILD_ADDED||e===Qr.CHILD_CHANGED||e===Qr.CHILD_REMOVED,"Only child changes supported for tracking"),yt(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===Qr.CHILD_ADDED&&i===Qr.CHILD_REMOVED)this.changeMap.set(n,Qr.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===Qr.CHILD_REMOVED&&i===Qr.CHILD_ADDED)this.changeMap.delete(n);else if(e===Qr.CHILD_REMOVED&&i===Qr.CHILD_CHANGED)this.changeMap.set(n,Qr.childRemovedChange(n,r.oldSnap));else if(e===Qr.CHILD_CHANGED&&i===Qr.CHILD_ADDED)this.changeMap.set(n,Qr.childAddedChange(n,t.snapshotNode));else{if(e!==Qr.CHILD_CHANGED||i!==Qr.CHILD_CHANGED)throw gt("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Qr.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Xr=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Jr=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Gr(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Zr=function(t,e){this.viewCache=t,this.changes=e},ti=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){yt(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),yt(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,s,a=new Yr;if(n.type===Mr.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(e,u.path,u.snap,r,i,a):(yt(u.source.fromServer,"Unknown source."),s=u.source.tagged||e.getServerCache().isFiltered()&&!u.path.isEmpty(),o=this.applyServerOverwrite_(e,u.path,u.snap,r,i,s,a))}else if(n.type===Mr.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(e,c.path,c.children,r,i,a):(yt(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,c.path,c.children,r,i,s,a))}else if(n.type===Mr.ACK_USER_WRITE){var h=n;o=h.revert?this.revertUserWrite_(e,h.path,r,i,a):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,a)}else{if(n.type!==Mr.LISTEN_COMPLETE)throw gt("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,a)}var l=a.getChanges();return t.maybeAddValueEvent_(e,o,l),new Zr(o,l)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Qr.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,a=void 0;if(e.isEmpty())if(yt(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof yr?u:yr.EMPTY_NODE,h=n.calcCompleteEventChildren(c);s=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var l=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var f=e.getFront();if(".priority"===f){yt(1===e.getLength(),"Can't have a priority with additional path components");var p=o.getNode();a=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,p,a);s=null!=d?this.filter_.updatePriority(p,d):o.getNode()}else{var v=e.popFront(),y=void 0;if(o.isCompleteForChild(f)){a=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),a);y=null!=g?o.getNode().getImmediateChild(f).updateChild(v,g):o.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());s=null!=y?this.filter_.updateChild(o.getNode(),f,y,v,r,i):o.getNode()}}return t.updateEventSnap(s,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),h,null)}else{var l=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),p=u.getNode().getImmediateChild(l).updateChild(f,n);a=".priority"===l?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),l,p,f,Xr,null)}var d=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),v=new Jr(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,v,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Jr(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var h=e.getFront();if(".priority"===h)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var l=e.popFront(),f=u.getNode().getImmediateChild(h),p=void 0;if(l.isEmpty())p=n;else{var d=c.getCompleteChild(h);p=null!=d?".priority"===l.getBack()&&d.getChild(l.parent()).isEmpty()?d:d.updateChild(l,n):yr.EMPTY_NODE}if(f.equals(p))s=t;else{var v=this.filter_.updateChild(u.getNode(),h,p,l,c,o);s=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach((function(r,c){var h=n.child(r);t.cacheHasChild_(e,h.getFront())&&(u=a.applyUserOverwrite_(u,h,c,i,o,s))})),r.foreach((function(r,c){var h=n.child(r);t.cacheHasChild_(e,h.getFront())||(u=a.applyUserOverwrite_(u,h,c,i,o,s))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:Br.Empty.setTree(e,n);var h=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(h.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),l=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new gn(e),l,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!h.hasChild(e)&&!u){var l=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(l,n);c=a.applyServerOverwrite_(c,new gn(e),f,r,i,o,s)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=Br.Empty;return a.getNode().forEachChild($n,(function(t,e){u=u.set(new gn(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=Br.Empty;return n.foreach((function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Xr,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s=new Jr(n,t,r),a=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();yt(h instanceof yr,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(h)}c=c,u=this.filter_.updateFullNode(a,c,i)}else{var l=e.getFront(),f=n.calcCompleteChild(l,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(l)&&(f=a.getImmediateChild(l)),(u=null!=f?this.filter_.updateChild(a,l,f,e.popFront(),s,i):t.getEventCache().getNode().hasChild(l)?this.filter_.updateChild(a,l,yr.EMPTY_NODE,e.popFront(),s,i):a).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(gn.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},t}(),ei=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===Qr.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(Qr.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,Qr.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,Qr.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,Qr.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,Qr.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,Qr.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter((function(t){return t.type===e}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw gt("Should only compare child_ events.");var n=new Gn(t.childName,t.snapshotNode),r=new Gn(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),ni=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new $r(n.getIndex()),i=n.getNodeFilter();this.processor_=new ti(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(yr.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(yr.EMPTY_NODE,s.getNode(),null),c=new Gr(a,o.isFullyInitialized(),r.filtersNodes()),h=new Gr(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new zr(h,c),this.eventGenerator_=new ei(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){yt(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){e=e;var i=t.createCancelEvent(e,r);i&&n.push(i)}))}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===Mr.MERGE&&null!==t.source.queryId&&(yt(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),yt(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),yt(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];e.getNode().isLeafNode()||e.getNode().forEachChild(ir,(function(t,e){n.push(Qr.childAddedChange(t,e))}));return e.isFullyInitialized()&&n.push(Qr.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),ri=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return yt(jr,"Reference.ts has not been loaded"),jr},set:function(t){yt(!jr,"__referenceConstructor has already been defined"),jr=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return yt(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=Me(this.views.values()),c=u.next();!c.done;c=u.next()){s=c.value;a=a.concat(s.applyOperation(t,e,n))}}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof yr?(a=n.calcCompleteEventChildren(r),u=!1):(a=yr.EMPTY_NODE,u=!1);var c=new zr(new Gr(a,u,!1),new Gr(r,i,!1));s=new ni(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i,o,s=e.queryIdentifier(),a=[],u=[],c=this.hasCompleteView();if("default"===s)try{for(var h=Me(this.views.entries()),l=h.next();!l.done;l=h.next()){var f=Fe(l.value,2),p=f[0],d=f[1];u=u.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(p),d.getQuery().getQueryParams().loadsAllData()||a.push(d.getQuery()))}}catch(t){i={error:t}}finally{try{l&&!l.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}else(d=this.views.get(s))&&(u=u.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(s),d.getQuery().getQueryParams().loadsAllData()||a.push(d.getQuery())));return c&&!this.hasCompleteView()&&a.push(new t.__referenceConstructor(e.repo,e.path)),{removed:a,events:u}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Me(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=Me(this.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r||s.getCompleteServerCache(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Me(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),ii=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new Br(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=gn.relativePath(i,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(i,o))}var a=new Br(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return ln(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,Br.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(gn.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(ir,(function(e,n){t.push(new Gn(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Gn(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new Br(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return oi(gn.Empty,this.writeTree_,t)},t.Empty=new t(new Br(null)),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?(yt(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=oi(t.child(e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(t.child(".priority"),r)),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var si=function(){function t(){this.visibleWrites_=ii.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new ai(t,this)},t.prototype.addOverwrite=function(t,e,n,r){yt(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){yt(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));yt(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&s>=0;){var a=this.allWrites_[s];a.visible&&(s>=n&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}if(i){if(o)return this.resetTree_(),!0;r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):ln(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))}));return!0}return!1},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);if(!i&&o.isEmpty())return n;if(i||null!=n||o.hasCompleteWrite(gn.Empty)){var s=t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e);c=n||yr.EMPTY_NODE;return s.apply(c)}return null}var a=this.visibleWrites_.getCompleteNode(e);if(null!=a)return a;var u=this.visibleWrites_.childCompoundWrite(e);if(u.isEmpty())return n;if(null!=n||u.hasCompleteWrite(gn.Empty)){var c=n||yr.EMPTY_NODE;return u.apply(c)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=yr.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(ir,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(ir,(function(t,e){var r=i.childCompoundWrite(new gn(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){yt(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(gn.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=o.getCompare(),l=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=l.getNext();f&&c.length<r;)0!==h(f,n)&&c.push(f),f=l.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,gn.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=ii.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)n.contains(s)?(a=gn.relativePath(n,s),r=r.addWrite(a,o.snap)):s.contains(n)&&(a=gn.relativePath(s,n),r=r.addWrite(gn.Empty,o.snap.getChild(a)));else{if(!o.children)throw gt("WriteRecord should have .snap or .children");if(n.contains(s))a=gn.relativePath(n,s),r=r.addWrites(a,o.children);else if(s.contains(n))if((a=gn.relativePath(s,n)).isEmpty())r=r.addWrites(gn.Empty,o.children);else{var u=qt(o.children,a.getFront());if(u){var c=u.getChild(a.popFront());r=r.addWrite(gn.Empty,c)}}}}}return r},t}(),ai=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),ui=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=Br.Empty,this.pendingWriteTree_=new si,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Hr(Vr.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=Br.fromObject(e);return this.applyOperationToSyncPoints_(new Kr(Vr.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=Br.Empty;return null!=n.snap?r=r.set(gn.Empty,!0):ln(n.children,(function(t,e){r=r.set(new gn(t),e)})),this.applyOperationToSyncPoints_(new qr(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Hr(Vr.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=Br.fromObject(e);return this.applyOperationToSyncPoints_(new Kr(Vr.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Wr(Vr.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=gn.relativePath(s,e),c=new Hr(Vr.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=gn.relativePath(s,e),c=Br.fromObject(n),h=new Kr(Vr.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,h)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=gn.relativePath(o,e),u=new Wr(Vr.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=gn.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var s,a=this.syncPointTree_.get(r);(a?(o=o||a.hasCompleteView(),i=i||a.getCompleteServerCache(gn.Empty)):(a=new ri,this.syncPointTree_=this.syncPointTree_.set(r,a)),null!=i)?s=!0:(s=!1,i=yr.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(gn.Empty);n&&(i=i.updateImmediateChild(t,n))})));var u=a.viewExistsForQuery(e);if(!u&&!e.getQueryParams().loadsAllData()){var c=t.makeQueryKey_(e);yt(!this.queryToTagMap.has(c),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(c,h),this.tagToQueryMap.set(h,c)}var l=this.pendingWriteTree_.childWrites(r),f=a.addEventRegistration(e,n,l,i,s);if(!u&&!o){var p=a.viewForQuery(e);f=f.concat(this.setupListener_(e,p))}return f},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var h=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),l=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(h&&!l){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var v=p[d],y=v.getQuery(),g=this.createListenerForView_(v);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),g.hashFn,g.onComplete)}}if(!l&&c.length>0&&!r)if(h){this.listenProvider_.stopListening(t.queryForListening_(e),null)}else c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}));this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=gn.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),ln(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),s=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),a=this.syncPointTree_.subtree(r);if(i)yt(!a.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=a.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),ln(n,(function(t,e){r=r.concat(e)})),r})),c=0;c<u.length;++c){var h=u[c];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return s},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||yr.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return yt(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new gn(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);yt(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(gn.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(gn.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(gn.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,h=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,h))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(gn.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(gn.Empty));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),ci=function(){function t(){this.rootNode_=yr.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),hi=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Vt(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return wt(this.counters_)},t}(),li=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new hi),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),fi=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=De({},t);return this.last_&&ln(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),pi=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new fi(t);var n=1e4+2e4*Math.random();yn(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;ln(e,(function(e,i){i>0&&Vt(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),yn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),di=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new vi(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r)t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),vi=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();Qe&&Xe("event: "+e.toString()),vn(n)}}},t.prototype.getPath=function(){return this.path_},t}(),yi=function(){function t(t){this.allowedEvents_=t,this.listeners_={},yt(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Ue(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){yt(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),gi=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Re(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return yt("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(yi),mi=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||St()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Re(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return yt("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(yi),bi=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&vn((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},t}(),_i=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Je(t),this.stats_=li.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new bi(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new wi((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Fe(t,5),i=r[0],o=r[1],s=r[2];r[3],r[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Fe(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!!t.forceAllow_||!(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Ut(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=(n=mt(e),bt.encodeByteArray(n,!0)),i=hn(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},t.prototype.incrementIncomingBytes_=function(t){var e=Ut(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),wi=function(){function t(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Ke(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(t){Xe("frame writing exception"),t.stack&&Xe(t.stack),Xe(t)}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Xe("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){Xe("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},t}(),Ei="";function Ii(t){Ei=t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ti=null;"undefined"!=typeof MozWebSocket?Ti=MozWebSocket:"undefined"!=typeof WebSocket&&(Ti=WebSocket);var Si=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Je(this.connId),this.stats_=li.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Be.set("previous_websocket_failure",!0);try{if(kt());else{var r={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new Ti(this.connURL,[],r)}}catch(t){this.log_("Error instantiating WebSocket.");var i=t.message||t.data;return i&&this.log_(i),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Ti&&!t.forceDisallow_},t.previouslyFailed=function(){return Be.isInMemoryStorage||!0===Be.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){Be.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Ft(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(yt(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Ut(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=hn(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Ci=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[_i,Si]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=Si&&Si.isAvailable(),o=i&&!Si.previouslyFailed();if(e.webSocketOnly&&(i||en("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Si];else{var s=this.transports_=[];try{for(var a=Me(t.ALL_TRANSPORTS),u=a.next();!u.done;u=a.next()){var c=u.value;c&&c.isAvailable()&&s.push(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Ni=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Je("c:"+this.id+":"),this.transportManager_=new Ci(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=yn((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=un("t",t),n=un("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=un("t",t),n=un("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=un("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?Ze("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ze("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&en("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),yn((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):yn((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Be.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Ai=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ki=function(t){function e(n,r,i,o,s,a,u){var c=t.call(this)||this;if(c.repoInfo_=n,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=o,c.onServerInfoUpdate_=s,c.authTokenProvider_=a,c.authOverride_=u,c.id=e.nextPersistentConnectionId_++,c.log_=Je("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingGets_=[],c.outstandingPutCount_=0,c.outstandingGetCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=1e3,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,u&&!kt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return c.scheduleConnect_(0),gi.getInstance().on("visible",c.onVisible_,c),-1===n.host.indexOf("fblocal")&&mi.getInstance().on("online",c.onOnline_,c),c}return Re(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Ut(i)),yt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new It,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[o];void 0!==t&&i===t&&(delete e.outstandingGets_[o],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),yt(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),yt(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Vt(t,"w")){var n=qt(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();en("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=jt(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t,e=this;if(this.connected_&&this.authToken_){var n=this.authToken_,r=(t=jt(n).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,(function(t){var r=t.s,i=t.d||"error";e.authToken_===n&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),yt(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Ut(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):Ze("Unrecognized action received from server: "+Ut(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;yt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this,a=this.lastSessionId,u=!1,c=null,h=function(){c?c.close():(u=!0,i())};this.realtime_={close:h,sendRequest:function(t){yt(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}};var l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(l).then((function(t){u?Xe("getToken() completed but was canceled"):(Xe("getToken() completed. Creating connection."),s.authToken_=t&&t.accessToken,c=new Ni(o,s.repoInfo_,s.applicationId_,n,r,i,(function(t){en(t+" ("+s.repoInfo_.toString()+")"),s.interrupt("server_kill")}),a))})).then(null,(function(e){s.log_("Failed to get token: "+e),u||(t.repoInfo_.nodeAdmin&&en(e),h())}))}},e.prototype.interrupt=function(t){Xe("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){Xe("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Bt(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return cn(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new gn(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){Xe("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=Me(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Me(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},e.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+Ei.replace(/\./g,"-")]=1,St()?t["framework.cordova"]=1:At()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=mi.getInstance().currentlyOnline();return Bt(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Ai),Pi=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=Je("p:rest:"),i.listens_={},i}return Re(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(yt(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var a=e.getListenId_(t,r),u={};this.listens_[a]=u;var c=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",c,(function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(s,n,!1,r),qt(o.listens_,a)===u)&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=t.getQueryParams().toRestQueryStringParameters(),r=t.path.toString(),i=new It;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e.auth=o);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}(e);r.log_("Sending REST request for "+s);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(n&&4===a.readyState){r.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);var t=null;if(a.status>=200&&a.status<300){try{t=Ft(a.responseText)}catch(t){en("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&en("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))},e}(Ai),Oi=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new di,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Fr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=li.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new Pi(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ut(e)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new ki(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),this.statsReporter_=li.getOrCreateReporter(this.repoInfo_,(function(){return new pi(t.stats_,t.server_)})),this.transactionsInit_(),this.infoData_=new ci,this.infoSyncTree_=new ui({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new ui({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);t.eventQueue_.raiseEventsForChangedPath(e.path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new gn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new gn(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var s=Wt(e,(function(t){return mr(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var a=mr(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,a,r)}else if(n){var u=Wt(e,(function(t){return mr(t)}));o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=mr(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var h=i;o.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;ln(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new gn("/.info/"+t),r=mr(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this;return this.server_.get(t).then((function(n){var r=mr(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return e.eventQueue_.raiseEventsAtPath(t.path,i),Promise.resolve(new Er(r,t.getRef(),t.getQueryParams().getIndex()))}),(function(n){e.log_("get for query "+Ut(t)+" falling back to cache after error: "+n);var r=e.serverSyncTree_.calcCompleteEventCache(t.path);return r.isEmpty()?Promise.reject(new Error(n)):Promise.resolve(new Er(r,t.getRef(),t.getQueryParams().getIndex()))}))},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=mr(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=xr(s,a,o),c=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(h),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||en("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)}));var l=this.abortTransactions_(t);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(ln(e,(function(e,n){i=!1,s[e]=Dr(t.child(e),mr(n),r.serverSyncTree_,o)})),i)Xe("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||en("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)})),ln(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new Fr;this.onDisconnect_.forEachTree(gn.Empty,(function(r,i){var o=Dr(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(gn.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new Fr,this.eventQueue_.raiseEventsForChangedPath(gn.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=mr(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=mr(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Bt(e))return Xe("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&ln(e,(function(e,n){var i=mr(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new fi(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);ln(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),Xe.apply(void 0,Ue([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&vn((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new Wi(this))},enumerable:!1,configurable:!0}),t}(),Ri=function(){function t(e){this.indexedFilter_=new $r(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Gn(e,n))||(n=yr.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=yr.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(yr.EMPTY_NODE);var i=this;return e.forEachChild(ir,(function(t,e){i.matches(new Gn(t,e))||(r=r.updateImmediateChild(t,yr.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),Di=function(){function t(t){this.rangedFilter_=new Ri(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Gn(e,n))||(n=yr.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=yr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=yr.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(yr.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(t,e){return h(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var l=!1;i.hasNext();){s=i.getNext();!l&&c(a,s)<=0&&(l=!0),l&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,yr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(t,e){return s(e,t)}}else o=this.index_.getCompare();var a=t;yt(a.numChildren()===this.limit_,"");var u=new Gn(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(Qr.childChangedChange(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Qr.childRemovedChange(e,l));var d=a.updateImmediateChild(e,yr.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Qr.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?t:h&&o(c,u)>=0?(null!=i&&(i.trackChildChange(Qr.childRemovedChange(c.name,c.node)),i.trackChildChange(Qr.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,yr.EMPTY_NODE)):t},t}(),xi=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ir}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return yt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return yt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:rn},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return yt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return yt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:on},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return yt(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==ir&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===ir},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new $r(this.getIndex()):this.hasLimit()?new Di(this):new Ri(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===ir?e=n.PRIORITY_INDEX:this.index_===_r?e=n.VALUE_INDEX:this.index_===$n?e=n.KEY_INDEX:(yt(this.index_ instanceof wr,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=Ut(e),this.startSet_&&(r[n.START_AT]=Ut(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+Ut(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=Ut(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+Ut(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),Li=function(t){function e(e,n){if(!(e instanceof Oi))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,xi.DEFAULT,!1)||this}return Re(e,t),e.prototype.getKey=function(){return Qt("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Qt("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof gn||(null===this.path.getFront()?jn("Reference.child",1,t,!1):Un("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Qt("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Qt("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Qt("Reference.set",1,2,arguments.length),Vn("Reference.set",this.path),Rn("Reference.set",1,t,this.path,!1),Yt("Reference.set",2,e,!0);var n=new It;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Qt("Reference.update",1,2,arguments.length),Vn("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,en("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xn("Reference.update",1,t,this.path,!1),Yt("Reference.update",2,e,!0);var i=new It;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Qt("Reference.setWithPriority",2,3,arguments.length),Vn("Reference.setWithPriority",this.path),Rn("Reference.setWithPriority",1,t,this.path,!1),Ln("Reference.setWithPriority",2,e,!1),Yt("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new It;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Qt("Reference.remove",0,1,arguments.length),Vn("Reference.remove",this.path),Yt("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Qt("Reference.transaction",1,3,arguments.length),Vn("Reference.transaction",this.path),Yt("Reference.transaction",1,t,!1),Yt("Reference.transaction",2,e,!0),Bn("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new It;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new Hn(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Qt("Reference.setPriority",1,2,arguments.length),Vn("Reference.setPriority",this.path),Ln("Reference.setPriority",1,t,!1),Yt("Reference.setPriority",2,e,!0);var n=new It;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Qt("Reference.push",0,2,arguments.length),Vn("Reference.push",this.path),Rn("Reference.push",1,t,this.path,!0),Yt("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Kn(r),o=this.child(i),s=this.child(i);return n=null!=t?o.set(t,e).then((function(){return s})):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return Vn("Reference.onDisconnect",this.path),new Wn(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Nr);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nr.__referenceConstructor=Li,ri.__referenceConstructor=Li;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Mi,Fi=function(){this.children={},this.childCount=0,this.value=null},Ui=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Fi),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof gn?e:new gn(e),r=this,i=n.getFront();null!==i;){r=new t(i,r,qt(r.node_.children,i)||new Fi),i=(n=n.popFront()).getFront()}return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){yt(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;ln(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new gn(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Vt(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(Mi||(Mi={})),Oi.MAX_TRANSACTION_RETRIES_=25,Oi.prototype.transactionsInit_=function(){this.transactionQueueTree_=new Ui},Oi.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new Li(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:Ke(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(t);s.currentInputSnapshot=a;var u=s.update(a.val());if(void 0===u){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var c=new Er(s.currentInputSnapshot,new Li(this,s.path),ir);s.onComplete(null,!1,c)}}else{Dn("transaction failed: Data returned ",u,s.path),s.status=Mi.RUN;var h=this.transactionQueueTree_.subTree(t),l=h.getValue()||[];l.push(s),h.setValue(l);var f=void 0;if("object"==typeof u&&null!==u&&Vt(u,".priority"))f=qt(u,".priority"),yt(On(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else f=(this.serverSyncTree_.calcCompleteEventCache(t)||yr.EMPTY_NODE).getPriority().val();f=f;var p=this.generateServerValues(),d=mr(u,f),v=xr(d,a,p);s.currentOutputSnapshotRaw=d,s.currentOutputSnapshotResolved=v,s.currentWriteId=this.getNextWriteId_();var y=this.serverSyncTree_.applyUserOverwrite(t,v,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,y),this.sendReadyTransactions_()}},Oi.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||yr.EMPTY_NODE},Oi.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);yt(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===Mi.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},Oi.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),o=i,s=i.hash(),a=0;a<e.length;a++){var u=e[a];yt(u.status===Mi.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=Mi.SENT,u.retryCount++;var c=gn.relativePath(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var h=o.val(!0),l=t;this.server_.put(l.toString(),h,(function(r){n.log_("transaction put response",{path:l.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=Mi.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new Li(n,e[s].path),c=new Er(a,u,ir);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i);for(s=0;s<o.length;s++)vn(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status===Mi.SENT_NEEDS_ABORT?e[s].status=Mi.NEEDS_ABORT:e[s].status=Mi.RUN;else{en("transaction at "+l.toString()+" failed: "+r);for(s=0;s<e.length;s++)e[s].status=Mi.NEEDS_ABORT,e[s].abortReason=r}n.rerunTransactions_(t)}}),s)},Oi.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},Oi.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter((function(t){return t.status===Mi.RUN})).map((function(t){return t.currentWriteId})),s=0;s<t.length;s++){var a=t[s],u=gn.relativePath(e,a.path),c=!1,h=void 0;if(yt(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===Mi.NEEDS_ABORT)c=!0,h=a.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===Mi.RUN)if(a.retryCount>=Oi.MAX_TRANSACTION_RETRIES_)c=!0,h="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var l=this.getLatestState_(a.path,o);a.currentInputSnapshot=l;var f=t[s].update(l.val());if(void 0!==f){Dn("transaction failed: Data returned ",f,a.path);var p=mr(f);"object"==typeof f&&null!=f&&Vt(f,".priority")||(p=p.updatePriority(l.getPriority()));var d=a.currentWriteId,v=this.generateServerValues(),y=xr(p,l,v);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(d),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,h="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],c&&(t[s].status=Mi.COMPLETED,n=t[s].unwatcher,setTimeout(n,Math.floor(0)),t[s].onComplete))if("nodata"===h){var g=new Li(this,t[s].path),m=t[s].currentInputSnapshot,b=new Er(m,g,ir);r.push(t[s].onComplete.bind(null,null,!1,b))}else r.push(t[s].onComplete.bind(null,new Error(h),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(s=0;s<r.length;s++)vn(r[s]);this.sendReadyTransactions_()}},Oi.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},Oi.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},Oi.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},Oi.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Mi.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},Oi.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},Oi.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status===Mi.SENT_NEEDS_ABORT);else if(e[o].status===Mi.SENT)yt(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=Mi.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(yt(e[o].status===Mi.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)vn(n[o])}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ji,Vi=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(Xe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',en(t)},t}(),qi=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),Bi=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return ji||(ji=new t),ji},t.prototype.interrupt=function(){var t,e,n,r;try{for(var i=Me(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Me(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var i=Me(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Me(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new bn(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new qi)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||tn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Xe("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=Sn(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,i="http://"+u+"?ns="+a.namespace,a=(s=Sn(i,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new qi:new Vi(t,e);return qn("Invalid Firebase Database URL",1,s),s.path.isEmpty()||tn("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=qt(this.repos_,t.app.name);e&&qt(e,t.key)===t||tn("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=qt(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=qt(r,t.toURLString());return i&&tn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Oi(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),Wi=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return xe(e,void 0,void 0,(function(){return Le(this,(function(t){return this.checkDeleted_("delete"),Bi.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof Oi||tn("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Li(this.repo_,gn.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?tn("Cannot call useEmulator() after instance has already been initialized."):Bi.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Qt("database.ref",0,1,arguments.length),t instanceof Li?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Qt(e,1,1,arguments.length);var n=Sn(t,this.repo_.repoInfo_.nodeAdmin);qn(e,1,n);var r=n.repoInfo;return r.isCustomHost()||r.host===this.repo_.repoInfo_.host||tn(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&tn("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Qt("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Qt("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}();var Hi=Object.freeze({__proto__:null,forceLongPolling:function(){Si.forceDisallow(),_i.forceAllow()},forceWebSockets:function(){_i.forceDisallow()},isWebSocketsAvailable:function(){return Si.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;Ii(r);var u=new se("auth-internal",new ue("database-standalone"));return u.setComponent(new oe("auth-internal",(function(){return i}),"PRIVATE")),{instance:Bi.getInstance().databaseFromApp(e,u,n,a),namespace:o}}}),Ki=ki;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ki.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},ki.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Gi=Ni,zi=bn,Qi=Object.freeze({__proto__:null,DataConnection:Ki,RealTimeConnection:Gi,hijackHash:function(t){var e=ki.prototype.put;return ki.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){ki.prototype.put=e}},ConnectionTarget:zi,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Bi.getInstance().forceRestClient(t)}}),$i=Wi.ServerValue;!function(t){Ii(t.SDK_VERSION),t.INTERNAL.registerComponent(new oe("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return Bi.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:Li,Query:Nr,Database:Wi,DataSnapshot:Er,enableLogging:Ye,INTERNAL:Hi,ServerValue:$i,TEST_ACCESS:Qi}).setMultipleInstances(!0)),t.registerVersion("@firebase/database","0.8.1")}(Pe);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Yi=function(t,e){return(Yi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Xi(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ji,Zi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},to=to||{},eo=Zi||self;function no(){}function ro(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function io(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var oo="closure_uid_"+(1e9*Math.random()>>>0),so=0;function ao(t,e,n){return t.call.apply(t.bind,arguments)}function uo(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function co(t,e,n){return(co=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ao:uo).apply(null,arguments)}function ho(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function lo(){return Date.now()}function fo(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function po(){this.j=this.j,this.i=this.i}po.prototype.j=!1,po.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(t){Object.prototype.hasOwnProperty.call(t,oo)&&t[oo]||(t[oo]=++so)})(this)},po.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var vo=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},yo=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function go(t){return Array.prototype.concat.apply([],arguments)}function mo(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function bo(t){return/^[\s\xa0]*$/.test(t)}var _o,wo=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Eo(t,e){return-1!=t.indexOf(e)}function Io(t,e){return t<e?-1:t>e?1:0}t:{var To=eo.navigator;if(To){var So=To.userAgent;if(So){_o=So;break t}}_o=""}function Co(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function No(t){var e={};for(var n in t)e[n]=t[n];return e}var Ao="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ko(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Ao.length;o++)n=Ao[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Po(t){return Po[" "](t),t}Po[" "]=no;var Oo,Ro,Do=Eo(_o,"Opera"),xo=Eo(_o,"Trident")||Eo(_o,"MSIE"),Lo=Eo(_o,"Edge"),Mo=Lo||xo,Fo=Eo(_o,"Gecko")&&!(Eo(_o.toLowerCase(),"webkit")&&!Eo(_o,"Edge"))&&!(Eo(_o,"Trident")||Eo(_o,"MSIE"))&&!Eo(_o,"Edge"),Uo=Eo(_o.toLowerCase(),"webkit")&&!Eo(_o,"Edge");function jo(){var t=eo.document;return t?t.documentMode:void 0}t:{var Vo="",qo=(Ro=_o,Fo?/rv:([^\);]+)(\)|;)/.exec(Ro):Lo?/Edge\/([\d\.]+)/.exec(Ro):xo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ro):Uo?/WebKit\/(\S+)/.exec(Ro):Do?/(?:Version)[ \/]?(\S+)/.exec(Ro):void 0);if(qo&&(Vo=qo?qo[1]:""),xo){var Bo=jo();if(null!=Bo&&Bo>parseFloat(Vo)){Oo=String(Bo);break t}}Oo=Vo}var Wo,Ho={};function Ko(t){return function(t,e){var n=Ho;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=wo(String(Oo)).split("."),r=wo(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Io(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Io(0==s[2].length,0==a[2].length)||Io(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(eo.document&&xo){var Go=jo();Wo=Go||(parseInt(Oo,10)||void 0)}else Wo=void 0;var zo=Wo,Qo=!xo||9<=Number(zo),$o=xo&&!Ko("9"),Yo=function(){if(!eo.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{eo.addEventListener("test",no,e),eo.removeEventListener("test",no,e)}catch(t){}return t}();function Xo(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Jo(t,e){if(Xo.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Fo){t:{try{Po(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Zo[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Xo.prototype.b=function(){this.defaultPrevented=!0},fo(Jo,Xo);var Zo={2:"touch",3:"pen",4:"mouse"};Jo.prototype.b=function(){Jo.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,$o)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var ts="closure_listenable_"+(1e6*Math.random()|0),es=0;function ns(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++es,this.Y=this.Z=!1}function rs(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function is(t){this.src=t,this.a={},this.b=0}function os(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=vo(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(rs(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ss(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}is.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ss(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ns(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var as="closure_lm_"+(1e6*Math.random()|0),us={};function cs(t,e,n,r,i){if(r&&r.once)return ls(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)cs(t,e[o],n,r,i);return null}return n=bs(n),t&&t[ts]?t.va(e,n,io(r)?!!r.capture:!!r,i):hs(t,e,n,!1,r,i)}function hs(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=io(i)?!!i.capture:!!i;if(s&&!Qo)return null;var a=gs(t);if(a||(t[as]=a=new is(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=ys,e=Qo?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Yo||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ds(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ls(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)ls(t,e[o],n,r,i);return null}return n=bs(n),t&&t[ts]?t.wa(e,n,io(r)?!!r.capture:!!r,i):hs(t,e,n,!0,r,i)}function fs(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)fs(t,e[o],n,r,i);else r=io(r)?!!r.capture:!!r,n=bs(n),t&&t[ts]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=ss(o=t.a[e],n,r,i))&&(rs(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=gs(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ss(e,n,r,i)),(n=-1<t?e[t]:null)&&ps(n))}function ps(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ts])os(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ds(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=gs(e))?(os(n,t),0==n.b&&(n.src=null,e[as]=null)):rs(t)}}}function ds(t){return t in us?us[t]:us[t]="on"+t}function vs(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&ps(t),n.call(r,e)}function ys(t,e){if(t.Y)return!0;if(!Qo){if(!e)t:{e=["window","event"];for(var n=eo,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return vs(t,e=new Jo(e,this))}return vs(t,new Jo(e,this))}function gs(t){return(t=t[as])instanceof is?t:null}var ms="__closure_events_fn_"+(1e9*Math.random()>>>0);function bs(t){return"function"==typeof t?t:(t[ms]||(t[ms]=function(e){return t.handleEvent(e)}),t[ms])}function _s(){po.call(this),this.c=new is(this),this.J=this,this.C=null}function ws(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Xo(e,t);else if(e instanceof Xo)e.target=e.target||t;else{var i=e;ko(e=new Xo(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Es(s,r,!0,e)&&i}if(i=Es(s=e.a=t,r,!0,e)&&i,i=Es(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Es(s=e.a=n[o],r,!1,e)&&i}function Es(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&os(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}fo(_s,po),_s.prototype[ts]=!0,(Ji=_s.prototype).addEventListener=function(t,e,n,r){cs(this,t,e,n,r)},Ji.removeEventListener=function(t,e,n,r){fs(this,t,e,n,r)},Ji.G=function(){if(_s.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)rs(n[r]);delete e.a[t],e.b--}}this.C=null},Ji.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Ji.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Is=eo.JSON.stringify;function Ts(){this.b=this.a=null}var Ss,Cs=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new As}),(function(t){t.reset()}));function Ns(){var t=Rs,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function As(){this.next=this.b=this.a=null}function ks(t){eo.setTimeout((function(){throw t}),0)}function Ps(t,e){Ss||function(){var t=eo.Promise.resolve(void 0);Ss=function(){t.then(Ds)}}(),Os||(Ss(),Os=!0),Rs.add(t,e)}Ts.prototype.add=function(t,e){var n=Cs.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},As.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},As.prototype.reset=function(){this.next=this.b=this.a=null};var Os=!1,Rs=new Ts;function Ds(){for(var t;t=Ns();){try{t.a.call(t.b)}catch(t){ks(t)}var e=Cs;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Os=!1}function xs(t,e){_s.call(this),this.b=t||1,this.a=e||eo,this.f=co(this.Za,this),this.g=lo()}function Ls(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Ms(t,e,n){if("function"==typeof t)n&&(t=co(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=co(t.handleEvent,t)}return 2147483647<Number(e)?-1:eo.setTimeout(t,e||0)}function Fs(t){t.a=Ms((function(){t.a=null,t.c&&(t.c=!1,Fs(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}fo(xs,_s),(Ji=xs.prototype).aa=!1,Ji.M=null,Ji.Za=function(){if(this.aa){var t=lo()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),ws(this,"tick"),this.aa&&(Ls(this),this.start()))}},Ji.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=lo())},Ji.G=function(){xs.X.G.call(this),Ls(this),delete this.a};var Us=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Yi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Fs(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(eo.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(po);function js(t){po.call(this),this.b=t,this.a={}}fo(js,po);var Vs=[];function qs(t,e,n,r){Array.isArray(n)||(n&&(Vs[0]=n.toString()),n=Vs);for(var i=0;i<n.length;i++){var o=cs(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Bs(t){Co(t.a,(function(t,e){this.a.hasOwnProperty(e)&&ps(t)}),t),t.a={}}function Ws(){this.a=!0}function Hs(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Is(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}js.prototype.G=function(){js.X.G.call(this),Bs(this)},js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ws.prototype.info=function(){};var Ks={},Gs=null;function zs(){return Gs=Gs||new _s}function Qs(t){Xo.call(this,Ks.Fa,t)}function $s(t){var e=zs();ws(e,new Qs(e,t))}function Ys(t,e){Xo.call(this,Ks.STAT_EVENT,t),this.stat=e}function Xs(t){var e=zs();ws(e,new Ys(e,t))}function Js(t){Xo.call(this,Ks.Ga,t)}function Zs(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return eo.setTimeout((function(){t()}),e)}Ks.Fa="serverreachability",fo(Qs,Xo),Ks.STAT_EVENT="statevent",fo(Ys,Xo),Ks.Ga="timingevent",fo(Js,Xo);var ta={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ea={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function na(){}function ra(t){var e;return(e=t.a)||(e=t.a={}),e}function ia(){}na.prototype.a=null;var oa,sa={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function aa(){Xo.call(this,"d")}function ua(){Xo.call(this,"c")}function ca(){}function ha(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new js(this),this.P=la,t=Mo?125:void 0,this.R=new xs(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}fo(aa,Xo),fo(ua,Xo),fo(ca,na),oa=new ca;var la=45e3,fa={},pa={};function da(t,e,n){t.H=1,t.i=Ma(Pa(e)),t.j=n,t.I=!0,va(t,null)}function va(t,e){t.u=lo(),ma(t),t.l=Pa(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),$a(n.b,"t",r),t.D=0,t.a=Wu(t.g,t.g.C?e:null),0<t.O&&(t.F=new Us(co(t.Ca,t,t.a),t.O)),qs(t.J,t.a,"readystatechange",t.Xa),e=t.B?No(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),$s(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");s=2<=l.length&&"type"==l[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function ya(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=ga(t,n);if(i==pa){4==e&&(t.h=4,Xs(14),r=!1),Hs(t.c,t.f,null,"[Incomplete Response]");break}if(i==fa){t.h=4,Xs(15),Hs(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Hs(t.c,t.f,i,null),Ia(t,i)}4==e&&0==n.length&&(t.h=1,Xs(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Lu(e),e.F=!0,Xs(11))):(Hs(t.c,t.f,n,"[Invalid Chunked Response]"),Ea(t),wa(t))}function ga(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?pa:(n=Number(e.substring(n,r)),isNaN(n)?fa:(r+=1)+n>e.length?pa:(e=e.substr(r,n),t.D=r+n,e))}function ma(t){t.T=lo()+t.P,ba(t,t.P)}function ba(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Zs(co(t.Va,t),e)}function _a(t){t.o&&(eo.clearTimeout(t.o),t.o=null)}function wa(t){0==t.g.v||t.A||Uu(t.g,t)}function Ea(t){_a(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ls(t.R),Bs(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ia(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||nu(n.b,t)))if(n.I=t.N,!t.C&&nu(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Fu(n),Cu(n)}xu(n),Xs(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Zs(co(n.Sa,n),6e3));if(1>=eu(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Vu(n,11)}else if((t.C||n.a==t)&&Fu(n),!bo(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=u.b;!l.a&&(Eo(h,"spdy")||Eo(h,"quic")||Eo(h,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(ru(l,l.b),l.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,La(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=lo()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=Bu(u,u.C?u.ga:null,u.fa),p.C){iu(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(_a(d),ma(d)),u.a=p}else Du(u);0<n.g.length&&ku(n)}else"stop"!=i[0]&&"close"!=i[0]||Vu(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Vu(n,7):Su(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);$s(4)}catch(t){}}function Ta(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ro(t)||"string"==typeof t)yo(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(ro(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(ro(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Sa(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Sa)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ca(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Na(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Na(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Na(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Ji=ha.prototype).setTimeout=function(t){this.P=t},Ji.Xa=function(t){t=t.target;var e=this.F;e&&3==wu(t)?e.f():this.Ca(t)},Ji.Ca=function(t){try{if(t==this.a)t:{var e=wu(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Mo&&!this.a.$())){this.A||4!=e||7==n||$s(8==n||0>=r?3:2),_a(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bo(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Xs(12),Ea(this),wa(this);break t}Hs(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ia(this,u)}this.I?(ya(this,e,o),Mo&&this.b&&3==e&&(qs(this.J,this.R,"tick",this.Wa),this.R.start())):(Hs(this.c,this.f,o,null),Ia(this,o)),4==e&&Ea(this),this.b&&!this.A&&(4==e?Uu(this.g,this):(this.b=!1,ma(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Xs(12)):(this.h=0,Xs(13)),Ea(this),wa(this)}}}catch(t){}},Ji.Wa=function(){if(this.a){var t=wu(this.a),e=this.a.$();this.D<e.length&&(_a(this),ya(this,t,e),this.b&&4!=t&&ma(this))}},Ji.cancel=function(){this.A=!0,Ea(this)},Ji.Va=function(){this.o=null;var t=lo();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&($s(3),Xs(17)),Ea(this),this.h=2,wa(this)):ba(this,this.T-t)},(Ji=Sa.prototype).K=function(){Ca(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Ji.L=function(){return Ca(this),this.a.concat()},Ji.get=function(t,e){return Na(this.b,t)?this.b[t]:e},Ji.set=function(t,e){Na(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Ji.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Aa=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ka(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ka){this.a=void 0!==e?e:t.a,Oa(this,t.f),this.j=t.j,Ra(this,t.c),Da(this,t.h),this.g=t.g,e=t.b;var n=new Ka;n.c=e.c,e.a&&(n.a=new Sa(e.a),n.b=e.b),xa(this,n),this.i=t.i}else t&&(n=String(t).match(Aa))?(this.a=!!e,Oa(this,n[1]||"",!0),this.j=Fa(n[2]||""),Ra(this,n[3]||"",!0),Da(this,n[4]),this.g=Fa(n[5]||"",!0),xa(this,n[6]||"",!0),this.i=Fa(n[7]||"")):(this.a=!!e,this.b=new Ka(null,this.a))}function Pa(t){return new ka(t)}function Oa(t,e,n){t.f=n?Fa(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Ra(t,e,n){t.c=n?Fa(e,!0):e}function Da(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function xa(t,e,n){e instanceof Ka?(t.b=e,function(t,e){e&&!t.f&&(Ga(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(za(this,e),$a(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Ua(e,Wa)),t.b=new Ka(e,t.a))}function La(t,e,n){t.b.set(e,n)}function Ma(t){return La(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^lo()).toString(36)),t}function Fa(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ua(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ja),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ja(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ka.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ua(e,Va,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Ua(e,Va,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ua(n,"/"==n.charAt(0)?Ba:qa,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Ua(n,Ha)),t.join("")};var Va=/[#\/\?@]/g,qa=/[#\?:]/g,Ba=/[#\?]/g,Wa=/[#\?@]/g,Ha=/#/g;function Ka(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ga(t){t.a||(t.a=new Sa,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function za(t,e){Ga(t),e=Ya(t,e),Na(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Na((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ca(t)))}function Qa(t,e){return Ga(t),e=Ya(t,e),Na(t.a.b,e)}function $a(t,e,n){za(t,e),0<n.length&&(t.c=null,t.a.set(Ya(t,e),mo(n)),t.b+=n.length)}function Ya(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Ji=Ka.prototype).add=function(t,e){Ga(this),this.c=null,t=Ya(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Ji.forEach=function(t,e){Ga(this),this.a.forEach((function(n,r){yo(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Ji.L=function(){Ga(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Ji.K=function(t){Ga(this);var e=[];if("string"==typeof t)Qa(this,t)&&(e=go(e,this.a.get(Ya(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=go(e,t[n])}return e},Ji.set=function(t,e){return Ga(this),this.c=null,Qa(this,t=Ya(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Ji.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Ji.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Xa=function(t,e){this.b=t,this.a=e};function Ja(t){this.g=t||Za,eo.PerformanceNavigationTiming?t=0<(t=eo.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(eo.ia&&eo.ia.ya&&eo.ia.ya()&&eo.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Za=10;function tu(t){return!!t.b||!!t.a&&t.a.size>=t.f}function eu(t){return t.b?1:t.a?t.a.size:0}function nu(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function ru(t,e){t.a?t.a.add(e):t.b=e}function iu(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function ou(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Xi(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return mo(t.c)}function su(){}function au(){this.a=new su}function uu(t,e,n){var r=n||"";try{Ta(t,(function(t,n){var i=t;io(t)&&(i=Is(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function cu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Ja.prototype.cancel=function(){var t,e;if(this.c=ou(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Xi(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},su.prototype.stringify=function(t){return eo.JSON.stringify(t,void 0)},su.prototype.parse=function(t){return eo.JSON.parse(t,void 0)};var hu=eo.JSON.parse;function lu(t){_s.call(this),this.headers=new Sa,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=fu,this.D=this.F=!1}fo(lu,_s);var fu="",pu=/^https?$/i,du=["POST","PUT"];function vu(t){return"content-type"==t.toLowerCase()}function yu(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,gu(t),bu(t)}function gu(t){t.u||(t.u=!0,ws(t,"complete"),ws(t,"error"))}function mu(t){if(t.b&&void 0!==to&&(!t.s[1]||4!=wu(t)||2!=t.W()))if(t.l&&4==wu(t))Ms(t.za,0,t);else if(ws(t,"readystatechange"),4==wu(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Aa)[1]||null;if(!o&&eo.self&&eo.self.location){var s=eo.self.location.protocol;o=s.substr(0,s.length-1)}i=!pu.test(o?o.toLowerCase():"")}e=i}if(e)ws(t,"complete"),ws(t,"success");else{t.h=6;try{var a=2<wu(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",gu(t)}}finally{bu(t)}}}function bu(t,e){if(t.a){_u(t);var n=t.a,r=t.s[0]?no:null;t.a=null,t.s=null,e||ws(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function _u(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(eo.clearTimeout(t.m),t.m=null)}function wu(t){return t.a?t.a.readyState:0}function Eu(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Co(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):La(t,e,n))}function Iu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Tu(t){this.pa=0,this.g=[],this.c=new Ws,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Iu("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Iu("baseRetryDelayMs",5e3,t),this.Ra=Iu("retryDelaySeedMs",1e4,t),this.Ma=Iu("forwardChannelMaxRetries",2,t),this.ma=Iu("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Ja(t&&t.concurrentRequestLimit),this.ka=new au,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Su(t){if(Nu(t),3==t.v){var e=t.R++,n=Pa(t.B);La(n,"SID",t.J),La(n,"RID",e),La(n,"TYPE","terminate"),Ou(t,n),(e=new ha(t,t.c,e,void 0)).H=2,e.i=Ma(Pa(n)),n=!1,eo.navigator&&eo.navigator.sendBeacon&&(n=eo.navigator.sendBeacon(e.i.toString(),"")),!n&&eo.Image&&((new Image).src=e.i,n=!0),n||(e.a=Wu(e.g,null),e.a.ba(e.i)),e.u=lo(),ma(e)}qu(t)}function Cu(t){t.a&&(Lu(t),t.a.cancel(),t.a=null)}function Nu(t){Cu(t),t.j&&(eo.clearTimeout(t.j),t.j=null),Fu(t),t.b.cancel(),t.h&&("number"==typeof t.h&&eo.clearTimeout(t.h),t.h=null)}function Au(t,e){t.g.push(new Xa(t.Oa++,e)),3==t.v&&ku(t)}function ku(t){tu(t.b)||t.h||(t.h=!0,Ps(t.Ba,t),t.u=0)}function Pu(t,e){var n;n=e?e.f:t.R++;var r=Pa(t.B);La(r,"SID",t.J),La(r,"RID",n),La(r,"AID",t.P),Ou(t,r),t.i&&t.l&&Eu(r,t.i,t.l),n=new ha(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Ru(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),ru(t.b,n),da(n,r,e)}function Ou(t,e){t.f&&Ta({},(function(t,n){La(e,n,t)}))}function Ru(t,e,n){n=Math.min(t.g.length,n);var r=t.f?co(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{uu(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Du(t){t.a||t.j||(t.T=1,Ps(t.Aa,t),t.o=0)}function xu(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=Zs(co(t.Aa,t),ju(t,t.o)),t.o++,!0)}function Lu(t){null!=t.s&&(eo.clearTimeout(t.s),t.s=null)}function Mu(t){t.a=new ha(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Pa(t.la);La(e,"RID","rpc"),La(e,"SID",t.J),La(e,"CI",t.H?"0":"1"),La(e,"AID",t.P),Ou(t,e),La(e,"TYPE","xmlhttp"),t.i&&t.l&&Eu(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ma(Pa(e)),n.j=null,n.I=!0,va(n,t)}function Fu(t){null!=t.m&&(eo.clearTimeout(t.m),t.m=null)}function Uu(t,e){var n=null;if(t.a==e){Fu(t),Lu(t),t.a=null;var r=2}else{if(!nu(t.b,e))return;n=e.s,iu(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=lo()-e.u;var i=t.u;ws(r=zs(),new Js(r,n,e,i)),ku(t)}else Du(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(eu(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Zs(co(t.Ba,t,e),ju(t,t.u)),t.u++,0)))}(t,e)||2==r&&xu(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Vu(t,5);break;case 4:Vu(t,10);break;case 3:Vu(t,6);break;default:Vu(t,2)}}function ju(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Vu(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=co(t.Ya,t);n||(n=new ka("//www.google.com/images/cleardot.gif"),eo.location&&"http"==eo.location.protocol||Oa(n,"https"),Ma(n)),function(t,e){var n=new Ws;if(eo.Image){var r=new Image;r.onload=ho(cu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ho(cu,n,r,"TestLoadImage: error",!1,e),r.onabort=ho(cu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ho(cu,n,r,"TestLoadImage: timeout",!1,e),eo.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Xs(2);t.v=0,t.f&&t.f.ra(e),qu(t),Nu(t)}function qu(t){t.v=0,t.I=-1,t.f&&(0==ou(t.b).length&&0==t.g.length||(t.b.c.length=0,mo(t.g),t.g.length=0),t.f.qa())}function Bu(t,e,n){var r=function(t){return t instanceof ka?Pa(t):new ka(t,void 0)}(n);if(""!=r.c)e&&Ra(r,e+"."+r.c),Da(r,r.h);else{var i=eo.location;r=function(t,e,n,r){var i=new ka(null,void 0);return t&&Oa(i,t),e&&Ra(i,e),n&&Da(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Co(t.V,(function(t,e){La(r,e,t)})),e=t.A,n=t.na,e&&n&&La(r,e,n),La(r,"VER",t.ha),Ou(t,r),r}function Wu(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new lu(t.Na)).F=t.C,e}function Hu(){}function Ku(){if(xo&&!(10<=Number(zo)))throw Error("Environmental error: no available transport.")}function Gu(t,e){_s.call(this),this.a=new Tu(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!bo(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!bo(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new $u(this)}function zu(t){aa.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Qu(){ua.call(this),this.status=1}function $u(t){this.a=t}(Ji=lu.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?ra(this.H):ra(oa),this.a.onreadystatechange=co(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void yu(this,t)}t=n||"";var i=new Sa(this.headers);r&&Ta(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=vu,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=eo.FormData&&t instanceof eo.FormData,!(0<=vo(du,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{_u(this),0<this.o&&((this.D=function(t){return xo&&Ko(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=co(this.xa,this)):this.m=Ms(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){yu(this,t)}},Ji.xa=function(){void 0!==to&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,ws(this,"timeout"),this.abort(8))},Ji.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,ws(this,"complete"),ws(this,"abort"),bu(this))},Ji.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),bu(this,!0)),lu.X.G.call(this)},Ji.za=function(){this.j||(this.A||this.l||this.g?mu(this):this.Ua())},Ji.Ua=function(){mu(this)},Ji.W=function(){try{return 2<wu(this)?this.a.status:-1}catch(t){return-1}},Ji.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},Ji.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),hu(e)}},Ji.ua=function(){return this.h},Ji.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Ji=Tu.prototype).ha=8,Ji.v=1,Ji.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new ha(this,this.c,t,void 0),r=this.l;if(this.O&&(r?ko(r=No(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Ru(this,n,e),La(i=Pa(this.B),"RID",t),La(i,"CVER",22),this.A&&La(i,"X-HTTP-Session-Id",this.A),Ou(this,i),this.i&&r&&Eu(i,this.i,r),ru(this.b,n),this.Ia&&La(i,"TYPE","init"),this.da?(La(i,"$req",e),La(i,"SID","null"),n.U=!0,da(n,i,null)):da(n,i,e),this.v=2}}else 3==this.v&&(t?Pu(this,t):0==this.g.length||tu(this.b)||Pu(this))},Ji.Aa=function(){if(this.j=null,Mu(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Zs(co(this.Ta,this),t)}},Ji.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Xs(10),Cu(this),Mu(this))},Ji.Sa=function(){null!=this.m&&(this.m=null,Cu(this),xu(this),Xs(19))},Ji.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Xs(2)):(this.c.info("Failed to ping google.com"),Xs(1))},(Ji=Hu.prototype).ta=function(){},Ji.sa=function(){},Ji.ra=function(){},Ji.qa=function(){},Ji.Ja=function(){},Ku.prototype.a=function(t,e){return new Gu(t,e)},fo(Gu,_s),Gu.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Xs(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Bu(t,null,t.fa),ku(t)},Gu.prototype.close=function(){Su(this.a)},Gu.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Au(this.a,e)}else this.l?((e={}).__data__=Is(t),Au(this.a,e)):Au(this.a,t)},Gu.prototype.G=function(){this.a.f=null,delete this.f,Su(this.a),delete this.a,Gu.X.G.call(this)},fo(zu,aa),fo(Qu,ua),fo($u,Hu),$u.prototype.ta=function(){ws(this.a,"a")},$u.prototype.sa=function(t){ws(this.a,new zu(t))},$u.prototype.ra=function(t){ws(this.a,new Qu(t))},$u.prototype.qa=function(){ws(this.a,"b")},Ku.prototype.createWebChannel=Ku.prototype.a,Gu.prototype.send=Gu.prototype.h,Gu.prototype.open=Gu.prototype.g,Gu.prototype.close=Gu.prototype.close,ta.NO_ERROR=0,ta.TIMEOUT=8,ta.HTTP_ERROR=6,ea.COMPLETE="complete",ia.EventType=sa,sa.OPEN="a",sa.CLOSE="b",sa.ERROR="c",sa.MESSAGE="d",_s.prototype.listen=_s.prototype.va,lu.prototype.listenOnce=lu.prototype.wa,lu.prototype.getLastError=lu.prototype.Qa,lu.prototype.getLastErrorCode=lu.prototype.ua,lu.prototype.getStatus=lu.prototype.W,lu.prototype.getResponseJson=lu.prototype.Pa,lu.prototype.getResponseText=lu.prototype.$,lu.prototype.send=lu.prototype.ba;var Yu=ta,Xu=ea,Ju=Ks,Zu=10,tc=11,ec=ia,nc=lu,rc=function(t,e){return(rc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function ic(t,e){function n(){this.constructor=t}rc(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function oc(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function sc(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function ac(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uc=new ge("@firebase/firestore");function cc(){return uc.logLevel}function hc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(uc.logLevel<=he.DEBUG){var r=e.map(pc);uc.debug.apply(uc,ac(["Firestore (8.2.0): "+t],r))}}function lc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(uc.logLevel<=he.ERROR){var r=e.map(pc);uc.error.apply(uc,ac(["Firestore (8.2.0): "+t],r))}}function fc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(uc.logLevel<=he.WARN){var r=e.map(pc);uc.warn.apply(uc,ac(["Firestore (8.2.0): "+t],r))}}function pc(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.0) INTERNAL ASSERTION FAILED: "+t;throw lc(e),new Error(e)}function vc(t,e){t||dc()}function yc(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mc=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=gc(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function bc(t,e){return t<e?-1:t>e?1:0}function _c(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function wc(t){return t+"\0"}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ec=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.i,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return bc(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();Ec.h=new Ec("");var Ic={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Tc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return ic(e,t),e}(Error),Sc=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(Ec.fromBase64String(e))}catch(e){throw new Tc(Ic.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Ec.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}(),Cc=function(t){this._=t};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(){if("undefined"==typeof Uint8Array)throw new Tc(Ic.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Ac(){if("undefined"==typeof atob)throw new Tc(Ic.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var kc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ic(e,t),e.fromBase64String=function(t){return Ac(),new e(Sc.fromBase64String(t))},e.fromUint8Array=function(t){return Nc(),new e(Sc.fromUint8Array(t))},e.prototype.toBase64=function(){return Ac(),this._.toBase64()},e.prototype.toUint8Array=function(){return Nc(),this._.toUint8Array()},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Cc),Pc=function(){function t(t){this.uid=t}return t.prototype.T=function(){return null!=this.uid},t.prototype.I=function(){return this.T()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pc.UNAUTHENTICATED=new Pc(null),Pc.m=new Pc("google-credentials-uid"),Pc.A=new Pc("first-party-uid");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Oc=function(t,e){this.user=e,this.type="OAuth",this.R={},this.R.Authorization="Bearer "+t},Rc=function(){function t(){this.P=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.g=function(){},t.prototype.V=function(t){this.P=t,t(Pc.UNAUTHENTICATED)},t.prototype.p=function(){this.P=null},t}(),Dc=function(){function t(t){var e=this;this.v=null,this.currentUser=Pc.UNAUTHENTICATED,this.S=!1,this.D=0,this.P=null,this.forceRefresh=!1,this.v=function(){e.D++,e.currentUser=e.C(),e.S=!0,e.P&&e.P(e.currentUser)},this.D=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.v):(this.v(null),t.get().then((function(t){e.auth=t,e.v&&e.auth.addAuthTokenListener(e.v)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.D,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.D!==e?(hc("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(vc("string"==typeof n.accessToken),new Oc(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.g=function(){this.forceRefresh=!0},t.prototype.V=function(t){this.P=t,this.S&&t(this.currentUser)},t.prototype.p=function(){this.auth&&this.auth.removeAuthTokenListener(this.v),this.v=null,this.P=null},t.prototype.C=function(){var t=this.auth&&this.auth.getUid();return vc(null===t||"string"==typeof t),new Pc(t)},t}(),xc=function(){function t(t,e){this.N=t,this.F=e,this.type="FirstParty",this.user=Pc.A}return Object.defineProperty(t.prototype,"R",{get:function(){var t={"X-Goog-AuthUser":this.F},e=this.N.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Lc=function(){function t(t,e){this.N=t,this.F=e}return t.prototype.getToken=function(){return Promise.resolve(new xc(this.N,this.F))},t.prototype.V=function(t){t(Pc.A)},t.prototype.p=function(){},t.prototype.g=function(){},t}(),Mc=function(t,e,n,r,i,o){this.O=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.k=o},Fc=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"M",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Uc=function(){function t(){}return t.prototype.L=function(t){},t.prototype.$=function(){},t}(),jc=function(){function t(){var t=this;this.B=function(){return t.q()},this.U=function(){return t.K()},this.W=[],this.j()}return t.prototype.L=function(t){this.W.push(t)},t.prototype.$=function(){window.removeEventListener("online",this.B),window.removeEventListener("offline",this.U)},t.prototype.j=function(){window.addEventListener("online",this.B),window.addEventListener("offline",this.U)},t.prototype.q=function(){hc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.W;t<e.length;t++)(0,e[t])(0)},t.prototype.K=function(){hc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.W;t<e.length;t++)(0,e[t])(1)},t.G=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(t){return null==t}function qc(t){return 0===t&&1/t==-1/0}function Bc(t){return"number"==typeof t&&Number.isInteger(t)&&!qc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wc,Hc,Kc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(t){switch(t){case Ic.OK:return dc();case Ic.CANCELLED:case Ic.UNKNOWN:case Ic.DEADLINE_EXCEEDED:case Ic.RESOURCE_EXHAUSTED:case Ic.INTERNAL:case Ic.UNAVAILABLE:case Ic.UNAUTHENTICATED:return!1;case Ic.INVALID_ARGUMENT:case Ic.NOT_FOUND:case Ic.ALREADY_EXISTS:case Ic.PERMISSION_DENIED:case Ic.FAILED_PRECONDITION:case Ic.ABORTED:case Ic.OUT_OF_RANGE:case Ic.UNIMPLEMENTED:case Ic.DATA_LOSS:return!0;default:return dc()}}function zc(t){if(void 0===t)return lc("GRPC error has no .code"),Ic.UNKNOWN;switch(t){case Wc.OK:return Ic.OK;case Wc.CANCELLED:return Ic.CANCELLED;case Wc.UNKNOWN:return Ic.UNKNOWN;case Wc.DEADLINE_EXCEEDED:return Ic.DEADLINE_EXCEEDED;case Wc.RESOURCE_EXHAUSTED:return Ic.RESOURCE_EXHAUSTED;case Wc.INTERNAL:return Ic.INTERNAL;case Wc.UNAVAILABLE:return Ic.UNAVAILABLE;case Wc.UNAUTHENTICATED:return Ic.UNAUTHENTICATED;case Wc.INVALID_ARGUMENT:return Ic.INVALID_ARGUMENT;case Wc.NOT_FOUND:return Ic.NOT_FOUND;case Wc.ALREADY_EXISTS:return Ic.ALREADY_EXISTS;case Wc.PERMISSION_DENIED:return Ic.PERMISSION_DENIED;case Wc.FAILED_PRECONDITION:return Ic.FAILED_PRECONDITION;case Wc.ABORTED:return Ic.ABORTED;case Wc.OUT_OF_RANGE:return Ic.OUT_OF_RANGE;case Wc.UNIMPLEMENTED:return Ic.UNIMPLEMENTED;case Wc.DATA_LOSS:return Ic.DATA_LOSS;default:return dc()}}(Hc=Wc||(Wc={}))[Hc.OK=0]="OK",Hc[Hc.CANCELLED=1]="CANCELLED",Hc[Hc.UNKNOWN=2]="UNKNOWN",Hc[Hc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Hc[Hc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Hc[Hc.NOT_FOUND=5]="NOT_FOUND",Hc[Hc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Hc[Hc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Hc[Hc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Hc[Hc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Hc[Hc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Hc[Hc.ABORTED=10]="ABORTED",Hc[Hc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Hc[Hc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Hc[Hc.INTERNAL=13]="INTERNAL",Hc[Hc.UNAVAILABLE=14]="UNAVAILABLE",Hc[Hc.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Qc=function(){function t(t){this.H=t.H,this.J=t.J}return t.prototype.Y=function(t){this.X=t},t.prototype.Z=function(t){this.tt=t},t.prototype.onMessage=function(t){this.et=t},t.prototype.close=function(){this.J()},t.prototype.send=function(t){this.H(t)},t.prototype.nt=function(){this.X()},t.prototype.st=function(t){this.tt(t)},t.prototype.it=function(t){this.et(t)},t}(),$c=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Yc=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.k=e.k,n}return ic(e,t),e.prototype.lt=function(t,e,n,r){return new Promise((function(i,o){var s=new nc;s.listenOnce(Xu.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Yu.NO_ERROR:var e=s.getResponseJson();hc("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Yu.TIMEOUT:hc("Connection",'RPC "'+t+'" timed out'),o(new Tc(Ic.DEADLINE_EXCEEDED,"Request time out"));break;case Yu.HTTP_ERROR:var n=s.getStatus();if(hc("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ic).indexOf(e)>=0?e:Ic.UNKNOWN}(r.status);o(new Tc(a,r.message))}else o(new Tc(Ic.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Tc(Ic.UNAVAILABLE,"Connection failed."));break;default:dc()}}finally{hc("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.ft=function(t,e){var n=[this.ot,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Ku,i=zs(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.O.projectId+"/databases/"+this.O.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.k};this.ht(o.initMessageHeaders,e),St()||At()||Tt().indexOf("Electron/")>=0||function(){var t=Tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||Tt().indexOf("MSAppHost/")>=0||Nt()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");hc("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,h=new Qc({H:function(t){c?hc("Connection","Not sending because WebChannel is closed:",t):(u||(hc("Connection","Opening WebChannel transport."),a.open(),u=!0),hc("Connection","WebChannel sending:",t),a.send(t))},J:function(){return a.close()}}),l=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return l(a,ec.EventType.OPEN,(function(){c||hc("Connection","WebChannel transport opened.")})),l(a,ec.EventType.CLOSE,(function(){c||(c=!0,hc("Connection","WebChannel transport closed"),h.st())})),l(a,ec.EventType.ERROR,(function(t){c||(c=!0,fc("Connection","WebChannel transport errored:",t),h.st(new Tc(Ic.UNAVAILABLE,"The operation could not be completed")))})),l(a,ec.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];vc(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){hc("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Wc[t];if(void 0!==e)return zc(e)}(o),u=i.message;void 0===s&&(s=Ic.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,h.st(new Tc(s,u)),a.close()}else hc("Connection","WebChannel received:",n),h.it(n)}})),l(i,Ju.STAT_EVENT,(function(t){t.stat===Zu?hc("Connection","Detected buffering proxy"):t.stat===tc&&hc("Connection","Detected no buffering proxy")})),setTimeout((function(){h.nt()}),0),h},e}(function(){function t(t){this.rt=t,this.O=t.O;var e=t.ssl?"https":"http";this.ot=e+"://"+t.host,this.ct="projects/"+this.O.projectId+"/databases/"+this.O.database+"/documents"}return t.prototype.at=function(t,e,n,r){var i=this.ut(t,e);hc("RestConnection","Sending: ",i,n);var o={};return this.ht(o,r),this.lt(t,i,o,n).then((function(t){return hc("RestConnection","Received: ",t),t}),(function(e){throw fc("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype._t=function(t,e,n,r){return this.at(t,e,n,r)},t.prototype.ht=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.0",t["Content-Type"]="text/plain",e)for(var n in e.R)e.R.hasOwnProperty(n)&&(t[n]=e.R[n])},t.prototype.ut=function(t,e){var n=Kc[t];return this.ot+"/v1/"+e+":"+n},t}()),Xc=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Tc(Ic.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Tc(Ic.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Tc(Ic.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Tc(Ic.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.dt=function(t){return this.seconds===t.seconds?bc(this.nanoseconds,t.nanoseconds):bc(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Jc=function(){function t(t){this.timestamp=t}return t.wt=function(e){return new t(e)},t.min=function(){return new t(new Xc(0,0))},t.prototype.u=function(t){return this.timestamp.dt(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.Et=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.Tt=function(){return this.timestamp},t}(),Zc=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&dc(),void 0===n?n=t.length-e:n>t.length-e&&dc(),this.segments=t,this.offset=e,this.It=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.It},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.At(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.Rt(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Pt=function(t){return t=void 0===t?1:t,this.Rt(this.segments,this.offset+t,this.length-t)},t.prototype.yt=function(){return this.Rt(this.segments,this.offset,this.length-1)},t.prototype.gt=function(){return this.segments[this.offset]},t.prototype.Vt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.bt=function(){return 0===this.length},t.prototype.vt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.St=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.Dt=function(){return this.segments.slice(this.offset,this.limit())},t.At=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),th=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ic(e,t),e.prototype.Rt=function(t,n,r){return new e(t,n,r)},e.prototype.Ct=function(){return this.Dt().join("/")},e.prototype.toString=function(){return this.Ct()},e.xt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Tc(Ic.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.Nt=function(){return new e([])},e}(Zc),eh=/^[_a-zA-Z][_a-zA-Z0-9]*$/,nh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ic(e,t),e.prototype.Rt=function(t,n,r){return new e(t,n,r)},e.Ft=function(t){return eh.test(t)},e.prototype.Ct=function(){return this.Dt().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.Ft(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.Ct()},e.prototype.Ot=function(){return 1===this.length&&"__name__"===this.get(0)},e.kt=function(){return new e(["__name__"])},e.Mt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Tc(Ic.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Tc(Ic.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Tc(Ic.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Tc(Ic.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.Nt=function(){return new e([])},e}(Zc),rh=function(){function t(t){this.path=t}return t.Lt=function(e){return new t(th.xt(e))},t.$t=function(e){return new t(th.xt(e).Pt(5))},t.prototype.Bt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===th.At(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.At=function(t,e){return th.At(t.path,e.path)},t.qt=function(t){return t.length%2==0},t.Ut=function(e){return new t(new th(e.slice()))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function oh(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function sh(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ah=function(){function t(t){this.fields=t,t.sort(nh.At)}return t.prototype.Qt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].vt(t))return!0;return!1},t.prototype.isEqual=function(t){return _c(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),uh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(t){if(vc(!!t),"string"==typeof t){var e=0,n=uh.exec(t);if(vc(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:hh(t.seconds),nanos:hh(t.nanos)}}function hh(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function lh(t){return"string"==typeof t?Ec.fromBase64String(t):Ec.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ph(t){var e=t.mapValue.fields.__previous_value__;return fh(e)?ph(e):e}function dh(t){var e=ch(t.mapValue.fields.__local_write_time__.timestampValue);return new Xc(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fh(t)?4:10:dc()}function yh(t,e){var n=vh(t);if(n!==vh(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return dh(t).isEqual(dh(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=ch(t.timestampValue),r=ch(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return lh(t.bytesValue).isEqual(lh(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return hh(t.geoPointValue.latitude)===hh(e.geoPointValue.latitude)&&hh(t.geoPointValue.longitude)===hh(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return hh(t.integerValue)===hh(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=hh(t.doubleValue),r=hh(e.doubleValue);return n===r?qc(n)===qc(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return _c(t.arrayValue.values||[],e.arrayValue.values||[],yh);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(ih(n)!==ih(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!yh(n[i],r[i])))return!1;return!0}(t,e);default:return dc()}}function gh(t,e){return void 0!==(t.values||[]).find((function(t){return yh(t,e)}))}function mh(t,e){var n=vh(t),r=vh(e);if(n!==r)return bc(n,r);switch(n){case 0:return 0;case 1:return bc(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=hh(t.integerValue||t.doubleValue),r=hh(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return bh(t.timestampValue,e.timestampValue);case 4:return bh(dh(t),dh(e));case 5:return bc(t.stringValue,e.stringValue);case 6:return function(t,e){var n=lh(t),r=lh(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=bc(n[i],r[i]);if(0!==o)return o}return bc(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=bc(hh(t.latitude),hh(e.latitude));return 0!==n?n:bc(hh(t.longitude),hh(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=mh(n[i],r[i]);if(o)return o}return bc(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=bc(r[s],o[s]);if(0!==a)return a;var u=mh(n[r[s]],i[o[s]]);if(0!==u)return u}return bc(r.length,o.length)}(t.mapValue,e.mapValue);default:throw dc()}}function bh(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return bc(t,e);var n=ch(t),r=ch(e),i=bc(n.seconds,r.seconds);return 0!==i?i:bc(n.nanos,r.nanos)}function _h(t){return wh(t)}function wh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=ch(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?lh(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,rh.$t(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=wh(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+wh(t.fields[o])}return e+"}"}(t.mapValue):dc();var e,n}function Eh(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.Ct()}}function Ih(t){return!!t&&"integerValue"in t}function Th(t){return!!t&&"arrayValue"in t}function Sh(t){return!!t&&"nullValue"in t}function Ch(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Nh(t){return!!t&&"mapValue"in t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ah=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.bt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Nh(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.Vt()])||null},t.prototype.isEqual=function(t){return yh(this.proto,t.proto)},t}(),kh=function(){function t(t){void 0===t&&(t=Ah.empty()),this.Kt=t,this.Wt=new Map}return t.prototype.set=function(t,e){return this.jt(t,e),this},t.prototype.delete=function(t){return this.jt(t,null),this},t.prototype.jt=function(t,e){for(var n=this.Wt,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===vh(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.Vt(),e)},t.prototype.Gt=function(){var t=this.zt(nh.Nt(),this.Wt);return null!=t?new Ah(t):this.Kt},t.prototype.zt=function(t,e){var n=this,r=!1,i=this.Kt.field(t),o=Nh(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.zt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function Ph(t){var e=[];return oh(t.fields||{},(function(t,n){var r=new nh([t]);if(Nh(n)){var i=Ph(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new ah(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Oh=function(t,e){this.key=t,this.version=e},Rh=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Ht=r,o.Jt=!!i.Jt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return ic(e,t),e.prototype.field=function(t){return this.Ht.field(t)},e.prototype.data=function(){return this.Ht},e.prototype.Yt=function(){return this.Ht.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Jt===t.Jt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Ht.isEqual(t.Ht)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Ht.toString()+", {hasLocalMutations: "+this.Jt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Jt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Oh),Dh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return ic(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Oh),xh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ic(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Oh),Lh=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.Xt=null};function Mh(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Lh(t,e,n,r,i,o,s)}function Fh(t){var e=yc(t);if(null===e.Xt){var n=e.path.Ct();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.Ct()+t.op.toString()+_h(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.Ct()+t.dir}(t)})).join(","),Vc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Yh(e.startAt)),e.endAt&&(n+="|ub:",n+=Yh(e.endAt)),e.Xt=n}return e.Xt}function Uh(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Jh(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!yh(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tl(t.startAt,e.startAt)&&tl(t.endAt,e.endAt)}function jh(t){return rh.qt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Vh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return ic(e,t),e.create=function(t,n,r){return t.Ot()?"in"===n||"not-in"===n?this.Zt(t,n,r):new qh(t,n,r):"array-contains"===n?new Kh(t,r):"in"===n?new Gh(t,r):"not-in"===n?new zh(t,r):"array-contains-any"===n?new Qh(t,r):new e(t,n,r)},e.Zt=function(t,e,n){return"in"===e?new Bh(t,n):new Wh(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.te(mh(e,this.value)):null!==e&&vh(this.value)===vh(e)&&this.te(mh(e,this.value))},e.prototype.te=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return dc()}},e.prototype.ee=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),qh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=rh.$t(r.referenceValue),i}return ic(e,t),e.prototype.matches=function(t){var e=rh.At(t.key,this.key);return this.te(e)},e}(Vh),Bh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Hh("in",n),r}return ic(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Vh),Wh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Hh("not-in",n),r}return ic(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Vh);function Hh(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return rh.$t(t.referenceValue)}))}var Kh=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return ic(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Th(e)&&gh(e.arrayValue,this.value)},e}(Vh),Gh=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return ic(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&gh(this.value.arrayValue,e)},e}(Vh),zh=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return ic(e,t),e.prototype.matches=function(t){if(gh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!gh(this.value.arrayValue,e)},e}(Vh),Qh=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return ic(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Th(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return gh(e.value.arrayValue,t)}))},e}(Vh),$h=function(t,e){this.position=t,this.before=e};function Yh(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return _h(t)})).join(",")}var Xh=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Jh(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Zh(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.Ot()?rh.At(rh.$t(s.referenceValue),n.key):mh(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function tl(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!yh(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var el=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.ne=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.se=null,this.ie=null,this.startAt,this.endAt};function nl(t,e,n,r,i,o,s,a){return new el(t,e,n,r,i,o,s,a)}function rl(t){return new el(t)}function il(t){return!Vc(t.limit)&&"F"===t.limitType}function ol(t){return!Vc(t.limit)&&"L"===t.limitType}function sl(t){return t.ne.length>0?t.ne[0].field:null}function al(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.ee())return r.field}return null}function ul(t){return null!==t.collectionGroup}function cl(t){var e=yc(t);if(null===e.se){e.se=[];var n=al(e),r=sl(e);if(null!==n&&null===r)n.Ot()||e.se.push(new Xh(n)),e.se.push(new Xh(nh.kt(),"asc"));else{for(var i=!1,o=0,s=e.ne;o<s.length;o++){var a=s[o];e.se.push(a),a.field.Ot()&&(i=!0)}if(!i){var u=e.ne.length>0?e.ne[e.ne.length-1].dir:"asc";e.se.push(new Xh(nh.kt(),u))}}}return e.se}function hl(t){var e=yc(t);if(!e.ie)if("F"===e.limitType)e.ie=Mh(e.path,e.collectionGroup,cl(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=cl(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Xh(o.field,s))}var a=e.endAt?new $h(e.endAt.position,!e.endAt.before):null,u=e.startAt?new $h(e.startAt.position,!e.startAt.before):null;e.ie=Mh(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.ie}function ll(t,e,n){return new el(t.path,t.collectionGroup,t.ne.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function fl(t,e){return Uh(hl(t),hl(e))&&t.limitType===e.limitType}function pl(t){return Fh(hl(t))+"|lt:"+t.limitType}function dl(t){return"Query(target="+function(t){var e=t.path.Ct();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.Ct()+" "+e.op+" "+_h(e.value);var e})).join(", ")+"]"),Vc(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.Ct()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Yh(t.startAt)),t.endAt&&(e+=", endAt: "+Yh(t.endAt)),"Target("+e+")"}(hl(t))+"; limitType="+t.limitType+")"}function vl(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.Bt(t.collectionGroup)&&t.path.vt(n):rh.qt(t.path)?t.path.isEqual(n):t.path.St(n)}(t,e)&&function(t,e){for(var n=0,r=t.ne;n<r.length;n++){var i=r[n];if(!i.field.Ot()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Zh(t.startAt,cl(t),e)||t.endAt&&Zh(t.endAt,cl(t),e))}(t,e)}function yl(t){return function(e,n){for(var r=!1,i=0,o=cl(t);i<o.length;i++){var s=o[i],a=gl(s,e,n);if(0!==a)return a;r=r||s.field.Ot()}return 0}}function gl(t,e,n){var r=t.field.Ot()?rh.At(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?mh(r,i):dc()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return dc()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ml=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Jc.min()),void 0===o&&(o=Jc.min()),void 0===s&&(s=Ec.h),this.target=t,this.targetId=e,this.re=n,this.sequenceNumber=r,this.oe=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.ce=function(e){return new t(this.target,this.targetId,this.re,e,this.oe,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.ae=function(e,n){return new t(this.target,this.targetId,this.re,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.ue=function(e){return new t(this.target,this.targetId,this.re,this.sequenceNumber,this.oe,e,this.resumeToken)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(t,e){if(t.he){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qc(e)?"-0":e}}function _l(t){return{integerValue:""+t}}function wl(t,e){return Bc(e)?_l(e):bl(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var El=function(){this.le=void 0};function Il(t,e,n){return t instanceof Cl?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Nl?Al(t,e):t instanceof kl?Pl(t,e):function(t,e){var n=Sl(t,e),r=Rl(n)+Rl(t._e);return Ih(n)&&Ih(t._e)?_l(r):bl(t.fe,r)}(t,e)}function Tl(t,e,n){return t instanceof Nl?Al(t,e):t instanceof kl?Pl(t,e):n}function Sl(t,e){return t instanceof Ol?Ih(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Cl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ic(e,t),e}(El),Nl=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return ic(e,t),e}(El);function Al(t,e){for(var n=Dl(e),r=function(t){n.some((function(e){return yh(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var kl=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return ic(e,t),e}(El);function Pl(t,e){for(var n=Dl(e),r=function(t){n=n.filter((function(e){return!yh(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ol=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).fe=e,r._e=n,r}return ic(e,t),e}(El);function Rl(t){return hh(t.integerValue||t.doubleValue)}function Dl(t){return Th(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xl=function(t,e){this.field=t,this.transform=e},Ll=function(t,e){this.version=t,this.transformResults=e},Ml=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.de=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"we",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Fl(t,e){return void 0!==t.updateTime?e instanceof Rh&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Rh}var Ul=function(){};function jl(t,e,n){return t instanceof Hl?function(t,e,n){var r=t.value;if(n.transformResults){var i=zl(t.fieldTransforms,e,n.transformResults);r=$l(t.fieldTransforms,r,i)}return new Rh(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Kl?function(t,e,n){if(!Fl(t.Ee,e))return new xh(t.key,n.version);var r=Gl(t,e,n.transformResults?zl(t.fieldTransforms,e,n.transformResults):[]);return new Rh(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Dh(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Vl(t,e,n,r){return t instanceof Hl?function(t,e,n,r){if(!Fl(t.Ee,e))return e;var i=t.value;if(t.fieldTransforms){var o=Ql(t.fieldTransforms,n,e,r);i=$l(t.fieldTransforms,i,o)}var s=Wl(e);return new Rh(t.key,s,i,{Jt:!0})}(t,e,r,n):t instanceof Kl?function(t,e,n,r){if(!Fl(t.Ee,e))return e;var i=Wl(e),o=Gl(t,e,Ql(t.fieldTransforms,n,e,r));return new Rh(t.key,i,o,{Jt:!0})}(t,e,r,n):function(t,e){return Fl(t.Ee,e)?new Dh(t.key,Jc.min()):e}(t,e)}function ql(t,e){return void 0!==t.fieldTransforms?function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Rh?e.field(o.field):void 0,a=Sl(o.transform,s||null);null!=a&&(n=null==n?(new kh).set(o.field,a):n.set(o.field,a))}return n?n.Gt():null}(t.fieldTransforms,e):null}function Bl(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ee.isEqual(e.Ee)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&_c(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Nl&&e instanceof Nl||t instanceof kl&&e instanceof kl?_c(t.elements,e.elements,yh):t instanceof Ol&&e instanceof Ol?yh(t._e,e._e):t instanceof Cl&&e instanceof Cl}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Te.isEqual(e.Te))}function Wl(t){return t instanceof Rh?t.version:Jc.min()}var Hl=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.Ee=r,o.fieldTransforms=i,o.type=0,o}return ic(e,t),e}(Ul),Kl=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Te=r,s.Ee=i,s.fieldTransforms=o,s.type=1,s}return ic(e,t),e}(Ul);function Gl(t,e,n){var r;return r=function(t,e){var n=new kh(e);return t.Te.fields.forEach((function(e){if(!e.bt()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Gt()}(t,r=e instanceof Rh?e.data():Ah.empty()),$l(t.fieldTransforms,r,n)}function zl(t,e,n){var r=[];vc(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Rh&&(a=e.field(o.field)),r.push(Tl(s,a,n[i]))}return r}function Ql(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof Rh&&(c=n.field(a.field)),null===c&&r instanceof Rh&&(c=r.field(a.field)),i.push(Il(u,c,e))}return i}function $l(t,e,n){for(var r=new kh(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.Gt()}var Yl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ee=n,r.type=2,r.fieldTransforms=[],r}return ic(e,t),e}(Ul),Xl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ee=n,r.type=3,r.fieldTransforms=[],r}return ic(e,t),e}(Ul),Jl=function(t){this.count=t},Zl=function(){function t(t,e){this.At=t,this.root=e||ef.EMPTY}return t.prototype.Ie=function(e,n){return new t(this.At,this.root.Ie(e,n,this.At).copy(null,null,ef.me,null,null))},t.prototype.remove=function(e){return new t(this.At,this.root.remove(e,this.At).copy(null,null,ef.me,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.bt();){var n=this.At(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.bt();){var r=this.At(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.bt=function(){return this.root.bt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Ae=function(){return this.root.Ae()},t.prototype.Re=function(){return this.root.Re()},t.prototype.Pe=function(t){return this.root.Pe(t)},t.prototype.forEach=function(t){this.Pe((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Pe((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ye=function(t){return this.root.ye(t)},t.prototype.ge=function(){return new tf(this.root,null,this.At,!1)},t.prototype.Ve=function(t){return new tf(this.root,t,this.At,!1)},t.prototype.pe=function(){return new tf(this.root,null,this.At,!0)},t.prototype.be=function(t){return new tf(this.root,t,this.At,!0)},t}(),tf=function(){function t(t,e,n,r){this.ve=r,this.Se=[];for(var i=1;!t.bt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ve?t.left:t.right;else{if(0===i){this.Se.push(t);break}this.Se.push(t),t=this.ve?t.right:t.left}}return t.prototype.De=function(){var t=this.Se.pop(),e={key:t.key,value:t.value};if(this.ve)for(t=t.left;!t.bt();)this.Se.push(t),t=t.right;else for(t=t.right;!t.bt();)this.Se.push(t),t=t.left;return e},t.prototype.Ce=function(){return this.Se.length>0},t.prototype.xe=function(){if(0===this.Se.length)return null;var t=this.Se[this.Se.length-1];return{key:t.key,value:t.value}},t}(),ef=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.bt=function(){return!1},t.prototype.Pe=function(t){return this.left.Pe(t)||t(this.key,this.value)||this.right.Pe(t)},t.prototype.ye=function(t){return this.right.ye(t)||t(this.key,this.value)||this.left.ye(t)},t.prototype.min=function(){return this.left.bt()?this:this.left.min()},t.prototype.Ae=function(){return this.min().key},t.prototype.Re=function(){return this.right.bt()?this.key:this.right.Re()},t.prototype.Ie=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ie(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ie(t,e,n))).Ne()},t.prototype.Fe=function(){if(this.left.bt())return t.EMPTY;var e=this;return e.left.Oe()||e.left.left.Oe()||(e=e.ke()),(e=e.copy(null,null,null,e.left.Fe(),null)).Ne()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.bt()||i.left.Oe()||i.left.left.Oe()||(i=i.ke()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Oe()&&(i=i.Me()),i.right.bt()||i.right.Oe()||i.right.left.Oe()||(i=i.Le()),0===n(e,i.key)){if(i.right.bt())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Fe())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Ne()},t.prototype.Oe=function(){return this.color},t.prototype.Ne=function(){var t=this;return t.right.Oe()&&!t.left.Oe()&&(t=t.$e()),t.left.Oe()&&t.left.left.Oe()&&(t=t.Me()),t.left.Oe()&&t.right.Oe()&&(t=t.Be()),t},t.prototype.ke=function(){var t=this.Be();return t.right.left.Oe()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Me())).$e()).Be()),t},t.prototype.Le=function(){var t=this.Be();return t.left.left.Oe()&&(t=(t=t.Me()).Be()),t},t.prototype.$e=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.Me=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Be=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.qe=function(){var t=this.Ue();return Math.pow(2,t)<=this.size+1},t.prototype.Ue=function(){if(this.Oe()&&this.left.Oe())throw dc();if(this.right.Oe())throw dc();var t=this.left.Ue();if(t!==this.right.Ue())throw dc();return t+(this.Oe()?0:1)},t}();ef.EMPTY=null,ef.RED=!0,ef.me=!1,ef.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw dc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw dc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw dc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw dc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw dc()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Ie=function(t,e,n){return new ef(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.bt=function(){return!0},t.prototype.Pe=function(t){return!1},t.prototype.ye=function(t){return!1},t.prototype.Ae=function(){return null},t.prototype.Re=function(){return null},t.prototype.Oe=function(){return!1},t.prototype.qe=function(){return!0},t.prototype.Ue=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var nf=function(){function t(t){this.At=t,this.data=new Zl(this.At)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Ae()},t.prototype.last=function(){return this.data.Re()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Pe((function(e,n){return t(e),!1}))},t.prototype.Qe=function(t,e){for(var n=this.data.Ve(t[0]);n.Ce();){var r=n.De();if(this.At(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ke=function(t,e){var n;for(n=void 0!==e?this.data.Ve(e):this.data.ge();n.Ce();)if(!t(n.De().key))return},t.prototype.We=function(t){var e=this.data.Ve(t);return e.Ce()?e.De().key:null},t.prototype.ge=function(){return new rf(this.data.ge())},t.prototype.Ve=function(t){return new rf(this.data.Ve(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Ie(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.bt=function(){return this.data.bt()},t.prototype.je=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.ge(),r=e.data.ge();n.Ce();){var i=n.De().key,o=r.De().key;if(0!==this.At(i,o))return!1}return!0},t.prototype.Dt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.At);return n.data=e,n},t}(),rf=function(){function t(t){this.Ge=t}return t.prototype.De=function(){return this.Ge.De().key},t.prototype.Ce=function(){return this.Ge.Ce()},t}(),of=new Zl(rh.At);function sf(){return of}function af(){return sf()}var uf=new Zl(rh.At);function cf(){return uf}var hf=new Zl(rh.At);function lf(){return hf}var ff=new nf(rh.At);function pf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ff,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var df=new nf(bc);function vf(){return df}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yf=function(){function t(t){this.At=t?function(e,n){return t(e,n)||rh.At(e.key,n.key)}:function(t,e){return rh.At(t.key,e.key)},this.ze=cf(),this.He=new Zl(this.At)}return t.Je=function(e){return new t(e.At)},t.prototype.has=function(t){return null!=this.ze.get(t)},t.prototype.get=function(t){return this.ze.get(t)},t.prototype.first=function(){return this.He.Ae()},t.prototype.last=function(){return this.He.Re()},t.prototype.bt=function(){return this.He.bt()},t.prototype.indexOf=function(t){var e=this.ze.get(t);return e?this.He.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.He.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.He.Pe((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ze.Ie(t.key,t),e.He.Ie(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ze.remove(t),this.He.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.He.ge(),r=e.He.ge();n.Ce();){var i=n.De().key,o=r.De().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.At=this.At,r.ze=e,r.He=n,r},t}(),gf=function(){function t(){this.Ye=new Zl(rh.At)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Ye.get(e);n?0!==t.type&&3===n.type?this.Ye=this.Ye.Ie(e,t):3===t.type&&1!==n.type?this.Ye=this.Ye.Ie(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Ye=this.Ye.Ie(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Ye=this.Ye.Ie(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Ye=this.Ye.remove(e):1===t.type&&2===n.type?this.Ye=this.Ye.Ie(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Ye=this.Ye.Ie(e,{type:2,doc:t.doc}):dc():this.Ye=this.Ye.Ie(e,t)},t.prototype.Xe=function(){var t=[];return this.Ye.Pe((function(e,n){t.push(n)})),t},t}(),mf=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Ze=n,this.docChanges=r,this.tn=i,this.fromCache=o,this.en=s,this.nn=a}return t.sn=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,yf.Je(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.tn.bt()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.en===t.en&&this.tn.isEqual(t.tn)&&fl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ze.isEqual(t.Ze)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),bf=function(){function t(t,e,n,r,i){this.oe=t,this.rn=e,this.on=n,this.cn=r,this.an=i}return t.un=function(e,n){var r=new Map;return r.set(e,_f.hn(e,n)),new t(Jc.min(),r,vf(),sf(),pf())},t}(),_f=function(){function t(t,e,n,r,i){this.resumeToken=t,this.ln=e,this._n=n,this.fn=r,this.dn=i}return t.hn=function(e,n){return new t(Ec.h,n,pf(),pf(),pf())},t}(),wf=function(t,e,n,r){this.wn=t,this.removedTargetIds=e,this.key=n,this.En=r},Ef=function(t,e){this.targetId=t,this.Tn=e},If=function(t,e,n,r){void 0===n&&(n=Ec.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Tf=function(){function t(){this.In=0,this.mn=Nf(),this.An=Ec.h,this.Rn=!1,this.Pn=!0}return Object.defineProperty(t.prototype,"ln",{get:function(){return this.Rn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.An},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"yn",{get:function(){return 0!==this.In},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gn",{get:function(){return this.Pn},enumerable:!1,configurable:!0}),t.prototype.Vn=function(t){t.o()>0&&(this.Pn=!0,this.An=t)},t.prototype.pn=function(){var t=pf(),e=pf(),n=pf();return this.mn.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:dc()}})),new _f(this.An,this.Rn,t,e,n)},t.prototype.bn=function(){this.Pn=!1,this.mn=Nf()},t.prototype.vn=function(t,e){this.Pn=!0,this.mn=this.mn.Ie(t,e)},t.prototype.Sn=function(t){this.Pn=!0,this.mn=this.mn.remove(t)},t.prototype.Dn=function(){this.In+=1},t.prototype.Cn=function(){this.In-=1},t.prototype.xn=function(){this.Pn=!0,this.Rn=!0},t}(),Sf=function(){function t(t){this.Nn=t,this.Fn=new Map,this.On=sf(),this.kn=Cf(),this.Mn=new nf(bc)}return t.prototype.Ln=function(t){for(var e=0,n=t.wn;e<n.length;e++){var r=n[e];t.En instanceof Rh?this.$n(r,t.En):t.En instanceof Dh&&this.Bn(r,t.key,t.En)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.Bn(r,t.key,t.En)},t.prototype.qn=function(t){var e=this;this.Un(t,(function(n){var r=e.Qn(n);switch(t.state){case 0:e.Kn(n)&&r.Vn(t.resumeToken);break;case 1:r.Cn(),r.yn||r.bn(),r.Vn(t.resumeToken);break;case 2:r.Cn(),r.yn||e.removeTarget(n);break;case 3:e.Kn(n)&&(r.xn(),r.Vn(t.resumeToken));break;case 4:e.Kn(n)&&(e.Wn(n),r.Vn(t.resumeToken));break;default:dc()}}))},t.prototype.Un=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Fn.forEach((function(t,r){n.Kn(r)&&e(r)}))},t.prototype.jn=function(t){var e=t.targetId,n=t.Tn.count,r=this.Gn(e);if(r){var i=r.target;if(jh(i))if(0===n){var o=new rh(i.path);this.Bn(e,o,new Dh(o,Jc.min()))}else vc(1===n);else this.zn(e)!==n&&(this.Wn(e),this.Mn=this.Mn.add(e))}},t.prototype.Hn=function(t){var e=this,n=new Map;this.Fn.forEach((function(r,i){var o=e.Gn(i);if(o){if(r.ln&&jh(o.target)){var s=new rh(o.target.path);null!==e.On.get(s)||e.Jn(i,s)||e.Bn(i,s,new Dh(s,t))}r.gn&&(n.set(i,r.pn()),r.bn())}}));var r=pf();this.kn.forEach((function(t,n){var i=!0;n.Ke((function(t){var n=e.Gn(t);return!n||2===n.re||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new bf(t,n,this.Mn,this.On,r);return this.On=sf(),this.kn=Cf(),this.Mn=new nf(bc),i},t.prototype.$n=function(t,e){if(this.Kn(t)){var n=this.Jn(t,e.key)?2:0;this.Qn(t).vn(e.key,n),this.On=this.On.Ie(e.key,e),this.kn=this.kn.Ie(e.key,this.Yn(e.key).add(t))}},t.prototype.Bn=function(t,e,n){if(this.Kn(t)){var r=this.Qn(t);this.Jn(t,e)?r.vn(e,1):r.Sn(e),this.kn=this.kn.Ie(e,this.Yn(e).delete(t)),n&&(this.On=this.On.Ie(e,n))}},t.prototype.removeTarget=function(t){this.Fn.delete(t)},t.prototype.zn=function(t){var e=this.Qn(t).pn();return this.Nn.Xn(t).size+e._n.size-e.dn.size},t.prototype.Dn=function(t){this.Qn(t).Dn()},t.prototype.Qn=function(t){var e=this.Fn.get(t);return e||(e=new Tf,this.Fn.set(t,e)),e},t.prototype.Yn=function(t){var e=this.kn.get(t);return e||(e=new nf(bc),this.kn=this.kn.Ie(t,e)),e},t.prototype.Kn=function(t){var e=null!==this.Gn(t);return e||hc("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Gn=function(t){var e=this.Fn.get(t);return e&&e.yn?null:this.Nn.Zn(t)},t.prototype.Wn=function(t){var e=this;this.Fn.set(t,new Tf),this.Nn.Xn(t).forEach((function(n){e.Bn(t,n,null)}))},t.prototype.Jn=function(t,e){return this.Nn.Xn(t).has(e)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(){return new Zl(rh.At)}function Nf(){return new Zl(rh.At)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Af={asc:"ASCENDING",desc:"DESCENDING"},kf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pf=function(t,e){this.O=t,this.he=e};function Of(t,e){return t.he?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Rf(t,e){return t.he?e.toBase64():e.toUint8Array()}function Df(t,e){return Of(t,e.Tt())}function xf(t){return vc(!!t),Jc.wt(function(t){var e=ch(t);return new Xc(e.seconds,e.nanos)}(t))}function Lf(t,e){return function(t){return new th(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).Ct()}function Mf(t){var e=th.xt(t);return vc(sp(e)),e}function Ff(t,e){return Lf(t.O,e.path)}function Uf(t,e){var n=Mf(e);if(n.get(1)!==t.O.projectId)throw new Tc(Ic.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.O.projectId);if(n.get(3)!==t.O.database)throw new Tc(Ic.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.O.database);return new rh(Bf(n))}function jf(t,e){return Lf(t.O,e)}function Vf(t){var e=Mf(t);return 4===e.length?th.Nt():Bf(e)}function qf(t){return new th(["projects",t.O.projectId,"databases",t.O.database]).Ct()}function Bf(t){return vc(t.length>4&&"documents"===t.get(4)),t.Pt(5)}function Wf(t,e,n){return{name:Ff(t,e),fields:n.proto.mapValue.fields}}function Hf(t,e,n){var r=Uf(t,e.name),i=xf(e.updateTime),o=new Ah({mapValue:{fields:e.fields}});return new Rh(r,i,o,{hasCommittedMutations:!!n})}function Kf(t,e){var n;if(e instanceof Hl)n={update:Wf(t,e.key,e.value)};else if(e instanceof Yl)n={delete:Ff(t,e.key)};else if(e instanceof Kl)n={update:Wf(t,e.key,e.data),updateMask:op(e.Te)};else{if(!(e instanceof Xl))return dc();n={verify:Ff(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Cl)return{fieldPath:e.field.Ct(),setToServerValue:"REQUEST_TIME"};if(n instanceof Nl)return{fieldPath:e.field.Ct(),appendMissingElements:{values:n.elements}};if(n instanceof kl)return{fieldPath:e.field.Ct(),removeAllFromArray:{values:n.elements}};if(n instanceof Ol)return{fieldPath:e.field.Ct(),increment:n._e};throw dc()}(0,t)}))),e.Ee.we||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Df(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:dc()}(t,e.Ee)),n}function Gf(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Ml.updateTime(xf(t.updateTime)):void 0!==t.exists?Ml.exists(t.exists):Ml.de()}(e.currentDocument):Ml.de(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)vc("REQUEST_TIME"===e.setToServerValue),n=new Cl;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Nl(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new kl(i)}else"increment"in e?n=new Ol(t,e.increment):dc();var o=nh.Mt(e.fieldPath);return new xl(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Uf(t,e.update.name),o=new Ah({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new ah(e.map((function(t){return nh.Mt(t)})))}(e.updateMask);return new Kl(i,o,s,n,r)}return new Hl(i,o,n,r)}if(e.delete){var a=Uf(t,e.delete);return new Yl(a,n)}if(e.verify){var u=Uf(t,e.verify);return new Xl(u,n)}return dc()}function zf(t,e){return{documents:[jf(t,e.path)]}}function Qf(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=jf(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=jf(t,r.yt()),n.structuredQuery.from=[{collectionId:r.Vt()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Ch(t.value))return{unaryFilter:{field:ep(t.field),op:"IS_NAN"}};if(Sh(t.value))return{unaryFilter:{field:ep(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ch(t.value))return{unaryFilter:{field:ep(t.field),op:"IS_NOT_NAN"}};if(Sh(t.value))return{unaryFilter:{field:ep(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ep(t.field),op:tp(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:ep(t.field),direction:Zf(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.he||Vc(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Xf(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Xf(e.endAt)),n}function $f(t){var e=Vf(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){vc(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Yf(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Xh(np(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Vc(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Jf(n.startAt));var h=null;return n.endAt&&(h=Jf(n.endAt)),nl(e,i,a,s,u,"F",c,h)}function Yf(t){return t?void 0!==t.unaryFilter?[ip(t)]:void 0!==t.fieldFilter?[rp(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Yf(t)})).reduce((function(t,e){return t.concat(e)})):dc():[]}function Xf(t){return{before:t.before,values:t.position}}function Jf(t){var e=!!t.before,n=t.values||[];return new $h(n,e)}function Zf(t){return Af[t]}function tp(t){return kf[t]}function ep(t){return{fieldPath:t.Ct()}}function np(t){return nh.Mt(t.fieldPath)}function rp(t){return Vh.create(np(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return dc()}}(t.fieldFilter.op),t.fieldFilter.value)}function ip(t){switch(t.unaryFilter.op){case"IS_NAN":var e=np(t.unaryFilter.field);return Vh.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=np(t.unaryFilter.field);return Vh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=np(t.unaryFilter.field);return Vh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=np(t.unaryFilter.field);return Vh.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return dc()}}function op(t){var e=[];return t.fields.forEach((function(t){return e.push(t.Ct())})),{fieldPaths:e}}function sp(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(t){return new Pf(t,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var up=function(){function t(t){var e=this;this.ts=null,this.es=null,this.result=void 0,this.error=void 0,this.ns=!1,this.ss=!1,t((function(t){e.ns=!0,e.result=t,e.ts&&e.ts(t)}),(function(t){e.ns=!0,e.error=t,e.es&&e.es(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.ss&&dc(),this.ss=!0,this.ns?this.error?this.rs(n,this.error):this.os(e,this.result):new t((function(t,i){r.ts=function(n){r.os(e,n).next(t,i)},r.es=function(e){r.rs(n,e).next(t,i)}}))},t.prototype.cs=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.us=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.os=function(e,n){return e?this.us((function(){return e(n)})):t.resolve(n)},t.prototype.rs=function(e,n){return e?this.us((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.hs=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.ls=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.hs(r)},t}(),cp=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this._s=new $c,this.transaction.oncomplete=function(){n._s.resolve()},this.transaction.onabort=function(){e.error?n._s.reject(new fp(t,e.error)):n._s.resolve()},this.transaction.onerror=function(e){var r=gp(e.target.error);n._s.reject(new fp(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new fp(n,e)}},Object.defineProperty(t.prototype,"fs",{get:function(){return this._s.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this._s.reject(t),this.aborted||(hc("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new dp(e)},t}(),hp=function(){function t(e,n,r){this.name=e,this.version=n,this.ds=r,12.2===t.ws(Tt())&&lc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return hc("SimpleDb","Removing database:",t),vp(window.indexedDB.deleteDatabase(t)).cs()},t.G=function(){if("undefined"==typeof indexedDB)return!1;if(t.Es())return!0;var e=Tt(),n=t.ws(e),r=0<n&&n<10,i=t.Ts(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Es=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Is)},t.As=function(t,e){return t.store(e)},t.ws=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Ts=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Rs=function(t){return oc(this,void 0,void 0,(function(){var e,n=this;return sc(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(hc("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new fp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Tc(Ic.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new fp(t,n))},i.onupgradeneeded=function(t){hc("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.ds.Ps(e,i.transaction,t.oldVersion,n.version).next((function(){hc("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.ys&&(this.db.onversionchange=function(t){return n.ys(t)}),this.db)]}}))}))},t.prototype.gs=function(t){this.ys=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return oc(this,void 0,void 0,(function(){var i,o,s,a,u;return sc(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,h;return sc(this,(function(l){switch(l.label){case 0:++o,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,a.Rs(t)];case 2:return a.db=l.sent(),e=cp.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),up.reject(t)})).cs(),u={},s.catch((function(){})),[4,e.fs];case 3:return[2,(u.value=(l.sent(),s),u)];case 4:return c=l.sent(),h="FirebaseError"!==c.name&&o<3,hc("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),a.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),lp=function(){function t(t){this.Vs=t,this.ps=!1,this.bs=null}return Object.defineProperty(t.prototype,"ns",{get:function(){return this.ps},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"vs",{get:function(){return this.bs},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Vs=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ps=!0},t.prototype.Ss=function(t){this.bs=t},t.prototype.delete=function(){return vp(this.Vs.delete())},t}(),fp=function(t){function e(e,n){var r=this;return(r=t.call(this,Ic.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return ic(e,t),e}(Tc);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(t){return"IndexedDbTransactionError"===t.name}var dp=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(hc("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(hc("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),vp(n)},t.prototype.add=function(t){return hc("SimpleDb","ADD",this.store.name,t,t),vp(this.store.add(t))},t.prototype.get=function(t){var e=this;return vp(this.store.get(t)).next((function(n){return void 0===n&&(n=null),hc("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return hc("SimpleDb","DELETE",this.store.name,t),vp(this.store.delete(t))},t.prototype.count=function(){return hc("SimpleDb","COUNT",this.store.name),vp(this.store.count())},t.prototype.Ds=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Cs(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.xs=function(t,e){hc("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ns=!1;var r=this.cursor(n);return this.Cs(r,(function(t,e,n){return n.delete()}))},t.prototype.Fs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Cs(r,e)},t.prototype.Os=function(t){var e=this.cursor({});return new up((function(n,r){e.onerror=function(t){var e=gp(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.Cs=function(t,e){var n=[];return new up((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new lp(i),s=e(i.primaryKey,i.value,o);if(s instanceof up){var a=s.catch((function(t){return o.done(),up.reject(t)}));n.push(a)}o.ns?r():null===o.vs?i.continue():i.continue(o.vs)}else r()}})).next((function(){return up.hs(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ns?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function vp(t){return new up((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=gp(t.target.error);n(e)}}))}var yp=!1;function gp(t){var e=hp.ws(Tt());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Tc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return yp||(yp=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mp=function(){function t(t,e,n,r,i){this.ks=t,this.Ms=e,this.Ls=n,this.op=r,this.$s=i,this.Bs=new $c,this.then=this.Bs.promise.then.bind(this.Bs.promise),this.Bs.promise.catch((function(t){}))}return t.qs=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Us=setTimeout((function(){return e.Qs()}),t)},t.prototype.Ks=function(){return this.Qs()},t.prototype.cancel=function(t){null!==this.Us&&(this.clearTimeout(),this.Bs.reject(new Tc(Ic.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Qs=function(){var t=this;this.ks.Ws((function(){return null!==t.Us?(t.clearTimeout(),t.op().then((function(e){return t.Bs.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Us&&(this.$s(this),clearTimeout(this.Us),this.Us=null)},t}();function bp(t,e){if(lc("AsyncQueue",e+": "+t),pp(t))return new Tc(Ic.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _p=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.js=t,this.Ms=e,this.Gs=n,this.zs=r,this.Hs=i,this.Js=0,this.Ys=null,this.Xs=Date.now(),this.reset()}return t.prototype.reset=function(){this.Js=0},t.prototype.Zs=function(){this.Js=this.Hs},t.prototype.ti=function(t){var e=this;this.cancel();var n=Math.floor(this.Js+this.ei()),r=Math.max(0,Date.now()-this.Xs),i=Math.max(0,n-r);i>0&&hc("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Js+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ys=this.js.ni(this.Ms,i,(function(){return e.Xs=Date.now(),t()})),this.Js*=this.zs,this.Js<this.Gs&&(this.Js=this.Gs),this.Js>this.Hs&&(this.Js=this.Hs)},t.prototype.si=function(){null!==this.Ys&&(this.Ys.Ks(),this.Ys=null)},t.prototype.cancel=function(){null!==this.Ys&&(this.Ys.cancel(),this.Ys=null)},t.prototype.ei=function(){return(Math.random()-.5)*this.Js},t}(),wp=function(){function t(t,e,n,r,i,o){this.js=t,this.ii=n,this.ri=r,this.oi=i,this.listener=o,this.state=0,this.ci=0,this.ai=null,this.stream=null,this.ui=new _p(t,e)}return t.prototype.hi=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.li=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this._i()},t.prototype.stop=function(){return oc(this,void 0,void 0,(function(){return sc(this,(function(t){switch(t.label){case 0:return this.hi()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.fi=function(){this.state=0,this.ui.reset()},t.prototype.di=function(){var t=this;this.li()&&null===this.ai&&(this.ai=this.js.ni(this.ii,6e4,(function(){return t.wi()})))},t.prototype.Ei=function(t){this.Ti(),this.stream.send(t)},t.prototype.wi=function(){return oc(this,void 0,void 0,(function(){return sc(this,(function(t){return this.li()?[2,this.close(0)]:[2]}))}))},t.prototype.Ti=function(){this.ai&&(this.ai.cancel(),this.ai=null)},t.prototype.close=function(t,e){return oc(this,void 0,void 0,(function(){return sc(this,(function(n){switch(n.label){case 0:return this.Ti(),this.ui.cancel(),this.ci++,3!==t?this.ui.reset():e&&e.code===Ic.RESOURCE_EXHAUSTED?(lc(e.toString()),lc("Using maximum backoff delay to prevent overloading the backend."),this.ui.Zs()):e&&e.code===Ic.UNAUTHENTICATED&&this.oi.g(),null!==this.stream&&(this.Ii(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Z(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.Ii=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.mi(this.ci),n=this.ci;this.oi.getToken().then((function(e){t.ci===n&&t.Ai(e)}),(function(n){e((function(){var e=new Tc(Ic.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Ri(e)}))}))},t.prototype.Ai=function(t){var e=this,n=this.mi(this.ci);this.stream=this.Pi(t),this.stream.Y((function(){n((function(){return e.state=2,e.listener.Y()}))})),this.stream.Z((function(t){n((function(){return e.Ri(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype._i=function(){var t=this;this.state=4,this.ui.ti((function(){return oc(t,void 0,void 0,(function(){return sc(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.Ri=function(t){return hc("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.mi=function(t){var e=this;return function(n){e.js.Ws((function(){return e.ci===t?n():(hc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Ep=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).fe=i,s}return ic(e,t),e.prototype.Pi=function(t){return this.ri.ft("Listen",t)},e.prototype.onMessage=function(t){this.ui.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:dc()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.he?(vc(void 0===e||"string"==typeof e),Ec.fromBase64String(e||"")):(vc(void 0===e||e instanceof Uint8Array),Ec.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Ic.UNKNOWN:zc(t.code);return new Tc(e,t.message||"")}(a);n=new If(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Uf(t,r.document.name),o=xf(r.document.updateTime);var a=new Ah({mapValue:{fields:r.document.fields}}),u=(s=new Rh(i,o,a,{}),r.targetIds||[]),c=r.removedTargetIds||[];n=new wf(u,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Uf(t,r.document),o=r.readTime?xf(r.readTime):Jc.min(),a=new Dh(i,o),s=r.removedTargetIds||[],n=new wf([],s,a.key,a);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Uf(t,r.document),o=r.removedTargetIds||[],n=new wf([],o,i,null);else{if(!("filter"in e))return dc();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Jl(r),o=h.targetId,n=new Ef(o,i)}return n}(this.fe,t),n=function(t){if(!("targetChange"in t))return Jc.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Jc.min():e.readTime?xf(e.readTime):Jc.min()}(t);return this.listener.yi(e,n)},e.prototype.gi=function(t){var e={};e.database=qf(this.fe),e.addTarget=function(t,e){var n,r=e.target;return(n=jh(r)?{documents:zf(t,r)}:{query:Qf(t,r)}).targetId=e.targetId,e.resumeToken.o()>0?n.resumeToken=Rf(t,e.resumeToken):e.oe.u(Jc.min())>0&&(n.readTime=Of(t,e.oe.Tt())),n}(this.fe,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dc()}}(0,e.re);return null==n?null:{"goog-listen-tags":n}}(this.fe,t);n&&(e.labels=n),this.Ei(e)},e.prototype.Vi=function(t){var e={};e.database=qf(this.fe),e.removeTarget=t,this.Ei(e)},e}(wp),Ip=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).fe=i,s.pi=!1,s}return ic(e,t),Object.defineProperty(e.prototype,"bi",{get:function(){return this.pi},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.pi=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.Ii=function(){this.pi&&this.vi([])},e.prototype.Pi=function(t){return this.ri.ft("Write",t)},e.prototype.onMessage=function(t){if(vc(!!t.streamToken),this.lastStreamToken=t.streamToken,this.pi){this.ui.reset();var e=function(t,e){return t&&t.length>0?(vc(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?xf(t.updateTime):xf(e);n.isEqual(Jc.min())&&(n=xf(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Ll(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=xf(t.commitTime);return this.listener.Si(n,e)}return vc(!t.writeResults||0===t.writeResults.length),this.pi=!0,this.listener.Di()},e.prototype.Ci=function(){var t={};t.database=qf(this.fe),this.Ei(t)},e.prototype.vi=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Kf(e.fe,t)}))};this.Ei(n)},e}(wp),Tp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.ri=n,i.fe=r,i.xi=!1,i}return ic(e,t),e.prototype.Ni=function(){if(this.xi)throw new Tc(Ic.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.at=function(t,e,n){var r=this;return this.Ni(),this.credentials.getToken().then((function(i){return r.ri.at(t,e,n,i)})).catch((function(t){throw t.code===Ic.UNAUTHENTICATED&&r.credentials.g(),t}))},e.prototype._t=function(t,e,n){var r=this;return this.Ni(),this.credentials.getToken().then((function(i){return r.ri._t(t,e,n,i)})).catch((function(t){throw t.code===Ic.UNAUTHENTICATED&&r.credentials.g(),t}))},e.prototype.terminate=function(){this.xi=!1},e}((function(){})),Sp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Cp=function(){function t(){this.Fi=[]}return t.prototype.Oi=function(t){this.Fi.push(t)},t.prototype.ki=function(){this.Fi.forEach((function(t){return t()}))},t}(),Np={Mi:!1,Li:0,$i:0,Bi:0},Ap=function(){function t(t,e,n){this.qi=t,this.Ui=e,this.Qi=n}return t.Ki=function(e){return new t(e,t.Wi,t.ji)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ap.Wi=10,Ap.ji=1e3,Ap.Gi=new Ap(41943040,Ap.Wi,Ap.ji),Ap.zi=new Ap(-1,0,0);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var kp=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.Hi=function(t){return n.Ji(t)},this.Yi=function(t){return e.Xi(t)})}return t.prototype.Ji=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.Yi&&this.Yi(t),t},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(t){return oc(this,void 0,void 0,(function(){return sc(this,(function(e){if(t.code!==Ic.FAILED_PRECONDITION||t.message!==Sp)throw t;return hc("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kp.Zi=-1;var Op=function(t,e){this.progress=t,this.tr=e},Rp=function(){function t(t,e,n,r){this.batchId=t,this.er=e,this.baseMutations=n,this.mutations=r}return t.prototype.nr=function(t,e,n){for(var r=n.sr,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=jl(o,e,r[i]))}return e},t.prototype.ir=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Vl(i,e,e,this.er))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=Vl(u,e,o,this.er))}return e},t.prototype.rr=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.ir(r.key,t.get(r.key));i&&(n=n.Ie(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),pf())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&_c(this.mutations,t.mutations,(function(t,e){return Bl(t,e)}))&&_c(this.baseMutations,t.baseMutations,(function(t,e){return Bl(t,e)}))},t}(),Dp=function(){function t(t,e,n,r){this.batch=t,this.cr=e,this.sr=n,this.ar=r}return t.from=function(e,n,r){vc(e.mutations.length===r.length);for(var i=lf(),o=e.mutations,s=0;s<o.length;s++)i=i.Ie(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),xp=function(){function t(t,e){this.ur=t,this.hr=e,this.lr={}}return t.prototype.get=function(t){var e=this.ur(t),n=this.lr[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.hr(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ur(t),r=this.lr[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.hr(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.lr[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ur(t),n=this.lr[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.hr(n[r][0],t))return 1===n.length?delete this.lr[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){oh(this.lr,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.bt=function(){return sh(this.lr)},t}(),Lp=function(){function t(){this._r=new xp((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.dr=!1}return t.prototype.wr=function(t){var e=this._r.get(t);return e?e.readTime:Jc.min()},t.prototype.Er=function(t,e){this.Tr(),this._r.set(t.key,{Ir:t,readTime:e})},t.prototype.mr=function(t,e){void 0===e&&(e=null),this.Tr(),this._r.set(t,{Ir:null,readTime:e})},t.prototype.Ar=function(t,e){this.Tr();var n=this._r.get(e);return void 0!==n?up.resolve(n.Ir):this.Rr(t,e)},t.prototype.getEntries=function(t,e){return this.Pr(t,e)},t.prototype.apply=function(t){return this.Tr(),this.dr=!0,this.yr(t)},t.prototype.Tr=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=bc(n,i);return 0===s?bc(r,o):s}var Fp=function(){function t(t){this.gr=t,this.buffer=new nf(Mp),this.Vr=0}return t.prototype.pr=function(){return++this.Vr},t.prototype.br=function(t){var e=[t,this.pr()];if(this.buffer.size<this.gr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Mp(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Up=function(){function t(t,e){this.vr=t,this.ks=e,this.Sr=!1,this.Dr=null}return t.prototype.start=function(t){-1!==this.vr.params.qi&&this.Cr(t)},t.prototype.stop=function(){this.Dr&&(this.Dr.cancel(),this.Dr=null)},Object.defineProperty(t.prototype,"Nr",{get:function(){return null!==this.Dr},enumerable:!1,configurable:!0}),t.prototype.Cr=function(t){var e=this,n=this.Sr?3e5:6e4;hc("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Dr=this.ks.ni("lru_garbage_collection",n,(function(){return oc(e,void 0,void 0,(function(){var e;return sc(this,(function(n){switch(n.label){case 0:this.Dr=null,this.Sr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Fr(this.vr)];case 2:return n.sent(),[3,7];case 3:return pp(e=n.sent())?(hc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Pp(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Cr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),jp=function(){function t(t,e){this.Or=t,this.params=e}return t.prototype.kr=function(t,e){return this.Or.Mr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Lr=function(t,e){var n=this;if(0===e)return up.resolve(kp.Zi);var r=new Fp(e);return this.Or.Un(t,(function(t){return r.br(t.sequenceNumber)})).next((function(){return n.Or.$r(t,(function(t){return r.br(t)}))})).next((function(){return r.maxValue}))},t.prototype.Br=function(t,e,n){return this.Or.Br(t,e,n)},t.prototype.qr=function(t,e){return this.Or.qr(t,e)},t.prototype.Ur=function(t,e){var n=this;return-1===this.params.qi?(hc("LruGarbageCollector","Garbage collection skipped; disabled"),up.resolve(Np)):this.Qr(t).next((function(r){return r<n.params.qi?(hc("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.qi),Np):n.Kr(t,e)}))},t.prototype.Qr=function(t){return this.Or.Qr(t)},t.prototype.Kr=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.kr(t,this.params.Ui).next((function(e){return e>c.params.Qi?(hc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Qi+" from "+e),r=c.params.Qi):r=e,o=Date.now(),c.Lr(t,r)})).next((function(r){return n=r,s=Date.now(),c.Br(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.qr(t,n)})).next((function(t){return u=Date.now(),cc()<=he.DEBUG&&hc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),up.resolve({Mi:!0,Li:r,$i:i,Bi:t})}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(t,e,n){if(!n)throw new Tc(Ic.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function qp(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Tc(Ic.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Bp(t,e,n,r){if(!0===e&&!0===r)throw new Tc(Ic.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Wp(t){if(!rh.qt(t))throw new Tc(Ic.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Hp(t){if(rh.qt(t))throw new Tc(Ic.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Kp(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":dc()}function Gp(t,e){if("_delegate"in t&&(t=t._),!(t instanceof e)){if(e.name===t.constructor.name)throw new Tc(Ic.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Kp(t);throw new Tc(Ic.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function zp(t,e){if(e<=0)throw new Tc(Ic.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qp=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Tc(Ic.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Tc(Ic.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Bp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),$p=new Map,Yp=function(){function t(t,e){this.Wr="(lite)",this.jr=new Qp({}),this.Gr=!1,t instanceof Fc?(this.zr=t,this.Hr=new Rc):(this.Jr=t,this.zr=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Tc(Ic.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fc(t.options.projectId)}(t),this.Hr=new Dc(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Jr)throw new Tc(Ic.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Jr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Yr",{get:function(){return this.Gr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xr",{get:function(){return void 0!==this.Zr},enumerable:!1,configurable:!0}),t.prototype.eo=function(t){if(this.Gr)throw new Tc(Ic.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.jr=new Qp(t),void 0!==t.credentials&&(this.Hr=function(t){if(!t)return new Rc;switch(t.type){case"gapi":var e=t.client;return vc(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Lc(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Tc(Ic.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.no=function(){return this.jr},t.prototype.so=function(){return this.Gr=!0,this.jr},t.prototype._delete=function(){return this.Zr||(this.Zr=this.io()),this.Zr},t.prototype.io=function(){return this,(t=$p.get(this))&&(hc("ComponentProvider","Removing Datastore"),$p.delete(this),t.terminate()),Promise.resolve();var t},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Zp(e)),e=Jp(t.get(n),e);return Zp(e)}function Jp(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Zp(t){return t+""}function td(t){var e=t.length;if(vc(e>=2),2===e)return vc(""===t.charAt(0)&&""===t.charAt(1)),th.Nt();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&dc(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:dc()}o=s+2}return new th(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ed=function(t,e){this.seconds=t,this.nanoseconds=e},nd=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};nd.store="owner",nd.key="owner";var rd=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};rd.store="mutationQueues",rd.keyPath="userId";var id=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};id.store="mutations",id.keyPath="batchId",id.userMutationsIndex="userMutationsIndex",id.userMutationsKeyPath=["userId","batchId"];var od=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Xp(e)]},t.key=function(t,e,n){return[t,Xp(e),n]},t}();od.store="documentMutations",od.PLACEHOLDER=new od;var sd=function(t,e){this.path=t,this.readTime=e},ad=function(t,e){this.path=t,this.version=e},ud=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};ud.store="remoteDocuments",ud.readTimeIndex="readTimeIndex",ud.readTimeIndexPath="readTime",ud.collectionReadTimeIndex="collectionReadTimeIndex",ud.collectionReadTimeIndexPath=["parentPath","readTime"];var cd=function(t){this.byteSize=t};cd.store="remoteDocumentGlobal",cd.key="remoteDocumentGlobalKey";var hd=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};hd.store="targets",hd.keyPath="targetId",hd.queryTargetsIndexName="queryTargetsIndex",hd.queryTargetsKeyPath=["canonicalId","targetId"];var ld=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};ld.store="targetDocuments",ld.keyPath=["targetId","path"],ld.documentTargetsIndex="documentTargetsIndex",ld.documentTargetsKeyPath=["path","targetId"];var fd=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};fd.key="targetGlobalKey",fd.store="targetGlobal";var pd=function(t,e){this.collectionId=t,this.parent=e};pd.store="collectionParents",pd.keyPath=["collectionId","parent"];var dd=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};dd.store="clientMetadata",dd.keyPath="clientId";var vd=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};vd.store="bundles",vd.keyPath="bundleId";var yd=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};yd.store="namedQueries",yd.keyPath="name";var gd=ac(ac(ac(ac([rd.store,id.store,od.store,ud.store,hd.store,nd.store,fd.store,ld.store],[dd.store]),[cd.store]),[pd.store]),[vd.store,yd.store]),md=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ro=e,r.oo=n,r}return ic(e,t),e}(Cp);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(t,e){var n=yc(t);return hp.As(n.ro,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _d=function(t){this.co=t};function wd(t,e){if(e.document)return Hf(t.co,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=rh.Ut(e.noDocument.path),r=Cd(e.noDocument.readTime);return new Dh(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=rh.Ut(e.unknownDocument.path);return r=Cd(e.unknownDocument.version),new xh(i,r)}return dc()}function Ed(t,e,n){var r=Id(n),i=e.key.path.yt().Dt();if(e instanceof Rh){var o=function(t,e){return{name:Ff(t,e.key),fields:e.Yt().mapValue.fields,updateTime:Of(t,e.version.Tt())}}(t.co,e),s=e.hasCommittedMutations;return new ud(null,null,o,s,r,i)}if(e instanceof Dh){var a=e.key.path.Dt(),u=Sd(e.version);return s=e.hasCommittedMutations,new ud(null,new sd(a,u),null,s,r,i)}if(e instanceof xh){var c=e.key.path.Dt(),h=Sd(e.version);return new ud(new ad(c,h),null,null,!0,r,i)}return dc()}function Id(t){var e=t.Tt();return[e.seconds,e.nanoseconds]}function Td(t){var e=new Xc(t[0],t[1]);return Jc.wt(e)}function Sd(t){var e=t.Tt();return new ed(e.seconds,e.nanoseconds)}function Cd(t){var e=new Xc(t.seconds,t.nanoseconds);return Jc.wt(e)}function Nd(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Gf(t.co,e)})),r=e.mutations.length-1;r>=0;--r){var i=e.mutations[r];void 0!==(null==i?void 0:i.transform)&&(e.mutations[r-1].updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r,1),--r)}var o=e.mutations.map((function(e){return Gf(t.co,e)})),s=Xc.fromMillis(e.localWriteTimeMs);return new Rp(e.batchId,s,n,o)}function Ad(t){var e,n,r=Cd(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Cd(t.lastLimboFreeSnapshotVersion):Jc.min();return void 0!==t.query.documents?(vc(1===(n=t.query).documents.length),e=hl(rl(Vf(n.documents[0])))):e=function(t){return hl($f(t))}(t.query),new ml(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Ec.fromBase64String(t.resumeToken))}function kd(t,e){var n,r=Sd(e.oe),i=Sd(e.lastLimboFreeSnapshotVersion);n=jh(e.target)?zf(t.co,e.target):Qf(t.co,e.target);var o=e.resumeToken.toBase64();return new hd(e.targetId,Fh(e.target),r,o,e.sequenceNumber,i,n)}function Pd(t){var e=$f({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ll(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Od=function(){function t(){}return t.prototype.ao=function(t,e){return Rd(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Cd(e.createTime),version:e.version};var e}))},t.prototype.uo=function(t,e){return Rd(t).put({bundleId:(n=e).id,createTime:Sd(xf(n.createTime)),version:n.version});var n},t.prototype.ho=function(t,e){return Dd(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Pd(e.bundledQuery),readTime:Cd(e.readTime)};var e}))},t.prototype.lo=function(t,e){return Dd(t).put(function(t){return{name:t.name,readTime:Sd(xf(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Rd(t){return bd(t,vd.store)}function Dd(t){return bd(t,yd.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xd=function(){function t(){this._o=new Ld}return t.prototype.fo=function(t,e){return this._o.add(e),up.resolve()},t.prototype.wo=function(t,e){return up.resolve(this._o.getEntries(e))},t}(),Ld=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.Vt(),n=t.yt(),r=this.index[e]||new nf(th.At),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.Vt(),n=t.yt(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new nf(th.At)).Dt()},t}(),Md=function(){function t(){this.Eo=new Ld}return t.prototype.fo=function(t,e){var n=this;if(!this.Eo.has(e)){var r=e.Vt(),i=e.yt();t.Oi((function(){n.Eo.add(e)}));var o={collectionId:r,parent:Xp(i)};return Fd(t).put(o)}return up.resolve()},t.prototype.wo=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[wc(e),""],!1,!0);return Fd(t).Ds(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(td(o.parent))}return n}))},t}();function Fd(t){return bd(t,pd.store)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(t,e,n){var r=t.store(id.store),i=t.store(od.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Fs({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){vc(1===a)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=od.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return up.hs(o).next((function(){return c}))}function jd(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw dc();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vd=function(){function t(t,e,n,r){this.userId=t,this.fe=e,this.To=n,this.Io=r,this.mo={}}return t.Ao=function(e,n,r,i){return vc(""!==e.uid),new t(e.T()?e.uid:"",n,r,i)},t.prototype.Ro=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bd(t).Fs({index:id.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Po=function(t,e,n,r){var i=this,o=Wd(t),s=Bd(t);return s.add({}).next((function(a){vc("number"==typeof a);for(var u=new Rp(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Kf(t.co,e)})),i=n.mutations.map((function(e){return Kf(t.co,e)}));return new id(e,n.batchId,n.er.toMillis(),r,i)}(i.fe,i.userId,u),h=[],l=new nf((function(t,e){return bc(t.Ct(),e.Ct())})),f=0,p=r;f<p.length;f++){var d=p[f],v=od.key(i.userId,d.key.path,a);l=l.add(d.key.path.yt()),h.push(s.put(c)),h.push(o.put(v,od.PLACEHOLDER))}return l.forEach((function(e){h.push(i.To.fo(t,e))})),t.Oi((function(){i.mo[a]=u.keys()})),up.hs(h).next((function(){return u}))}))},t.prototype.yo=function(t,e){var n=this;return Bd(t).get(e).next((function(t){return t?(vc(t.userId===n.userId),Nd(n.fe,t)):null}))},t.prototype.Vo=function(t,e){var n=this;return this.mo[e]?up.resolve(this.mo[e]):this.yo(t,e).next((function(t){if(t){var r=t.keys();return n.mo[e]=r,r}return null}))},t.prototype.po=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Bd(t).Fs({index:id.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(vc(e.batchId>=r),o=Nd(n.fe,e)),i.done()})).next((function(){return o}))},t.prototype.bo=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Bd(t).Fs({index:id.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.vo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Bd(t).Ds(id.userMutationsIndex,n).next((function(t){return t.map((function(t){return Nd(e.fe,t)}))}))},t.prototype.So=function(t,e){var n=this,r=od.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Wd(t).Fs({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=td(u);if(a===n.userId&&e.path.isEqual(h))return Bd(t).get(c).next((function(t){if(!t)throw dc();vc(t.userId===n.userId),o.push(Nd(n.fe,t))}));s.done()})).next((function(){return o}))},t.prototype.Do=function(t,e){var n=this,r=new nf(bc),i=[];return e.forEach((function(e){var o=od.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Wd(t).Fs({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=td(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),up.hs(i).next((function(){return n.Co(t,r)}))},t.prototype.xo=function(t,e){var n=this,r=e.path,i=r.length+1,o=od.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new nf(bc);return Wd(t).Fs({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=td(u);s===n.userId&&r.vt(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Co(t,a)}))},t.prototype.Co=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Bd(t).get(e).next((function(t){if(null===t)throw dc();vc(t.userId===n.userId),r.push(Nd(n.fe,t))})))})),up.hs(i).next((function(){return r}))},t.prototype.No=function(t,e){var n=this;return Ud(t.ro,this.userId,e).next((function(r){return t.Oi((function(){n.Fo(e.batchId)})),up.forEach(r,(function(e){return n.Io.Oo(t,e)}))}))},t.prototype.Fo=function(t){delete this.mo[t]},t.prototype.ko=function(t){var e=this;return this.Ro(t).next((function(n){if(!n)return up.resolve();var r=IDBKeyRange.lowerBound(od.prefixForUser(e.userId)),i=[];return Wd(t).Fs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=td(t[1]);i.push(o)}else r.done()})).next((function(){vc(0===i.length)}))}))},t.prototype.Mo=function(t,e){return qd(t,this.userId,e)},t.prototype.Lo=function(t){var e=this;return Hd(t).get(this.userId).next((function(t){return t||new rd(e.userId,-1,"")}))},t}();function qd(t,e,n){var r=od.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Wd(t).Fs({range:o,Ns:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function Bd(t){return bd(t,id.store)}function Wd(t){return bd(t,od.store)}function Hd(t){return bd(t,rd.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kd=function(){function t(t){this.$o=t}return t.prototype.next=function(){return this.$o+=2,this.$o},t.Bo=function(){return new t(0)},t.qo=function(){return new t(-1)},t}(),Gd=function(){function t(t,e){this.Io=t,this.fe=e}return t.prototype.Uo=function(t){var e=this;return this.Qo(t).next((function(n){var r=new Kd(n.highestTargetId);return n.highestTargetId=r.next(),e.Ko(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Wo=function(t){return this.Qo(t).next((function(t){return Jc.wt(new Xc(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.jo=function(t){return this.Qo(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Go=function(t,e,n){var r=this;return this.Qo(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.Tt()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ko(t,i)}))},t.prototype.zo=function(t,e){var n=this;return this.Ho(t,e).next((function(){return n.Qo(t).next((function(r){return r.targetCount+=1,n.Jo(e,r),n.Ko(t,r)}))}))},t.prototype.Yo=function(t,e){return this.Ho(t,e)},t.prototype.Xo=function(t,e){var n=this;return this.Zo(t,e.targetId).next((function(){return zd(t).delete(e.targetId)})).next((function(){return n.Qo(t)})).next((function(e){return vc(e.targetCount>0),e.targetCount-=1,n.Ko(t,e)}))},t.prototype.Br=function(t,e,n){var r=this,i=0,o=[];return zd(t).Fs((function(s,a){var u=Ad(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Xo(t,u)))})).next((function(){return up.hs(o)})).next((function(){return i}))},t.prototype.Un=function(t,e){return zd(t).Fs((function(t,n){var r=Ad(n);e(r)}))},t.prototype.Qo=function(t){return Qd(t).get(fd.key).next((function(t){return vc(null!==t),t}))},t.prototype.Ko=function(t,e){return Qd(t).put(fd.key,e)},t.prototype.Ho=function(t,e){return zd(t).put(kd(this.fe,e))},t.prototype.Jo=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.tc=function(t){return this.Qo(t).next((function(t){return t.targetCount}))},t.prototype.ec=function(t,e){var n=Fh(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return zd(t).Fs({range:r,index:hd.queryTargetsIndexName},(function(t,n,r){var o=Ad(n);Uh(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.nc=function(t,e,n){var r=this,i=[],o=$d(t);return e.forEach((function(e){var s=Xp(e.path);i.push(o.put(new ld(n,s))),i.push(r.Io.sc(t,n,e))})),up.hs(i)},t.prototype.ic=function(t,e,n){var r=this,i=$d(t);return up.forEach(e,(function(e){var o=Xp(e.path);return up.hs([i.delete([n,o]),r.Io.rc(t,n,e)])}))},t.prototype.Zo=function(t,e){var n=$d(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.oc=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=$d(t),i=pf();return r.Fs({range:n,Ns:!0},(function(t,e,n){var r=td(t[1]),o=new rh(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Mo=function(t,e){var n=Xp(e.path),r=IDBKeyRange.bound([n],[wc(n)],!1,!0),i=0;return $d(t).Fs({index:ld.documentTargetsIndex,Ns:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Zn=function(t,e){return zd(t).get(e).next((function(t){return t?Ad(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(t){return bd(t,hd.store)}function Qd(t){return bd(t,fd.store)}function $d(t){return bd(t,ld.store)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yd=function(){function t(t,e){this.db=t,this.vr=function(t,e){return new jp(t,e)}(this,e)}return t.prototype.Mr=function(t){var e=this.cc(t);return this.db.ac().tc(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.cc=function(t){var e=0;return this.$r(t,(function(t){e++})).next((function(){return e}))},t.prototype.Un=function(t,e){return this.db.ac().Un(t,e)},t.prototype.$r=function(t,e){return this.uc(t,(function(t,n){return e(n)}))},t.prototype.sc=function(t,e,n){return Xd(t,n)},t.prototype.rc=function(t,e,n){return Xd(t,n)},t.prototype.Br=function(t,e,n){return this.db.ac().Br(t,e,n)},t.prototype.Oo=function(t,e){return Xd(t,e)},t.prototype.hc=function(t,e){return function(t,e){var n=!1;return Hd(t).Os((function(r){return qd(t,r,e).next((function(t){return t&&(n=!0),up.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.qr=function(t,e){var n=this,r=this.db._c().lc(),i=[],o=0;return this.uc(t,(function(s,a){if(a<=e){var u=n.hc(t,s).next((function(e){if(!e)return o++,r.Ar(t,s).next((function(){return r.mr(s),$d(t).delete([0,Xp(s.path)])}))}));i.push(u)}})).next((function(){return up.hs(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.ce(t.oo);return this.db.ac().Yo(t,n)},t.prototype.fc=function(t,e){return Xd(t,e)},t.prototype.uc=function(t,e){var n,r=$d(t),i=kp.Zi;return r.Fs({index:ld.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==kp.Zi&&e(new rh(td(n)),i),i=a,n=s):i=kp.Zi})).next((function(){i!==kp.Zi&&e(new rh(td(n)),i)}))},t.prototype.Qr=function(t){return this.db._c().dc(t)},t}();function Xd(t,e){return $d(t).put(function(t,e){return new ld(0,Xp(t.path),e)}(e,t.oo))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jd=function(){function t(t,e){this.fe=t,this.To=e}return t.prototype.Er=function(t,e,n){return ev(t).put(nv(e),n)},t.prototype.mr=function(t,e){var n=ev(t),r=nv(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.wc(t,r)}))},t.prototype.Ar=function(t,e){var n=this;return ev(t).get(nv(e)).next((function(t){return n.Ec(t)}))},t.prototype.Tc=function(t,e){var n=this;return ev(t).get(nv(e)).next((function(t){var e=n.Ec(t);return e?{Ir:e,size:jd(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=af();return this.Ic(t,e,(function(t,e){var i=n.Ec(e);r=r.Ie(t,i)})).next((function(){return r}))},t.prototype.mc=function(t,e){var n=this,r=af(),i=new Zl(rh.At);return this.Ic(t,e,(function(t,e){var o=n.Ec(e);o?(r=r.Ie(t,o),i=i.Ie(t,jd(e))):(r=r.Ie(t,null),i=i.Ie(t,0))})).next((function(){return{Ac:r,Rc:i}}))},t.prototype.Ic=function(t,e,n){if(e.bt())return up.resolve();var r=IDBKeyRange.bound(e.first().path.Dt(),e.last().path.Dt()),i=e.ge(),o=i.De();return ev(t).Fs({range:r},(function(t,e,r){for(var s=rh.Ut(t);o&&rh.At(o,s)<0;)n(o,null),o=i.De();o&&o.isEqual(s)&&(n(o,e),o=i.Ce()?i.De():null),o?r.Ss(o.path.Dt()):r.done()})).next((function(){for(;o;)n(o,null),o=i.Ce()?i.De():null}))},t.prototype.Pc=function(t,e,n){var r=this,i=cf(),o=e.path.length+1,s={};if(n.isEqual(Jc.min())){var a=e.path.Dt();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.Dt(),c=Id(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=ud.collectionReadTimeIndex}return ev(t).Fs(s,(function(t,n,s){if(t.length===o){var a=wd(r.fe,n);e.path.vt(a.key.path)?a instanceof Rh&&vl(e,a)&&(i=i.Ie(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.lc=function(t){return new Zd(this,!!t&&t.yc)},t.prototype.dc=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return tv(t).get(cd.key).next((function(t){return vc(!!t),t}))},t.prototype.wc=function(t,e){return tv(t).put(cd.key,e)},t.prototype.Ec=function(t){if(t){var e=wd(this.fe,t);return e instanceof Dh&&e.version.isEqual(Jc.min())?null:e}return null},t}(),Zd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).gc=e,r.yc=n,r.Vc=new xp((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return ic(e,t),e.prototype.yr=function(t){var e=this,n=[],r=0,i=new nf((function(t,e){return bc(t.Ct(),e.Ct())}));return this._r.forEach((function(o,s){var a=e.Vc.get(o);if(s.Ir){var u=Ed(e.gc.fe,s.Ir,e.wr(o));i=i.add(o.path.yt());var c=jd(u);r+=c-a,n.push(e.gc.Er(t,o,u))}else if(r-=a,e.yc){var h=Ed(e.gc.fe,new Dh(o,Jc.min()),e.wr(o));n.push(e.gc.Er(t,o,h))}else n.push(e.gc.mr(t,o))})),i.forEach((function(r){n.push(e.gc.To.fo(t,r))})),n.push(this.gc.updateMetadata(t,r)),up.hs(n)},e.prototype.Rr=function(t,e){var n=this;return this.gc.Tc(t,e).next((function(t){return null===t?(n.Vc.set(e,0),null):(n.Vc.set(e,t.size),t.Ir)}))},e.prototype.Pr=function(t,e){var n=this;return this.gc.mc(t,e).next((function(t){var e=t.Ac;return t.Rc.forEach((function(t,e){n.Vc.set(t,e)})),e}))},e}(Lp);function tv(t){return bd(t,cd.store)}function ev(t){return bd(t,ud.store)}function nv(t){return t.path.Dt()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rv=function(){function t(t){this.fe=t}return t.prototype.Ps=function(t,e,n,r){var i=this;vc(n<r&&n>=0&&r<=11);var o=new cp("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(nd.store)}(t),function(t){t.createObjectStore(rd.store,{keyPath:rd.keyPath}),t.createObjectStore(id.store,{keyPath:id.keyPath,autoIncrement:!0}).createIndex(id.userMutationsIndex,id.userMutationsKeyPath,{unique:!0}),t.createObjectStore(od.store)}(t),iv(t),function(t){t.createObjectStore(ud.store)}(t));var s=up.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(ld.store),t.deleteObjectStore(hd.store),t.deleteObjectStore(fd.store)}(t),iv(t)),s=s.next((function(){return function(t){var e=t.store(fd.store),n=new fd(0,0,Jc.min().Tt(),0);return e.put(fd.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(id.store).Ds().next((function(n){t.deleteObjectStore(id.store),t.createObjectStore(id.store,{keyPath:id.keyPath,autoIncrement:!0}).createIndex(id.userMutationsIndex,id.userMutationsKeyPath,{unique:!0});var r=e.store(id.store),i=n.map((function(t){return r.put(t)}));return up.hs(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(dd.store,{keyPath:dd.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.bc(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(cd.store)}(t),i.vc(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Sc(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Dc(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(ud.store);e.createIndex(ud.readTimeIndex,ud.readTimeIndexPath,{unique:!1}),e.createIndex(ud.collectionReadTimeIndex,ud.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Cc(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(vd.store,{keyPath:vd.keyPath})}(t),function(t){t.createObjectStore(yd.store,{keyPath:yd.keyPath})}(t)}))),s},t.prototype.vc=function(t){var e=0;return t.store(ud.store).Fs((function(t,n){e+=jd(n)})).next((function(){var n=new cd(e);return t.store(cd.store).put(cd.key,n)}))},t.prototype.bc=function(t){var e=this,n=t.store(rd.store),r=t.store(id.store);return n.Ds().next((function(n){return up.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Ds(id.userMutationsIndex,i).next((function(r){return up.forEach(r,(function(r){vc(r.userId===n.userId);var i=Nd(e.fe,r);return Ud(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Sc=function(t){var e=t.store(ld.store),n=t.store(ud.store);return t.store(fd.store).get(fd.key).next((function(t){var r=[];return n.Fs((function(n,i){var o=new th(n),s=function(t){return[0,Xp(t)]}(o);r.push(e.get(s).next((function(n){return n?up.resolve():function(n){return e.put(new ld(0,Xp(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return up.hs(r)}))}))},t.prototype.Dc=function(t,e){t.createObjectStore(pd.store,{keyPath:pd.keyPath});var n=e.store(pd.store),r=new Ld,i=function(t){if(r.add(t)){var e=t.Vt(),i=t.yt();return n.put({collectionId:e,parent:Xp(i)})}};return e.store(ud.store).Fs({Ns:!0},(function(t,e){var n=new th(t);return i(n.yt())})).next((function(){return e.store(od.store).Fs({Ns:!0},(function(t,e){t[0];var n=t[1],r=(t[2],td(n));return i(r.yt())}))}))},t.prototype.Cc=function(t){var e=this,n=t.store(hd.store);return n.Fs((function(t,r){var i=Ad(r),o=kd(e.fe,i);return n.put(o)}))},t}();function iv(t){t.createObjectStore(ld.store,{keyPath:ld.keyPath}).createIndex(ld.documentTargetsIndex,ld.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(hd.store,{keyPath:hd.keyPath}).createIndex(hd.queryTargetsIndexName,hd.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(fd.store)}var ov="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sv=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.js=o,this.window=s,this.document=a,this.xc=c,this.Nc=h,this.Fc=null,this.Oc=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kc=null,this.inForeground=!1,this.Mc=null,this.Lc=null,this.$c=Number.NEGATIVE_INFINITY,this.Bc=function(t){return Promise.resolve()},!t.G())throw new Tc(Ic.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Io=new Yd(this,i),this.qc=n+"main",this.fe=new _d(u),this.Uc=new hp(this.qc,11,new rv(this.fe)),this.Qc=new Gd(this.Io,this.fe),this.To=new Md,this.Kc=function(t,e){return new Jd(t,e)}(this.fe,this.To),this.Wc=new Od,this.window&&this.window.localStorage?this.jc=this.window.localStorage:(this.jc=null,!1===h&&lc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Gc().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Tc(Ic.FAILED_PRECONDITION,ov);return t.zc(),t.Hc(),t.Jc(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Qc.jo(e)}))})).then((function(e){t.Fc=new kp(e,t.xc)})).then((function(){t.Oc=!0})).catch((function(e){return t.Uc&&t.Uc.close(),Promise.reject(e)}))},t.prototype.Yc=function(t){var e=this;return this.Bc=function(n){return oc(e,void 0,void 0,(function(){return sc(this,(function(e){return this.Nr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Xc=function(t){var e=this;this.Uc.gs((function(n){return oc(e,void 0,void 0,(function(){return sc(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.Zc=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.js.Ws((function(){return oc(e,void 0,void 0,(function(){return sc(this,(function(t){switch(t.label){case 0:return this.Nr?[4,this.Gc()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Gc=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return uv(e).put(new dd(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.ta(e).next((function(e){e||(t.isPrimary=!1,t.js.ea((function(){return t.Bc(!1)})))}))})).next((function(){return t.na(e)})).next((function(n){return t.isPrimary&&!n?t.sa(e).next((function(){return!1})):!!n&&t.ia(e).next((function(){return!0}))}))})).catch((function(e){if(pp(e))return hc("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return hc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.js.ea((function(){return t.Bc(e)})),t.isPrimary=e}))},t.prototype.ta=function(t){var e=this;return av(t).get(nd.key).next((function(t){return up.resolve(e.ra(t))}))},t.prototype.oa=function(t){return uv(t).delete(this.clientId)},t.prototype.ca=function(){return oc(this,void 0,void 0,(function(){var t,e,n,r,i=this;return sc(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.aa(this.$c,18e5)?[3,2]:(this.$c=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=bd(t,dd.store);return e.Ds().next((function(t){var n=i.ua(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return up.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.jc)for(e=0,n=t;e<n.length;e++)r=n[e],this.jc.removeItem(this.ha(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.Jc=function(){var t=this;this.Lc=this.js.ni("client_metadata_refresh",4e3,(function(){return t.Gc().then((function(){return t.ca()})).then((function(){return t.Jc()}))}))},t.prototype.ra=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.na=function(t){var e=this;return this.Nc?up.resolve(!0):av(t).get(nd.key).next((function(n){if(null!==n&&e.aa(n.leaseTimestampMs,5e3)&&!e.la(n.ownerId)){if(e.ra(n)&&e.networkEnabled)return!0;if(!e.ra(n)){if(!n.allowTabSynchronization)throw new Tc(Ic.FAILED_PRECONDITION,ov);return!1}}return!(!e.networkEnabled||!e.inForeground)||uv(t).Ds().next((function(t){return void 0===e.ua(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&hc("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.$=function(){return oc(this,void 0,void 0,(function(){var t=this;return sc(this,(function(e){switch(e.label){case 0:return this.Oc=!1,this._a(),this.Lc&&(this.Lc.cancel(),this.Lc=null),this.fa(),this.da(),[4,this.Uc.runTransaction("shutdown","readwrite",[nd.store,dd.store],(function(e){var n=new md(e,kp.Zi);return t.sa(n).next((function(){return t.oa(n)}))}))];case 1:return e.sent(),this.Uc.close(),this.wa(),[2]}}))}))},t.prototype.ua=function(t,e){var n=this;return t.filter((function(t){return n.aa(t.updateTimeMs,e)&&!n.la(t.clientId)}))},t.prototype.Ea=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return uv(e).Ds().next((function(e){return t.ua(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Nr",{get:function(){return this.Oc},enumerable:!1,configurable:!0}),t.prototype.Ta=function(t){return Vd.Ao(t,this.fe,this.To,this.Io)},t.prototype.ac=function(){return this.Qc},t.prototype._c=function(){return this.Kc},t.prototype.Ia=function(){return this.To},t.prototype.ma=function(){return this.Wc},t.prototype.runTransaction=function(t,e,n){var r=this;hc("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Uc.runTransaction(t,o,gd,(function(o){return i=new md(o,r.Fc?r.Fc.next():kp.Zi),"readwrite-primary"===e?r.ta(i).next((function(t){return!!t||r.na(i)})).next((function(e){if(!e)throw lc("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.js.ea((function(){return r.Bc(!1)})),new Tc(Ic.FAILED_PRECONDITION,Sp);return n(i)})).next((function(t){return r.ia(i).next((function(){return t}))})):r.Aa(i).next((function(){return n(i)}))})).then((function(t){return i.ki(),t}))},t.prototype.Aa=function(t){var e=this;return av(t).get(nd.key).next((function(t){if(null!==t&&e.aa(t.leaseTimestampMs,5e3)&&!e.la(t.ownerId)&&!e.ra(t)&&!(e.Nc||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Tc(Ic.FAILED_PRECONDITION,ov)}))},t.prototype.ia=function(t){var e=new nd(this.clientId,this.allowTabSynchronization,Date.now());return av(t).put(nd.key,e)},t.G=function(){return hp.G()},t.prototype.sa=function(t){var e=this,n=av(t);return n.get(nd.key).next((function(t){return e.ra(t)?(hc("IndexedDbPersistence","Releasing primary lease."),n.delete(nd.key)):up.resolve()}))},t.prototype.aa=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(lc("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.zc=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Mc=function(){t.js.Ws((function(){return t.inForeground="visible"===t.document.visibilityState,t.Gc()}))},this.document.addEventListener("visibilitychange",this.Mc),this.inForeground="visible"===this.document.visibilityState)},t.prototype.fa=function(){this.Mc&&(this.document.removeEventListener("visibilitychange",this.Mc),this.Mc=null)},t.prototype.Hc=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.kc=function(){e._a(),e.js.Ws((function(){return e.$()}))},this.window.addEventListener("unload",this.kc))},t.prototype.da=function(){this.kc&&(this.window.removeEventListener("unload",this.kc),this.kc=null)},t.prototype.la=function(t){var e;try{var n=null!==(null===(e=this.jc)||void 0===e?void 0:e.getItem(this.ha(t)));return hc("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return lc("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype._a=function(){if(this.jc)try{this.jc.setItem(this.ha(this.clientId),String(Date.now()))}catch(t){lc("Failed to set zombie client id.",t)}},t.prototype.wa=function(){if(this.jc)try{this.jc.removeItem(this.ha(this.clientId))}catch(t){}},t.prototype.ha=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function av(t){return bd(t,nd.store)}function uv(t){return bd(t,dd.store)}function cv(t,e){var n=t.projectId;return t.M||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var hv=function(){function t(t,e,n){this.Kc=t,this.Ra=e,this.To=n}return t.prototype.Pa=function(t,e){var n=this;return this.Ra.So(t,e).next((function(r){return n.ya(t,e,r)}))},t.prototype.ya=function(t,e,n){return this.Kc.Ar(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].ir(e,t);return t}))},t.prototype.ga=function(t,e,n){var r=af();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].ir(t,e);r=r.Ie(t,e)})),r},t.prototype.Va=function(t,e){var n=this;return this.Kc.getEntries(t,e).next((function(e){return n.pa(t,e)}))},t.prototype.pa=function(t,e){var n=this;return this.Ra.Do(t,e).next((function(r){var i=n.ga(t,e,r),o=sf();return i.forEach((function(t,e){e||(e=new Dh(t,Jc.min())),o=o.Ie(t,e)})),o}))},t.prototype.Pc=function(t,e,n){return function(t){return rh.qt(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.ba(t,e.path):ul(e)?this.va(t,e,n):this.Sa(t,e,n)},t.prototype.ba=function(t,e){return this.Pa(t,new rh(e)).next((function(t){var e=cf();return t instanceof Rh&&(e=e.Ie(t.key,t)),e}))},t.prototype.va=function(t,e,n){var r=this,i=e.collectionGroup,o=cf();return this.To.wo(t,i).next((function(s){return up.forEach(s,(function(s){var a=function(t,e){return new el(e,null,t.ne.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Sa(t,a,n).next((function(t){t.forEach((function(t,e){o=o.Ie(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Sa=function(t,e,n){var r,i,o=this;return this.Kc.Pc(t,e,n).next((function(n){return r=n,o.Ra.xo(t,e)})).next((function(e){return i=e,o.Da(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=r.get(c),l=Vl(u,h,h,o.er);r=l instanceof Rh?r.Ie(c,l):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){vl(e,n)||(r=r.remove(t))})),r}))},t.prototype.Da=function(t,e,n){for(var r=pf(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Kl&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Kc.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Rh&&(c=c.Ie(t,e))})),c}))},t}(),lv=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Ca=n,this.xa=r}return t.Na=function(e,n){for(var r=pf(),i=pf(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),fv=function(){function t(){}return t.prototype.Fa=function(t){this.Oa=t},t.prototype.Pc=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.ne.length||1===t.ne.length&&t.ne[0].field.Ot())}(e)||n.isEqual(Jc.min())?this.ka(t,e):this.Oa.Va(t,r).next((function(o){var s=i.Ma(e,o);return(il(e)||ol(e))&&i.La(e.limitType,s,r,n)?i.ka(t,e):(cc()<=he.DEBUG&&hc("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),dl(e)),i.Oa.Pc(t,e,n).next((function(t){return s.forEach((function(e){t=t.Ie(e.key,e)})),t})))}))},t.prototype.Ma=function(t,e){var n=new nf(yl(t));return e.forEach((function(e,r){r instanceof Rh&&vl(t,r)&&(n=n.add(r))})),n},t.prototype.La=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.ka=function(t,e){return cc()<=he.DEBUG&&hc("QueryEngine","Using full collection scan to execute query:",dl(e)),this.Oa.Pc(t,e,Jc.min())},t}(),pv=function(){function t(t,e,n,r){this.persistence=t,this.$a=e,this.fe=r,this.Ba=new Zl(bc),this.qa=new xp((function(t){return Fh(t)}),Uh),this.Ua=Jc.min(),this.Ra=t.Ta(n),this.Qa=t._c(),this.Qc=t.ac(),this.Ka=new hv(this.Qa,this.Ra,this.persistence.Ia()),this.Wc=t.ma(),this.$a.Fa(this.Ka)}return t.prototype.Fr=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Ur(n,e.Ba)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(t,e,n,r){return new pv(t,e,n,r)}function vv(t,e){return oc(this,void 0,void 0,(function(){var n,r,i,o;return sc(this,(function(s){switch(s.label){case 0:return n=yc(t),r=n.Ra,i=n.Ka,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Ra.vo(t).next((function(s){return o=s,r=n.persistence.Ta(e),i=new hv(n.Qa,r,n.persistence.Ia()),r.vo(t)})).next((function(e){for(var n=[],r=[],s=pf(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.Va(t,s).next((function(t){return{Wa:t,ja:n,Ga:r}}))}))}))];case 1:return o=s.sent(),[2,(n.Ra=r,n.Ka=i,n.$a.Fa(n.Ka),o)]}}))}))}function yv(t,e){var n=yc(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Qa.lc({yc:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=up.resolve();return o.forEach((function(t){s=s.next((function(){return r.Ar(e,t)})).next((function(e){var o=e,s=n.ar.get(t);vc(null!==s),(!o||o.version.u(s)<0)&&(o=i.nr(t,o,n))&&r.Er(o,n.cr)}))})),s.next((function(){return t.Ra.No(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Ra.ko(t)})).next((function(){return n.Ka.Va(t,r)}))}))}function gv(t){var e=yc(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.Qc.Wo(t)}))}function mv(t,e){var n=yc(t),r=e.oe,i=n.Ba;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Qa.lc({yc:!0});i=n.Ba;var s=[];e.rn.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.Qc.ic(t,e.dn,o).next((function(){return n.Qc.nc(t,e._n,o)})));var u=e.resumeToken;if(u.o()>0){var c=a.ae(u,r).ce(t.oo);i=i.Ie(o,c),function(t,e,n){return vc(e.resumeToken.o()>0),0===t.resumeToken.o()||e.oe.Et()-t.oe.Et()>=3e8||n._n.size+n.fn.size+n.dn.size>0}(a,c,e)&&s.push(n.Qc.Yo(t,c))}}}));var a=sf();if(e.cn.forEach((function(r,i){e.an.has(r)&&s.push(n.persistence.Io.fc(t,r))})),s.push(bv(t,o,e.cn,r,void 0).next((function(t){a=t}))),!r.isEqual(Jc.min())){var u=n.Qc.Wo(t).next((function(e){return n.Qc.Go(t,t.oo,r)}));s.push(u)}return up.hs(s).next((function(){return o.apply(t)})).next((function(){return n.Ka.pa(t,a)}))})).then((function(t){return n.Ba=i,t}))}function bv(t,e,n,r,i){var o=pf();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=sf();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof Dh&&s.version.isEqual(Jc.min())?(e.mr(n,u),o=o.Ie(n,s)):null==a||s.version.u(a.version)>0||0===s.version.u(a.version)&&a.hasPendingWrites?(e.Er(s,u),o=o.Ie(n,s)):hc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function _v(t,e){var n=yc(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Ra.po(t,e)}))}function wv(t,e){var n=yc(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.Qc.ec(t,e).next((function(i){return i?(r=i,up.resolve(r)):n.Qc.Uo(t).next((function(i){return r=new ml(e,i,0,t.oo),n.Qc.zo(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Ba.get(t.targetId);return(null===r||t.oe.u(r.oe)>0)&&(n.Ba=n.Ba.Ie(t.targetId,t),n.qa.set(e,t.targetId)),t}))}function Ev(t,e,n){return oc(this,void 0,void 0,(function(){var r,i,o,s;return sc(this,(function(a){switch(a.label){case 0:r=yc(t),i=r.Ba.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Io.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!pp(s=a.sent()))throw s;return hc("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Ba=r.Ba.remove(e),r.qa.delete(i.target),[2]}}))}))}function Iv(t,e,n){var r=yc(t),i=Jc.min(),o=pf();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=yc(t),i=r.qa.get(n);return void 0!==i?up.resolve(r.Ba.get(i)):r.Qc.ec(e,n)}(r,t,hl(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Qc.oc(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.$a.Pc(t,e,n?i:Jc.min(),n?o:pf())})).next((function(t){return{documents:t,za:o}}))}))}function Tv(t,e){var n=yc(t),r=yc(n.Qc),i=n.Ba.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Zn(t,e).next((function(t){return t?t.target:null}))}))}function Sv(t){var e=yc(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=yc(t),i=sf(),o=Id(n),s=ev(e),a=IDBKeyRange.lowerBound(o,!0);return s.Fs({index:ud.readTimeIndex,range:a},(function(t,e){var n=wd(r.fe,e);i=i.Ie(n.key,n),o=e.readTime})).next((function(){return{tr:i,readTime:Td(o)}}))}(e.Qa,t,e.Ua)})).then((function(t){var n=t.tr,r=t.readTime;return e.Ua=r,n}))}function Cv(t){return oc(this,void 0,void 0,(function(){var e;return sc(this,(function(n){return[2,(e=yc(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=ev(t),n=Jc.min();return e.Fs({index:ud.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Td(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Ua=t}))]}))}))}function Nv(t,e,n,r){return oc(this,void 0,void 0,(function(){var i,o,s,a,u,c,h,l,f,p;return sc(this,(function(d){switch(d.label){case 0:for(i=yc(t),o=pf(),s=sf(),a=lf(),u=0,c=n;u<c.length;u++)h=c[u],l=e.Ha(h.metadata.name),h.document&&(o=o.add(l)),s=s.Ie(l,e.Ja(h)),a=a.Ie(l,e.Ya(h.metadata.readTime));return f=i.Qa.lc({yc:!0}),[4,wv(i,function(t){return hl(rl(th.xt("__bundle__/docs/"+t)))}(r))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return bv(t,f,s,Jc.min(),a).next((function(e){return f.apply(t),e})).next((function(e){return i.Qc.Zo(t,p.targetId).next((function(){return i.Qc.nc(t,o,p.targetId)})).next((function(){return i.Ka.pa(t,e)}))}))}))]}}))}))}function Av(t,e,n){return void 0===n&&(n=pf()),oc(this,void 0,void 0,(function(){var r,i;return sc(this,(function(o){switch(o.label){case 0:return[4,wv(t,hl(Pd(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=yc(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=xf(e.readTime);if(r.oe.u(o)>=0)return i.Wc.lo(t,e);var s=r.ae(Ec.h,o);return i.Ba=i.Ba.Ie(s.targetId,s),i.Qc.Yo(t,s).next((function(){return i.Qc.Zo(t,r.targetId)})).next((function(){return i.Qc.nc(t,n,r.targetId)})).next((function(){return i.Wc.lo(t,e)}))}))]}}))}))
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var kv=function(){function t(t){this.fe=t,this.Xa=new Map,this.Za=new Map}return t.prototype.ao=function(t,e){return up.resolve(this.Xa.get(e))},t.prototype.uo=function(t,e){var n;return this.Xa.set(e.id,{id:(n=e).id,version:n.version,createTime:xf(n.createTime)}),up.resolve()},t.prototype.ho=function(t,e){return up.resolve(this.Za.get(e))},t.prototype.lo=function(t,e){return this.Za.set(e.name,function(t){return{name:t.name,query:Pd(t.bundledQuery),readTime:xf(t.readTime)}}(e)),up.resolve()},t}(),Pv=function(){function t(){this.tu=new nf(Ov.eu),this.nu=new nf(Ov.su)}return t.prototype.bt=function(){return this.tu.bt()},t.prototype.sc=function(t,e){var n=new Ov(t,e);this.tu=this.tu.add(n),this.nu=this.nu.add(n)},t.prototype.iu=function(t,e){var n=this;t.forEach((function(t){return n.sc(t,e)}))},t.prototype.rc=function(t,e){this.ru(new Ov(t,e))},t.prototype.ou=function(t,e){var n=this;t.forEach((function(t){return n.rc(t,e)}))},t.prototype.cu=function(t){var e=this,n=new rh(new th([])),r=new Ov(n,t),i=new Ov(n,t+1),o=[];return this.nu.Qe([r,i],(function(t){e.ru(t),o.push(t.key)})),o},t.prototype.au=function(){var t=this;this.tu.forEach((function(e){return t.ru(e)}))},t.prototype.ru=function(t){this.tu=this.tu.delete(t),this.nu=this.nu.delete(t)},t.prototype.uu=function(t){var e=new rh(new th([])),n=new Ov(e,t),r=new Ov(e,t+1),i=pf();return this.nu.Qe([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Mo=function(t){var e=new Ov(t,0),n=this.tu.We(e);return null!==n&&t.isEqual(n.key)},t}(),Ov=function(){function t(t,e){this.key=t,this.hu=e}return t.eu=function(t,e){return rh.At(t.key,e.key)||bc(t.hu,e.hu)},t.su=function(t,e){return bc(t.hu,e.hu)||rh.At(t.key,e.key)},t}(),Rv=function(){function t(t,e){this.To=t,this.Io=e,this.Ra=[],this.lu=1,this._u=new nf(Ov.eu)}return t.prototype.Ro=function(t){return up.resolve(0===this.Ra.length)},t.prototype.Po=function(t,e,n,r){var i=this.lu;this.lu++,this.Ra.length>0&&this.Ra[this.Ra.length-1];var o=new Rp(i,e,n,r);this.Ra.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this._u=this._u.add(new Ov(u.key,i)),this.To.fo(t,u.key.path.yt())}return up.resolve(o)},t.prototype.yo=function(t,e){return up.resolve(this.fu(e))},t.prototype.po=function(t,e){var n=e+1,r=this.du(n),i=r<0?0:r;return up.resolve(this.Ra.length>i?this.Ra[i]:null)},t.prototype.bo=function(){return up.resolve(0===this.Ra.length?-1:this.lu-1)},t.prototype.vo=function(t){return up.resolve(this.Ra.slice())},t.prototype.So=function(t,e){var n=this,r=new Ov(e,0),i=new Ov(e,Number.POSITIVE_INFINITY),o=[];return this._u.Qe([r,i],(function(t){var e=n.fu(t.hu);o.push(e)})),up.resolve(o)},t.prototype.Do=function(t,e){var n=this,r=new nf(bc);return e.forEach((function(t){var e=new Ov(t,0),i=new Ov(t,Number.POSITIVE_INFINITY);n._u.Qe([e,i],(function(t){r=r.add(t.hu)}))})),up.resolve(this.wu(r))},t.prototype.xo=function(t,e){var n=e.path,r=n.length+1,i=n;rh.qt(i)||(i=i.child(""));var o=new Ov(new rh(i),0),s=new nf(bc);return this._u.Ke((function(t){var e=t.key.path;return!!n.vt(e)&&(e.length===r&&(s=s.add(t.hu)),!0)}),o),up.resolve(this.wu(s))},t.prototype.wu=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.fu(t);null!==r&&n.push(r)})),n},t.prototype.No=function(t,e){var n=this;vc(0===this.Eu(e.batchId,"removed")),this.Ra.shift();var r=this._u;return up.forEach(e.mutations,(function(i){var o=new Ov(i.key,e.batchId);return r=r.delete(o),n.Io.Oo(t,i.key)})).next((function(){n._u=r}))},t.prototype.Fo=function(t){},t.prototype.Mo=function(t,e){var n=new Ov(e,0),r=this._u.We(n);return up.resolve(e.isEqual(r&&r.key))},t.prototype.ko=function(t){return this.Ra.length,up.resolve()},t.prototype.Eu=function(t,e){return this.du(t)},t.prototype.du=function(t){return 0===this.Ra.length?0:t-this.Ra[0].batchId},t.prototype.fu=function(t){var e=this.du(t);return e<0||e>=this.Ra.length?null:this.Ra[e]},t}(),Dv=function(){function t(t,e){this.To=t,this.Tu=e,this.docs=new Zl(rh.At),this.size=0}return t.prototype.Er=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Tu(e);return this.docs=this.docs.Ie(r,{Ir:e,size:s,readTime:n}),this.size+=s-o,this.To.fo(t,r.path.yt())},t.prototype.mr=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Ar=function(t,e){var n=this.docs.get(e);return up.resolve(n?n.Ir:null)},t.prototype.getEntries=function(t,e){var n=this,r=af();return e.forEach((function(t){var e=n.docs.get(t);r=r.Ie(t,e?e.Ir:null)})),up.resolve(r)},t.prototype.Pc=function(t,e,n){for(var r=cf(),i=new rh(e.path.child("")),o=this.docs.Ve(i);o.Ce();){var s=o.De(),a=s.key,u=s.value,c=u.Ir,h=u.readTime;if(!e.path.vt(a.path))break;h.u(n)<=0||c instanceof Rh&&vl(e,c)&&(r=r.Ie(c.key,c))}return up.resolve(r)},t.prototype.Iu=function(t,e){return up.forEach(this.docs,(function(t){return e(t)}))},t.prototype.lc=function(t){return new xv(this)},t.prototype.dc=function(t){return up.resolve(this.size)},t}(),xv=function(t){function e(e){var n=this;return(n=t.call(this)||this).gc=e,n}return ic(e,t),e.prototype.yr=function(t){var e=this,n=[];return this._r.forEach((function(r,i){i&&i.Ir?n.push(e.gc.Er(t,i.Ir,e.wr(r))):e.gc.mr(r)})),up.hs(n)},e.prototype.Rr=function(t,e){return this.gc.Ar(t,e)},e.prototype.Pr=function(t,e){return this.gc.getEntries(t,e)},e}(Lp),Lv=function(){function t(t){this.persistence=t,this.mu=new xp((function(t){return Fh(t)}),Uh),this.lastRemoteSnapshotVersion=Jc.min(),this.highestTargetId=0,this.Au=0,this.Ru=new Pv,this.targetCount=0,this.Pu=Kd.Bo()}return t.prototype.Un=function(t,e){return this.mu.forEach((function(t,n){return e(n)})),up.resolve()},t.prototype.Wo=function(t){return up.resolve(this.lastRemoteSnapshotVersion)},t.prototype.jo=function(t){return up.resolve(this.Au)},t.prototype.Uo=function(t){return this.highestTargetId=this.Pu.next(),up.resolve(this.highestTargetId)},t.prototype.Go=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Au&&(this.Au=e),up.resolve()},t.prototype.Ho=function(t){this.mu.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Pu=new Kd(e),this.highestTargetId=e),t.sequenceNumber>this.Au&&(this.Au=t.sequenceNumber)},t.prototype.zo=function(t,e){return this.Ho(e),this.targetCount+=1,up.resolve()},t.prototype.Yo=function(t,e){return this.Ho(e),up.resolve()},t.prototype.Xo=function(t,e){return this.mu.delete(e.target),this.Ru.cu(e.targetId),this.targetCount-=1,up.resolve()},t.prototype.Br=function(t,e,n){var r=this,i=0,o=[];return this.mu.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.mu.delete(s),o.push(r.Zo(t,a.targetId)),i++)})),up.hs(o).next((function(){return i}))},t.prototype.tc=function(t){return up.resolve(this.targetCount)},t.prototype.ec=function(t,e){var n=this.mu.get(e)||null;return up.resolve(n)},t.prototype.nc=function(t,e,n){return this.Ru.iu(e,n),up.resolve()},t.prototype.ic=function(t,e,n){this.Ru.ou(e,n);var r=this.persistence.Io,i=[];return r&&e.forEach((function(e){i.push(r.Oo(t,e))})),up.hs(i)},t.prototype.Zo=function(t,e){return this.Ru.cu(e),up.resolve()},t.prototype.oc=function(t,e){var n=this.Ru.uu(e);return up.resolve(n)},t.prototype.Mo=function(t,e){return up.resolve(this.Ru.Mo(e))},t}(),Mv=function(){function t(t,e){var n=this;this.yu={},this.Fc=new kp(0),this.Oc=!1,this.Oc=!0,this.Io=t(this),this.Qc=new Lv(this),this.To=new xd,this.Kc=function(t,e){return new Dv(t,(function(t){return n.Io.gu(t)}))}(this.To),this.fe=new _d(e),this.Wc=new kv(this.fe)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.$=function(){return this.Oc=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Nr",{get:function(){return this.Oc},enumerable:!1,configurable:!0}),t.prototype.Xc=function(){},t.prototype.Zc=function(){},t.prototype.Ia=function(){return this.To},t.prototype.Ta=function(t){var e=this.yu[t.I()];return e||(e=new Rv(this.To,this.Io),this.yu[t.I()]=e),e},t.prototype.ac=function(){return this.Qc},t.prototype._c=function(){return this.Kc},t.prototype.ma=function(){return this.Wc},t.prototype.runTransaction=function(t,e,n){var r=this;hc("MemoryPersistence","Starting transaction:",t);var i=new Fv(this.Fc.next());return this.Io.Vu(),n(i).next((function(t){return r.Io.pu(i).next((function(){return t}))})).cs().then((function(t){return i.ki(),t}))},t.prototype.bu=function(t,e){return up.ls(Object.values(this.yu).map((function(n){return function(){return n.Mo(t,e)}})))},t}(),Fv=function(t){function e(e){var n=this;return(n=t.call(this)||this).oo=e,n}return ic(e,t),e}(Cp),Uv=function(){function t(t){this.persistence=t,this.vu=new Pv,this.Su=null}return t.Du=function(e){return new t(e)},Object.defineProperty(t.prototype,"Cu",{get:function(){if(this.Su)return this.Su;throw dc()},enumerable:!1,configurable:!0}),t.prototype.sc=function(t,e,n){return this.vu.sc(n,e),this.Cu.delete(n.toString()),up.resolve()},t.prototype.rc=function(t,e,n){return this.vu.rc(n,e),this.Cu.add(n.toString()),up.resolve()},t.prototype.Oo=function(t,e){return this.Cu.add(e.toString()),up.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.vu.cu(e.targetId).forEach((function(t){return n.Cu.add(t.toString())}));var r=this.persistence.ac();return r.oc(t,e.targetId).next((function(t){t.forEach((function(t){return n.Cu.add(t.toString())}))})).next((function(){return r.Xo(t,e)}))},t.prototype.Vu=function(){this.Su=new Set},t.prototype.pu=function(t){var e=this,n=this.persistence._c().lc();return up.forEach(this.Cu,(function(r){var i=rh.Lt(r);return e.xu(t,i).next((function(t){t||n.mr(i)}))})).next((function(){return e.Su=null,n.apply(t)}))},t.prototype.fc=function(t,e){var n=this;return this.xu(t,e).next((function(t){t?n.Cu.delete(e.toString()):n.Cu.add(e.toString())}))},t.prototype.gu=function(t){return 0},t.prototype.xu=function(t,e){var n=this;return up.ls([function(){return up.resolve(n.vu.Mo(e))},function(){return n.persistence.ac().Mo(t,e)},function(){return n.persistence.bu(t,e)}])},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(t,e){return"firestore_clients_"+t+"_"+e}function Vv(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.T()&&(r+="_"+e.uid),r}function qv(t,e){return"firestore_targets_"+t+"_"+e}var Bv=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Nu=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new Tc(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(lc("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Fu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Wv=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Nu=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Tc(r.error.code,r.error.message)),i?new t(e,r.state,o):(lc("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Fu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Hv=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Nu=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=vf(),s=0;i&&s<r.activeTargetIds.length;++s)i=Bc(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(lc("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Kv=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Nu=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(lc("SharedClientState","Failed to parse online state: "+e),null)},t}(),Gv=function(){function t(){this.activeTargetIds=vf()}return t.prototype.Ou=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ku=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Fu=function(){var t={activeTargetIds:this.activeTargetIds.Dt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),zv=function(){function t(t,e,n,r,i){this.window=t,this.js=e,this.persistenceKey=n,this.Mu=r,this.Lu=null,this.$u=null,this.Hi=null,this.Bu=this.qu.bind(this),this.Uu=new Zl(bc),this.Nr=!1,this.Qu=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ku=jv(this.persistenceKey,this.Mu),this.Wu=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Uu=this.Uu.Ie(this.Mu,new Gv),this.ju=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Gu=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.zu=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Hu=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ju=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Bu)}return t.G=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return oc(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,h,l=this;return sc(this,(function(f){switch(f.label){case 0:return[4,this.Lu.Ea()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Mu&&(i=this.getItem(jv(this.persistenceKey,r)))&&(o=Hv.Nu(r,i))&&(this.Uu=this.Uu.Ie(o.clientId,o));for(this.Yu(),(s=this.storage.getItem(this.Hu))&&(a=this.Xu(s))&&this.Zu(a),u=0,c=this.Qu;u<c.length;u++)h=c[u],this.qu(h);return this.Qu=[],this.window.addEventListener("unload",(function(){return l.$()})),this.Nr=!0,[2]}}))}))},t.prototype.Xi=function(t){this.setItem(this.Wu,JSON.stringify(t))},t.prototype.th=function(){return this.eh(this.Uu)},t.prototype.nh=function(t){var e=!1;return this.Uu.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.sh=function(t){this.ih(t,"pending")},t.prototype.rh=function(t,e,n){this.ih(t,e,n),this.oh(t)},t.prototype.ah=function(t){var e="not-current";if(this.nh(t)){var n=this.storage.getItem(qv(this.persistenceKey,t));if(n){var r=Wv.Nu(t,n);r&&(e=r.state)}}return this.uh.Ou(t),this.Yu(),e},t.prototype.hh=function(t){this.uh.ku(t),this.Yu()},t.prototype.lh=function(t){return this.uh.activeTargetIds.has(t)},t.prototype._h=function(t){this.removeItem(qv(this.persistenceKey,t))},t.prototype.fh=function(t,e,n){this.dh(t,e,n)},t.prototype.wh=function(t,e,n){var r=this;e.forEach((function(t){r.oh(t)})),this.currentUser=t,n.forEach((function(t){r.sh(t)}))},t.prototype.Eh=function(t){this.Th(t)},t.prototype.Ih=function(){this.mh()},t.prototype.$=function(){this.Nr&&(this.window.removeEventListener("storage",this.Bu),this.removeItem(this.Ku),this.Nr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return hc("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){hc("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){hc("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.qu=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(hc("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ku)return void lc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.ea((function(){return oc(e,void 0,void 0,(function(){var t,e,r,i,o,s;return sc(this,(function(a){if(this.Nr){if(null!==n.key)if(this.ju.test(n.key)){if(null==n.newValue)return t=this.Ah(n.key),[2,this.Rh(t,null)];if(e=this.Ph(n.key,n.newValue))return[2,this.Rh(e.clientId,e)]}else if(this.Gu.test(n.key)){if(null!==n.newValue&&(r=this.yh(n.key,n.newValue)))return[2,this.gh(r)]}else if(this.zu.test(n.key)){if(null!==n.newValue&&(i=this.Vh(n.key,n.newValue)))return[2,this.ph(i)]}else if(n.key===this.Hu){if(null!==n.newValue&&(o=this.Xu(n.newValue)))return[2,this.Zu(o)]}else if(n.key===this.Wu)(s=function(t){var e=kp.Zi;if(null!=t)try{var n=JSON.parse(t);vc("number"==typeof n),e=n}catch(t){lc("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==kp.Zi&&this.Hi(s);else if(n.key===this.Ju)return[2,this.Lu.bh()]}else this.Qu.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"uh",{get:function(){return this.Uu.get(this.Mu)},enumerable:!1,configurable:!0}),t.prototype.Yu=function(){this.setItem(this.Ku,this.uh.Fu())},t.prototype.ih=function(t,e,n){var r=new Bv(this.currentUser,t,e,n),i=Vv(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Fu())},t.prototype.oh=function(t){var e=Vv(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Th=function(t){var e={clientId:this.Mu,onlineState:t};this.storage.setItem(this.Hu,JSON.stringify(e))},t.prototype.dh=function(t,e,n){var r=qv(this.persistenceKey,t),i=new Wv(t,e,n);this.setItem(r,i.Fu())},t.prototype.mh=function(){this.setItem(this.Ju,"value-not-used")},t.prototype.Ah=function(t){var e=this.ju.exec(t);return e?e[1]:null},t.prototype.Ph=function(t,e){var n=this.Ah(t);return Hv.Nu(n,e)},t.prototype.yh=function(t,e){var n=this.Gu.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Bv.Nu(new Pc(i),r,e)},t.prototype.Vh=function(t,e){var n=this.zu.exec(t),r=Number(n[1]);return Wv.Nu(r,e)},t.prototype.Xu=function(t){return Kv.Nu(t)},t.prototype.gh=function(t){return oc(this,void 0,void 0,(function(){return sc(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.Lu.Sh(t.batchId,t.state,t.error)]:(hc("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.ph=function(t){return this.Lu.Dh(t.targetId,t.state,t.error)},t.prototype.Rh=function(t,e){var n=this,r=e?this.Uu.Ie(t,e):this.Uu.remove(t),i=this.eh(this.Uu),o=this.eh(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.Lu.Ch(s,a).then((function(){n.Uu=r}))},t.prototype.Zu=function(t){this.Uu.get(t.clientId)&&this.$u(t.onlineState)},t.prototype.eh=function(t){var e=vf();return t.forEach((function(t,n){e=e.je(n.activeTargetIds)})),e},t}(),Qv=function(){function t(){this.xh=new Gv,this.Nh={},this.$u=null,this.Hi=null}return t.prototype.sh=function(t){},t.prototype.rh=function(t,e,n){},t.prototype.ah=function(t){return this.xh.Ou(t),this.Nh[t]||"not-current"},t.prototype.fh=function(t,e,n){this.Nh[t]=e},t.prototype.hh=function(t){this.xh.ku(t)},t.prototype.lh=function(t){return this.xh.activeTargetIds.has(t)},t.prototype._h=function(t){delete this.Nh[t]},t.prototype.th=function(){return this.xh.activeTargetIds},t.prototype.nh=function(t){return this.xh.activeTargetIds.has(t)},t.prototype.start=function(){return this.xh=new Gv,Promise.resolve()},t.prototype.wh=function(t,e,n){},t.prototype.Eh=function(t){},t.prototype.$=function(){},t.prototype.Xi=function(t){},t.prototype.Ih=function(){},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(){return"undefined"!=typeof window?window:null}function Yv(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xv=function(){function t(t,e){this.ks=t,this.$u=e,this.state="Unknown",this.Fh=0,this.Oh=null,this.kh=!0}return t.prototype.Mh=function(){var t=this;0===this.Fh&&(this.Lh("Unknown"),this.Oh=this.ks.ni("online_state_timeout",1e4,(function(){return t.Oh=null,t.$h("Backend didn't respond within 10 seconds."),t.Lh("Offline"),Promise.resolve()})))},t.prototype.Bh=function(t){"Online"===this.state?this.Lh("Unknown"):(this.Fh++,this.Fh>=1&&(this.qh(),this.$h("Connection failed 1 times. Most recent error: "+t.toString()),this.Lh("Offline")))},t.prototype.set=function(t){this.qh(),this.Fh=0,"Online"===t&&(this.kh=!1),this.Lh(t)},t.prototype.Lh=function(t){t!==this.state&&(this.state=t,this.$u(t))},t.prototype.$h=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.kh?(lc(e),this.kh=!1):hc("OnlineStateTracker",e)},t.prototype.qh=function(){null!==this.Oh&&(this.Oh.cancel(),this.Oh=null)},t}(),Jv=function(t,e,n,r,i){var o=this;this.Uh=t,this.Qh=e,this.ks=n,this.Kh={},this.Wh=[],this.jh=new Map,this.Gh=new Set,this.zh=[],this.Hh=i,this.Hh.L((function(t){n.Ws((function(){return oc(o,void 0,void 0,(function(){return sc(this,(function(t){switch(t.label){case 0:return ay(this)?(hc("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return oc(this,void 0,void 0,(function(){var e;return sc(this,(function(n){switch(n.label){case 0:return(e=yc(t)).Gh.add(4),[4,ty(e)];case 1:return n.sent(),e.Jh.set("Unknown"),e.Gh.delete(4),[4,Zv(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Jh=new Xv(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t){return oc(this,void 0,void 0,(function(){var e,n;return sc(this,(function(r){switch(r.label){case 0:if(!ay(t))return[3,4];e=0,n=t.zh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function ty(t){return oc(this,void 0,void 0,(function(){var e,n;return sc(this,(function(r){switch(r.label){case 0:e=0,n=t.zh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function ey(t,e){var n=yc(t);n.jh.has(e.targetId)||(n.jh.set(e.targetId,e),sy(n)?oy(n):Ey(n).li()&&ry(n,e))}function ny(t,e){var n=yc(t),r=Ey(n);n.jh.delete(e),r.li()&&iy(n,e),0===n.jh.size&&(r.li()?r.di():ay(n)&&n.Jh.set("Unknown"))}function ry(t,e){t.Yh.Dn(e.targetId),Ey(t).gi(e)}function iy(t,e){t.Yh.Dn(e),Ey(t).Vi(e)}function oy(t){t.Yh=new Sf({Xn:function(e){return t.Kh.Xn(e)},Zn:function(e){return t.jh.get(e)||null}}),Ey(t).start(),t.Jh.Mh()}function sy(t){return ay(t)&&!Ey(t).hi()&&t.jh.size>0}function ay(t){return 0===yc(t).Gh.size}function uy(t){t.Yh=void 0}function cy(t){return oc(this,void 0,void 0,(function(){return sc(this,(function(e){return t.jh.forEach((function(e,n){ry(t,e)})),[2]}))}))}function hy(t,e){return oc(this,void 0,void 0,(function(){return sc(this,(function(n){return uy(t),sy(t)?(t.Jh.Bh(e),oy(t)):t.Jh.set("Unknown"),[2]}))}))}function ly(t,e,n){return oc(this,void 0,void 0,(function(){var r,i,o;return sc(this,(function(s){switch(s.label){case 0:if(t.Jh.set("Online"),!(e instanceof If&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return oc(this,void 0,void 0,(function(){var n,r,i,o;return sc(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.jh.has(o)?[4,t.Kh.Xh(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.jh.delete(o),t.Yh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),hc("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,fy(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof wf?t.Yh.Ln(e):e instanceof Ef?t.Yh.jn(e):t.Yh.qn(e),n.isEqual(Jc.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,gv(t.Uh)];case 8:return i=s.sent(),n.u(i)>=0?[4,function(t,e){var n=t.Yh.Hn(e);return n.rn.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.jh.get(r);i&&t.jh.set(r,i.ae(n.resumeToken,e))}})),n.on.forEach((function(e){var n=t.jh.get(e);if(n){t.jh.set(e,n.ae(Ec.h,n.oe)),iy(t,e);var r=new ml(n.target,e,1,n.sequenceNumber);ry(t,r)}})),t.Kh.Zh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return hc("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,fy(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function fy(t,e,n){return oc(this,void 0,void 0,(function(){var r=this;return sc(this,(function(i){switch(i.label){case 0:if(!pp(e))throw e;return t.Gh.add(1),[4,ty(t)];case 1:return i.sent(),t.Jh.set("Offline"),n||(n=function(){return gv(t.Uh)}),t.ks.ea((function(){return oc(r,void 0,void 0,(function(){return sc(this,(function(e){switch(e.label){case 0:return hc("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Gh.delete(1),[4,Zv(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function py(t,e){return e().catch((function(n){return fy(t,n,e)}))}function dy(t){return oc(this,void 0,void 0,(function(){var e,n,r,i,o;return sc(this,(function(s){switch(s.label){case 0:e=yc(t),n=Iy(e),r=e.Wh.length>0?e.Wh[e.Wh.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return ay(t)&&t.Wh.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,_v(e.Uh,r)];case 3:return null===(i=s.sent())?(0===e.Wh.length&&n.di(),[3,7]):(r=i.batchId,function(t,e){t.Wh.push(e);var n=Iy(t);n.li()&&n.bi&&n.vi(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,fy(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return vy(e)&&yy(e),[2]}}))}))}function vy(t){return ay(t)&&!Iy(t).hi()&&t.Wh.length>0}function yy(t){Iy(t).start()}function gy(t){return oc(this,void 0,void 0,(function(){return sc(this,(function(e){return Iy(t).Ci(),[2]}))}))}function my(t){return oc(this,void 0,void 0,(function(){var e,n,r,i;return sc(this,(function(o){for(e=Iy(t),n=0,r=t.Wh;n<r.length;n++)i=r[n],e.vi(i.mutations);return[2]}))}))}function by(t,e,n){return oc(this,void 0,void 0,(function(){var r,i;return sc(this,(function(o){switch(o.label){case 0:return r=t.Wh.shift(),i=Dp.from(r,e,n),[4,py(t,(function(){return t.Kh.tl(i)}))];case 1:return o.sent(),[4,dy(t)];case 2:return o.sent(),[2]}}))}))}function _y(t,e){return oc(this,void 0,void 0,(function(){return sc(this,(function(n){switch(n.label){case 0:return e&&Iy(t).bi?[4,function(t,e){return oc(this,void 0,void 0,(function(){var n,r;return sc(this,(function(i){switch(i.label){case 0:return Gc(r=e.code)&&r!==Ic.ABORTED?(n=t.Wh.shift(),Iy(t).fi(),[4,py(t,(function(){return t.Kh.el(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,dy(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return vy(t)&&yy(t),[2]}}))}))}function wy(t,e){return oc(this,void 0,void 0,(function(){var n;return sc(this,(function(r){switch(r.label){case 0:return n=yc(t),e?(n.Gh.delete(2),[4,Zv(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Gh.add(2),[4,ty(n)]);case 3:r.sent(),n.Jh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Ey(t){var e=this;return t.nl||(t.nl=function(t,e,n){var r=yc(t);return r.Ni(),new Ep(e,r.ri,r.credentials,r.fe,n)}(t.Qh,t.ks,{Y:cy.bind(null,t),Z:hy.bind(null,t),yi:ly.bind(null,t)}),t.zh.push((function(n){return oc(e,void 0,void 0,(function(){return sc(this,(function(e){switch(e.label){case 0:return n?(t.nl.fi(),sy(t)?oy(t):t.Jh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.nl.stop()];case 2:e.sent(),uy(t),e.label=3;case 3:return[2]}}))}))}))),t.nl}function Iy(t){var e=this;return t.sl||(t.sl=function(t,e,n){var r=yc(t);return r.Ni(),new Ip(e,r.ri,r.credentials,r.fe,n)}(t.Qh,t.ks,{Y:gy.bind(null,t),Z:_y.bind(null,t),Di:my.bind(null,t),Si:by.bind(null,t)}),t.zh.push((function(n){return oc(e,void 0,void 0,(function(){return sc(this,(function(e){switch(e.label){case 0:return n?(t.sl.fi(),[4,dy(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.sl.stop()];case 3:e.sent(),t.Wh.length>0&&(hc("RemoteStore","Stopping write stream with "+t.Wh.length+" pending writes"),t.Wh=[]),e.label=4;case 4:return[2]}}))}))}))),t.sl
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Ty=function(){this.il=void 0,this.listeners=[]},Sy=function(){this.queries=new xp((function(t){return pl(t)}),fl),this.onlineState="Unknown",this.rl=new Set};function Cy(t,e){return oc(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return sc(this,(function(c){switch(c.label){case 0:if(n=yc(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Ty),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.ol(r)];case 2:return s.il=c.sent(),[3,4];case 3:return a=c.sent(),u=bp(a,"Initialization of query '"+dl(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.cl(n.onlineState),o.il&&e.al(o.il)&&Py(n),[2]}}))}))}function Ny(t,e){return oc(this,void 0,void 0,(function(){var n,r,i,o,s;return sc(this,(function(a){return n=yc(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.ul(r))]:[2]}))}))}function Ay(t,e){for(var n=yc(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].al(s)&&(r=!0);u.il=s}}r&&Py(n)}function ky(t,e,n){var r=yc(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Py(t){t.rl.forEach((function(t){t.next()}))}var Oy=function(){function t(t,e,n){this.query=t,this.hl=e,this.ll=!1,this._l=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.al=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new mf(t.query,t.docs,t.Ze,e,t.tn,t.fromCache,t.en,!0)}var o=!1;return this.ll?this.fl(t)&&(this.hl.next(t),o=!0):this.dl(t,this.onlineState)&&(this.wl(t),o=!0),this._l=t,o},t.prototype.onError=function(t){this.hl.error(t)},t.prototype.cl=function(t){this.onlineState=t;var e=!1;return this._l&&!this.ll&&this.dl(this._l,t)&&(this.wl(this._l),e=!0),e},t.prototype.dl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.El&&n||t.docs.bt()&&"Offline"!==e)},t.prototype.fl=function(t){if(t.docChanges.length>0)return!0;var e=this._l&&this._l.hasPendingWrites!==t.hasPendingWrites;return!(!t.en&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.wl=function(t){t=mf.sn(t.query,t.docs,t.tn,t.fromCache),this.ll=!0,this.hl.next(t)},t}(),Ry=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.Tl=function(){return"metadata"in this.payload},t}(),Dy=function(){function t(t){this.fe=t}return t.prototype.Ha=function(t){return Uf(this.fe,t)},t.prototype.Ja=function(t){return t.metadata.exists?Hf(this.fe,t.document,!1):new Dh(this.Ha(t.metadata.name),this.Ya(t.metadata.readTime))},t.prototype.Ya=function(t){return xf(t)},t}(),xy=function(){function t(t,e,n){this.Il=t,this.Uh=e,this.fe=n,this.queries=[],this.documents=[],this.progress=Ly(t)}return t.prototype.ml=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.Al=function(t){for(var e=new Map,n=new Dy(this.fe),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Ha(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],h=(e.get(c)||pf()).add(s);e.set(c,h)}}return e},t.prototype.complete=function(){return oc(this,void 0,void 0,(function(){var t,e,n,r,i;return sc(this,(function(o){switch(o.label){case 0:return[4,Nv(this.Uh,new Dy(this.fe),this.documents,this.Il.id)];case 1:t=o.sent(),e=this.Al(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,Av(this.Uh,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Op(Object.assign({},this.progress),t))]}}))}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var My=function(t){this.key=t},Fy=function(t){this.key=t},Uy=function(){function t(t,e){this.query=t,this.Rl=e,this.Pl=null,this.ln=!1,this.yl=pf(),this.tn=pf(),this.gl=yl(t),this.Vl=new yf(this.gl)}return Object.defineProperty(t.prototype,"pl",{get:function(){return this.Rl},enumerable:!1,configurable:!0}),t.prototype.bl=function(t,e){var n=this,r=e?e.vl:new gf,i=e?e.Vl:this.Vl,o=e?e.tn:this.tn,s=i,a=!1,u=il(this.query)&&i.size===this.query.limit?i.last():null,c=ol(this.query)&&i.size===this.query.limit?i.first():null;if(t.Pe((function(t,e){var h=i.get(t),l=e instanceof Rh?e:null;l&&(l=vl(n.query,l)?l:null);var f=!!h&&n.tn.has(h.key),p=!!l&&(l.Jt||n.tn.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data().isEqual(l.data())?f!==p&&(r.track({type:3,doc:l}),d=!0):n.Sl(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.gl(l,u)>0||c&&n.gl(l,c)<0)&&(a=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(l?(s=s.add(l),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),il(this.query)||ol(this.query))for(;s.size>this.query.limit;){var h=il(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Vl:s,vl:r,La:a,tn:o}},t.prototype.Sl=function(t,e){return t.Jt&&e.hasCommittedMutations&&!e.Jt},t.prototype.yr=function(t,e,n){var r=this,i=this.Vl;this.Vl=t.Vl,this.tn=t.tn;var o=t.vl.Xe();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dc()}};return n(t)-n(e)}(t.type,e.type)||r.gl(t.doc,e.doc)})),this.Dl(n);var s=e?this.Cl():[],a=0===this.yl.size&&this.ln?1:0,u=a!==this.Pl;return this.Pl=a,0!==o.length||u?{snapshot:new mf(this.query,t.Vl,i,o,t.tn,0===a,u,!1),xl:s}:{xl:s}},t.prototype.cl=function(t){return this.ln&&"Offline"===t?(this.ln=!1,this.yr({Vl:this.Vl,vl:new gf,tn:this.tn,La:!1},!1)):{xl:[]}},t.prototype.Nl=function(t){return!this.Rl.has(t)&&!!this.Vl.has(t)&&!this.Vl.get(t).Jt},t.prototype.Dl=function(t){var e=this;t&&(t._n.forEach((function(t){return e.Rl=e.Rl.add(t)})),t.fn.forEach((function(t){})),t.dn.forEach((function(t){return e.Rl=e.Rl.delete(t)})),this.ln=t.ln)},t.prototype.Cl=function(){var t=this;if(!this.ln)return[];var e=this.yl;this.yl=pf(),this.Vl.forEach((function(e){t.Nl(e.key)&&(t.yl=t.yl.add(e.key))}));var n=[];return e.forEach((function(e){t.yl.has(e)||n.push(new Fy(e))})),this.yl.forEach((function(t){e.has(t)||n.push(new My(t))})),n},t.prototype.Fl=function(t){this.Rl=t.za,this.yl=pf();var e=this.bl(t.documents);return this.yr(e,!0)},t.prototype.Ol=function(){return mf.sn(this.query,this.Vl,this.tn,0===this.Pl)},t}(),jy=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Vy=function(t){this.key=t,this.kl=!1},qy=function(){function t(t,e,n,r,i,o){this.Uh=t,this.Ml=e,this.Ll=n,this.$l=r,this.currentUser=i,this.Bl=o,this.ql={},this.Ul=new xp((function(t){return pl(t)}),fl),this.Ql=new Map,this.Kl=[],this.Wl=new Zl(rh.At),this.jl=new Map,this.Gl=new Pv,this.zl={},this.Hl=new Map,this.Jl=Kd.qo(),this.onlineState="Unknown",this.Yl=void 0}return Object.defineProperty(t.prototype,"Xl",{get:function(){return!0===this.Yl},enumerable:!1,configurable:!0}),t}();function By(t,e){return oc(this,void 0,void 0,(function(){var n,r,i,o,s,a;return sc(this,(function(u){switch(u.label){case 0:return n=gg(t),(o=n.Ul.get(e))?(r=o.targetId,n.$l.ah(r),i=o.view.Ol(),[3,4]):[3,1];case 1:return[4,wv(n.Uh,hl(e))];case 2:return s=u.sent(),a=n.$l.ah(s.targetId),r=s.targetId,[4,Wy(n,e,r,"current"===a)];case 3:i=u.sent(),n.Xl&&ey(n.Ml,s),u.label=4;case 4:return[2,i]}}))}))}function Wy(t,e,n,r){return oc(this,void 0,void 0,(function(){var i,o,s,a,u,c;return sc(this,(function(h){switch(h.label){case 0:return t.Zl=function(e,n,r){return function(t,e,n,r){return oc(this,void 0,void 0,(function(){var i,o,s;return sc(this,(function(a){switch(a.label){case 0:return(i=e.view.bl(n)).La?[4,Iv(t.Uh,e.query,!1).then((function(t){var n=t.documents;return e.view.bl(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.rn.get(e.targetId),s=e.view.yr(i,t.Xl,o),[2,(ng(t,e.targetId,s.xl),s.snapshot)]}}))}))}(t,e,n,r)},[4,Iv(t.Uh,e,!0)];case 1:return i=h.sent(),o=new Uy(e,i.za),s=o.bl(i.documents),a=_f.hn(n,r&&"Offline"!==t.onlineState),u=o.yr(s,t.Xl,a),ng(t,n,u.xl),c=new jy(e,n,o),[2,(t.Ul.set(e,c),t.Ql.has(n)?t.Ql.get(n).push(e):t.Ql.set(n,[e]),u.snapshot)]}}))}))}function Hy(t,e){return oc(this,void 0,void 0,(function(){var n,r,i;return sc(this,(function(o){switch(o.label){case 0:return n=yc(t),r=n.Ul.get(e),(i=n.Ql.get(r.targetId)).length>1?[2,(n.Ql.set(r.targetId,i.filter((function(t){return!fl(t,e)}))),void n.Ul.delete(e))]:n.Xl?(n.$l.hh(r.targetId),n.$l.nh(r.targetId)?[3,2]:[4,Ev(n.Uh,r.targetId,!1).then((function(){n.$l._h(r.targetId),ny(n.Ml,r.targetId),tg(n,r.targetId)})).catch(Pp)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return tg(n,r.targetId),[4,Ev(n.Uh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Ky(t,e,n){return oc(this,void 0,void 0,(function(){var r,i,o,s;return sc(this,(function(a){switch(a.label){case 0:r=mg(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=yc(t),i=Xc.now(),o=e.reduce((function(t,e){return t.add(e.key)}),pf());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ka.Va(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=ql(c,n.get(c.key));null!=h&&s.push(new Kl(c.key,h,Ph(h.proto.mapValue),Ml.exists(!0)))}return r.Ra.Po(t,i,s,e)}))})).then((function(t){var e=t.rr(n);return{batchId:t.batchId,_r:e}}))}(r.Uh,e)];case 2:return i=a.sent(),r.$l.sh(i.batchId),function(t,e,n){var r=t.zl[t.currentUser.I()];r||(r=new Zl(bc)),r=r.Ie(e,n),t.zl[t.currentUser.I()]=r}(r,i.batchId,n),[4,og(r,i._r)];case 3:return a.sent(),[4,dy(r.Ml)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=bp(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Gy(t,e){return oc(this,void 0,void 0,(function(){var n,r;return sc(this,(function(i){switch(i.label){case 0:n=yc(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,mv(n.Uh,e)];case 2:return r=i.sent(),e.rn.forEach((function(t,e){var r=n.jl.get(e);r&&(vc(t._n.size+t.fn.size+t.dn.size<=1),t._n.size>0?r.kl=!0:t.fn.size>0?vc(r.kl):t.dn.size>0&&(vc(r.kl),r.kl=!1))})),[4,og(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Pp(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function zy(t,e,n){var r=yc(t);if(r.Xl&&0===n||!r.Xl&&1===n){var i=[];r.Ul.forEach((function(t,n){var r=n.view.cl(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=yc(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].cl(e)&&(r=!0)})),r&&Py(n)}(r.Ll,e),i.length&&r.ql.yi(i),r.onlineState=e,r.Xl&&r.$l.Eh(e)}}function Qy(t,e,n){return oc(this,void 0,void 0,(function(){var r,i,o,s,a,u;return sc(this,(function(c){switch(c.label){case 0:return(r=yc(t)).$l.fh(e,"rejected",n),i=r.jl.get(e),(o=i&&i.key)?(s=(s=new Zl(rh.At)).Ie(o,new Dh(o,Jc.min())),a=pf().add(o),u=new bf(Jc.min(),new Map,new nf(bc),s,a),[4,Gy(r,u)]):[3,2];case 1:return c.sent(),r.Wl=r.Wl.remove(o),r.jl.delete(e),ig(r),[3,4];case 2:return[4,Ev(r.Uh,e,!1).then((function(){return tg(r,e,n)})).catch(Pp)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function $y(t,e){return oc(this,void 0,void 0,(function(){var n,r,i;return sc(this,(function(o){switch(o.label){case 0:n=yc(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,yv(n.Uh,e)];case 2:return i=o.sent(),Zy(n,r,null),Jy(n,r),n.$l.rh(r,"acknowledged"),[4,og(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Pp(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Yy(t,e,n){return oc(this,void 0,void 0,(function(){var r,i;return sc(this,(function(o){switch(o.label){case 0:r=yc(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=yc(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Ra.yo(t,e).next((function(e){return vc(null!==e),r=e.keys(),n.Ra.No(t,e)})).next((function(){return n.Ra.ko(t)})).next((function(){return n.Ka.Va(t,r)}))}))}(r.Uh,e)];case 2:return i=o.sent(),Zy(r,e,n),Jy(r,e),r.$l.rh(e,"rejected",n),[4,og(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Pp(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Xy(t,e){return oc(this,void 0,void 0,(function(){var n,r,i,o,s;return sc(this,(function(a){switch(a.label){case 0:ay((n=yc(t)).Ml)||hc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=yc(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Ra.bo(t)}))}(n.Uh)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Hl.get(r)||[]).push(e),n.Hl.set(r,i),[3,4]);case 3:return o=a.sent(),s=bp(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function Jy(t,e){(t.Hl.get(e)||[]).forEach((function(t){t.resolve()})),t.Hl.delete(e)}function Zy(t,e,n){var r=yc(t),i=r.zl[r.currentUser.I()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.zl[r.currentUser.I()]=i}}function tg(t,e,n){void 0===n&&(n=null),t.$l.hh(e);for(var r=0,i=t.Ql.get(e);r<i.length;r++){var o=i[r];t.Ul.delete(o),n&&t.ql.t_(o,n)}t.Ql.delete(e),t.Xl&&t.Gl.cu(e).forEach((function(e){t.Gl.Mo(e)||eg(t,e)}))}function eg(t,e){var n=t.Wl.get(e);null!==n&&(ny(t.Ml,n),t.Wl=t.Wl.remove(e),t.jl.delete(n),ig(t))}function ng(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof My?(t.Gl.sc(o.key,e),rg(t,o)):o instanceof Fy?(hc("SyncEngine","Document no longer in limbo: "+o.key),t.Gl.rc(o.key,e),t.Gl.Mo(o.key)||eg(t,o.key)):dc()}}function rg(t,e){var n=e.key;t.Wl.get(n)||(hc("SyncEngine","New document in limbo: "+n),t.Kl.push(n),ig(t))}function ig(t){for(;t.Kl.length>0&&t.Wl.size<t.Bl;){var e=t.Kl.shift(),n=t.Jl.next();t.jl.set(n,new Vy(e)),t.Wl=t.Wl.Ie(e,n),ey(t.Ml,new ml(hl(rl(e.path)),n,2,kp.Zi))}}function og(t,e,n){return oc(this,void 0,void 0,(function(){var r,i,o,s;return sc(this,(function(a){switch(a.label){case 0:return r=yc(t),i=[],o=[],s=[],r.Ul.bt()?[3,3]:(r.Ul.forEach((function(t,a){s.push(r.Zl(a,e,n).then((function(t){if(t){r.Xl&&r.$l.fh(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=lv.Na(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.ql.yi(i),[4,function(t,e){return oc(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h;return sc(this,(function(l){switch(l.label){case 0:n=yc(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return up.forEach(e,(function(e){return up.forEach(e.Ca,(function(r){return n.persistence.Io.sc(t,e.targetId,r)})).next((function(){return up.forEach(e.xa,(function(r){return n.persistence.Io.rc(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!pp(r=l.sent()))throw r;return hc("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.Ba.get(a),c=u.oe,h=u.ue(c),n.Ba=n.Ba.Ie(a,h));return[2]}}))}))}(r.Uh,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function sg(t,e){return oc(this,void 0,void 0,(function(){var n,r;return sc(this,(function(i){switch(i.label){case 0:return(n=yc(t)).currentUser.isEqual(e)?[3,3]:(hc("SyncEngine","User change. New user:",e.I()),[4,vv(n.Uh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Hl.forEach((function(t){t.forEach((function(t){t.reject(new Tc(Ic.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Hl.clear()}(n),n.$l.wh(e,r.ja,r.Ga),[4,og(n,r.Wa)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function ag(t,e){var n=yc(t),r=n.jl.get(e);if(r&&r.kl)return pf().add(r.key);var i=pf(),o=n.Ql.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Ul.get(u);i=i.je(c.view.pl)}return i}function ug(t,e){return oc(this,void 0,void 0,(function(){var n,r,i;return sc(this,(function(o){switch(o.label){case 0:return[4,Iv((n=yc(t)).Uh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Fl(r),[2,(n.Xl&&ng(n,e.targetId,i.xl),i)]}}))}))}function cg(t){return oc(this,void 0,void 0,(function(){var e;return sc(this,(function(n){return[2,Sv((e=yc(t)).Uh).then((function(t){return og(e,t)}))]}))}))}function hg(t,e,n,r){return oc(this,void 0,void 0,(function(){var i,o;return sc(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=yc(t),r=yc(n.Ra);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Vo(t,e).next((function(e){return e?n.Ka.Va(t,e):up.resolve(null)}))}))}((i=yc(t)).Uh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,dy(i.Ml)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Zy(i,e,r||null),Jy(i,e),function(t,e){yc(yc(t).Ra).Fo(e)}(i.Uh,e)):dc(),s.label=4;case 4:return[4,og(i,o)];case 5:return s.sent(),[3,7];case 6:hc("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function lg(t,e){return oc(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return sc(this,(function(h){switch(h.label){case 0:return gg(n=yc(t)),mg(n),!0!==e||!0===n.Yl?[3,3]:(r=n.$l.th(),[4,fg(n,r.Dt())]);case 1:return i=h.sent(),n.Yl=!0,[4,wy(n.Ml,!0)];case 2:for(h.sent(),o=0,s=i;o<s.length;o++)a=s[o],ey(n.Ml,a);return[3,7];case 3:return!1!==e||!1===n.Yl?[3,7]:(u=[],c=Promise.resolve(),n.Ql.forEach((function(t,e){n.$l.lh(e)?u.push(e):c=c.then((function(){return tg(n,e),Ev(n.Uh,e,!0)})),ny(n.Ml,e)})),[4,c]);case 4:return h.sent(),[4,fg(n,u)];case 5:return h.sent(),function(t){var e=yc(t);e.jl.forEach((function(t,n){ny(e.Ml,n)})),e.Gl.au(),e.jl=new Map,e.Wl=new Zl(rh.At)}(n),n.Yl=!1,[4,wy(n.Ml,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function fg(t,e,n){return oc(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h,l,f,p,d,v;return sc(this,(function(y){switch(y.label){case 0:n=yc(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Ql.get(a))&&0!==c.length?[4,wv(n.Uh,hl(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),h=0,l=c,y.label=3;case 3:return h<l.length?(f=l[h],p=n.Ul.get(f),[4,ug(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Tv(n.Uh,a)];case 8:return v=y.sent(),[4,wv(n.Uh,v)];case 9:return u=y.sent(),[4,Wy(n,pg(v),a,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.ql.yi(i),r)]}}))}))}function pg(t){return nl(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function dg(t){var e=yc(t);return yc(yc(e.Uh).persistence).Ea()}function vg(t,e,n,r){return oc(this,void 0,void 0,(function(){var i,o,s;return sc(this,(function(a){switch(a.label){case 0:return(i=yc(t)).Yl?(hc("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Ql.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Sv(i.Uh)];case 3:return o=a.sent(),s=bf.un(e,"current"===n),[4,og(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Ev(i.Uh,e,!0)];case 6:return a.sent(),tg(i,e,r),[3,8];case 7:dc(),a.label=8;case 8:return[2]}}))}))}function yg(t,e,n){return oc(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h,l,f;return sc(this,(function(p){switch(p.label){case 0:if(!(r=gg(t)).Yl)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Ql.has(s)?(hc("SyncEngine","Adding an already active target "+s),[3,5]):[4,Tv(r.Uh,s)]):[3,6];case 2:return a=p.sent(),[4,wv(r.Uh,a)];case 3:return u=p.sent(),[4,Wy(r,pg(a),u.targetId,!1)];case 4:p.sent(),ey(r.Ml,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return sc(this,(function(e){switch(e.label){case 0:return r.Ql.has(t)?[4,Ev(r.Uh,t,!1).then((function(){ny(r.Ml,t),tg(r,t)})).catch(Pp)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,l=n,p.label=7;case 7:return h<l.length?(f=l[h],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function gg(t){var e=yc(t);return e.Ml.Kh.Zh=Gy.bind(null,e),e.Ml.Kh.Xn=ag.bind(null,e),e.Ml.Kh.Xh=Qy.bind(null,e),e.ql.yi=Ay.bind(null,e.Ll),e.ql.t_=ky.bind(null,e.Ll),e}function mg(t){var e=yc(t);return e.Ml.Kh.tl=$y.bind(null,e),e.Ml.Kh.el=Yy.bind(null,e),e}function bg(t,e,n){var r=yc(t);(function(t,e,n){return oc(this,void 0,void 0,(function(){var r,i,o,s,a,u;return sc(this,(function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,function(t,e){var n=yc(t),r=xf(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return n.Wc.ao(t,e.id)})).then((function(t){return!!t&&t.createTime.u(r)>=0}))}(t.Uh,r)];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n.e_(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n.n_(Ly(r)),i=new xy(r,t.Uh,e.fe),[4,e.s_()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.ml(o)]:[3,10];case 7:return(s=c.sent())&&n.n_(s),[4,e.s_()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return a=c.sent(),[4,og(t,a.tr,void 0)];case 12:return c.sent(),[4,function(t,e){var n=yc(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.Wc.uo(t,e)}))}(t.Uh,r)];case 13:return c.sent(),n.e_(a.progress),[3,15];case 14:return fc("SyncEngine","Loading bundle failed with "+(u=c.sent())),n.i_(u),[3,15];case 15:return[2]}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(r,e,n).then((function(){r.$l.Ih()}))}var _g=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return oc(this,void 0,void 0,(function(){return sc(this,(function(e){switch(e.label){case 0:return this.fe=ap(t.rt.O),this.$l=this.r_(t),this.persistence=this.o_(t),[4,this.persistence.start()];case 1:return e.sent(),this.c_=this.a_(t),this.Uh=this.u_(t),[2]}}))}))},t.prototype.a_=function(t){return null},t.prototype.u_=function(t){return dv(this.persistence,new fv,t.h_,this.fe)},t.prototype.o_=function(t){return new Mv(Uv.Du,this.fe)},t.prototype.r_=function(t){return new Qv},t.prototype.terminate=function(){return oc(this,void 0,void 0,(function(){return sc(this,(function(t){switch(t.label){case 0:return this.c_&&this.c_.stop(),[4,this.$l.$()];case 1:return t.sent(),[4,this.persistence.$()];case 2:return t.sent(),[2]}}))}))},t}(),wg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).l_=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return ic(e,t),e.prototype.initialize=function(e){return oc(this,void 0,void 0,(function(){return sc(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Cv(this.Uh)];case 2:return n.sent(),[4,this.l_.initialize(this,e)];case 3:return n.sent(),[4,mg(this.l_.Lu)];case 4:return n.sent(),[4,dy(this.l_.Ml)];case 5:return n.sent(),[2]}}))}))},e.prototype.u_=function(t){return dv(this.persistence,new fv,t.h_,this.fe)},e.prototype.a_=function(t){var e=this.persistence.Io.vr;return new Up(e,t.ks)},e.prototype.o_=function(t){var e=cv(t.rt.O,t.rt.persistenceKey),n=void 0!==this.cacheSizeBytes?Ap.Ki(this.cacheSizeBytes):Ap.Gi;return new sv(this.synchronizeTabs,e,t.clientId,n,t.ks,$v(),Yv(),this.fe,this.$l,!!this.forceOwnership)},e.prototype.r_=function(t){return new Qv},e}(_g),Eg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).l_=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return ic(e,t),e.prototype.initialize=function(e){return oc(this,void 0,void 0,(function(){var n,r=this;return sc(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.l_.Lu,this.$l instanceof zv?(this.$l.Lu={Sh:hg.bind(null,n),Dh:vg.bind(null,n),Ch:yg.bind(null,n),Ea:dg.bind(null,n),bh:cg.bind(null,n)},[4,this.$l.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Yc((function(t){return oc(r,void 0,void 0,(function(){return sc(this,(function(e){switch(e.label){case 0:return[4,lg(this.l_.Lu,t)];case 1:return e.sent(),this.c_&&(t&&!this.c_.Nr?this.c_.start(this.Uh):t||this.c_.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.r_=function(t){var e=$v();if(!zv.G(e))throw new Tc(Ic.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=cv(t.rt.O,t.rt.persistenceKey);return new zv(e,t.ks,n,t.clientId,t.h_)},e}(wg),Ig=function(){function t(){}return t.prototype.initialize=function(t,e){return oc(this,void 0,void 0,(function(){var n=this;return sc(this,(function(r){switch(r.label){case 0:return this.Uh?[3,2]:(this.Uh=t.Uh,this.$l=t.$l,this.Qh=this.__(e),this.Ml=this.f_(e),this.Ll=this.d_(e),this.Lu=this.w_(e,!t.synchronizeTabs),this.$l.$u=function(t){return zy(n.Lu,t,1)},this.Ml.Kh.E_=sg.bind(null,this.Lu),[4,wy(this.Ml,this.Lu.Xl)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.d_=function(t){return new Sy},t.prototype.__=function(t){var e,n=ap(t.rt.O),r=(e=t.rt,new Yc(e));return function(t,e,n){return new Tp(t,e,n)}(t.credentials,r,n)},t.prototype.f_=function(t){var e,n,r,i,o,s=this;return e=this.Uh,n=this.Qh,r=t.ks,i=function(t){return zy(s.Lu,t,0)},o=jc.G()?new jc:new Uc,new Jv(e,n,r,i,o)},t.prototype.w_=function(t,e){return function(t,e,n,r,i,o,s){var a=new qy(t,e,n,r,i,o);return s&&(a.Yl=!0),a}(this.Uh,this.Ml,this.Ll,this.$l,t.h_,t.Bl,e)},t.prototype.terminate=function(){return function(t){return oc(this,void 0,void 0,(function(){var e;return sc(this,(function(n){switch(n.label){case 0:return e=yc(t),hc("RemoteStore","RemoteStore shutting down."),e.Gh.add(5),[4,ty(e)];case 1:return n.sent(),e.Hh.$(),e.Jh.set("Unknown"),[2]}}))}))}(this.Ml)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return oc(this,void 0,void 0,(function(){var r;return sc(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return oc(this,void 0,void 0,(function(){return sc(this,(function(t){return[2]}))}))},releaseLock:function(){}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sg=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.T_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.T_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.I_=function(){this.muted=!0},t.prototype.T_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Cg=function(){function t(t,e){var n=this;this.m_=t,this.fe=e,this.metadata=new $c,this.buffer=new Uint8Array,this.A_=new TextDecoder("utf-8"),this.R_().then((function(t){t&&t.Tl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.m_.cancel()},t.prototype.getMetadata=function(){return oc(this,void 0,void 0,(function(){return sc(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.s_=function(){return oc(this,void 0,void 0,(function(){return sc(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.R_())]}}))}))},t.prototype.R_=function(){return oc(this,void 0,void 0,(function(){var t,e,n,r;return sc(this,(function(i){switch(i.label){case 0:return[4,this.P_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.A_.decode(t),n=Number(e),isNaN(n)&&this.y_("length string ("+e+") is not valid number"),[4,this.g_(n)]);case 2:return r=i.sent(),[2,new Ry(JSON.parse(r),t.length+n)]}}))}))},t.prototype.V_=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.P_=function(){return oc(this,void 0,void 0,(function(){var t,e;return sc(this,(function(n){switch(n.label){case 0:return this.V_()<0?[4,this.p_()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.V_())<0&&this.y_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.g_=function(t){return oc(this,void 0,void 0,(function(){var e;return sc(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.p_()]:[3,3];case 1:n.sent()&&this.y_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.A_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.y_=function(t){throw this.m_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.p_=function(){return oc(this,void 0,void 0,(function(){var t,e;return sc(this,(function(n){switch(n.label){case 0:return[4,this.m_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),Ng=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Tc(Ic.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.b_=new nh(t)}return t.prototype.isEqual=function(t){return this.b_.isEqual(t.b_)},t}(),Ag=function(t){this._methodName=t},kg=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.Vt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.Ct()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Og(this.firestore,this.v_,this.S_.path.yt())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),Pg=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),Og=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,rl(r))||this).firestore=e,i.D_=r,i.type="collection",i}return ic(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.Vt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.Ct()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.yt();return t.bt()?null:new kg(this.firestore,null,new rh(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(Pg);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Cc&&(t=t._),Vp("collection","path",e),t instanceof Yp)return Hp(n=th.xt.apply(th,ac([e],r))),new Og(t,null,n);if(!(t instanceof kg||t instanceof Og))throw new Tc(Ic.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Hp(n=th.xt.apply(th,ac([t.path],r)).child(th.xt(e))),new Og(t.firestore,null,n)}function Dg(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Cc&&(t=t._),1===arguments.length&&(e=mc.t()),Vp("doc","path",e),t instanceof Yp)return Wp(n=th.xt.apply(th,ac([e],r))),new kg(t,null,new rh(n));if(!(t instanceof kg||t instanceof Og))throw new Tc(Ic.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Wp(n=t.D_.child(th.xt.apply(th,ac([e],r)))),new kg(t.firestore,t instanceof Og?t.v_:null,new rh(n))}function xg(t,e){return t instanceof Cc&&(t=t._),e instanceof Cc&&(e=e._),(t instanceof kg||t instanceof Og)&&(e instanceof kg||e instanceof Og)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function Lg(t,e){return t instanceof Cc&&(t=t._),e instanceof Cc&&(e=e._),t instanceof Pg&&e instanceof Pg&&t.firestore===e.firestore&&fl(t.C_,e.C_)&&t.v_===e.v_
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Mg=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Tc(Ic.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Tc(Ic.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.dt=function(t){return bc(this.x_,t.x_)||bc(this.N_,t.N_)},t}(),Fg=/^__.*__$/,Ug=function(){function t(t,e,n){this.data=t,this.Te=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Te?new Kl(t,this.data,this.Te,e,this.fieldTransforms):new Hl(t,this.data,e,this.fieldTransforms)},t}(),jg=function(){function t(t,e,n){this.data=t,this.Te=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new Kl(t,this.data,this.Te,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dc()}}var qg=function(){function t(t,e,n,r,i,o){this.settings=t,this.O=e,this.fe=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Te=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.O,this.fe,this.ignoreUndefinedProperties,this.fieldTransforms,this.Te)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return am(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Te.find((function(e){return t.vt(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.vt(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(Vg(this.k_)&&Fg.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Bg=function(){function t(t,e,n){this.O=t,this.ignoreUndefinedProperties=e,this.fe=n||ap(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new qg({k_:t,methodName:e,j_:n,path:nh.Nt(),B_:!1,W_:r},this.O,this.fe,this.ignoreUndefinedProperties)},t}();function Wg(t){var e=t.so(),n=ap(t.zr);return new Bg(t.zr,!!e.ignoreUndefinedProperties,n)}function Hg(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);rm("Data must be an object, but it was:",s,r);var a,u,c=em(r,s);if(o.merge)a=new ah(s.Te),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=im(e,f[l],n);if(!s.contains(p))throw new Tc(Ic.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");um(h,p)||h.push(p)}a=new ah(h),u=s.fieldTransforms.filter((function(t){return a.Qt(t.field)}))}else a=null,u=s.fieldTransforms;return new Ug(new Ah(c),a,u)}var Kg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ic(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Te.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Ag);function Gg(t,e,n){return new qg({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.O,e.fe,e.ignoreUndefinedProperties)}var zg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ic(e,t),e.prototype.z_=function(t){return new xl(t.path,new Cl)},e.prototype.isEqual=function(t){return t instanceof e},e}(Ag),Qg=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return ic(e,t),e.prototype.z_=function(t){var e=Gg(this,t,!0),n=this.H_.map((function(t){return tm(t,e)})),r=new Nl(n);return new xl(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ag),$g=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return ic(e,t),e.prototype.z_=function(t){var e=Gg(this,t,!0),n=this.H_.map((function(t){return tm(t,e)})),r=new kl(n);return new xl(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ag),Yg=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return ic(e,t),e.prototype.z_=function(t){var e=new Ol(t.fe,wl(t.fe,this.J_));return new xl(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Ag);function Xg(t,e,n,r){var i=t.G_(1,e,n);rm("Data must be an object, but it was:",i,r);var o=[],s=new kh;oh(r,(function(t,r){var a=sm(e,t,n);r instanceof Cc&&(r=r._);var u=i.U_(a);if(r instanceof Kg)o.push(a);else{var c=tm(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new ah(o);return new jg(s.Gt(),a,i.fieldTransforms)}function Jg(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[im(e,r,n)],u=[i];if(o.length%2!=0)throw new Tc(Ic.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(im(e,o[c])),u.push(o[c+1]);for(var h=[],l=new kh,f=a.length-1;f>=0;--f)if(!um(h,a[f])){var p=a[f],d=u[f];d instanceof Cc&&(d=d._);var v=s.U_(p);if(d instanceof Kg)h.push(p);else{var y=tm(d,v);null!=y&&(h.push(p),l.set(p,y))}}var g=new ah(h);return new jg(l.Gt(),g,s.fieldTransforms)}function Zg(t,e,n,r){return void 0===r&&(r=!1),tm(n,t.G_(r?4:3,e))}function tm(t,e){if(t instanceof Cc&&(t=t._),nm(t))return rm("Unsupported field value:",e,t),em(t,e);if(t instanceof Ag)return function(t,e){if(!Vg(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Te.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=tm(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Cc&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return wl(e.fe,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Xc.fromDate(t);return{timestampValue:Of(e.fe,n)}}if(t instanceof Xc)return n=new Xc(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Of(e.fe,n)};if(t instanceof Mg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Sc)return{bytesValue:Rf(e.fe,t.l)};if(t instanceof kg){n=e.O;var r=t.firestore.zr;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Lf(t.firestore.zr||e.O,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+Kp(t))}(t,e)}function em(t,e){var n={};return sh(t)?e.path&&e.path.length>0&&e.Te.push(e.path):oh(t,(function(t,r){var i=tm(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function nm(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Xc||t instanceof Mg||t instanceof Sc||t instanceof kg||t instanceof Ag)}function rm(t,e,n){if(!nm(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Kp(n);throw"an object"===r?e.K_(t+" a custom object"):e.K_(t+" "+r)}}function im(t,e,n){if(e instanceof Cc&&(e=e._),e instanceof Ng)return e.b_;if("string"==typeof e)return sm(t,e);throw am("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var om=new RegExp("[~\\*/\\[\\]]");function sm(t,e,n){if(e.search(om)>=0)throw am("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Ng.bind.apply(Ng,ac([void 0],e.split("."))))).b_}catch(r){throw am("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function am(t,e,n,r,i){var o=r&&!r.bt(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Tc(Ic.INVALID_ARGUMENT,(a+=". ")+t+u)}function um(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cm=function(){function t(t){this.Qh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return oc(this,void 0,void 0,(function(){var e,n=this;return sc(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new Tc(Ic.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return oc(this,void 0,void 0,(function(){var n,r,i,o,s,a;return sc(this,(function(u){switch(u.label){case 0:return n=yc(t),r=qf(n.fe)+"/documents",i={documents:e.map((function(t){return Ff(n.fe,t)}))},[4,n._t("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){vc(!!e.found),e.found.name,e.found.updateTime;var n=Uf(t,e.found.name),r=xf(e.found.updateTime),i=new Ah({mapValue:{fields:e.found.fields}});return new Rh(n,r,i,{})}(t,e):"missing"in e?function(t,e){vc(!!e.missing),vc(!!e.readTime);var n=Uf(t,e.missing),r=xf(e.readTime);return new Dh(n,r)}(t,e):dc()}(n.fe,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());vc(!!e),a.push(e)})),a)]}}))}))}(this.Qh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof Dh||t instanceof Rh?n.sf(t):dc()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.Ee(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new Yl(t,this.Ee(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return oc(this,void 0,void 0,(function(){var t,e=this;return sc(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=rh.Lt(n);e.mutations.push(new Xl(r,e.Ee(r)))})),[4,function(t,e){return oc(this,void 0,void 0,(function(){var n,r,i;return sc(this,(function(o){switch(o.label){case 0:return n=yc(t),r=qf(n.fe)+"/documents",i={writes:e.map((function(t){return Kf(n.fe,t)}))},[4,n.at("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Qh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof Rh)e=t.version;else{if(!(t instanceof Dh))throw dc();e=Jc.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Tc(Ic.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.Ee=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Ml.updateTime(e):Ml.de()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(Jc.min()))throw new Tc(Ic.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ml.updateTime(e)}return Ml.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),hm=function(){function t(t,e,n,r){this.ks=t,this.Qh=e,this.updateFunction=n,this.Bs=r,this.cf=5,this.ui=new _p(this.ks,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.ui.ti((function(){return oc(t,void 0,void 0,(function(){var t,e,n=this;return sc(this,(function(r){return t=new cm(this.Qh),(e=this.uf(t))&&e.then((function(e){n.ks.Ws((function(){return t.commit().then((function(){n.Bs.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!Vc(e)&&e.catch&&e.then?e:(this.Bs.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Bs.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this.ks.Ws((function(){return e.af(),Promise.resolve()}))):this.Bs.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Gc(e)}return!1},t}(),lm=function(){function t(t,e,n){var r=this;this.credentials=t,this.ks=e,this.rt=n,this.user=Pc.UNAUTHENTICATED,this.clientId=mc.t(),this._f=function(){},this.S=new $c,this.credentials.V((function(t){hc("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r._f(t)),r.S.resolve()}))}return t.prototype.getConfiguration=function(){return oc(this,void 0,void 0,(function(){return sc(this,(function(t){switch(t.label){case 0:return[4,this.S.promise];case 1:return[2,(t.sent(),{ks:this.ks,rt:this.rt,clientId:this.clientId,credentials:this.credentials,h_:this.user,Bl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.S.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this.ks.wf)throw new Tc(Ic.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.ks.Ef();var e=new $c;return this.ks.Tf((function(){return oc(t,void 0,void 0,(function(){var t,n;return sc(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.p(),e.resolve(),[3,6];case 5:return t=r.sent(),n=bp(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(t,e){return oc(this,void 0,void 0,(function(){var n,r=this;return sc(this,(function(i){switch(i.label){case 0:return t.ks.Af(),hc("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=i.sent(),[4,e.initialize(n)];case 2:return i.sent(),t.ff((function(n){return t.ks.ea((function(){return oc(r,void 0,void 0,(function(){return sc(this,(function(t){switch(t.label){case 0:return[4,vv(e.Uh,n)];case 1:return t.sent(),[2]}}))}))}))})),e.persistence.Xc((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function pm(t,e){return oc(this,void 0,void 0,(function(){var n,r;return sc(this,(function(i){switch(i.label){case 0:return t.ks.Af(),[4,dm(t)];case 1:return n=i.sent(),hc("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t.ks.ea((function(){return function(t,e){return oc(this,void 0,void 0,(function(){var n,r;return sc(this,(function(i){switch(i.label){case 0:return(n=yc(t)).ks.Af(),hc("RemoteStore","RemoteStore received new credentials"),r=ay(n),n.Gh.add(3),[4,ty(n)];case 1:return i.sent(),r&&n.Jh.set("Unknown"),[4,n.Kh.E_(e)];case 2:return i.sent(),n.Gh.delete(3),[4,Zv(n)];case 3:return i.sent(),[2]}}))}))}(e.Ml,n)}))})),t.If=e,[2]}}))}))}function dm(t){return oc(this,void 0,void 0,(function(){return sc(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(hc("FirestoreClient","Using default OfflineComponentProvider"),[4,fm(t,new _g)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function vm(t){return oc(this,void 0,void 0,(function(){return sc(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(hc("FirestoreClient","Using default OnlineComponentProvider"),[4,pm(t,new Ig)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function ym(t){return dm(t).then((function(t){return t.persistence}))}function gm(t){return dm(t).then((function(t){return t.Uh}))}function mm(t){return vm(t).then((function(t){return t.Ml}))}function bm(t){return vm(t).then((function(t){return t.Lu}))}function _m(t){return oc(this,void 0,void 0,(function(){var e,n;return sc(this,(function(r){switch(r.label){case 0:return[4,vm(t)];case 1:return e=r.sent(),[2,((n=e.Ll).ol=By.bind(null,e.Lu),n.ul=Hy.bind(null,e.Lu),n)]}}))}))}function wm(t,e,n){var r=this;void 0===n&&(n={});var i=new $c;return t.ks.Ws((function(){return oc(r,void 0,void 0,(function(){var r;return sc(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Sg({next:function(o){e.Ws((function(){return Ny(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Tc(Ic.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Tc(Ic.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Oy(rl(n.path),o,{includeMetadataChanges:!0,El:!0});return Cy(t,s)},[4,_m(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.ks,e,n,i])]}}))}))})),i.promise}function Em(t,e,n){var r=this;void 0===n&&(n={});var i=new $c;return t.ks.Ws((function(){return oc(r,void 0,void 0,(function(){var r;return sc(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Sg({next:function(n){e.Ws((function(){return Ny(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Tc(Ic.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Oy(n,o,{includeMetadataChanges:!0,El:!0});return Cy(t,s)},[4,_m(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.ks,e,n,i])]}}))}))})),i.promise}var Im=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.ui=new _p(this,"async_queue_retry"),this.vf=function(){var e=Yv();e&&hc("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ui.si()};var e=Yv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ws=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=Yv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.ea=function(t){var e=this;this.Ws((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return oc(this,void 0,void 0,(function(){var t,e=this;return sc(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.ui.reset(),[3,4];case 3:if(!pp(t=n.sent()))throw t;return hc("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.ui.ti((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,lc("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.ni=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=mp.qs(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&dc()},t.prototype.Af=function(){},t.prototype.Nf=function(){return oc(this,void 0,void 0,(function(){var t;return sc(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Ff=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].Ms===t)return!0;return!1},t.prototype.Of=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.Ls-e.Ls}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Ks(),"all"!==t&&i.Ms===t)break}return e.Nf()}))},t.prototype.kf=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}(),Tm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Mf=new Im,r.Wr="name"in e?e.name:"[DEFAULT]",r}return ic(e,t),e.prototype.io=function(){return this.Lf||Cm(this),this.Lf.terminate()},e}(Yp);function Sm(t){return t.Lf||Cm(t),t.Lf.df(),t.Lf}function Cm(t){var e=t.so(),n=function(t,e,n){return new Mc(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.zr,t.Wr,e);t.Lf=new lm(t.Hr,t.Mf,n)}function Nm(t,e,n){var r=this,i=new $c;return t.ks.enqueue((function(){return oc(r,void 0,void 0,(function(){var r;return sc(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,fm(t,n)];case 1:return o.sent(),[4,pm(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Ic.FAILED_PRECONDITION||t.code===Ic.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Am(t){if(t.Yr||t.Xr)throw new Tc(Ic.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var km=function(){function t(){}return t.prototype.$f=function(t,e){switch(void 0===e&&(e="none"),vh(t)){case 0:return null;case 1:return t.booleanValue;case 2:return hh(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf(lh(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.Wf(t.arrayValue,e);case 10:return this.jf(t.mapValue,e);default:throw dc()}},t.prototype.jf=function(t,e){var n=this,r={};return oh(t.fields||{},(function(t,i){r[t]=n.$f(i,e)})),r},t.prototype.Kf=function(t){return new Mg(hh(t.latitude),hh(t.longitude))},t.prototype.Wf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.$f(t,e)}))},t.prototype.qf=function(t,e){switch(e){case"previous":var n=ph(t);return null==n?null:this.$f(n,e);case"estimate":return this.Bf(dh(t));default:return null}},t.prototype.Bf=function(t){var e=ch(t);return new Xc(e.seconds,e.nanos)},t.prototype.Gf=function(t,e){var n=th.xt(t);vc(sp(n));var r=new Fc(n.get(1),n.get(3)),i=new rh(n.Pt(5));return r.isEqual(e)||lc("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Pm=function(){function t(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.Vt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new kg(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Jf},t.prototype.data=function(){if(this.Jf){if(this.v_){var t=new Om(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.$f(this.Jf.Yt())}},t.prototype.get=function(t){if(this.Jf){var e=this.Jf.data().field(Rm("DocumentSnapshot.get",t));if(null!==e)return this.Hf.$f(e)}},t}(),Om=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ic(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Pm);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(t,e){return"string"==typeof e?sm(t,e):e instanceof Cc?e._.b_:e.b_}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(t){if(ol(t)&&0===t.ne.length)throw new Tc(Ic.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var xm=function(){};function Lm(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.Yf(t)}return t}var Mm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xf=e,i.Zf=n,i.td=r,i.type="where",i}return ic(e,t),e.prototype.Yf=function(t){var e=Wg(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.Ot()){if("array-contains"===o||"array-contains-any"===o)throw new Tc(Ic.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Wm(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var l=h[c];u.push(Bm(r,t,l))}a={arrayValue:{values:u}}}else a=Bm(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Wm(s,o),a=Zg(n,"where",s,"in"===o||"not-in"===o);var f=Vh.create(i,o,a);return function(t,e){if(e.ee()){var n=al(t);if(null!==n&&!n.isEqual(e.field))throw new Tc(Ic.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=sl(t);null!==r&&Hm(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Tc(Ic.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Tc(Ic.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t.C_,0,e,t.firestore.zr,this.Xf,this.Zf,this.td);return new Pg(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new el(t.path,t.collectionGroup,t.ne.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(xm),Fm=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Xf=e,r.ed=n,r.type="orderBy",r}return ic(e,t),e.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Tc(Ic.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Tc(Ic.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Xh(e,n);return function(t,e){if(null===sl(t)){var n=al(t);null!==n&&Hm(t,n,e.field)}}(t,r),r}(t.C_,this.Xf,this.ed);return new Pg(t.firestore,t.v_,function(t,e){var n=t.ne.concat([e]);return new el(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(xm),Um=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.nd=n,i.sd=r,i}return ic(e,t),e.prototype.Yf=function(t){return new Pg(t.firestore,t.v_,ll(t.C_,this.nd,this.sd))},e}(xm),jm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return ic(e,t),e.prototype.Yf=function(t){var e=qm(t,this.type,this.rd,this.od);return new Pg(t.firestore,t.v_,function(t,e){return new el(t.path,t.collectionGroup,t.ne.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(xm),Vm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return ic(e,t),e.prototype.Yf=function(t){var e=qm(t,this.type,this.rd,this.od);return new Pg(t.firestore,t.v_,function(t,e){return new el(t.path,t.collectionGroup,t.ne.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(xm);function qm(t,e,n,r){if(n[0]instanceof Cc&&(n[0]=n[0]._),n[0]instanceof Pm)return function(t,e,n,r,i){if(!r)throw new Tc(Ic.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=cl(t);s<a.length;s++){var u=a[s];if(u.field.Ot())o.push(Eh(e,r.key));else{var c=r.field(u.field);if(fh(c))throw new Tc(Ic.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.Ct();throw new Tc(Ic.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new $h(o,i)}(t.C_,t.firestore.zr,e,n[0].Jf,r);var i=Wg(t.firestore);return function(t,e,n,r,i,o){var s=t.ne;if(i.length>s.length)throw new Tc(Ic.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.Ot()){if("string"!=typeof c)throw new Tc(Ic.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ul(t)&&-1!==c.indexOf("/"))throw new Tc(Ic.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(th.xt(c));if(!rh.qt(h))throw new Tc(Ic.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new rh(h);a.push(Eh(e,l))}else{var f=Zg(n,r,c);a.push(f)}}return new $h(a,o)}(t.C_,t.firestore.zr,i,e,n,r)}function Bm(t,e,n){if(n instanceof Cc&&(n=n._),"string"==typeof n){if(""===n)throw new Tc(Ic.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ul(e)&&-1!==n.indexOf("/"))throw new Tc(Ic.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(th.xt(n));if(!rh.qt(r))throw new Tc(Ic.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Eh(t,new rh(r))}if(n instanceof kg)return Eh(t,n.S_);throw new Tc(Ic.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Kp(n)+".")}function Wm(t,e){if(!Array.isArray(t)||0===t.length)throw new Tc(Ic.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Tc(Ic.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Hm(t,e,n){if(!n.isEqual(e))throw new Tc(Ic.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Gm=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ic(e,t),e.prototype.Uf=function(t){return new Sc(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.zr);return new kg(this.firestore,null,e)},e}(km);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Qm=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),$m=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).zf=e,a.ad=e,a.metadata=o,a}return ic(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new Ym(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.$f(this.Jf.Yt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf){var n=this.Jf.data().field(Rm("DocumentSnapshot.get",t));if(null!==n)return this.Hf.$f(n,e.serverTimestamps)}},e}(Pm),Ym=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ic(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}($m),Xm=function(){function t(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new Qm(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.ud.docs.forEach((function(r){t.call(e,new Ym(n.zf,n.Hf,r.key,r,new Qm(n.ud.tn.has(r.key),n.ud.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.ud.nn)throw new Tc(Ic.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===e||(this.hd=function(t,e){if(t.ud.Ze.bt()){var n=0;return t.ud.docChanges.map((function(e){var r=new Ym(t.zf,t.Hf,e.doc.key,e.doc,new Qm(t.ud.tn.has(e.doc.key),t.ud.fromCache),t.query.v_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t.ud.Ze;return t.ud.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Ym(t.zf,t.Hf,e.doc.key,e.doc,new Qm(t.ud.tn.has(e.doc.key),t.ud.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Jm(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.ld=e),this.hd},t}();function Jm(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dc()}}function Zm(t,e){return t instanceof $m&&e instanceof $m?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof Xm&&e instanceof Xm&&t.zf===e.zf&&Lg(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ic(e,t),e.prototype.Uf=function(t){return new Sc(t)},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.zr);return new kg(this.firestore,null,e)},e}(km);function eb(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Gp(t,kg);var o=Gp(t.firestore,Tm),s=Wg(o);return e instanceof Cc&&(e=e._),rb(o,[("string"==typeof e||e instanceof Ng?Jg(s,"updateDoc",t.S_,e,n,r):Xg(s,"updateDoc",t.S_,e)).F_(t.S_,Ml.exists(!0))])}function nb(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof Cc&&(t=t._);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||zm(i[a])||(s=i[a],a++);var u,c,h,l={includeMetadataChanges:s.includeMetadataChanges};if(zm(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof kg)c=Gp(t.firestore,Tm),h=rl(t.S_.path),u={next:function(e){i[a]&&i[a](ib(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=Gp(t,Pg);c=Gp(p.firestore,Tm),h=p.C_;var d=new tb(c);u={next:function(t){i[a]&&i[a](new Xm(c,d,p,t))},error:i[a+1],complete:i[a+2]},Dm(t.C_)}return function(t,e,n,r){var i=this,o=new Sg(r),s=new Oy(e,o,n);return t.ks.Ws((function(){return oc(i,void 0,void 0,(function(){var e;return sc(this,(function(n){switch(n.label){case 0:return e=Cy,[4,_m(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.I_(),t.ks.Ws((function(){return oc(i,void 0,void 0,(function(){var e;return sc(this,(function(n){switch(n.label){case 0:return e=Ny,[4,_m(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Sm(c),h,l,u)}function rb(t,e){return function(t,e){var n=this,r=new $c;return t.ks.Ws((function(){return oc(n,void 0,void 0,(function(){var n;return sc(this,(function(i){switch(i.label){case 0:return n=Ky,[4,bm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Sm(t),e)}function ib(t,e,n){var r=n.docs.get(e.S_),i=new tb(t);return new $m(t,i,e.S_,r,new Qm(n.hasPendingWrites,n.fromCache),e.v_)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ob=function(){function t(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=Wg(t)}return t.prototype.set=function(t,e,n){this.Ed();var r=sb(t,this.zf),i=Km(r.v_,e,n),o=Hg(this.wd,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.fd.push(o.F_(r.S_,Ml.de())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Ed();var o,s=sb(t,this.zf);return e instanceof Cc&&(e=e._),o="string"==typeof e||e instanceof Ng?Jg(this.wd,"WriteBatch.update",s.S_,e,n,r):Xg(this.wd,"WriteBatch.update",s.S_,e),this.fd.push(o.F_(s.S_,Ml.exists(!0))),this},t.prototype.delete=function(t){this.Ed();var e=sb(t,this.zf);return this.fd=this.fd.concat(new Yl(e.S_,Ml.de())),this},t.prototype.commit=function(){return this.Ed(),this.dd=!0,this.fd.length>0?this._d(this.fd):Promise.resolve()},t.prototype.Ed=function(){if(this.dd)throw new Tc(Ic.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function sb(t,e){if(t instanceof Cc&&(t=t._),t.firestore!==e)throw new Tc(Ic.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ab=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).zf=e,r}return ic(e,t),e.prototype.get=function(e){var n=this,r=sb(e,this.zf),i=new tb(this.zf);return t.prototype.get.call(this,e).then((function(t){return new $m(n.zf,i,r.S_,t.Jf,new Qm(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.zf=t,this.Td=e,this.wd=Wg(t)}return t.prototype.get=function(t){var e=this,n=sb(t,this.zf),r=new Gm(this.zf);return this.Td.ef([n.S_]).then((function(t){if(!t||1!==t.length)return dc();var i=t[0];if(i instanceof Dh)return new Pm(e.zf,r,n.S_,null,n.v_);if(i instanceof Rh)return new Pm(e.zf,r,i.key,i,n.v_);throw dc()}))},t.prototype.set=function(t,e,n){var r=sb(t,this.zf),i=Km(r.v_,e,n),o=Hg(this.wd,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Td.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=sb(t,this.zf);return e instanceof Cc&&(e=e._),o="string"==typeof e||e instanceof Ng?Jg(this.wd,"Transaction.update",s.S_,e,n,r):Xg(this.wd,"Transaction.update",s.S_,e),this.Td.update(s.S_,o),this},t.prototype.delete=function(t){var e=sb(t,this.zf);return this.Td.delete(e.S_),this},t}()),ub=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Am(t=Gp(t,Tm));var n=Sm(t),r=t.so(),i=new Ig;return Nm(n,i,new wg(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Am(t=Gp(t,Tm));var e=Sm(t),n=t.so(),r=new Ig;return Nm(e,r,new Eg(r,n.cacheSizeBytes))}(t._)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.Yr&&!t.Xr)throw new Tc(Ic.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new $c;return t.Mf.Tf((function(){return oc(e,void 0,void 0,(function(){var e;return sc(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return oc(this,void 0,void 0,(function(){var e;return sc(this,(function(n){switch(n.label){case 0:return hp.G()?(e=t+"main",[4,hp.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(cv(t.zr,t.Wr))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._)},t}(),cb=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Id=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Fc||(i.md=e),i}return ic(e,t),Object.defineProperty(e.prototype,"zr",{get:function(){return this._.zr},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.no()),t)).merge,this._.eo(t)},e.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this._.no().host&&fc("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.ks.enqueue((function(){return oc(e,void 0,void 0,(function(){var e,n;return sc(this,(function(r){switch(r.label){case 0:return[4,ym(t)];case 1:return e=r.sent(),[4,mm(t)];case 2:return n=r.sent(),[2,(e.Zc(!0),function(t){var e=yc(t);return e.Gh.delete(0),Zv(e)}(n))]}}))}))}))}(Sm(Gp(this._,Tm)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.ks.enqueue((function(){return oc(e,void 0,void 0,(function(){var e,n;return sc(this,(function(r){switch(r.label){case 0:return[4,ym(t)];case 1:return e=r.sent(),[4,mm(t)];case 2:return n=r.sent(),[2,(e.Zc(!1),function(t){return oc(this,void 0,void 0,(function(){var e;return sc(this,(function(n){switch(n.label){case 0:return(e=yc(t)).Gh.add(0),[4,ty(e)];case 1:return n.sent(),e.Jh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Sm(Gp(this._,Tm)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Bp("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this._._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new $c;return t.ks.Ws((function(){return oc(e,void 0,void 0,(function(){var e;return sc(this,(function(r){switch(r.label){case 0:return e=Xy,[4,bm(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Sm(Gp(this._,Tm)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Sg(e);return t.ks.Ws((function(){return oc(n,void 0,void 0,(function(){var e;return sc(this,(function(n){switch(n.label){case 0:return e=function(t,e){yc(t).rl.add(e),e.next()},[4,_m(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.I_(),t.ks.Ws((function(){return oc(n,void 0,void 0,(function(){var e;return sc(this,(function(n){switch(n.label){case 0:return e=function(t,e){yc(t).rl.delete(e)},[4,_m(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Sm(t=Gp(t,Tm)),zm(e)?e:{next:e})}(this._,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.md)throw new Tc(Ic.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Eb(this,Rg(this._,t))}catch(t){throw db(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new pb(this,Dg(this._,t))}catch(t){throw db(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new bb(this,function(t,e){if(t=Gp(t,Yp),Vp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Tc(Ic.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Pg(t,null,function(t){return new el(th.Nt(),t)}(e))}(this._,t))}catch(t){throw db(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new $c;return t.ks.Ws((function(){return oc(n,void 0,void 0,(function(){var n;return sc(this,(function(i){switch(i.label){case 0:return[4,function(t){return vm(t).then((function(t){return t.Qh}))}(t)];case 1:return n=i.sent(),new hm(t.ks,n,e,r).run(),[2]}}))}))})),r.promise}(Sm(t),(function(n){return e(new ab(t,n))}))}(this._,(function(n){return t(new lb(e,n))}))},e.prototype.batch=function(){var t=this;return Sm(this._),new fb(new ob(this._,(function(e){return rb(t._,e)})))},e.prototype.loadBundle=function(t){throw new Tc(Ic.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Tc(Ic.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(Cc),hb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ic(e,t),e.prototype.Uf=function(t){return new kc(new Sc(t))},e.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.zr);return pb.Ad(e,this.firestore,null)},e}(km);var lb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return ic(e,t),e.prototype.get=function(t){var e=this,n=Ib(t);return this._.get(n).then((function(t){return new gb(e.zf,t)}))},e.prototype.set=function(t,e,n){var r=Ib(t);return n?(qp("Transaction.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Ib(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,ac([s,e,n],i)),this},e.prototype.delete=function(t){var e=Ib(t);return this._.delete(e),this},e}(Cc),fb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ic(e,t),e.prototype.set=function(t,e,n){var r=Ib(t);return n?(qp("WriteBatch.set",n),this._.set(r,e,n)):this._.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Ib(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,ac([s,e,n],i)),this},e.prototype.delete=function(t){var e=Ib(t);return this._.delete(e),this},e.prototype.commit=function(){return this._.commit()},e}(Cc),pb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new hb(e),r}return ic(e,t),e.Rd=function(t,n,r){if(t.length%2!=0)throw new Tc(Ic.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.Ct()+" has "+t.length);return new e(n,new kg(n._,r,new rh(t)))},e.Ad=function(t,n,r){return new e(n,new kg(n._,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Eb(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Eb(this.firestore,Rg(this._,t))}catch(t){throw db(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof Cc&&(t=t._),t instanceof kg&&xg(this._,t)},e.prototype.set=function(t,e){e=qp("DocumentReference.set",e);try{return function(t,e,n){t=Gp(t,kg);var r=Gp(t.firestore,Tm),i=Km(t.v_,e,n);return rb(r,[Hg(Wg(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,Ml.de())])}(this._,t,e)}catch(t){throw db(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?eb(this._,t):eb.apply(void 0,ac([this._,t,e],n))}catch(t){throw db(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return rb(Gp((t=this._).firestore,Tm),[new Yl(t.S_,Ml.de())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=vb(e),i=yb(e,(function(e){return new gb(t.firestore,new $m(t.firestore._,t.Hf,e.S_,e.Jf,e.metadata,t._.v_))}));return nb(this._,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Gp(t,kg);var e=Gp(t.firestore,Tm),n=Sm(e),r=new tb(e);return function(t,e){var n=this,r=new $c;return t.ks.Ws((function(){return oc(n,void 0,void 0,(function(){var n;return sc(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return oc(this,void 0,void 0,(function(){var r,i;return sc(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=yc(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ka.Pa(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof Rh?n.resolve(i):i instanceof Dh?n.resolve(null):n.reject(new Tc(Ic.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=bp(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,gm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new $m(e,r,t.S_,n,new Qm(n instanceof Rh&&n.Jt,!0),t.v_)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=Gp(t,kg);var e=Gp(t.firestore,Tm);return wm(Sm(e),t.S_,{source:"server"}).then((function(n){return ib(e,t,n)}))}(this._):function(t){t=Gp(t,kg);var e=Gp(t.firestore,Tm);return wm(Sm(e),t.S_).then((function(n){return ib(e,t,n)}))}(this._)).then((function(t){return new gb(e.firestore,new $m(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(Cc);function db(t,e,n){return t.message=t.message.replace(e,n),t}function vb(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!zm(r))return r}return{}}function yb(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=zm(t[0])?t[0]:zm(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var gb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return ic(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new pb(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._.data(t)},e.prototype.get=function(t,e){return this._.get(t,e)},e.prototype.isEqual=function(t){return Zm(this._,t._)},e}(Cc),mb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ic(e,t),e.prototype.data=function(t){return this._.data(t)},e}(gb),bb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new hb(e),r}return ic(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Lm(this._,function(t,e,n){var r=e,i=Rm("where",t);return new Mm(i,r,n)}(t,n,r)))}catch(t){throw db(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Lm(this._,function(t,e){void 0===e&&(e="asc");var n=e,r=Rm("orderBy",t);return new Fm(r,n)}(t,n)))}catch(t){throw db(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Lm(this._,function(t){return zp("limit",t),new Um("limit",t,"F")}(t)))}catch(t){throw db(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Lm(this._,function(t){return zp("limitToLast",t),new Um("limitToLast",t,"L")}(t)))}catch(t){throw db(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Lm(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new jm("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw db(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Lm(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new jm("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw db(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Lm(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Vm("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw db(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Lm(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Vm("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw db(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Lg(this._,t._)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Gp(t,Pg);var e=Gp(t.firestore,Tm),n=Sm(e),r=new tb(e);return function(t,e){var n=this,r=new $c;return t.ks.Ws((function(){return oc(n,void 0,void 0,(function(){var n;return sc(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return oc(this,void 0,void 0,(function(){var r,i,o,s,a;return sc(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Iv(t,e,!0)];case 1:return a=u.sent(),r=new Uy(e,a.za),i=r.bl(a.documents),o=r.yr(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=bp(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,gm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new Xm(e,r,t,n)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=Gp(t,Pg);var e=Gp(t.firestore,Tm),n=Sm(e),r=new tb(e);return Em(n,t.C_,{source:"server"}).then((function(n){return new Xm(e,r,t,n)}))}(this._):function(t){t=Gp(t,Pg);var e=Gp(t.firestore,Tm),n=Sm(e),r=new tb(e);return Dm(t.C_),Em(n,t.C_).then((function(n){return new Xm(e,r,t,n)}))}(this._)).then((function(t){return new wb(e.firestore,new Xm(e.firestore._,e.Hf,e._,t.ud))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=vb(e),i=yb(e,(function(e){return new wb(t.firestore,new Xm(t.firestore._,t.Hf,t._,e.ud))}));return nb(this._,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(Cc),_b=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return ic(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new mb(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),e}(Cc),wb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return ic(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new bb(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._.docs.map((function(e){return new mb(t.zf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map((function(t){return new _b(e.zf,t)}))},e.prototype.forEach=function(t,e){var n=this;this._.forEach((function(r){t.call(e,new mb(n.zf,r))}))},e.prototype.isEqual=function(t){return Zm(this._,t._)},e}(Cc),Eb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._=n,r}return ic(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._.parent;return t?new pb(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new pb(this.firestore,void 0===t?Dg(this._):Dg(this._,t))}catch(t){throw db(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Gp(t.firestore,Tm),r=Dg(t),i=Km(t.v_,e);return rb(n,[Hg(Wg(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,Ml.exists(!1))]).then((function(){return r}))}(this._,t).then((function(t){return new pb(e.firestore,t)}))},e.prototype.isEqual=function(t){return xg(this._,t._)},e.prototype.withConverter=function(t){return new e(this.firestore,this._.withConverter(t))},e}(bb);function Ib(t){return t instanceof Cc&&(t=t._),Gp(t,kg)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tb=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Ng.bind.apply(Ng,ac([void 0],e))))||this}return ic(e,t),e.documentId=function(){return new e(nh.kt().Ct())},e.prototype.isEqual=function(t){return t instanceof Cc&&(t=t._),t instanceof Ng&&this._.b_.isEqual(t.b_)},e}(Cc),Sb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ic(e,t),e.serverTimestamp=function(){var t=new zg("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Kg("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Qg("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new $g("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Yg("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._.isEqual(t._)},e}(Cc),Cb=function(){function t(){this.Pd={},this.yd=new $c,this.gd={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this.Pd={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.yd.promise.catch(t)},t.prototype.then=function(t,e){return this.yd.promise.then(t,e)},t.prototype.e_=function(t){this.n_(t),this.Pd.complete&&this.Pd.complete(),this.yd.resolve(t)},t.prototype.i_=function(t){this.gd.taskState="Error",this.Pd.next&&this.Pd.next(this.gd),this.Pd.error&&this.Pd.error(t),this.yd.reject(t)},t.prototype.n_=function(t){this.gd=t,this.Pd.next&&this.Pd.next(t)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nb,Ab={Firestore:cb,GeoPoint:Mg,Timestamp:Xc,Blob:kc,Transaction:lb,WriteBatch:fb,DocumentReference:pb,DocumentSnapshot:gb,Query:bb,QueryDocumentSnapshot:mb,QuerySnapshot:wb,CollectionReference:Eb,FieldPath:Tb,FieldValue:Sb,setLogLevel:function(t){var e;e=t,uc.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(t,e){t.INTERNAL.registerComponent(new oe("firestore",(function(t){return function(t,e){return new cb(t,new Tm(t,e),new ub)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Ab)))})(Nb=Pe),Nb.registerVersion("@firebase/firestore","2.1.0"),
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){t.prototype.loadBundle=function(t){return function(t,e){var n=new Cb;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new Cg(t,e)}(function(t,e){if(t instanceof Uint8Array)return Tg(t,e);if(t instanceof ArrayBuffer)return Tg(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,ap(e));t.ks.Ws((function(){return oc(i,void 0,void 0,(function(){var e;return sc(this,(function(n){switch(n.label){case 0:return e=bg,[4,bm(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}}))}))}))}(Sm(t._),t.zr,e,n),n}(this,t)},t.prototype.namedQuery=function(t){return function(t,e){return function(t,e){var n=this;return t.ks.enqueue((function(){return oc(n,void 0,void 0,(function(){var n;return sc(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=yc(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.Wc.ho(t,e)}))},[4,gm(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(Sm(t._),e).then((function(e){return e?new bb(t,new Pg(t._,null,e.query)):null}))}(this,t)}}(cb);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var kb=function(t,e){return(kb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Pb(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function Ob(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rb={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Db=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return function(t,e){function n(){this.constructor=t}kb(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error);var xb=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return Pb(this,void 0,void 0,(function(){var t;return Ob(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return Pb(this,void 0,void 0,(function(){return Ob(this,(function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]}))}))},t.prototype.getContext=function(){return Pb(this,void 0,void 0,(function(){var t,e;return Ob(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var Mb=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return Lb(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?Lb(t,(function(t){return e.decode(t)})):t},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fb=function(){function t(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new Mb,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new xb(e,n),this.cancelAllRequests=new Promise((function(t){o.deleteService=function(){return t()}}));try{var s=new URL(r);this.customDomain=s.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=r}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return Pb(this,void 0,void 0,(function(){var r,i;return Ob(this,(function(o){switch(o.label){case 0:n["Content-Type"]="application/json",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},t.prototype.call=function(t,e,n){return Pb(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h,l,f,p;return Ob(this,(function(d){switch(d.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(s=d.sent()).authToken&&(o.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=s.instanceIdToken),a=n.timeout||7e4,u=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new Db("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(a),c=u.timer,h=u.promise,[4,Promise.race([Ub(c,this.postJSON(r,i,o)),h,Ub(c,this.cancelAllRequests)])];case 2:if(!(l=d.sent()))throw new Db("cancelled","Firebase Functions instance was deleted.");if(f=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!Rb[a])return new Db("internal","internal");r=Rb[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new Db(r,i,o)}(l.status,l.json,this.serializer))throw f;if(!l.json)throw new Db("internal","Response is not valid JSON object.");if(void 0===(p=l.json.data)&&(p=l.json.result),void 0===p)throw new Db("internal","Response is missing data field.");return[2,{data:this.serializer.decode(p)}]}}))}))},t}();function Ub(t,e){return Pb(this,void 0,void 0,(function(){var n;return Ob(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(t,e){var n={Functions:Fb};t.INTERNAL.registerComponent(new oe("functions",(function(t,n){var r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("messaging");return new Fb(r,i,o,n,e)}),"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}(Pe,fetch.bind(self)),Pe.registerVersion("@firebase/functions","0.6.1");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var jb=function(){return(jb=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Vb(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function qb(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function Bb(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wb(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Hb(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}var Kb,Gb=Hb((function(t,e){!function(t){function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,s){n(i=t[e].apply(t,r)).then(o,s)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new h(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function s(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function a(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function h(t,e){this._cursor=t,this._request=e}function l(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function d(t){this._db=t}function v(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new p(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new d(t)}))}function y(t){return r(indexedDB,"deleteDatabase",[t])}o(c,"_index",["name","keyPath","multiEntry","unique"]),s(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(h,"_cursor",["direction","key","primaryKey","value"]),s(h,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(h.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new h(t,e._request)}))}))})})),l.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},l.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(l,"_store",["name","keyPath","indexNames","autoIncrement"]),s(l,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(l,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(l,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new l(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),a(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new l(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[l,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,l].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=v,t.deleteDb=y,Object.defineProperty(t,"__esModule",{value:!0})}(e)})),zb=((Kb={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Kb["not-registered"]="Firebase Installation is not registered.",Kb["installation-not-found"]="Firebase Installation not found.",Kb["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Kb["app-offline"]="Could not process request. Application offline.",Kb["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Kb),Qb=new xt("installations","Installations",zb);function $b(t){return t instanceof Dt&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function Xb(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function Jb(t,e){return Vb(this,void 0,void 0,(function(){var n,r;return qb(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,Qb.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function Zb(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function t_(t,e){var n=e.refreshToken,r=Zb(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)),r}function e_(t){return Vb(this,void 0,void 0,(function(){var e;return qb(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function n_(t,e){var n=e.fid;return Vb(this,void 0,void 0,(function(){var e,r,i,o,s,a;return qb(this,(function(u){switch(u.label){case 0:return e=Yb(t),r=Zb(t),i={fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:"w:0.4.19"},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,e_((function(){return fetch(e,o)}))];case 1:return(s=u.sent()).ok?[4,s.json()]:[3,3];case 2:return a=u.sent(),[2,{fid:a.fid||n,registrationStatus:2,refreshToken:a.refreshToken,authToken:Xb(a.authToken)}];case 3:return[4,Jb("Create Installation",s)];case 4:throw u.sent()}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(t){return btoa(String.fromCharCode.apply(String,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Wb(arguments[e]));return t}(t))).replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var o_=/^[cdef][\w-]{21}$/;function s_(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return i_(t).substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);return o_.test(e)?e:""}catch(t){return""}}function a_(t){return t.appName+"!"+t.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var u_=new Map;function c_(t,e){var n=a_(t);h_(n,e),function(t,e){var n=f_();n&&n.postMessage({key:t,fid:e});p_()}(n,e)}function h_(t,e){var n,r,i=u_.get(t);if(i)try{for(var o=Bb(i),s=o.next();!s.done;s=o.next()){(0,s.value)(e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var l_=null;function f_(){return!l_&&"BroadcastChannel"in self&&((l_=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){h_(t.data.key,t.data.fid)}),l_}function p_(){0===u_.size&&l_&&(l_.close(),l_=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var d_="firebase-installations-store",v_=null;function y_(){return v_||(v_=Gb.openDb("firebase-installations-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(d_)}}))),v_}function g_(t,e){return Vb(this,void 0,void 0,(function(){var n,r,i,o,s;return qb(this,(function(a){switch(a.label){case 0:return n=a_(t),[4,y_()];case 1:return r=a.sent(),i=r.transaction(d_,"readwrite"),[4,(o=i.objectStore(d_)).get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||c_(t,e.fid),[2,e]}}))}))}function m_(t){return Vb(this,void 0,void 0,(function(){var e,n,r;return qb(this,(function(i){switch(i.label){case 0:return e=a_(t),[4,y_()];case 1:return n=i.sent(),[4,(r=n.transaction(d_,"readwrite")).objectStore(d_).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function b_(t,e){return Vb(this,void 0,void 0,(function(){var n,r,i,o,s,a;return qb(this,(function(u){switch(u.label){case 0:return n=a_(t),[4,y_()];case 1:return r=u.sent(),i=r.transaction(d_,"readwrite"),[4,(o=i.objectStore(d_)).get(n)];case 2:return s=u.sent(),void 0!==(a=e(s))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||c_(t,a.fid),[2,a]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(t){return Vb(this,void 0,void 0,(function(){var e,n,r;return qb(this,(function(i){switch(i.label){case 0:return[4,b_(t,(function(n){var r=function(t){return I_(t||{fid:s_(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Qb.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return Vb(this,void 0,void 0,(function(){var n,r;return qb(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,n_(t,e)];case 1:return n=i.sent(),[2,g_(t,n)];case 2:return $b(r=i.sent())&&409===r.customData.serverCode?[4,m_(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,g_(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:w_(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function w_(t){return Vb(this,void 0,void 0,(function(){var e,n,r,i;return qb(this,(function(o){switch(o.label){case 0:return[4,E_(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,r_(100)];case 3:return o.sent(),[4,E_(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,__(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}}))}))}function E_(t){return b_(t,(function(t){if(!t)throw Qb.create("installation-not-found");return I_(t)}))}function I_(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function T_(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Vb(this,void 0,void 0,(function(){var t,i,o,s,a,u,c;return qb(this,(function(h){switch(h.label){case 0:return t=function(t,e){var n=e.fid;return Yb(t)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,e),i=t_(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={installation:{sdkVersion:"w:0.4.19"}},a={method:"POST",headers:i,body:JSON.stringify(s)},[4,e_((function(){return fetch(t,a)}))];case 1:return(u=h.sent()).ok?[4,u.json()]:[3,3];case 2:return c=h.sent(),[2,Xb(c)];case 3:return[4,Jb("Generate Auth Token",u)];case 4:throw h.sent()}}))}))}function S_(t,e){return void 0===e&&(e=!1),Vb(this,void 0,void 0,(function(){var n,r,i;return qb(this,(function(o){switch(o.label){case 0:return[4,b_(t.appConfig,(function(r){if(!N_(r))throw Qb.create("not-registered");var i=r.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(t)}(i))return r;if(1===i.requestStatus)return n=function(t,e){return Vb(this,void 0,void 0,(function(){var n,r;return qb(this,(function(i){switch(i.label){case 0:return[4,C_(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,r_(100)];case 3:return i.sent(),[4,C_(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,S_(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw Qb.create("app-offline");var o=function(t){var e={requestStatus:1,requestTime:Date.now()};return jb(jb({},t),{authToken:e})}(r);return n=function(t,e){return Vb(this,void 0,void 0,(function(){var n,r,i;return qb(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,T_(t,e)];case 1:return n=o.sent(),i=jb(jb({},e),{authToken:n}),[4,g_(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!$b(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,m_(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=jb(jb({},e),{authToken:{requestStatus:0}}),[4,g_(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function C_(t){return b_(t,(function(t){if(!N_(t))throw Qb.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+1e4<Date.now()?jb(jb({},t),{authToken:{requestStatus:0}}):t}))}function N_(t){return void 0!==t&&2===t.registrationStatus}function A_(t){return Vb(this,void 0,void 0,(function(){var e;return qb(this,(function(n){switch(n.label){case 0:return[4,__(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(t,e){return Vb(this,void 0,void 0,(function(){var n,r,i,o;return qb(this,(function(s){switch(s.label){case 0:return n=function(t,e){var n=e.fid;return Yb(t)+"/"+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e),r=t_(t,e),i={method:"DELETE",headers:r},[4,e_((function(){return fetch(n,i)}))];case 1:return(o=s.sent()).ok?[3,3]:[4,Jb("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function P_(t,e){var n=t.appConfig;return function(t,e){f_();var n=a_(t),r=u_.get(n);r||(r=new Set,u_.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=a_(t),r=u_.get(n);r&&(r.delete(e),0===r.size&&u_.delete(n),p_())}(n,e)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(t){return Qb.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t.INTERNAL.registerComponent(new oe("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw O_("App Configuration");if(!t.name)throw O_("App Name");try{for(var r=Bb(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw O_(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */return function(t){return Vb(this,void 0,void 0,(function(){var e,n,r;return qb(this,(function(i){switch(i.label){case 0:return[4,__(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):S_(t).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),Vb(this,void 0,void 0,(function(){return qb(this,(function(n){switch(n.label){case 0:return[4,A_(t.appConfig)];case 1:return n.sent(),[4,S_(t,e)];case 2:return[2,n.sent().token]}}))}))}(n,t)},delete:function(){return function(t){return Vb(this,void 0,void 0,(function(){var e,n;return qb(this,(function(r){switch(r.label){case 0:return[4,b_(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw Qb.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw Qb.create("app-offline");case 3:return[4,k_(e,n)];case 4:return r.sent(),[4,m_(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return P_(n,t)}}}),"PUBLIC")),t.registerVersion("@firebase/installations","0.4.19")}(Pe);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var R_,D_=function(){return(D_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function x_(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function L_(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function M_(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function F_(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}var U_,j_=((R_={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',R_["only-available-in-window"]="This method is available in a Window context.",R_["only-available-in-sw"]="This method is available in a service worker context.",R_["permission-default"]="The notification permission was not granted and dismissed instead.",R_["permission-blocked"]="The notification permission was not granted and blocked instead.",R_["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",R_["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",R_["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",R_["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",R_["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",R_["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",R_["token-update-no-token"]="FCM returned no token when updating the user to push.",R_["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",R_["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",R_["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",R_["invalid-vapid-key"]="The public VAPID key must be a string.",R_["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",R_),V_=new xt("messaging","Messaging",j_),q_="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function B_(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(F_(arguments[e]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function W_(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"}(U_||(U_={}));function H_(t){return x_(this,void 0,void 0,(function(){var e,n,r=this;return L_(this,(function(i){switch(i.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=i.sent(),!e.map((function(t){return t.name})).includes("fcm_token_details_db"))return[2,null];i.label=2;case 2:return n=null,[4,Gb.openDb("fcm_token_details_db",5,(function(e){return x_(r,void 0,void 0,(function(){var r,i,o,s;return L_(this,(function(a){switch(a.label){case 0:return e.oldVersion<2?[2]:e.objectStoreNames.contains("fcm_token_object_Store")?[4,(r=e.transaction.objectStore("fcm_token_object_Store")).index("fcmSenderId").get(t)]:[2];case 1:return i=a.sent(),[4,r.clear()];case 2:if(a.sent(),!i)return[2];if(2===e.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];n={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:B_(o.vapidKey)}}}else(3===e.oldVersion||4===e.oldVersion)&&(n={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:B_(o.auth),p256dh:B_(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:B_(o.vapidKey)}});return[2]}}))}))}))];case 3:return i.sent().close(),[4,Gb.deleteDb("fcm_token_details_db")];case 4:return i.sent(),[4,Gb.deleteDb("fcm_vapid_details_db")];case 5:return i.sent(),[4,Gb.deleteDb("undefined")];case 6:return i.sent(),[2,K_(n)?n:null]}}))}))}function K_(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G_="firebase-messaging-store",z_=null;function Q_(){return z_||(z_=Gb.openDb("firebase-messaging-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(G_)}}))),z_}function $_(t){return x_(this,void 0,void 0,(function(){var e,n,r;return L_(this,(function(i){switch(i.label){case 0:return e=J_(t),[4,Q_()];case 1:return[4,i.sent().transaction(G_).objectStore(G_).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,H_(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,Y_(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function Y_(t,e){return x_(this,void 0,void 0,(function(){var n,r,i;return L_(this,(function(o){switch(o.label){case 0:return n=J_(t),[4,Q_()];case 1:return r=o.sent(),[4,(i=r.transaction(G_,"readwrite")).objectStore(G_).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function X_(t){return x_(this,void 0,void 0,(function(){var e,n,r;return L_(this,(function(i){switch(i.label){case 0:return e=J_(t),[4,Q_()];case 1:return n=i.sent(),[4,(r=n.transaction(G_,"readwrite")).objectStore(G_).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function J_(t){return t.appConfig.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t,e){return x_(this,void 0,void 0,(function(){var n,r,i,o,s,a;return L_(this,(function(u){switch(u.label){case 0:return[4,rw(t)];case 1:n=u.sent(),r=iw(e),i={method:"POST",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(nw(t.appConfig),i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw s=u.sent(),V_.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw a=o.error.message,V_.create("token-subscribe-failed",{errorInfo:a});if(!o.token)throw V_.create("token-subscribe-no-token");return[2,o.token]}}))}))}function tw(t,e){return x_(this,void 0,void 0,(function(){var n,r,i,o,s,a;return L_(this,(function(u){switch(u.label){case 0:return[4,rw(t)];case 1:n=u.sent(),r=iw(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(nw(t.appConfig)+"/"+e.token,i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw s=u.sent(),V_.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw a=o.error.message,V_.create("token-update-failed",{errorInfo:a});if(!o.token)throw V_.create("token-update-no-token");return[2,o.token]}}))}))}function ew(t,e){return x_(this,void 0,void 0,(function(){var n,r,i,o,s;return L_(this,(function(a){switch(a.label){case 0:return[4,rw(t)];case 1:n=a.sent(),r={method:"DELETE",headers:n},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(nw(t.appConfig)+"/"+e,r)];case 3:return[4,a.sent().json()];case 4:if((i=a.sent()).error)throw o=i.error.message,V_.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw s=a.sent(),V_.create("token-unsubscribe-failed",{errorInfo:s});case 6:return[2]}}))}))}function nw(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function rw(t){var e=t.appConfig,n=t.installations;return x_(this,void 0,void 0,(function(){var t;return L_(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function iw(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==q_&&(o.web.applicationPubKey=i),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(t,e,n){return x_(this,void 0,void 0,(function(){var r,i,o,s;return L_(this,(function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw V_.create("permission-blocked");return[4,cw(e,n)];case 1:return r=a.sent(),[4,$_(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:B_(r.getKey("auth")),p256dh:B_(r.getKey("p256dh"))},i?[3,3]:[2,uw(t,o)];case 3:if(u=i.subscriptionOptions,h=(c=o).vapidKey===u.vapidKey,l=c.endpoint===u.endpoint,f=c.auth===u.auth,p=c.p256dh===u.p256dh,h&&l&&f&&p)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,ew(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,uw(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,aw({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,h,l,f,p;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))}function sw(t,e){return x_(this,void 0,void 0,(function(){var n,r;return L_(this,(function(i){switch(i.label){case 0:return[4,$_(t)];case 1:return(n=i.sent())?[4,ew(t,n.token)]:[3,4];case 2:return i.sent(),[4,X_(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function aw(t,e,n){return x_(this,void 0,void 0,(function(){var r,i,o;return L_(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,tw(e,t)];case 1:return r=s.sent(),i=D_(D_({},t),{token:r,createTime:Date.now()}),[4,Y_(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,sw(e,n)];case 4:throw s.sent(),o;case 5:return[2]}}))}))}function uw(t,e){return x_(this,void 0,void 0,(function(){var n,r;return L_(this,(function(i){switch(i.label){case 0:return[4,Z_(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,Y_(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function cw(t,e){return x_(this,void 0,void 0,(function(){var n;return L_(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:W_(e)})]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function hw(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fw=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw V_.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return x_(this,void 0,void 0,(function(){var n;return L_(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,$_(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:q_,r.label=2;case 2:return[2,ow(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return sw(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw V_.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw V_.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw V_.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw V_.create("only-available-in-window")},t.prototype.onMessage=function(){throw V_.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw V_.create("only-available-in-window")},t.prototype.onPush=function(t){return x_(this,void 0,void 0,(function(){var e,n,r,i;return L_(this,(function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(t))?[4,yw()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,vw(n,e)]:(r=!1,e.notification?[4,gw(pw(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,lw(1e3)]);case 4:return o.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return x_(this,void 0,void 0,(function(){var r;return L_(this,(function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,sw(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,$_(this.firebaseDependencies)];case 3:return r=i.sent(),[4,sw(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,ow(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:q_)];case 5:return i.sent(),[2]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return x_(this,void 0,void 0,(function(){var r,i,o,s,a;return L_(this,(function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;if(i)return i;return hw(t.data)?self.location.origin:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r))?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,dw(o)]):[2]):[2];case 1:return(a=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=u.sent(),[4,lw(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=u.sent(),u.label=6;case 6:return a?(r.messageType=U_.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}}))}))},t}();function pw(t){var e,n=D_({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function dw(t){return x_(this,void 0,void 0,(function(){var e,n,r,i,o,s,a;return L_(this,(function(u){switch(u.label){case 0:return[4,yw()];case 1:e=u.sent();try{for(n=M_(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(t){s={error:t}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}}))}))}function vw(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=U_.PUSH_RECEIVED;try{for(var i=M_(t),o=i.next();!o.done;o=i.next()){o.value.postMessage(e)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function yw(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function gw(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var mw=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return x_(this,void 0,void 0,(function(){var e,n;return L_(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===U_.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),hw(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return x_(this,void 0,void 0,(function(){return L_(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw V_.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,ow(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return x_(this,void 0,void 0,(function(){return L_(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=q_),[2]}))}))},t.prototype.updateSwReg=function(t){return x_(this,void 0,void 0,(function(){return L_(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw V_.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return x_(this,void 0,void 0,(function(){var t,e;return L_(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),V_.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return x_(this,void 0,void 0,(function(){return L_(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,sw(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return x_(this,void 0,void 0,(function(){var t;return L_(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?V_.create("permission-blocked"):V_.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw V_.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw V_.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw V_.create("invalid-sw-registration");if(this.swRegistration)throw V_.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw V_.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw V_.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return x_(this,void 0,void 0,(function(){var n;return L_(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case U_.NOTIFICATION_CLICKED:return"notification_open";case U_.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function bw(t){return V_.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _w={isSupported:ww};function ww(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Pe.INTERNAL.registerComponent(new oe("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw bw("App Configuration Object");if(!t.name)throw bw("App Name");var r=t.options;try{for(var i=M_(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw bw(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!ww())throw V_.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new fw(n):new mw(n)}),"PUBLIC").setServiceProps(_w));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Ew=function(t,e){return(Ew=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var Iw=function(){return(Iw=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Tw(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function Sw(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function Cw(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nw=function(t){function e(n,r){var i=t.call(this,zw(n),"Firebase Storage: "+r+" ("+zw(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return function(t,e){function n(){this.constructor=t}Ew(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.codeEquals=function(t){return zw(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(Dt),Aw="unknown",kw="object-not-found",Pw="quota-exceeded",Ow="unauthenticated",Rw="unauthorized",Dw="retry-limit-exceeded",xw="canceled",Lw="invalid-url",Mw="invalid-default-bucket",Fw="no-default-bucket",Uw="cannot-slice-blob",jw="server-file-wrong-size",Vw="no-download-url",qw="invalid-argument",Bw="app-deleted",Ww="invalid-root-operation",Hw="invalid-format",Kw="internal-error",Gw="unsupported-environment";function zw(t){return"storage/"+t}function Qw(){return new Nw(Aw,"An unknown error occurred, please check the error payload for server response.")}function $w(){return new Nw(xw,"User canceled the upload/download.")}function Yw(){return new Nw(Uw,"Cannot slice blob for upload. Please retry the upload.")}function Xw(t){return new Nw(qw,t)}function Jw(){return new Nw(Bw,"The Firebase app was deleted.")}function Zw(t){return new Nw(Ww,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function tE(t,e){return new Nw(Hw,"String does not match format '"+t+"': "+e)}function eE(t){throw new Nw(Kw,"Internal error: "+t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nE={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},rE=function(t,e){this.data=t,this.contentType=e||null};function iE(t,e){switch(t){case nE.RAW:return new rE(oE(e));case nE.BASE64:case nE.BASE64URL:return new rE(sE(t,e));case nE.DATA_URL:return new rE((n=new aE(e)).base64?sE(nE.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw tE(nE.DATA_URL,"Malformed data URL.")}return oE(e)}(n.rest),function(t){return new aE(t).contentType}(e))}var n;throw Qw()}function oE(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function sE(t,e){switch(t){case nE.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw tE(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case nE.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw tE(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(e){throw tE(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var aE=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw tE(nE.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */};var uE,cE={STATE_CHANGED:"state_changed"},hE="running",lE="pausing",fE="paused",pE="success",dE="canceling",vE="canceled",yE="error",gE={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function mE(t){switch(t){case hE:case lE:case dE:return gE.RUNNING;case fE:return gE.PAUSED;case pE:return gE.SUCCESS;case vE:return gE.CANCELED;case yE:default:return gE.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(uE||(uE={}));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var bE=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=uE.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=uE.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=uE.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw eE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw eE("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw eE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw eE("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),_E=function(){function t(){}return t.prototype.createXhrIo=function(){return new bE},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(t){return"string"==typeof t||t instanceof String}function EE(t){return IE()&&t instanceof Blob}function IE(){return"undefined"!=typeof Blob}function TE(t,e,n,r){if(r<e)throw new Nw(qw,"Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw new Nw(qw,"Invalid value for '"+t+"'. Expected "+n+" or less.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function CE(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=SE();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(IE())return new Blob(t);throw new Nw(Gw,"This browser doesn't seem to support creating Blobs")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var NE=function(){function t(t,e){var n=0,r="";EE(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(EE(this.data_)){var r=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===r?null:new t(r)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(IE()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(CE.apply(null,r))}var i=e.map((function(t){return wE(t)?iE(nE.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),AE=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(n){return new t(e,"")}if(""===n.path)return n;throw new Nw(Mw,"Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)";var i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var s="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<a.length;u++){var c=a[u],h=c.regex.exec(e);if(h){var l=h[c.indices.bucket],f=h[c.indices.path];f||(f=""),n=new t(l,f),c.postModify(n);break}}if(null==n)throw function(t){return new Nw(Lw,"Invalid URL '"+t+"'.")}(e);return n},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function kE(t){var e;try{e=JSON.parse(t)}catch(t){return null}return function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(t){return"https://firebasestorage.googleapis.com/v0"+t}function RE(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(t,e){return e}var xE=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||DE},LE=null;function ME(){if(LE)return LE;var t=[];t.push(new xE("bucket")),t.push(new xE("generation")),t.push(new xE("metageneration")),t.push(new xE("name","fullPath",!0));var e=new xE("name");e.xform=function(t,e){return function(t){return!wE(t)||t.length<2?t:PE(t)}(e)},t.push(e);var n=new xE("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new xE("timeCreated")),t.push(new xE("updated")),t.push(new xE("md5Hash",null,!0)),t.push(new xE("cacheControl",null,!0)),t.push(new xE("contentDisposition",null,!0)),t.push(new xE("contentEncoding",null,!0)),t.push(new xE("contentLanguage",null,!0)),t.push(new xE("contentType",null,!0)),t.push(new xE("metadata","customMetadata",!0)),LE=t}function FE(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new AE(n,r);return e.makeStorageReference(i)}})}(r,t),r}function UE(t,e,n){var r=kE(e);return null===r?null:FE(t,r,n)}function jE(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(t,e,n){var r=kE(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new AE(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var h=c[u];a=t.makeStorageReference(new AE(e,h.name)),r.items.push(a)}return r}(t,e,r)}var qE=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(t){if(!t)throw Qw()}function WE(t,e){return function(n,r){var i=UE(t,r,e);return BE(null!==i),i}}function HE(t,e){return function(n,r){var i=UE(t,r,e);return BE(null!==i),function(t,e){var n=kE(e);if(null===n)return null;if(!wE(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.bucket,r=t.fullPath;return OE("/b/"+i(n)+"/o/"+i(r))+RE({alt:"media",token:e})}))[0]}(i,r)}}function KE(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=new Nw(Ow,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new Nw(Pw,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new Nw(Rw,"User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function GE(t){var e=KE(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new Nw(kw,"Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function zE(t,e,n){var r=OE(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new qE(r,"GET",WE(t,n),i);return o.errorHandler=GE(e),o}function QE(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=OE(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new qE(s,"GET",function(t,e){return function(n,r){var i=VE(t,e,r);return BE(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=KE(e),u}function $E(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var YE=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function XE(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){BE(!1)}return BE(!!n&&-1!==(e||["active"]).indexOf(n)),n}function JE(t,e,n,r,i,o,s,a){var u=new YE(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Nw(jw,"Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;i>0&&(h=Math.min(h,i));var l=u.current,f=l+h,p={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(l,f);if(null===d)throw Yw();var v=e.maxUploadRetryTime,y=new qE(n,"POST",(function(t,n){var i,s=XE(t,["active","final"]),a=u.current+h,c=r.size();return i="final"===s?WE(e,o)(t,n):null,new YE(a,c,"final"===s,i)}),v);return y.headers=p,y.body=d.uploadData(),y.progressCallback=a||null,y.errorHandler=KE(t),y}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZE=function(t,e,n){if(function(t){return"function"==typeof t}(t)||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}},tI=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function eI(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nI=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=ME(),this._resumable=this._shouldDoResumable(this._blob),this._state=hE,this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t.codeEquals(xw)?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition(yE))},this._metadataErrorHandler=function(t){r._request=void 0,t.codeEquals(xw)?r.completeTransitions_():(r._error=t,r._transition(yE))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){this._state===hE&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage.getAuthToken().then((function(n){switch(e._state){case hE:t(n);break;case dE:e._transition(vE);break;case lE:e._transition(fE)}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=$E(e,r,i),a={name:s.fullPath},u=OE(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=jE(s,n),l=t.maxUploadRetryTime,f=new qE(u,"POST",(function(t){var e;XE(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){BE(!1)}return BE(wE(e)),e}),l);return f.urlParams=a,f.headers=c,f.body=h,f.errorHandler=KE(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new qE(n,"POST",(function(t){var e=XE(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){BE(!1)}n||BE(!1);var i=Number(n);return BE(!isNaN(i)),new YE(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=KE(e),o}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage.makeRequest(r,n);t._request=i,i.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new YE(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=JE(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(e){return t._error=e,void t._transition(yE)}var s=t._ref.storage.makeRequest(o,i);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition(pE)):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e){var n=zE(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition(pE)}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=$E(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+jE(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+a+"--",l=NE.getBlob(c,r,h);if(null===l)throw Yw();var f={name:u.fullPath},p=OE(o),d=t.maxUploadRetryTime,v=new qE(p,"POST",WE(t,n),d);return v.urlParams=f,v.headers=s,v.body=l.uploadData(),v.errorHandler=KE(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition(pE)}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case dE:case lE:this._state=t,void 0!==this._request&&this._request.cancel();break;case hE:var e=this._state===fE;this._state=t,e&&(this._notifyObservers(),this._start());break;case fE:this._state=t,this._notifyObservers();break;case vE:this._error=$w(),this._state=t,this._notifyObservers();break;case yE:case pE:this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case lE:this._transition(fE);break;case dE:this._transition(vE);break;case hE:this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=mE(this._state);return new tI(this._transferred,this._blob.size(),t,this._metadata,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new ZE(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(mE(this._state)){case gE.SUCCESS:eI(this._resolve.bind(null,this.snapshot))();break;case gE.CANCELED:case gE.ERROR:eI(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(mE(this._state)){case gE.RUNNING:case gE.PAUSED:t.next&&eI(t.next.bind(t,this.snapshot))();break;case gE.SUCCESS:t.complete&&eI(t.complete.bind(t))();break;case gE.CANCELED:case gE.ERROR:t.error&&eI(t.error.bind(t,this._error))();break;default:t.error&&eI(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t=this._state===fE||this._state===lE;return t&&this._transition(hE),t},t.prototype.pause=function(){var t=this._state===hE;return t&&this._transition(lE),t},t.prototype.cancel=function(){var t=this._state===hE||this._state===lE;return t&&this._transition(dE),t},t}(),rI=function(){function t(t,e){this._service=t,this._location=e instanceof AE?e:AE.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype.newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new AE(this._location.bucket,"");return this.newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return PE(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new AE(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Zw(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(t){var e={prefixes:[],items:[]};return oI(t,e).then((function(){return e}))}function oI(t,e,n){return Tw(this,void 0,void 0,(function(){var r,i,o;return Sw(this,(function(s){switch(s.label){case 0:return[4,sI(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,oI(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function sI(t,e){return Tw(this,void 0,void 0,(function(){var n,r,i;return Sw(this,(function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&TE("options.maxResults",1,1e3,e.maxResults),[4,t.storage.getAuthToken()];case 1:return n=o.sent(),r=e||{},i=QE(t.storage,t._location,"/",r.pageToken,r.maxResults),[2,t.storage.makeRequest(i,n).getPromise()]}}))}))}function aI(t,e){return Tw(this,void 0,void 0,(function(){var n,r;return Sw(this,(function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage.getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=OE(e.fullServerUrl()),o=jE(n,r),s=t.maxOperationRetryTime,a=new qE(i,"PATCH",WE(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=GE(e),a}(t.storage,t._location,e,ME()),[2,t.storage.makeRequest(r,n).getPromise()]}}))}))}function uI(t){return Tw(this,void 0,void 0,(function(){var e,n;return Sw(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=OE(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new qE(r,"GET",HE(t,n),i);return o.errorHandler=GE(e),o}(t.storage,t._location,ME()),[2,t.storage.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new Nw(Vw,"The given file does not have any download URLs.");return t}))]}}))}))}function cI(t){return Tw(this,void 0,void 0,(function(){var e,n;return Sw(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=OE(e.fullServerUrl()),r=t.maxOperationRetryTime,i=new qE(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=GE(e),i}(t.storage,t._location),[2,t.storage.makeRequest(n,e).getPromise()]}}))}))}function hI(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new AE(t._location.bucket,n);return new rI(t.storage,r)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lI=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),fI=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate),this._snapshot=new lI(this._delegate.snapshot,this,this._ref)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return this._snapshot},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new lI(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new lI(t,i,i._ref))}:{next:e.next?function(t){return e.next(new lI(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),pI=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new dI(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new dI(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),dI=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(hI(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new fI(function(t,e,n){return void 0===n&&(n=null),t._throwIfRoot("uploadBytesResumable"),new nI(t,new NE(e),n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){return void 0===e&&(e=nE.RAW),this._throwIfRoot("putString"),new fI(function(t,e,n,r){void 0===n&&(n=nE.RAW),t._throwIfRoot("putString");var i=iE(n,e),o=Iw({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new nI(t,new NE(i.data,!0),o)}(this._delegate,t,e,n),this)},t.prototype.listAll=function(){var t=this;return iI(this._delegate).then((function(e){return new pI(e,t.storage)}))},t.prototype.list=function(t){var e=this;return sI(this._delegate,t).then((function(t){return new pI(t,e.storage)}))},t.prototype.getMetadata=function(){return function(t){return Tw(this,void 0,void 0,(function(){var e,n;return Sw(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=zE(t.storage,t._location,ME()),[2,t.storage.makeRequest(n,e).getPromise()]}}))}))}(this._delegate)},t.prototype.updateMetadata=function(t){return aI(this._delegate,t)},t.prototype.getDownloadURL=function(){return uI(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),cI(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Zw(t)},t}(),vI=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var yI=function(){function t(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise((function(t,e){l.resolve_=t,l.reject_=e,l.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());!
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){return void 0!==t}(a)?i():i(a)}catch(t){o(t)}else null!==s?((r=Qw()).serverResponse=s.getResponseText(),t.errorCallback_?o(t.errorCallback_(s,r)):o(r)):n.canceled?o(r=t.appDelete_?Jw():$w()):o(r=new Nw(Dw,"Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new gI(!1,null,!0)):this.backoffId_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e,n){var r=1,i=null,o=!1,s=0;function a(){return 2===s}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function h(e){i=setTimeout((function(){i=null,t(l,a())}),e)}function l(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,Cw([null,t],e));else{var i;a()||o?c.call.apply(c,Cw([null,t],e)):(r<64&&(r*=2),1===s?(s=2,i=0):i=1e3*(r+Math.random()),h(i))}}var f=!1;function p(t){f||(f=!0,u||(null!==i?(t||(s=2),clearTimeout(i),h(0)):t||(s=1)))}return h(0),setTimeout((function(){o=!0,p(!0)}),n),p}((function(e,n){if(n)e(!1,new gI(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===uE.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new gI(s,n))}else{var a=n.getErrorCode()===uE.ABORT;e(!1,new gI(!1,null,a))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),gI=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function mI(t,e,n,r){var i=RE(t.urlParams),o=t.url+i,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t){var e=void 0!==Pe?Pe.SDK_VERSION:"AppManager";t["X-Firebase-Storage-Version"]="webjs/"+e}(s),new yI(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(t){return/^[A-Za-z]+:\/\//.test(t)}function _I(t,e){if(t instanceof EI){var n=t;if(null==n._bucket)throw new Nw(Fw,"No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new rI(n,n._bucket);return null!=e?_I(r,e):r}if(void 0!==e){if(e.includes(".."))throw Xw('`path` param cannot contain ".."');return hI(t,e)}return t}function wI(t,e){if(e&&bI(e)){if(t instanceof EI)return new rI(t,e);throw Xw("To use ref(service, url), the first argument must be a Storage instance.")}return _I(t,e)}var EI=function(){function t(t,e,n,r){var i,o;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?AE.makeFromBucketSpec(r):(i=this.app.options,null==(o=null==i?void 0:i.storageBucket)?null:AE.makeFromBucketSpec(o))}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){TE("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){TE("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype.getAuthToken=function(){return Tw(this,void 0,void 0,(function(){var t,e;return Sw(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype.makeStorageReference=function(t){return new rI(this,t)},t.prototype.makeRequest=function(t,e){var n=this;if(this._deleted)return new vI(Jw());var r=mI(t,this._appId,e,this._pool);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},t}(),II=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(bI(t))throw Xw("ref() expected a child path but got a URL, use refFromURL instead.");return new dI(wI(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!bI(t))throw Xw("refFromURL() expected a full URL but got a child path, use ref() instead.");try{AE.makeFromUrl(t)}catch(t){throw Xw("refFromUrl() expected a valid full URL but got an invalid one.")}return new dI(wI(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new II(n,new EI(n,r,new _E,e))}!function(t){var e={TaskState:gE,TaskEvent:cE,StringFormat:nE,Storage:EI,Reference:dI};t.INTERNAL.registerComponent(new oe("storage",TI,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.4.2")}(Pe);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var SI=function(){return(SI=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function CI(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var NI,AI,kI,PI=((NI={})["trace started"]="Trace {$traceName} was started before.",NI["trace stopped"]="Trace {$traceName} is not running.",NI["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",NI["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",NI["no window"]="Window is not available.",NI["no app id"]="App id is not available.",NI["no project id"]="Project id is not available.",NI["no api key"]="Api key is not available.",NI["invalid cc log"]="Attempted to queue invalid cc event",NI["FB not default"]="Performance can only start when Firebase app instance is the default one.",NI["RC response not ok"]="RC response is not ok",NI["invalid attribute name"]="Attribute name {$attributeName} is invalid.",NI["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",NI["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",NI["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",NI),OI=new xt("performance","Performance",PI),RI=new ge("Performance");RI.logLevel=he.INFO;var DI,xI=function(){function t(t){if(this.window=t,!t)throw OI.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Pt()||(RI.info("IndexedDB is not supported by current browswer"),!1):(RI.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}})).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===AI&&(AI=new t(kI)),AI},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function LI(t,e){var n=t.length-e.length;if(n<0||n>1)throw OI.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var MI,FI,UI=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=LI("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=LI("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw OI.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw OI.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw OI.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===DI&&(DI=new t),DI},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(){return MI}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"}(FI||(FI={}));var VI=["firebase_","google_","ga_"],qI=new RegExp("^[a-zA-Z]\\w*$");function BI(){var t=xI.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function WI(){switch(xI.getInstance().document.visibilityState){case"visible":return FI.VISIBLE;case"hidden":return FI.HIDDEN;default:return FI.UNKNOWN}}function HI(){var t=xI.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var KI=!0;function GI(t){var e=function(){var t=xI.getInstance().localStorage;if(!t)return;var e=t.getItem("@firebase/performance/configexpire");if(!(e&&(n=e,Number(n)>Date.now())))return;var n;var r=t.getItem("@firebase/performance/config");if(!r)return;try{return JSON.parse(r)}catch(t){return}}();return e?(zI(e),Promise.resolve()):function(t){return(e=UI.getInstance().installationsService.getToken(),e.then((function(t){})),e).then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+UI.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+UI.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:UI.getInstance().getAppId(),app_version:"0.4.5",sdk_version:"0.0.1"})});return fetch(r).then((function(t){if(t.ok)return t.json();throw OI.create("RC response not ok")}))})).catch((function(){RI.info("Could not fetch config, will use default configs")}));var e;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(t).then(zI).then((function(t){return function(t){var e=xI.getInstance().localStorage;if(!t||!e)return;e.setItem("@firebase/performance/config",JSON.stringify(t)),e.setItem("@firebase/performance/configexpire",String(Date.now()+60*UI.getInstance().configTimeToLive*60*1e3))}(t)}),(function(){}))}function zI(t){if(!t)return t;var e=UI.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=KI,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=QI(e.tracesSamplingRate),e.logNetworkAfterSampling=QI(e.networkRequestsSamplingRate),t}function QI(t){return Math.random()<=t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $I,YI=1;function XI(){return YI=2,$I=$I||function(){var t=xI.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}().then((function(){return(t=UI.getInstance().installationsService.getId()).then((function(t){MI=t})),t;var t})).then((function(t){return GI(t)})).then((function(){return JI()}),(function(){return JI()}))}function JI(){YI=3}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZI,tT=3,eT=[],nT=!1;function rT(t){setTimeout((function(){var t,e;if(0!==tT)return eT.length?(t=eT.splice(0,1e3),e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),void function(t,e){return function(t){var e=UI.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then((function(t){return t.ok||RI.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=1e4;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(eT=CI(e,eT),RI.info("Retry transport request later.")),tT=3,rT(r)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:UI.getInstance().logSource,log_event:e},t).catch((function(){eT=CI(t,eT),tT--,RI.info("Tries left: "+tT+"."),rT(1e4)}))):rT(1e4)}),t)}function iT(t){if(!t.eventTime||!t.message)throw OI.create("invalid cc log");eT=CI(eT,[t])}function oT(t,e){ZI||(ZI=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];iT({message:t.apply(void 0,e),eventTime:Date.now()})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(uT)),ZI(t,e)}function sT(t){var e=UI.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&xI.getInstance().requiredApisAvailable()&&(t.isAuto&&WI()!==FI.VISIBLE||(3===YI?aT(t):XI().then((function(){return aT(t)}),(function(){return aT(t)}))))}function aT(t){if(jI()){var e=UI.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return oT(t,1)}),0)}}function uT(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:cT(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:cT(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function cT(){return{google_app_id:UI.getInstance().getAppId(),app_instance_id:jI(),web_app_info:{sdk_version:"0.4.5",page_url:xI.getInstance().getUrl(),service_worker_status:BI(),visibility_state:WI(),effective_connection_type:HI()},application_process_state:0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hT=["_fp","_fcp","_fid"];
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var lT=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=xI.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw OI.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw OI.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),sT(this)},t.prototype.record=function(t,e,n){if(t<=0)throw OI.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw OI.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=SI({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}sT(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(!function(t,e){return!(0===t.length||t.length>100)&&(e&&e.startsWith("_wt_")&&hT.indexOf(t)>-1||!t.startsWith("_"))}(t,this.name))throw OI.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(n=e,(r=Math.floor(n))<n&&RI.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n=function(t){return!(0===t.length||t.length>40||VI.some((function(e){return t.startsWith(e)}))||!t.match(qI))}(t),r=function(t){return 0!==t.length&&t.length<=100}(e);if(n&&r)this.customAttributes[t]=e;else{if(!n)throw OI.create("invalid attribute name",{attributeName:t});if(!r)throw OI.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return SI({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=xI.getInstance().getUrl();if(i){var o=new t("_wt_"+i,!0),s=Math.floor(1e3*xI.getInstance().getTimeOrigin());o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));if(n){var a=n.find((function(t){return"first-paint"===t.name}));a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var u=n.find((function(t){return"first-contentful-paint"===t.name}));u&&u.startTime&&o.putMetric("_fcp",Math.floor(1e3*u.startTime)),r&&o.putMetric("_fid",Math.floor(1e3*r))}sT(o)}},t.createUserTimingTrace=function(e){sT(new t(e,!1,e))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t){var e=t;if(e&&void 0!==e.responseStart){var n=xI.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=UI.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return oT(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(){jI()&&(setTimeout((function(){return function(){var t=xI.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){lT.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),lT.createOobTrace(e,n,t))}))}else lT.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=xI.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){fT(r[n])}t.setupObserver("resource",fT)}()}),0),setTimeout((function(){return function(){for(var t=xI.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){dT(r[n])}t.setupObserver("measure",dT)}()}),0))}function dT(t){var e=t.name;"FB-PERF-TRACE-MEASURE"!==e.substring(0,"FB-PERF-TRACE-MEASURE".length)&&lT.createUserTimingTrace(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vT=function(){function t(t){this.app=t,xI.getInstance().requiredApisAvailable()&&Ot().then((function(t){t&&(nT||(rT(5500),nT=!0),XI().then(pT,pT))})).catch((function(t){RI.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new lT(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return UI.getInstance().instrumentationEnabled},set:function(t){UI.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return UI.getInstance().dataCollectionEnabled},set:function(t){UI.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){var e=function(t,e){if("[DEFAULT]"!==t.name)throw OI.create("FB not default");if("undefined"==typeof window)throw OI.create("no window");return function(t){kI=t}(window),UI.getInstance().firebaseAppInstance=t,UI.getInstance().installationsService=e,new vT(t)};t.INTERNAL.registerComponent(new oe("performance",(function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();return e(n,r)}),"PUBLIC")),t.registerVersion("@firebase/performance","0.4.5")}(Pe);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var yT=function(){return(yT=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function gT(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function mT(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bT,_T,wT="https://www.googletagmanager.com/gtag/js";!function(t){t.EVENT="event",t.SET="set",t.CONFIG="config"}(bT||(bT={})),function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"}(_T||(_T={}));
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ET,IT=new ge("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t,e,n,r,i,o){return gT(this,void 0,void 0,(function(){var s,a,u,c;return mT(this,(function(h){switch(h.label){case 0:s=r[i],h.label=1;case 1:return h.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return h.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=h.sent(),(u=a.find((function(t){return t.measurementId===i})))?[4,e[u.appId]]:[3,6];case 5:h.sent(),h.label=6;case 6:return[3,8];case 7:return c=h.sent(),IT.error(c),[3,8];case 8:return t(bT.CONFIG,i,o),[2]}}))}))}function ST(t,e,n,r,i){return gT(this,void 0,void 0,(function(){var o,s,a,u,c,h,l,f;return mT(this,(function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),o=[],i&&i.send_to?(s=i.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=p.sent(),u=function(t){var n=a.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,h=s;c<h.length&&(l=h[c],"break"!==u(l));c++);p.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return p.sent(),t(bT.EVENT,r,i||{}),[3,5];case 4:return f=p.sent(),IT.error(f),[3,5];case 5:return[2]}}))}))}function CT(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,s){return gT(this,void 0,void 0,(function(){var a;return mT(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==bT.EVENT?[3,2]:[4,ST(t,e,n,o,s)];case 1:return u.sent(),[3,5];case 2:return i!==bT.CONFIG?[3,4]:[4,TT(t,e,n,r,o,s)];case 3:return u.sent(),[3,5];case 4:t(bT.SET,o),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),IT.error(a),[3,7];case 7:return[2]}}))}))}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}var NT=((ET={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",ET["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",ET["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",ET["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",ET["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",ET["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",ET["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",ET["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',ET["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',ET),AT=new xt("analytics","Analytics",NT),kT=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function PT(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function OT(t){var e;return gT(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return mT(this,(function(c){switch(c.label){case 0:return n=t.appId,r=t.apiKey,i={method:"GET",headers:PT(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(o,i)];case 1:if(200===(s=c.sent()).status||304===s.status)return[3,6];a="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,s.json()];case 3:return u=c.sent(),(null===(e=u.error)||void 0===e?void 0:e.message)&&(a=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw AT.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a});case 6:return[2,s.json()]}}))}))}function RT(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=kT),gT(this,void 0,void 0,(function(){var e,s,a,u,c,h,l;return mT(this,(function(f){switch(f.label){case 0:e=t.appId,s=t.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,DT(n,i)];case 2:return f.sent(),[3,4];case 3:if(a=f.sent(),s)return IT.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:e,measurementId:s}];throw a;case 4:return f.trys.push([4,6,,7]),[4,OT(t)];case 5:return u=f.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof Dt&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c=f.sent())){if(r.deleteThrottleMetadata(e),s)return IT.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:s}];throw c}return h=503===Number(c.customData.httpStatus)?Zt(o,r.intervalMillis,30):Zt(o,r.intervalMillis),l={throttleEndTimeMillis:Date.now()+h,backoffCount:o+1},r.setThrottleMetadata(e,l),IT.debug("Calling attemptFetch again in "+h+" millis"),[2,RT(t,l,n,r)];case 7:return[2]}}))}))}function DT(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(AT.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var xT=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(t,e,n,r,i){return gT(this,void 0,void 0,(function(){var o,s,a,u,c,h,l;return mT(this,(function(f){switch(f.label){case 0:return(o=function(t,e,n){return void 0===e&&(e=kT),gT(this,void 0,void 0,(function(){var r,i,o,s,a,u,c=this;return mT(this,(function(h){if(r=t.options,i=r.appId,o=r.apiKey,s=r.measurementId,!i)throw AT.create("no-app-id");if(!o){if(s)return[2,{measurementId:s,appId:i}];throw AT.create("no-api-key")}return a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new xT,setTimeout((function(){return gT(c,void 0,void 0,(function(){return mT(this,(function(t){return u.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,RT({appId:i,apiKey:o,measurementId:s},a,u,e)]}))}))}(t)).then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&IT.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return IT.error(t)})),e.push(o),s=function(){return gT(this,void 0,void 0,(function(){var t;return mT(this,(function(e){switch(e.label){case 0:return Pt()?[3,1]:(IT.warn(AT.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Ot()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),IT.warn(AT.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([o,s])];case 1:return a=f.sent(),u=a[0],c=a[1],i("js",new Date),(l={}).origin="firebase",l.update=!0,h=l,null!=c&&(h.firebase_id=c),i(bT.CONFIG,u.measurementId,h),[2,u.measurementId]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var MT,FT,UT={},jT=[],VT={},qT="dataLayer",BT="gtag",WT=!1;function HT(t){if(WT)throw AT.create("already-initialized");t.dataLayerName&&(qT=t.dataLayerName),t.gtagName&&(BT=t.gtagName)}function KT(t,e){!function(){var t=[];if(Nt()&&t.push("This is a browser extension environment."),Rt()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=AT.create("invalid-analytics-context",{errorInfo:e});IT.warn(n.message)}}();var n=t.options.appId;if(!n)throw AT.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw AT.create("no-api-key");IT.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=UT[n])throw AT.create("already-exists",{id:n});if(!WT){(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(wT))return r}return null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)()||function(t){var e=document.createElement("script");e.src=wT+"?l="+t,e.async=!0,document.head.appendChild(e)}(qT),function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(qT);var r=CT(UT,jT,VT,qT,BT),i=r.wrappedGtag,o=r.gtagCore;FT=i,MT=o,WT=!0}return UT[n]=LT(t,jT,VT,e,MT),{app:t,logEvent:function(t,e,r){(
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e,n,r,i){return gT(this,void 0,void 0,(function(){var o,s;return mT(this,(function(a){switch(a.label){case 0:return i&&i.global?(t(bT.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=yT(yT({},r),{send_to:o}),t(bT.EVENT,n,s),a.label=3;case 3:return[2]}}))}))})(FT,UT[n],t,e,r).catch((function(t){return IT.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return gT(this,void 0,void 0,(function(){var i;return mT(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(bT.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(bT.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(FT,UT[n],t,e).catch((function(t){return IT.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return gT(this,void 0,void 0,(function(){var i;return mT(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(bT.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(bT.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(FT,UT[n],t,e).catch((function(t){return IT.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return gT(this,void 0,void 0,(function(){var i,o,s,a,u;return mT(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,s=Object.keys(n);o<s.length;o++)a=s[o],i["user_properties."+a]=n[a];return t(bT.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(bT.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(FT,UT[n],t,e).catch((function(t){return IT.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return gT(this,void 0,void 0,(function(){var n;return mT(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(UT[n],t).catch((function(t){return IT.error(t)}))},INTERNAL:{delete:function(){return delete UT[n],Promise.resolve()}}}}function GT(){return gT(this,void 0,void 0,(function(){return mT(this,(function(t){switch(t.label){case 0:if(Nt())return[2,!1];if(!Rt())return[2,!1];if(!Pt())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Ot()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */!function(t){t.INTERNAL.registerComponent(new oe("analytics",(function(t){return KT(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:HT,EventName:_T,isSupported:GT})),t.INTERNAL.registerComponent(new oe("analytics-internal",(function(t){try{return{logEvent:t.getProvider("analytics").getImmediate().logEvent}}catch(t){throw AT.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.2")}(Pe);var zT=function(){return(zT=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function QT(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function $T(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var YT,XT=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return QT(this,void 0,void 0,(function(){var e,n,r,i,o;return $T(this,(function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}}))}))},t}(),JT=((YT={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",YT["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",YT["registration-api-key"]="Undefined API key. Check Firebase app initialization.",YT["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",YT["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",YT["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",YT["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",YT["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",YT["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",YT["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',YT["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',YT["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",YT["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",YT),ZT=new xt("remoteconfig","Remote Config",JT);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var tS=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return QT(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c,h,l,f,p,d,v,y,g,m,b;return $T(this,(function(_){switch(_.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=_.sent(),n=e[0],r=e[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===w&&(w=navigator),w.languages&&w.languages[0]||w.language)},u={method:"POST",headers:s,body:JSON.stringify(a)},c=fetch(o,u),h=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),_.label=2;case 2:return _.trys.push([2,5,,6]),[4,Promise.race([c,h])];case 3:return _.sent(),[4,c];case 4:return l=_.sent(),[3,6];case 5:throw f=_.sent(),p="fetch-client-network","AbortError"===f.name&&(p="fetch-timeout"),ZT.create(p,{originalErrorMessage:f.message});case 6:if(d=l.status,v=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];m=void 0,_.label=7;case 7:return _.trys.push([7,9,,10]),[4,l.json()];case 8:return m=_.sent(),[3,10];case 9:throw b=_.sent(),ZT.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:y=m.entries,g=m.state,_.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===g?d=500:"NO_CHANGE"===g?d=304:"NO_TEMPLATE"!==g&&"EMPTY_CONFIG"!==g||(y={}),304!==d&&200!==d)throw ZT.create("fetch-status",{httpStatus:d});return[2,{status:d,eTag:v,config:y}]}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var w}))}))},t}(),eS=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),nS=["1","true","t","yes","y","on"],rS=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&nS.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),iS=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=he.DEBUG;break;case"silent":this._logger.logLevel=he.SILENT;break;default:this._logger.logLevel=he.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return QT(this,void 0,void 0,(function(){var t,e,n;return $T(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return QT(this,void 0,void 0,(function(){var t,e,n,r=this;return $T(this,(function(i){switch(i.label){case 0:t=new eS,setTimeout((function(){return QT(r,void 0,void 0,(function(){return $T(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof Dt&&-1!==t.code.indexOf(e)}(e,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}}))}))},t.prototype.fetchAndActivate=function(){return QT(this,void 0,void 0,(function(){return $T(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(zT(zT({},t),e))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new rS("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new rS("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new rS("static"))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(t,e){var n=t.target.error||void 0;return ZT.create(e,{originalErrorMessage:n&&n.message})}var sS=function(){function t(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(oS(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore("app_namespace_store",{keyPath:"compositeKey"})}}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return QT(this,void 0,void 0,(function(){var e,n=this;return $T(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction(["app_namespace_store"],"readonly").objectStore("app_namespace_store"),s=n.createCompositeKey(t);try{var a=o.get(s);a.onerror=function(t){i(oS(t,"storage-get"))},a.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(t){i(ZT.create("storage-get",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.set=function(t,e){return QT(this,void 0,void 0,(function(){var n,r=this;return $T(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var s=n.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),a=r.createCompositeKey(t);try{var u=s.put({compositeKey:a,value:e});u.onerror=function(t){o(oS(t,"storage-set"))},u.onsuccess=function(){i()}}catch(t){o(ZT.create("storage-set",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.delete=function(t){return QT(this,void 0,void 0,(function(){var e,n=this;return $T(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),s=n.createCompositeKey(t);try{var a=o.delete(s);a.onerror=function(t){i(oS(t,"storage-delete"))},a.onsuccess=function(){r()}}catch(t){i(ZT.create("storage-delete",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),aS=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return QT(this,void 0,void 0,(function(){var t,e,n,r,i,o;return $T(this,(function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=s.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function uS(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(ZT.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var cS,hS=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return QT(this,void 0,void 0,(function(){var e;return $T(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return QT(this,void 0,void 0,(function(){var e,i,o;return $T(this,(function(s){switch(s.label){case 0:return[4,uS(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof Dt&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=s.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+Zt(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}(),lS="@firebase/remote-config";(cS=Pe).INTERNAL.registerComponent(new oe("remoteConfig",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw ZT.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw ZT.create("registration-project-id");if(!s)throw ZT.create("registration-api-key");if(!a)throw ZT.create("registration-app-id");e=e||"firebase";var u=new sS(a,n.name,e),c=new aS(u),h=new ge(lS);h.logLevel=he.ERROR;var l=new tS(r,cS.SDK_VERSION,e,o,s,a),f=new hS(l,u),p=new XT(f,u,c,h),d=new iS(n,p,c,u,h);return d.ensureInitialized(),d}),"PUBLIC").setMultipleInstances(!0)),cS.registerVersion(lS,"0.1.30");
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Pe.registerVersion("firebase","8.2.0","app");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),Pe.registerVersion("firebase","8.2.0");var fS=Hb((function(t,e){!function(e){t.exports=e()}((function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(e,n,o){if("undefined"!=typeof document){"number"==typeof(o=t({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(t){}n=r.write?r.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var u in o)o[u]&&(a+="; "+u,!0!==o[u]&&(a+="="+o[u].split(";")[0]));return document.cookie=e+"="+n+a}}function s(t,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],s=0;s<o.length;s++){var a=o[s].split("="),u=a.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=e(a[0]);if(u=(r.read||r)(u,c)||e(u),n)try{u=JSON.parse(u)}catch(t){}if(i[c]=u,t===c)break}catch(t){}}return t?i[t]:i}}return i.set=o,i.get=function(t){return s(t,!1)},i.getJSON=function(t){return s(t,!0)},i.remove=function(e,n){o(e,"",t(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))}))}));const pS=ct(null),dS=ct(null);function vS(e){let n,r,i,o;return{c(){n=y("button"),r=m("Logout"),this.h()},l(t){n=T(t,"BUTTON",{class:!0});var e=I(n);r=S(e,"Logout"),e.forEach(d),this.h()},h(){E(n,"class","px-6 py-2 border border-blue-500 text-blue-500 max-w-max shadow-sm hover:shadow-md")},m(t,s){p(t,n,s),f(n,r),i||(o=w(n,"click",e[1]),i=!0)},p:t,d(t){t&&d(n),i=!1,o()}}}function yS(e){let n,r,i,o;return{c(){n=y("button"),r=m("Logout"),this.h()},l(t){n=T(t,"BUTTON",{class:!0});var e=I(n);r=S(e,"Logout"),e.forEach(d),this.h()},h(){E(n,"class","px-6 py-2 border border-blue-500 text-blue-500 max-w-max shadow-sm hover:shadow-md")},m(t,s){p(t,n,s),f(n,r),i||(o=w(n,"click",e[1]),i=!0)},p:t,d(t){t&&d(n),i=!1,o()}}}function gS(e){let n,r,i,o,s,a,u,c,h,l,v,g,_,w,N,A,P,O,R,D,x,L=e[0]&&vS(e),M=e[0]&&yS(e);return{c(){n=y("header"),r=y("div"),i=y("a"),o=y("img"),a=b(),u=y("div"),c=y("nav"),h=y("ul"),L&&L.c(),l=b(),v=y("div"),g=y("a"),_=m("..."),w=b(),N=y("div"),A=y("nav"),P=y("ul"),M&&M.c(),O=b(),R=y("div"),D=y("a"),x=m("..."),this.h()},l(t){n=T(t,"HEADER",{class:!0});var e=I(n);r=T(e,"DIV",{class:!0});var s=I(r);i=T(s,"A",{href:!0});var f=I(i);o=T(f,"IMG",{alt:!0,src:!0,class:!0}),f.forEach(d),s.forEach(d),a=C(e),u=T(e,"DIV",{class:!0,id:!0});var p=I(u);c=T(p,"NAV",{});var y=I(c);h=T(y,"UL",{class:!0});var m=I(h);L&&L.l(m),m.forEach(d),l=C(y),v=T(y,"DIV",{style:!0});var b=I(v);g=T(b,"A",{href:!0});var E=I(g);_=S(E,"..."),E.forEach(d),b.forEach(d),y.forEach(d),p.forEach(d),w=C(e),N=T(e,"DIV",{class:!0});var k=I(N);A=T(k,"NAV",{});var F=I(A);P=T(F,"UL",{class:!0});var U=I(P);M&&M.l(U),U.forEach(d),O=C(F),R=T(F,"DIV",{style:!0});var j=I(R);D=T(j,"A",{href:!0});var V=I(D);x=S(V,"..."),V.forEach(d),j.forEach(d),F.forEach(d),k.forEach(d),e.forEach(d),this.h()},h(){E(o,"alt","logo"),o.src!==(s="daysLogoMini.png")&&E(o,"src","daysLogoMini.png"),E(o,"class","h-20 pt-6"),E(i,"href","/"),E(r,"class","flex-1 flex justify-between items-center"),E(h,"class","lg:flex items-center justify-between text-base text-gray-700 pt-4 lg:pt-0"),E(g,"href","/dashboard"),k(v,"visibility","hidden"),k(v,"position","absolute"),E(u,"class","hidden lg:flex lg:items-center lg:w-auto w-full"),E(u,"id","menu"),E(P,"class","flex"),E(D,"href","/dashboard"),k(R,"visibility","hidden"),k(R,"position","absolute"),E(N,"class","visible lg:invisible"),E(n,"class","lg:px-16 px-6 bg-white flex flex-wrap items-center lg:py-0 py-2")},m(t,e){p(t,n,e),f(n,r),f(r,i),f(i,o),f(n,a),f(n,u),f(u,c),f(c,h),L&&L.m(h,null),f(c,l),f(c,v),f(v,g),f(g,_),f(n,w),f(n,N),f(N,A),f(A,P),M&&M.m(P,null),f(A,O),f(A,R),f(R,D),f(D,x)},p(t,[e]){t[0]?L?L.p(t,e):(L=vS(t),L.c(),L.m(h,null)):L&&(L.d(1),L=null),t[0]?M?M.p(t,e):(M=yS(t),M.c(),M.m(P,null)):M&&(M.d(1),M=null)},i:t,o:t,d(t){t&&d(n),L&&L.d(),M&&M.d()}}}function mS(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))};let i=null;pS.subscribe((t=>{n(0,i=t)}));return[i,()=>r(void 0,void 0,void 0,(function*(){yield Pe.auth().signOut(),pS.set(null),nC("/")}))]}class bS extends at{constructor(t){super(),st(this,t,mS,gS,s,{})}}function _S(t){let e,n,r,i;e=new bS({});const o=t[2].default,s=function(t,e,n,r){if(t){const i=u(t,e,n,r);return t[0](i)}}(o,t,t[1],null);return{c(){et(e.$$.fragment),n=b(),r=y("main"),s&&s.c(),this.h()},l(t){nt(e.$$.fragment,t),n=C(t),r=T(t,"MAIN",{class:!0});var i=I(r);s&&s.l(i),i.forEach(d),this.h()},h(){E(r,"class","svelte-hsbc7i")},m(t,o){rt(e,t,o),p(t,n,o),p(t,r,o),s&&s.m(r,null),i=!0},p(t,[e]){s&&s.p&&2&e&&c(s,o,t,t[1],e,null,null)},i(t){i||(X(e.$$.fragment,t),X(s,t),i=!0)},o(t){J(e.$$.fragment,t),J(s,t),i=!1},d(t){it(e,t),t&&d(n),t&&d(r),s&&s.d(t)}}}function wS(t,e,n){let r,{$$slots:i={},$$scope:o}=e;var s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))};const{session:u}=mC();return a(t,u,(t=>n(3,r=t))),x((()=>s(void 0,void 0,void 0,(function*(){Pe.auth().onIdTokenChanged((t=>s(void 0,void 0,void 0,(function*(){try{if(!t||!t.emailVerified)return fS.set("token",!1),l(u,r.user=!1,r),pS.set(null),void dS.set(null);const e=yield t.getIdToken();pS.set(e),dS.set(t.uid),l(u,r.user=e,r),fS.set("token",e),window.timeoutId=setTimeout((()=>Pe.auth().currentUser?Pe.auth().currentUser.getIdToken(!0):null),33e5)}catch(t){fS.set("token",!1),l(u,r.user=!1,r)}}))))})))),t.$$set=t=>{"$$scope"in t&&n(1,o=t.$$scope)},[u,o,i]}class ES extends at{constructor(t){super(),st(this,t,wS,_S,s,{})}}function IS(t){let e,n,r=t[1].stack+"";return{c(){e=y("pre"),n=m(r)},l(t){e=T(t,"PRE",{});var i=I(e);n=S(i,r),i.forEach(d)},m(t,r){p(t,e,r),f(e,n)},p(t,e){2&e&&r!==(r=t[1].stack+"")&&N(n,r)},d(t){t&&d(e)}}}function TS(e){let n,r,i,o,s,a,u,c,h,l=e[1].message+"";document.title=n=e[0];let v=e[2]&&e[1].stack&&IS(e);return{c(){r=b(),i=y("h1"),o=m(e[0]),s=b(),a=y("p"),u=m(l),c=b(),v&&v.c(),h=_(),this.h()},l(t){P('[data-svelte="svelte-1o9r2ue"]',document.head).forEach(d),r=C(t),i=T(t,"H1",{class:!0});var n=I(i);o=S(n,e[0]),n.forEach(d),s=C(t),a=T(t,"P",{class:!0});var f=I(a);u=S(f,l),f.forEach(d),c=C(t),v&&v.l(t),h=_(),this.h()},h(){E(i,"class","svelte-q86zst"),E(a,"class","svelte-q86zst")},m(t,e){p(t,r,e),p(t,i,e),f(i,o),p(t,s,e),p(t,a,e),f(a,u),p(t,c,e),v&&v.m(t,e),p(t,h,e)},p(t,[e]){1&e&&n!==(n=t[0])&&(document.title=n),1&e&&N(o,t[0]),2&e&&l!==(l=t[1].message+"")&&N(u,l),t[2]&&t[1].stack?v?v.p(t,e):(v=IS(t),v.c(),v.m(h.parentNode,h)):v&&(v.d(1),v=null)},i:t,o:t,d(t){t&&d(r),t&&d(i),t&&d(s),t&&d(a),t&&d(c),v&&v.d(t),t&&d(h)}}}function SS(t,e,n){let{status:r}=e,{error:i}=e;return t.$$set=t=>{"status"in t&&n(0,r=t.status),"error"in t&&n(1,i=t.error)},[r,i,false]}class CS extends at{constructor(t){super(),st(this,t,SS,TS,s,{status:0,error:1})}}function NS(t){let n,r,i;const o=[t[4].props];var s=t[4].component;function a(t){let n={};for(let t=0;t<o.length;t+=1)n=e(n,o[t]);return{props:n}}return s&&(n=new s(a())),{c(){n&&et(n.$$.fragment),r=_()},l(t){n&&nt(n.$$.fragment,t),r=_()},m(t,e){n&&rt(n,t,e),p(t,r,e),i=!0},p(t,e){const i=16&e?Z(o,[tt(t[4].props)]):{};if(s!==(s=t[4].component)){if(n){$();const t=n;J(t.$$.fragment,1,0,(()=>{it(t,1)})),Y()}s?(n=new s(a()),et(n.$$.fragment),X(n.$$.fragment,1),rt(n,r.parentNode,r)):n=null}else s&&n.$set(i)},i(t){i||(n&&X(n.$$.fragment,t),i=!0)},o(t){n&&J(n.$$.fragment,t),i=!1},d(t){t&&d(r),n&&it(n,t)}}}function AS(t){let e,n;return e=new CS({props:{error:t[0],status:t[1]}}),{c(){et(e.$$.fragment)},l(t){nt(e.$$.fragment,t)},m(t,r){rt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.error=t[0]),2&n&&(r.status=t[1]),e.$set(r)},i(t){n||(X(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function kS(t){let e,n,r,i;const o=[AS,NS],s=[];function a(t,e){return t[0]?0:1}return e=a(t),n=s[e]=o[e](t),{c(){n.c(),r=_()},l(t){n.l(t),r=_()},m(t,n){s[e].m(t,n),p(t,r,n),i=!0},p(t,i){let u=e;e=a(t),e===u?s[e].p(t,i):($(),J(s[u],1,1,(()=>{s[u]=null})),Y(),n=s[e],n?n.p(t,i):(n=s[e]=o[e](t),n.c()),X(n,1),n.m(r.parentNode,r))},i(t){i||(X(n),i=!0)},o(t){J(n),i=!1},d(t){s[e].d(t),t&&d(r)}}}function PS(t){let n,r;const i=[{segment:t[2][0]},t[3].props];let o={$$slots:{default:[kS]},$$scope:{ctx:t}};for(let t=0;t<i.length;t+=1)o=e(o,i[t]);return n=new ES({props:o}),{c(){et(n.$$.fragment)},l(t){nt(n.$$.fragment,t)},m(t,e){rt(n,t,e),r=!0},p(t,[e]){const r=12&e?Z(i,[4&e&&{segment:t[2][0]},8&e&&tt(t[3].props)]):{};147&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){r||(X(n.$$.fragment,t),r=!0)},o(t){J(n.$$.fragment,t),r=!1},d(t){it(n,t)}}}function OS(t,e,n){let{stores:r}=e,{error:i}=e,{status:o}=e,{segments:s}=e,{level0:a}=e,{level1:u=null}=e,{notify:c}=e;var h,l;return function(t){D().$$.after_update.push(t)}(c),h=ht,l=r,D().$$.context.set(h,l),t.$$set=t=>{"stores"in t&&n(5,r=t.stores),"error"in t&&n(0,i=t.error),"status"in t&&n(1,o=t.status),"segments"in t&&n(2,s=t.segments),"level0"in t&&n(3,a=t.level0),"level1"in t&&n(4,u=t.level1),"notify"in t&&n(6,c=t.notify)},[i,o,s,a,u,r,c]}class RS extends at{constructor(t){super(),st(this,t,OS,PS,s,{stores:5,error:0,status:1,segments:2,level0:3,level1:4,notify:6})}}const DS=[/^\/blog\.json$/,/^\/blog\/([^\/]+?)\.json$/],xS=[{js:()=>Promise.all([import("./index.a2738179.js"),__inject_styles(["client-9b2def09.css","Spinner-08a9287b.css","index-1d91da45.css"])]).then((function(t){return t[0]}))},{js:()=>Promise.all([import("./index.4c984b6f.js"),__inject_styles(["client-9b2def09.css","index-433fb17b.css"])]).then((function(t){return t[0]}))},{js:()=>Promise.all([import("./[id].090c2782.js"),__inject_styles(["client-9b2def09.css"])]).then((function(t){return t[0]}))},{js:()=>Promise.all([import("./index.41f64d62.js"),__inject_styles(["client-9b2def09.css","Spinner-08a9287b.css","index-3722f625.css"])]).then((function(t){return t[0]}))},{js:()=>Promise.all([import("./[id].506e1a3c.js"),__inject_styles(["client-9b2def09.css"])]).then((function(t){return t[0]}))},{js:()=>Promise.all([import("./index.9831e239.js"),__inject_styles(["client-9b2def09.css"])]).then((function(t){return t[0]}))},{js:()=>Promise.all([import("./about.59cce534.js"),__inject_styles(["client-9b2def09.css"])]).then((function(t){return t[0]}))},{js:()=>Promise.all([import("./index.6bf99881.js"),__inject_styles(["client-9b2def09.css","index-feeec1db.css"])]).then((function(t){return t[0]}))},{js:()=>Promise.all([import("./[slug].c298e9fa.js"),__inject_styles(["client-9b2def09.css","[slug]-0ffc3639.css"])]).then((function(t){return t[0]}))}],LS=(MS=decodeURIComponent,[{pattern:/^\/$/,parts:[{i:0}]},{pattern:/^\/dashboard\/?$/,parts:[{i:1}]},{pattern:/^\/multiple\/([^\/]+?)\/?$/,parts:[null,{i:2,params:t=>({id:MS(t[1])})}]},{pattern:/^\/register\/?$/,parts:[{i:3}]},{pattern:/^\/logger\/([^\/]+?)\/?$/,parts:[null,{i:4,params:t=>({id:MS(t[1])})}]},{pattern:/^\/single\/?$/,parts:[{i:5}]},{pattern:/^\/about\/?$/,parts:[{i:6}]},{pattern:/^\/blog\/?$/,parts:[{i:7}]},{pattern:/^\/blog\/([^\/]+?)\/?$/,parts:[null,{i:8,params:t=>({slug:MS(t[1])})}]}]);var MS;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function FS(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function US(t){for(;t&&"A"!==t.nodeName.toUpperCase();)t=t.parentNode;return t}let jS,VS=1;const qS="undefined"!=typeof history?history:{pushState:()=>{},replaceState:()=>{},scrollRestoration:"auto"},BS={};let WS,HS;function KS(t){const e=Object.create(null);return t.length>0&&t.slice(1).split("&").forEach((t=>{const[,n,r=""]=/([^=]*)(?:=(.*))?/.exec(decodeURIComponent(t.replace(/\+/g," ")));"string"==typeof e[n]&&(e[n]=[e[n]]),"object"==typeof e[n]?e[n].push(r):e[n]=r})),e}function GS(t){if(t.origin!==location.origin)return null;if(!t.pathname.startsWith(WS))return null;let e=t.pathname.slice(WS.length);if(""===e&&(e="/"),!DS.some((t=>t.test(e))))for(let n=0;n<LS.length;n+=1){const r=LS[n],i=r.pattern.exec(e);if(i){const n=KS(t.search),o=r.parts[r.parts.length-1],s=o.params?o.params(i):{},a={host:location.host,path:e,query:n,params:s};return{href:t.href,route:r,match:i,page:a}}}}function zS(t){if(1!==function(t){return null===t.which?t.button:t.which}(t))return;if(t.metaKey||t.ctrlKey||t.shiftKey||t.altKey)return;if(t.defaultPrevented)return;const e=US(t.target);if(!e)return;if(!e.href)return;const n="object"==typeof e.href&&"SVGAnimatedString"===e.href.constructor.name,r=String(n?e.href.baseVal:e.href);if(r===location.href)return void(location.hash||t.preventDefault());if(e.hasAttribute("download")||"external"===e.getAttribute("rel"))return;if(n?e.target.baseVal:e.target)return;const i=new URL(r);if(i.pathname===location.pathname&&i.search===location.search)return;const o=GS(i);if(o){YS(o,null,e.hasAttribute("sapper:noscroll"),i.hash),t.preventDefault(),qS.pushState({id:jS},"",i.href)}}function QS(){return{x:pageXOffset,y:pageYOffset}}function $S(t){if(BS[jS]=QS(),t.state){const e=GS(new URL(location.href));e?YS(e,t.state.id):location.href=location.href}else!function(t){VS=t}(VS+1),function(t){jS=t}(VS),qS.replaceState({id:jS},"",location.href)}function YS(t,e,n,r){return FS(this,void 0,void 0,(function*(){const i=!!e;if(i)jS=e;else{const t=QS();BS[jS]=t,jS=e=++VS,BS[jS]=n?t:{x:0,y:0}}if(yield HS(t),document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),!n){let t,n=BS[e];r&&(t=document.getElementById(r.slice(1)),t&&(n={x:0,y:t.getBoundingClientRect().top+scrollY})),BS[jS]=n,i||t?scrollTo(n.x,n.y):scrollTo(0,0)}}))}function XS(t){let e=t.baseURI;if(!e){const n=t.getElementsByTagName("base");e=n.length?n[0].href:t.URL}return e}let JS,ZS=null;function tC(t){const e=US(t.target);e&&"prefetch"===e.rel&&function(t){const e=GS(new URL(t,XS(document)));if(e)ZS&&t===ZS.href||(ZS={href:t,promise:gC(e)}),ZS.promise}(e.href)}function eC(t){clearTimeout(JS),JS=setTimeout((()=>{tC(t)}),20)}function nC(t,e={noscroll:!1,replaceState:!1}){const n=GS(new URL(t,XS(document)));return n?(qS[e.replaceState?"replaceState":"pushState"]({id:jS},"",t),YS(n,null,e.noscroll)):(location.href=t,new Promise((()=>{})))}const rC="undefined"!=typeof __SAPPER__&&__SAPPER__;let iC,oC,sC,aC=!1,uC=[],cC="{}";const hC={page:function(t){const e=ct(t);let n=!0;return{notify:function(){n=!0,e.update((t=>t))},set:function(t){n=!1,e.set(t)},subscribe:function(t){let r;return e.subscribe((e=>{(void 0===r||n&&e!==r)&&t(r=e)}))}}}({}),preloading:ct(null),session:ct(rC&&rC.session)};let lC,fC,pC;function dC(t,e){const{error:n}=t;return Object.assign({error:n},e)}function vC(t){return FS(this,void 0,void 0,(function*(){iC&&hC.preloading.set(!0);const e=function(t){return ZS&&ZS.href===t.href?ZS.promise:gC(t)}(t),n=oC={},r=yield e,{redirect:i}=r;if(n===oC)if(i)yield nC(i.location,{replaceState:!0});else{const{props:e,branch:n}=r;yield yC(n,e,dC(e,t.page))}}))}function yC(t,e,n){return FS(this,void 0,void 0,(function*(){hC.page.set(n),hC.preloading.set(!1),iC?iC.$set(e):(e.stores={page:{subscribe:hC.page.subscribe},preloading:{subscribe:hC.preloading.subscribe},session:hC.session},e.level0={props:yield sC},e.notify=hC.page.notify,iC=new RS({target:pC,props:e,hydrate:!0})),uC=t,cC=JSON.stringify(n.query),aC=!0,fC=!1}))}function gC(t){return FS(this,void 0,void 0,(function*(){const{route:e,page:n}=t,r=n.path.split("/").filter(Boolean);let i=null;const o={error:null,status:200,segments:[r[0]]},s={fetch:(t,e)=>fetch(t,e),redirect:(t,e)=>{if(i&&(i.statusCode!==t||i.location!==e))throw new Error("Conflicting redirects");i={statusCode:t,location:e}},error:(t,e)=>{o.error="string"==typeof e?new Error(e):e,o.status=t}};if(!sC){const t=()=>({});sC=rC.preloaded[0]||t.call(s,{host:n.host,path:n.path,query:n.query,params:{}},lC)}let a,u=1;try{const i=JSON.stringify(n.query),c=e.pattern.exec(n.path);let h=!1;a=yield Promise.all(e.parts.map(((e,a)=>FS(this,void 0,void 0,(function*(){const l=r[a];if(function(t,e,n,r){if(r!==cC)return!0;const i=uC[t];return!!i&&(e!==i.segment||!(!i.match||JSON.stringify(i.match.slice(1,t+2))===JSON.stringify(n.slice(1,t+2)))||void 0)}(a,l,c,i)&&(h=!0),o.segments[u]=r[a+1],!e)return{segment:l};const f=u++;if(!fC&&!h&&uC[a]&&uC[a].part===e.i)return uC[a];h=!1;const{default:p,preload:d}=yield xS[e.i].js();let v;return v=aC||!rC.preloaded[a+1]?d?yield d.call(s,{host:n.host,path:n.path,query:n.query,params:e.params?e.params(t.match):{}},lC):{}:rC.preloaded[a+1],o[`level${f}`]={component:p,props:v,segment:l,match:c,part:e.i}})))))}catch(t){o.error=t,o.status=500,a=[]}return{redirect:i,props:o,branch:a}}))}hC.session.subscribe((t=>FS(void 0,void 0,void 0,(function*(){if(lC=t,!aC)return;fC=!0;const e=GS(new URL(location.href)),n=oC={},{redirect:r,props:i,branch:o}=yield gC(e);n===oC&&(r?yield nC(r.location,{replaceState:!0}):yield yC(o,i,dC(i,e.page)))}))));const mC=()=>{return t=ht,D().$$.context.get(t);var t};
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Pe.registerVersion("firebase","8.2.0","app");var bC,_C,wC;Pe.initializeApp({apiKey:"AIzaSyC2cPPtO7Tn3NiM75YRLbPZJVTSVuLXFV8",authDomain:"medz-b5241.firebaseapp.com",databaseURL:"https://medz-b5241.firebaseio.com",projectId:"medz-b5241",storageBucket:"medz-b5241.appspot.com",messagingSenderId:"27613484189",appId:"1:427613484189:web:73287cbc764fc8cd"}),bC={target:document.querySelector("#sapper")},_C=bC.target,pC=_C,wC=rC.baseUrl,WS=wC,HS=vC,"scrollRestoration"in qS&&(qS.scrollRestoration="manual"),addEventListener("beforeunload",(()=>{qS.scrollRestoration="auto"})),addEventListener("load",(()=>{qS.scrollRestoration="manual"})),addEventListener("click",zS),addEventListener("popstate",$S),addEventListener("touchstart",tC),addEventListener("mousemove",eC),rC.error?Promise.resolve().then((()=>function(){const{host:t,pathname:e,search:n}=location,{session:r,preloaded:i,status:o,error:s}=rC;sC||(sC=i&&i[0]);const a={error:s,status:o,session:r,level0:{props:sC},level1:{props:{status:o,error:s},component:CS},segments:i},u=KS(n);yC([],a,{host:t,path:e,query:u,params:{},error:s})}())):Promise.resolve().then((()=>{const{hash:t,href:e}=location;qS.replaceState({id:VS},"",e);const n=GS(new URL(location.href));if(n)return YS(n,VS,!0,t)}));export{nC as A,P as B,t as C,g as D,x as E,h as F,k as G,L as H,dS as I,_ as J,v as K,pS as L,at as S,I as a,S as b,T as c,d,y as e,E as f,p as g,f as h,st as i,N as j,et as k,nt as l,rt as m,X as n,J as o,it as p,b as q,C as r,s,m as t,A as u,w as v,$ as w,Y as x,i as y,Pe as z};

import __inject_styles from './inject_styles.5607aec6.js';